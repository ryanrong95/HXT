webpackJsonp([58],{"30p3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("TXMN");var s=a("gyMJ"),i=a("dciI"),r=a("PJh5"),l=a.n(r),n=a("xu/c"),o=a("9hH2"),c=a("Wxb1"),h={inject:["reload"],name:"Warehousing",components:{"routine-enter":n.default,Declare:o.default,"img-test":c.default},data:function(){return{WaybillCurrentStatustimer:null,routername:"",isshowstate:!0,testarrstate:[10],istagall:0,timer1:"",timer2:"",timer3:"",loading:!0,warehouseID:sessionStorage.getItem("UserWareHouse"),search_datas:{key:"",WaybillSupplier:"",ProductPartNumber:"",WaybillExcuteStatus:"100,105,108, 110,115,125,130",Source:1,WaybillType:0,StartDate:"",EndDate:"",PageSize:20,PageIndex:1,WhID:sessionStorage.getItem("UserWareHouse")},WaybillTypeArr:[],Notice_title:[{title:"订单号",slot:"orderID",align:"center",width:180},{title:"业务类型",slot:"Sourcedec",align:"center",width:110},{title:"到货方式",slot:"WaybillTypeDescription",align:"center"},{title:"运单号",slot:"Code",align:"center"},{title:"承运商",slot:"CarrierName",align:"center"},{title:"入仓号",slot:"EnterCode",align:"center"},{title:"供应商",slot:"Supplier",align:"center"},{title:"客服人员",slot:"Merchandiser",align:"center"},{title:"状态",slot:"ExcuteStatusDescription",align:"center"},{title:"操作",slot:"action",align:"center"}],Notice_list:[],Showdetailid:"",NoticeStatus:[],NoticeType:[],total:0,setIntervaltimer:null,timenmae:null,routetype:"",tableHeight:500}},created:function(){if(this.CgWaybillType(),this.routername=this.$route.name,"CgProcessed"==this.$route.name){this.testarrstate=[120],this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!1;var t={title:"处理时间",slot:"ModifyDate",align:"center"};this.Notice_title.splice(this.Notice_title.length-1,0,t)}else{this.testarrstate=[10],this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!0;t={title:"制单时间",slot:"CreateDate",align:"center"};this.Notice_title.splice(this.Notice_title.length-1,0,t)}this.clear_time(),window.setIntervaltimer=this.setIntervaltimer,this.cgSearch_sortings(this.search_datas)},computed:{getid:function(){return this.Showdetailid},gethouse:function(){return sessionStorage.getItem("UserWareHouse")},showdetail:function(){if(1==this.$store.state.common.showdetail)this.clear_time(),this.timenmae=null,this.clear_timewaybill(),this.WaybillCurrentStatustimer=null;else;return this.$store.state.common.showdetail},showtype:function(){return this.$store.state.common.showtypein},showPageArr:function(){return this.$store.state.common.PageArr}},watch:{$route:function(t,e){if("/CgProcessed"==t.path&&0==this.showdetail&&"/CgProcessed/Declare"!=e.path){this.reload(),this.clear_timewaybill();for(var a=setInterval(";"),s=1;s<a;s++)clearInterval(s);this.WaybillCurrentStatustimer=null}else if("/CgUntreated"==t.path&&0==this.showdetail&&"/CgProcessed/Declare"!=e.path){this.clear_timewaybill();for(a=setInterval(";"),s=1;s<a;s++)clearInterval(s);this.WaybillCurrentStatustimer=null,this.reload()}}},mounted:function(){this.setnva(),this.getstatus(),this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-100},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return l()(+e).format("YYYY-MM-DD")}}},methods:{CgWaybillType:function(){var t=this;Object(i.C)().then(function(e){console.log(e),t.WaybillTypeArr=e.obj})},tabledblclick:function(t,e){1==t.Waybill.Operated&&this.showDrawer(t.Waybill.ID,t.Waybill.Source)},new_time:function(){var t=this;this.timenmae=setInterval(function(){setTimeout(function(){t.cgSearch_sortings(t.search_datas)},0)},2e3)},clear_time:function(){clearInterval(this.timenmae),this.timenmae=null},clear_timewaybill:function(){clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null},dyncMount:function(){this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",3),this.timer=(new Date).getTime()},showDrawer:function(t,e){for(var a=setInterval(";"),s=1;s<a;s++)clearInterval(s);if(this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",2),this.Showdetailid=t,30==e)this.$router.push({name:"CgProcessedDeclare",params:{wayBillID:t}});else if(1e3==e)this.$store.dispatch("setshowtypein",3),this.$router.push({path:"/Cgenter/Customswindow"});else{this.$store.dispatch("setshowtypein",1),this.timer1=(new Date).getTime();var i=this;setTimeout(function(){i.$refs.routineenter.WayParterdata(),i.$refs.routineenter.CgDetail_new(t)},20)}},closDrawer:function(){4!=this.showtype&&3!=this.showtype&&2!=this.showtype||this.$router.go(-1);this.$store.dispatch("setshowdetail",!1),this.clear_timewaybill(),this.WaybillCurrentStatustimer=null},changepage:function(t){this.loading=!0,this.search_datas.PageIndex=t,this.cgSearch_sortings(this.search_datas)},changepagesize:function(t){this.loading=!0,this.search_datas.PageSize=t,this.search_datas.PageIndex=1,this.cgSearch_sortings(this.search_datas)},changedata:function(t){this.search_datas.StartDate=t[0],this.search_datas.EndDate=t[1]},search_btn:function(){""!=this.search_datas.key||""!=this.search_datas.WaybillExcuteStatus||""!=this.search_datas.WaybillSupplier||""!=this.search_datas.StartDate||""!=this.search_datas.EndDate||""!=this.search_datas.ProductPartNumber?(this.loading=!0,this.search_datas.PageIndex=1,this.cgSearch_sortings(this.search_datas)):this.$Message.error("请至少输入一个查询条件")},clear_btn:function(){if(""!=this.search_datas.key||""!=this.search_datas.WaybillExcuteStatus||""!=this.search_datas.WaybillSupplier||""!=this.search_datas.StartDate||""!=this.search_datas.EndDate||""!=this.search_datas.ProductPartNumber){this.search_datas={WhID:sessionStorage.getItem("UserWareHouse"),key:"",WaybillSupplier:"",WaybillExcuteStatus:this.testarrstate.join(","),StartDate:"",EndDate:"",ProductPartNumber:"",Source:1,WaybillType:0,PageIndex:1,PageSize:10},this.loading=!0,this.search_datas.PageIndex=1,this.$refs.element.handleClear(),this.cgSearch_sortings(this.search_datas)}},wareing:function(t){var e=this;Object(s.S)(t).then(function(t){e.total=t.obj.Total,e.loading=!1,0!=e.total?e.Notice_list=t.obj.Data:e.Notice_list=[]}).catch(function(t){e.loading=!1,e.Notice_list=[]})},getstatus:function(){var t=this;Object(s.s)().then(function(e){t.NoticeType=e.obj}),Object(s.g)().then(function(e){t.NoticeStatus=e.obj;e.obj})},setnva:function(){this.$store.dispatch("setnvadata",[{title:"入库",href:""}])},staging:function(){this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",4),this.$router.push({path:"/Cgenter/separate"})},testarrs:function(t){10==t?-1==this.testarrstate.indexOf(t)?(this.testarrstate=[],this.testarrstate.push(t),this.istagall=!0):this.istagall=!1:(this.testarrstate=this.testarrstate.filter(function(t){return 10!=t}),this.istagall=!1,-1==this.testarrstate.indexOf(t)?this.testarrstate.push(t):(this.testarrstate=this.testarrstate.filter(function(e){return e!=t}),0==this.testarrstate.length&&this.testarrstate.push(10))),this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.search_btn()},cgsortings:function(){var t=this;Object(i._45)(this.warehouseID,1,10).then(function(e){t.total=e.obj.Total,t.Notice_list=e.obj.Data,t.loading=!1})},cgSearch_sortings:function(t){var e=this;this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,Object(i._43)(t).then(function(t){e.total=t.obj.Total,e.Notice_list=t.obj.Data,e.loading=!1,"/CgUntreated"==e.$route.path?(e.changeOperated(e.Notice_list),e.clear_timewaybill(),e.WaybillCurrentStatustimer=null,e.timerGetWaybillCurrentStatus(e.Notice_list)):(e.clear_timewaybill(),e.WaybillCurrentStatustimer=null)})},changeDrawer:function(t){1==t?(this.clear_time(),this.timenmae=null,this.clear_timewaybill(),this.WaybillCurrentStatustimer=null):(this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,this.cgSearch_sortings(this.search_datas))},timerGetWaybillCurrentStatus:function(t){var e=this;this.WaybillCurrentStatustimer=setInterval(function(){setTimeout(function(){e.changeOperated(t)},0)},3e3),this.$once("hook:beforeDestroy",function(){clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null})},changeOperated:function(t){for(var e=this,a=[],s=0;s<t.length;s++)a.push(t[s].Waybill.ID);var r={WaybillIDs:a};Object(i._8)(r).then(function(t){for(var a=t.Data,s=0;s<a.length;s++)for(var i=0;i<e.Notice_list.length;i++)a[s].waybillID==e.Notice_list[i].Waybill.ID&&(e.Notice_list[i].Waybill.Operated=a[s].Operated)})}},destroyed:function(){this.clear_timewaybill(),clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null,this.clear_time()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"warehousing"}},[1==t.isshowstate?a("div",{staticClass:"shaixuanbox"},[a("em",{staticClass:"title"},[t._v("快速筛选：")]),t._v(" "),t._l(t.NoticeStatus,function(e){return a("span",{key:e.value,class:-1!==t.testarrstate.indexOf(e.value)&&!t.istagall||10==e.value&&t.istagall?"item_status":"item_status2",on:{click:function(a){return t.testarrs(e.value)}}},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),a("div",[a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"运单号/入仓号/订单号"}},[t._v("运单号/入仓号/订单号：")]),t._v(" "),a("Input",{staticClass:"inputitems",attrs:{placeholder:"",autofocus:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.key,callback:function(e){t.$set(t.search_datas,"key","string"==typeof e?e.trim():e)},expression:"search_datas.key"}})],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"供应商"}},[t._v("供应商：")]),t._v(" "),a("Input",{staticClass:"inputitems",attrs:{placeholder:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.WaybillSupplier,callback:function(e){t.$set(t.search_datas,"WaybillSupplier","string"==typeof e?e.trim():e)},expression:"search_datas.WaybillSupplier"}})],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"供应商"}},[t._v("产品型号：")]),t._v(" "),a("Input",{staticClass:"inputitems",attrs:{placeholder:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.ProductPartNumber,callback:function(e){t.$set(t.search_datas,"ProductPartNumber","string"==typeof e?e.trim():e)},expression:"search_datas.ProductPartNumber"}})],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"业务类型"}},[t._v("业务类型：")]),t._v(" "),a("Select",{staticClass:"inputitems",attrs:{placeholder:""},model:{value:t.search_datas.Source,callback:function(e){t.$set(t.search_datas,"Source","string"==typeof e?e.trim():e)},expression:"search_datas.Source"}},t._l(t.NoticeType,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"业务类型"}},[t._v("到货方式：")]),t._v(" "),a("Select",{staticClass:"inputitems",attrs:{placeholder:""},model:{value:t.search_datas.WaybillType,callback:function(e){t.$set(t.search_datas,"WaybillType","string"==typeof e?e.trim():e)},expression:"search_datas.WaybillType"}},t._l(t.WaybillTypeArr,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("div",{staticClass:"inputwidth"},[a("label",{attrs:{for:"业务类型"}},[t._v("开始时间与结束时间：  ")]),t._v(" "),a("DatePicker",{ref:"element",staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"",editable:!1,separator:"  至  "},on:{"on-change":t.changedata}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",icon:"ios-trash"},on:{click:t.clear_btn}},[t._v("清空")])],1)]),t._v(" "),a("div",{staticStyle:{width:"100%",display:"inline-block","margin-top":"20px"}},[a("Table",{ref:"table",attrs:{"max-height":t.tableHeight,columns:t.Notice_title,data:t.Notice_list,loading:t.loading},on:{"on-row-dblclick":t.tabledblclick},scopedSlots:t._u([{key:"orderID",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.OrderID)+"\n      ")]}},{key:"Sourcedec",fn:function(e){var s=e.row;return e.index,[10==s.Waybill.Source?a("Tag",{attrs:{color:"#009688"}},[t._v(t._s(s.Waybill.SourceDes))]):t._e(),t._v(" "),20==s.Waybill.Source?a("Tag",{attrs:{color:"#2F4056"}},[t._v(t._s(s.Waybill.SourceDes))]):t._e(),t._v(" "),30==s.Waybill.Source?a("Tag",{attrs:{color:"#FF5722"}},[t._v(t._s(s.Waybill.SourceDes))]):t._e(),t._v(" "),40==s.Waybill.Source?a("Tag",{attrs:{color:"#1E9FFF"}},[t._v(t._s(s.Waybill.SourceDes))]):t._e(),t._v(" "),50==s.Waybill.Source?a("Tag",{attrs:{color:"#FFA2D3"}},[t._v(t._s(s.Waybill.SourceDes))]):t._e()]}},{key:"CreateDate",fn:function(e){var s=e.row;return e.index,[a("span",[t._v(t._s(t._f("showDateexact")(s.Waybill.CreateDate)))])]}},{key:"ModifyDate",fn:function(e){var s=e.row;return e.index,[a("span",[t._v(t._s(t._f("showDateexact")(s.Waybill.ModifyDate)))])]}},{key:"WaybillTypeDescription",fn:function(e){var s=e.row;return e.index,[1==s.Waybill.Type?a("div",[1==s.Waybill.Type&&100==s.Waybill.LoadingExcuteStatus?a("Tag",{attrs:{color:"magenta"}},[t._v(t._s(s.Waybill.TypeDes))]):t._e(),t._v(" "),1==s.Waybill.Type&&105==s.Waybill.LoadingExcuteStatus?a("Tag",{attrs:{color:"blue"}},[t._v(t._s(s.Waybill.TypeDes))]):t._e(),t._v(" "),1==s.Waybill.Type&&200==s.Waybill.LoadingExcuteStatus?a("Tag",{attrs:{color:"green"}},[t._v(t._s(s.Waybill.TypeDes))]):t._e()],1):a("span",[t._v(t._s(s.Waybill.TypeDes))])]}},{key:"ArrivalDate",fn:function(e){var s=e.row;return e.index,[a("span",[t._v(t._s(t._f("showDateexact")(s.Waybill.CreateDate)))])]}},{key:"EnterCode",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.EnterCode)+"\n      ")]}},{key:"Code",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.Code)+"\n      ")]}},{key:"CarrierName",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.CarrierName)+"\n      ")]}},{key:"Supplier",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.Supplier)+"\n      ")]}},{key:"Merchandiser",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.Merchandiser)+"\n      ")]}},{key:"ExcuteStatusDescription",fn:function(e){var a=e.row;return e.index,[t._v("\n        "+t._s(a.Waybill.ExcuteStatusDes)+"\n      ")]}},{key:"action",fn:function(e){var s=e.row;return e.index,[120==s.Waybill.ExcuteStatus?a("Button",{attrs:{disabled:0==s.Waybill.Operated,size:"small"},on:{click:function(e){return t.showDrawer(s.Waybill.ID,s.Waybill.Source)}}},[t._v("\n          查看\n        ")]):a("Button",{attrs:{disabled:0==s.Waybill.Operated,type:"primary",size:"small"},on:{click:function(e){return t.showDrawer(s.Waybill.ID,s.Waybill.Source)}}},[t._v("\n          处理\n        ")])]}}])}),t._v(" "),a("div",{staticClass:"pages"},[a("Page",{attrs:{total:t.total,"page-size":t.search_datas.PageSize,"show-total":"",current:t.search_datas.PageIndex,"page-size-opts":t.showPageArr,"show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.changepagesize,"on-change":t.changepage}})],1)],1),t._v(" "),a("Drawer",{attrs:{title:"",closable:!1,width:90,scrollable:!0,"mask-closable":!1},on:{"on-visible-change":t.changeDrawer},model:{value:t.showdetail,callback:function(e){t.showdetail=e},expression:"showdetail"}},[a("div",[a("div",{staticClass:"closDrawer_btn",attrs:{slot:"close"},slot:"close"},[a("Icon",{staticClass:"icon1",attrs:{type:"md-close"},on:{click:t.closDrawer}})],1),t._v(" "),1==t.showtype?a("routine-enter",{key:t.timer1,ref:"routineenter"}):a("router-view")],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(h,u,!1,function(t){a("ivco")},"data-v-4902e6ff",null);e.default=d.exports},ivco:function(t,e){}});
//# sourceMappingURL=58.4684d65e5cfa3901838a.js.map