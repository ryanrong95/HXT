webpackJsonp([32],{"9TJx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("gyMJ"),s=a("dciI"),i=(a("PJh5"),{inject:["reload"],data:function(){return{CarrierList:[],loading:!0,timer1:"",warehouseID:sessionStorage.getItem("UserWareHouse"),total:0,PageIndex:1,value:"",titles:[{type:"index",width:60,align:"center"},{title:"订单号",slot:"OrderID"},{title:"运单号",slot:"Code"},{title:"承运商",slot:"CarrierName"},{title:"暂存录入时间",slot:"CreateDate"},{title:"入仓号",slot:"EnterCode"},{title:"暂存天数",slot:"TempDays"},{title:"备注",slot:"Summary"},{title:"操作",slot:"action",width:150,align:"center"}],listdata:[],searchdata:{WhID:sessionStorage.getItem("UserWareHouse"),Code:"",CarrierID:"",ShelveID:"",StartTime:"",EndTime:"",Status:null,PageIndex:1,PageSize:20},tableHeight:500,routedata:null}},beforeRouteUpdate:function(t,e,a){console.log(e.path),console.log(this.Spearatedrawer),"/Separate/1"===e.path&&0==this.Spearatedrawer?this.reload():"/Separate/0"===e.path&&0==this.Spearatedrawer&&this.reload(),a()},created:function(){this.routedata=this.$route.path},computed:{Spearatedrawer:{get:function(){return this.$store.state.common.Spearatedrawer},set:function(t){}},showPageArr:function(){return this.$store.state.common.PageArr}},mounted:function(){this.Carriers(),this.SparateWaybill(this.searchdata),this.setnva(),this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-100},methods:{setnva:function(){if("/Separate/0"==this.$route.path){var t=[{title:"待处理",href:""}];this.$store.dispatch("setnvadata",t),this.searchdata.Status=1,this.titles.splice(this.titles.findIndex(function(t){return"订单号"===t.title}),1)}else{t=[{title:"已处理",href:""}];this.$store.dispatch("setnvadata",t),this.searchdata.Status=2}},changeDatePicker:function(t){this.searchdata.StartTime=t[0],this.searchdata.EndTime=t[1]},clearsearch:function(){this.loading=!0,this.SparateWaybill(this.searchdata)},uploadlist:function(t){0==t&&(this.loading=!0,this.$store.dispatch("setSpearatedrawer",!1),this.$router.go(-1),this.SparateWaybill(this.searchdata))},show:function(t){this.$store.dispatch("setSpearatedrawer",!0),this.$router.push({path:this.$route.path+"/revise",query:{detailID:t}})},changepage:function(t){this.loading=!0,this.searchdata.PageIndex=t,this.SparateWaybill(this.searchdata)},changepagesize:function(t){this.loading=!0,this.searchdata.PageSize=t,this.SparateWaybill(this.searchdata)},SparateWaybill:function(t){var e=this;Object(s._25)(t).then(function(t){e.total=t.obj.Total,e.listdata=t.obj.Data,e.loading=!1})},Carriers:function(){var t=this;Object(r.d)().then(function(e){t.CarrierList=e.obj})},search_btn:function(){this.loading=!0,this.searchdata.PageIndex=1,this.SparateWaybill(this.searchdata)},clear_btns:function(){console.log(this.searchdata),this.searchdata.Code="",this.searchdata.CarrierID="",this.searchdata.ShelveID="",this.searchdata.StartTime="",this.searchdata.EndTime="",this.searchdata.PageIndex=1,this.loading=!0,this.$refs.element.handleClear(),this.SparateWaybill(this.searchdata)}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("label",{attrs:{for:"运单号"}},["/Separate/1"==t.routedata?a("span",[t._v("订单号/运单号：")]):a("span",[t._v("运单号：")])]),t._v(" "),a("Input",{staticClass:"setinputs",attrs:{placeholder:"/Separate/1"==t.routedata?"请输入订单号/运单号":"运单号"},model:{value:t.searchdata.Code,callback:function(e){t.$set(t.searchdata,"Code","string"==typeof e?e.trim():e)},expression:"searchdata.Code"}}),t._v(" "),a("label",{attrs:{for:"运单号"}},[t._v("承运商：")]),t._v(" "),a("Select",{staticClass:"setinputs",attrs:{placeholder:""},model:{value:t.searchdata.CarrierID,callback:function(e){t.$set(t.searchdata,"CarrierID",e)},expression:"searchdata.CarrierID"}},t._l(t.CarrierList,function(e){return a("Option",{key:e.ID,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1),t._v(" "),a("label",{attrs:{for:"库位"}},[t._v("库位：")]),t._v(" "),a("Input",{staticClass:"setinputs",attrs:{placeholder:"库位"},model:{value:t.searchdata.ShelveID,callback:function(e){t.$set(t.searchdata,"ShelveID","string"==typeof e?e.trim():e)},expression:"searchdata.ShelveID"}}),t._v(" "),a("label",{attrs:{for:"暂存录入时间："}},[t._v("暂存录入时间：")]),t._v(" "),a("DatePicker",{ref:"element",staticClass:"setinputs",attrs:{type:"daterange","split-panels":"",placeholder:"请选择一个时间段",clearable:!1},on:{"on-change":t.changeDatePicker}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.clear_btns}},[t._v("清空")])],1),t._v(" "),a("div",{staticStyle:{"padding-top":"40px"}},[a("Table",{ref:"table",attrs:{columns:t.titles,data:t.listdata,loading:t.loading,"max-height":t.tableHeight},scopedSlots:t._u([{key:"Code",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.Code))])]}},{key:"OrderID",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.ForOrderID))])]}},{key:"CarrierName",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.CarrierName))])]}},{key:"EnterCode",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.EnterCode))])]}},{key:"CreateDate",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(t._f("showDate")(r.Waybill.CreateDate)))])]}},{key:"TempDays",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.Waybill.TempDays))])]}},{key:"Summary",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.Waybill.Summary))])]}},{key:"action",fn:function(e){var r=e.row;return e.index,[1==r.Waybill.Status?a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(r.Waybill.ID)}}},[t._v("修改")]):a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(r.Waybill.ID)}}},[t._v("查看")])]}}])}),t._v(" "),a("div",{staticClass:"pagebox"},[a("Page",{attrs:{"show-total":"","show-elevator":"","show-sizer":"",total:t.total,"page-size":t.searchdata.PageSize,current:t.searchdata.pageindex,"page-size-opts":t.showPageArr},on:{"on-change":t.changepage,"on-page-size-change":t.changepagesize}})],1)],1),t._v(" "),a("Drawer",{attrs:{title:"",width:"90"},on:{"on-visible-change":t.uploadlist},model:{value:t.Spearatedrawer,callback:function(e){t.Spearatedrawer=e},expression:"Spearatedrawer"}},[1==t.Spearatedrawer?a("router-view"):t._e()],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("AlLQ")},null,null);e.default=o.exports},AlLQ:function(t,e){}});
//# sourceMappingURL=32.bc2857d8b9ab844d290f.js.map