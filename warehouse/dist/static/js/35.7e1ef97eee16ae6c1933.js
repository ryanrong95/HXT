webpackJsonp([35],{Takf:function(t,e){},cohX:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("dciI"),i=s("3PyT"),n={props:["lableName","Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Records","conduct","Files","delbookeep","EnterType"],data:function(){return{Labeltotal:"",Labelfee:!1,Subject:"",Currency:3,LeftPrice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"计价金额",slot:"valuationCurrency",align:"center"},{title:"结算金额",slot:"SettlementCurrency",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,showAnonymity:!1,TrackingNumber:"",TrackingNumberarr:[]}},mounted:function(){"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(t){return"运单号"===t.title}),1)):this.columns1[3].title="收款人"},methods:{testprice:function(t){if(""!=t){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)&&(this.LeftPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(t){if(""!=t){if(0==/^[0-9]*$/.test(t))this.LeftPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,t<=10)this.LeftPrice=100;else{var e=5*(t-10);this.LeftPrice=100+e}}},changePayeeID:function(t){var e=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(a._7)(this.OrderID,t).then(function(t){e.TrackingNumberarr=t.data}))},change_subject:function(t){var e=this;this.Labelfee="处理标签费"==t;var s;s=this.Subjectarr.filter(function(e){return e.Name==t&&null!=e.PayQuote.Price}),console.log(s);var i=s[0];s.length>0?(this.disabledis=!0,this.Currency=i.PayQuote.Currency,this.LeftPrice=i.PayQuote.Price):"处理标签费"==t?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==t&&Object(a._7)(this.OrderID,this.PayeeID).then(function(t){e.TrackingNumberarr=t.data})},currency_subject:function(){var t=this;Object(a._48)().then(function(e){t.Currencyarr=e.obj})},submit_btn:function(){var t=this,e="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.LeftPrice&&(this.PayeeID!=e&&this.PayerID!=e||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType)this.$Message.error({content:"选择的科目是快递运费，请选择运单号",duration:3});else{var s=null;s=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var i=null,n=null;30==this.conduct||35==this.conduct||60==this.conduct?(i="代报关",n="杂费"):(i="代仓储",n="仓储服务费");var r={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal,Anonymity:this.Anonymity,Conduct:i,Source:s,TrackingNumber:this.TrackingNumber,Catalog:n};console.log(r),Object(a._61)(r).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.Subject="",t.Currency=3,t.LeftPrice="",t.Labeltotal="",t.Files=[],t.$emit("fatherMethod"),t.$emit("delbookeep")):t.$Message.error(e.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var t={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(i.r)(t)},FormPhoto:function(){var t={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(i.c)(t)},changed:function(t){var e=t[0],s={CustomName:e.FileName,ID:e.FileID,Url:e.Url};this.Files.push(s)},handleRemove:function(t){var e=this,s={id:t.ID};Object(a.o)(s).then(function(s){console.log(s),1==s.Success?(e.$Message.success("删除成功"),e.Files.splice(e.Files.indexOf(t),1)):e.$Message.error("删除失败")})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cashbox"},[s("div",[s("h1",{staticClass:"setpadding_bottom"},[t._v("费用录入")]),t._v(" "),s("p",{staticClass:"iteminput"},[s("label",{attrs:{for:""}},[t._v(" 收款人：")]),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":t.changePayeeID},model:{value:t.PayeeID,callback:function(e){t.PayeeID=e},expression:"PayeeID"}},t._l(this.Payeearr,function(e,a){return s("Option",{key:a,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayeeID?s("p",{staticClass:"iteminput"},[t._m(0),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[s("label",{attrs:{for:""}},[t._v(" 付  款  人：")]),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:t.PayerID,callback:function(e){t.PayerID=e},expression:"PayerID"}},t._l(this.Payerarr,function(e,a){return s("Option",{key:a,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayerID?s("p",{staticClass:"iteminput"},[t._m(1),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[t._m(2),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":t.change_subject},model:{value:t.Subject,callback:function(e){t.Subject=e},expression:"Subject"}},t._l(this.Subjectarr,function(e,a){return s("Option",{key:e.index,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),1==t.Labelfee?s("p",{staticClass:"iteminput"},[t._m(3),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入数量"},on:{"on-blur":function(e){return t.Labelchange(t.Labeltotal)}},model:{value:t.Labeltotal,callback:function(e){t.Labeltotal=e},expression:"Labeltotal"}})],1):t._e(),t._v(" "),"快递运费"==t.Subject&&"out"==t.EnterType?s("p",{staticClass:"iteminput"},[t._m(4),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:t.disabledis},model:{value:t.TrackingNumber,callback:function(e){t.TrackingNumber=e},expression:"TrackingNumber"}},t._l(t.TrackingNumberarr,function(e,a){return s("Option",{key:e.index,attrs:{value:e.wbCode}},[t._v(t._s(e.wbCode))])}),1)],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[t._m(5),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:t.disabledis},model:{value:t.Currency,callback:function(e){t.Currency=e},expression:"Currency"}},t._l(t.Currencyarr,function(e,a){return s("Option",{key:e.index,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),s("p",{staticClass:"iteminput"},[s("label",{attrs:{for:""}},[s("span",{staticClass:"spanMust"},[t._v("*")]),t._v(t._s(t.lableName)+"金额：")]),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额",disabled:t.disabledis},on:{"on-blur":function(e){return t.testprice(t.LeftPrice)}},model:{value:t.LeftPrice,callback:function(e){t.LeftPrice=e},expression:"LeftPrice"}})],1),t._v(" "),s("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:t.SeletUploadFile}},[t._v("传照")]),t._v(" "),s("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:t.FormPhoto}},[t._v("拍照")]),t._v(" "),s("h3",{staticStyle:{"padding-bottom":"5px"}},[t._v("文件列表：")]),t._v(" "),t.Files.length>0?s("ul",t._l(t.Files,function(e){return s("li",[t._v("\n        "+t._s(e.CustomName)+"\n        "),s("Icon",{attrs:{type:"ios-trash"},on:{click:function(s){return t.handleRemove(e)}}})],1)}),0):s("div",[t._v("暂无数据")]),t._v(" "),s("div",{staticStyle:{padding:"15px 0"}},[s("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:t.submit_btn}},[t._v("提交")])],1)],1),t._v(" "),s("div",[s("h1",{staticClass:"setpadding_bottom"},[t._v("流水列表")]),t._v(" "),s("Table",{attrs:{stripe:"",columns:t.columns1,data:t.Records,"max-height":"380"},scopedSlots:t._u([{key:"indexs",fn:function(e){e.row;var a=e.index;return[s("span",[t._v(t._s(a+1))])]}},{key:"type",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.Conduct))])]}},{key:"Subject",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.Subject))])]}},{key:"TargetName",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.TargetName))])]}},{key:"TrackingNumber",fn:function(e){var a=e.row;return"out"==t.EnterType?[s("span",[t._v(t._s(a.TrackingNumber))])]:void 0}},{key:"valuationCurrency",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.RecordPrice))])]}},{key:"SettlementCurrency",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.SettlePrice))])]}},{key:"createdata",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.CreateDate))])]}},{key:"user",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.Creator))])]}}],null,!0)})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("运单号：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])}]};var l=s("VU/8")(n,r,!1,function(t){s("Takf")},"data-v-b2452768",null);e.default=l.exports}});
//# sourceMappingURL=35.7e1ef97eee16ae6c1933.js.map