webpackJsonp([7,3,61],{FZbm:function(e,t){},Uxjx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("bOdI"),r=a.n(n),s=a("dciI"),l=a("gyMJ"),o=a("Qcdk"),c={name:"HKNothingEnter",props:["Storagesarr","Storehouselist","status","EnterCode","orderID"],data:function(){var e=this;return{options3:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},saleDate:"",isclickbtn:!1,itemSortingID:null,newboxcode:null,newboxcodeback:null,oldboxcode:null,boxingarr:[],boxcodetype:"1",showEdit:!1,Conveyingplace:[],Storages:this.Storagesarr,titlename:"",columns7:[{title:"",slot:"indexs",width:30,align:"center"},{title:" ",slot:"action",width:100,align:"center"},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"型号")])},key:"PartNumber",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.Product.PartNumber},on:{"on-change":function(e){a.row.Product.PartNumber=e.target.value,i.Storages[a.index]=a.row},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(a.row.Product.PartNumber=i.trim(t),i.Storages[a.index]=a.row):(a.row.Product.PartNumber=null,i.Storages[a.index]=a.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"品牌")])},key:"Manufacturer",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.Product.Manufacturer},on:{"on-change":function(e){a.row.Product.Manufacturer=e.target.value,i.Storages[a.index]=a.row},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(a.row.Product.Manufacturer=i.trim(t),i.Storages[a.index]=a.row):(a.row.Product.Manufacturer=null,i.Storages[a.index]=a.row)}}})}},{title:"批号",key:"DateCode",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.DateCode},on:{"on-change":function(e){a.row.DateCode=e.target.value,i.Storages[a.index]=a.row},"on-blur":function(e){var t=e.target.value;null==t&&""==t||(a.row.DateCode=i.trim(t),i.Storages[a.index]=a.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"到货数量")])},key:"Quantity",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.CurrentQuantity},on:{"on-change":function(e){if(""!=e.target.value){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(a.row.CurrentQuantity=e.target.value,i.Storages[a.index]=a.row):(i.$Message.error("只能输入数量"),e.target.value=null,a.row.CurrentQuantity=null,i.Storages[a.index]=a.row)}},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(a.row.CurrentQuantity=i.trim(t),i.Storages[a.index]=a.row):(a.row.CurrentQuantity=null,i.Storages[a.index]=a.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"原产地")])},slot:"Place"},{renderHeader:function(t,a){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},1==e.status?"库位":"箱号")])},slot:"ShelveID",align:"center",width:250},{title:"体积(cm³)",key:"Volume",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.Volume},on:{"on-change":function(e){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(a.row.Volume=e.target.value,i.Storages[a.index]=a.row):(a.row.Volume="",e.target.value="",i.Storages[a.index]=a.row)},"on-blur":function(){var e=event.target.value;""==e&&null==e||(1==/^\d+(\.\d{0,2})?$/.test(e)?(a.row.Volume=i.trim(e),i.Storages[a.index]=a.row):(i.$Message.error("只能输入数字,包括两位数的小数点"),a.row.Volume=null,event.target.value=null,i.Storages[a.index]=a.row))}}})}},{renderHeader:function(t,a){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},1==e.status?"":"*"),t("span",{},"毛重(kg)")])},key:"Weight",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.Weight,autofocus:!0},on:{"on-change":function(e){var t=i.trim(e.target.value);""!=t&&null!=t&&(1==/^\d+(\.\d{0,2})?$/.test(t)?(a.row.Weight=t,i.Storages[a.index]=a.row):(a.row.Weight="",e.target.value="",i.Storages[a.index]=a.row))},"on-blur":function(e){var t=i.trim(e.target.value);if(console.log(t),null!=t&&""!=t){1==/^\d+(\.\d{0,2})?$/.test(t)?(a.row.Weight=t,i.Storages[a.index]=a.row):(i.$Message.error("只能输入数字,包括两位数的小数点"),a.row.Weight=null,e.target.value=null,i.Storages[a.index]=a.row)}else a.row.Weight=null,e.target.value=null,i.Storages[a.index]=a.row},"on-enter":function(t){var n=i.trim(t.target.value);if(1==/^\d+(\.\d{0,2})?$/.test(n)){a.row.Weight=n,i.Storages[a.index]=a.row;var r=a.row.Input,s=a.row.Product,l={Quantity:a.row.Quantity,inputsID:r.ID,Catalog:s.Catalog,PartNumber:s.PartNumber,Manufacturer:s.Manufacturer,Packing:s.Packing,PackageCase:s.PackageCase,origin:r.Origin},o=[];o.push(l);var c=GetPrinterDictionary()["产品标签"],d=-1!=c.Url.indexOf("http");c.Url=1==d?c.Url:e.printurl+c.Url,TemplatePrint({setting:c,data:o})}else i.$Message.error("只能输入数字,包括两位数的小数点"),a.row.Weight=null,t.target.value=null,i.Storages[a.index]=a.row}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"异常原因")])},key:"imglist",align:"center",render:function(t,a){var i=e;return t("Input",{props:{value:a.row.Summary},on:{"on-change":function(e){a.row.Summary=e.target.value,i.Storages[a.index]=a.row;var t=e.target.value;null!=t&&""!=t?(a.row.Summary=i.trim(t),i.Storages[a.index]=a.row):(a.row.Summary=null,i.Storages[a.index]=a.row)},"on-blur":function(e){console.log(e.target.value);var t=e.target.value;null!=t&&""!=t?(a.row.Summary=i.trim(t),i.Storages[a.index]=a.row):(a.row.Summary=null,i.Storages[a.index]=a.row)}}})}}]}},created:function(){},computed:{},mounted:function(){this.WayParterdata(),console.log(this.status),1==this.status?this.titlename="库位":this.titlename="箱号"},methods:(i={setboxsplit:function(e){if(e)return e.split("]")[1]},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},WayParterdata:function(){var e=this;Object(l.G)().then(function(t){e.Conveyingplace=t.obj})},CgBoxesShow:function(){var e=this,t={enterCode:this.EnterCode,date:""};Object(s.h)(t).then(function(t){t.length>0?e.boxingarr=t:e.boxingarr=[]})},delrow:function(e){this.Storages.splice(e,1)},addrow:function(e){var t=this;Object(s._3)().then(function(a){var i={iscx:!1,isenter:!0,ID:"LR"+e+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},Conditions:{DevanningCheck:!1,Weigh:!1,CheckNumber:!1,OnlineDetection:!1,AttachLabel:!1,PaintLabel:!1,Repacking:!1,IsCCC:!1,IsCIQ:!1,IsEmbargo:!1,IsHighPrice:!1,IsDeclared:!1},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:a,Files:[],_disabled:!1,boxdate:null};t.Storages.push(i)})},consoleStorages:function(){this.$parent.consoleStorages()},changConveyingplace:function(e,t){this.Storages.forEach(function(a){a.ID==t.ID&&(a.ShelveID=e.value)})},changConveyingplace2:function(e,t){var a=this,i={boxCode:e.value,adminID:sessionStorage.getItem("userID"),enterCode:this.EnterCode};Object(s.d)(i).then(function(i){console.log(i),0==i.success&&400==i.code?(a.$Message.error("箱号已经被选择，请选择其他箱号"),a.Storages.forEach(function(e){e.ID==t.ID&&(e.BoxCode=null)})):a.Storages.forEach(function(a){a.ID==t.ID&&(a.BoxCode=e.value)})})},changoriginID:function(e,t){console.log(e),this.Storages.forEach(function(a){a.ID==t.ID&&(a.origin=e.value,a.origintext=e.label,a.originDes=e.label)})},visiblechange:function(e){if(1==e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();this.saleDate=a+"/"+i+"/"+n,this.newboxcode=null,this.newboxcodeback=null}else this.newboxcode=null,this.newboxcodeback=null,this.oldboxcode=null,this.boxcodetype="1"},cancel:function(){this.showEdit=!1,this.oldboxcode=null,null!=this.newboxcode&&this.BoxcodeDelete()},handleCreate1:function(e){var t=this;if(0==!e){if("WL"!=e.slice(0,2))return this.$Message.error("请输入正确的箱号"),void(this.newboxcode=null);var a={BoxIndex:e,PackingDate:this.saleDate};Object(o.a)(a).then(function(a){a.success?(t.newboxcode=e,t.newboxcodeback=e,t.isclickbtn=!0):(t.newboxcode="",t.$Message.error(a.message),t.isclickbtn=!1)})}else this.$Message.error("请输入正确的箱号"),this.newboxcode=null}},r()(i,"CgBoxesShow",function(){var e=this,t={enterCode:this.EnterCode,date:""};console.log(this.EnterCode),Object(s.h)(t).then(function(t){t.length>0?e.boxingarr=t:e.boxingarr=[]})}),r()(i,"ok_change",function(){var e=this;""!=this.newboxcodeback&&null!=this.newboxcodeback?1==this.isclickbtn&&(this.Storages.forEach(function(t){t.SortingID==e.itemSortingID&&(t.BoxCode=e.newboxcodeback,t.boxdate=e.saleDate)}),this.showEdit=!1,this.newboxcodeback=null,this.newboxcode=null):this.$Message.error("请选择或输入箱号")}),r()(i,"showboxarr",function(e){this.itemSortingID=e,this.showEdit=!0}),r()(i,"BoxcodeDelete",function(){var e={boxCode:this.newboxcodeback};Object(s.c)(e).then(function(e){})}),r()(i,"oldBoxDelete",function(e){var t={boxCode:e};Object(s.c)(t).then(function(e){})}),r()(i,"delarrbox",function(){console.log(this.Storages),this.Storages.forEach(function(e){if(null!=e.BoxCode||""!=e.BoxCode){var t={boxCode:e.BoxCode};Object(s.c)(t).then(function(e){})}})}),r()(i,"changeData",function(e){this.saleDate=e,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)}),i)},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{attrs:{columns:e.columns7,data:e.Storages},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var a=t.index;return[e._v("\n      "+e._s(a+1)+"\n    ")]}},{key:"action",fn:function(t){t.row;var i=t.index;return[a("Icon",{staticStyle:{"margin-right":"5px","font-size":"20px","font-width":"600"},attrs:{type:"ios-add-circle-outline"},on:{click:function(t){return e.addrow(i)}}}),e._v(" "),a("Icon",{staticStyle:{"font-size":"20px","font-width":"600"},attrs:{type:"ios-trash-outline"},on:{click:function(t){return e.delrow(i)}}})]}},{key:"Place",fn:function(t){var i=t.row;return t.index,[a("Select",{attrs:{transfer:!0,filterable:"","label-in-value":!0},on:{"on-change":function(t){return e.changoriginID(t,i)}},model:{value:i.origin,callback:function(t){e.$set(i,"origin",t)},expression:"row.origin"}},e._l(e.Conveyingplace,function(t){return a("Option",{key:t.ID,attrs:{value:t.CorPlace}},[e._v(e._s(t.Text))])}),1)]}},{key:"ShelveID",fn:function(t){var i=t.row;return t.index,[1==e.status?a("div",[a("Select",{attrs:{size:"default",filterable:"",transfer:!0,"label-in-value":!0},on:{"on-change":function(t){return e.changConveyingplace(t,i)}},model:{value:i.ShelveID,callback:function(t){e.$set(i,"ShelveID",t)},expression:"row.ShelveID"}},e._l(e.Storehouselist,function(t,i){return a("Option",{key:i,attrs:{value:t.ShelveID,label:t.ShelveID}},[a("span",[e._v(e._s(t.ShelveID))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#ccc"}},[e._v(e._s(t.TotalPackage))])])}),1)],1):a("div",[a("span",[e._v(e._s(e._f("showboxcode")(i.BoxCode)))]),e._v(" "),a("Icon",{attrs:{type:"md-create"},on:{click:function(t){return e.showboxarr(i.SortingID)}}})],1)]}},{key:"imglist",fn:function(t){var i=t.row;return t.index,e._l(i.Files,function(t,n){return a("p",[a("span",[e._v(e._s(t.CustomName))]),e._v(" "),a("Icon",{ref:i.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemovelist(i,n)}}})],1)})}}])}),e._v(" "),a("Modal",{attrs:{title:"选择箱号","mask-closable":!1},on:{"on-visible-change":e.visiblechange},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("span",{attrs:{slot:"close"},slot:"close"},[a("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("日期：\n      ")]),e._v(" "),a("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:e.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:e.saleDate},on:{"on-change":e.changeData}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("箱号：\n      ")]),e._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(t){return e.handleCreate1(e.newboxcode)}},model:{value:e.newboxcode,callback:function(t){e.newboxcode="string"==typeof t?t.trim():t},expression:"newboxcode"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.ok_change}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("fubW")},"data-v-b2505058",null);t.default=u.exports},cIZX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),n=a.n(i),r=a("Uxjx"),s=a("Afmp"),l=a("i3ZT"),o=a("uWQ3"),c=a("CZn4"),d=a("MgEx"),u=a("R7D/"),h=a("40N/"),g=a("Qcdk"),f=a("dciI"),v=a("3PyT"),p=a("tPoR"),_=a("FHte"),y={name:"HKDeclare",components:{"Noting-Enter":r.default,Storagecharge:s.default,HKIncome:l.default,"Add-Carrier":o.default,"Add-Driver":c.default,"Add-Car":d.default,"Add-contacts":u.default,HKLog:h.default,Accessrecords:p.default},data:function(){var e=this;return{btnPackingdisable:!1,showlogged:!1,loggdetime:"",printurl:_.pfwms,FreeStockDays:5,SensitiveModal:!1,SensitiveModalContext:"",isSensitive:!1,SensitiveAreaShow:"",splitDisable:!1,EnterTypeIn:"in",EnterTypeOut:"out",loading:!0,waybillListLoading:!0,PackedLoading:!0,UnExceptedLoading:!0,entryNoticeID:this.$route.params.entryNoticeID,mainOrderID:this.$route.params.mainOrderID,tinyOrderID:this.$route.params.orderID,storagecharge:!1,feeRecord:!1,feeRecordOut:!1,TakeGoodsName:"我去提货",waybillinfo:{},ProductList:[],WaybillList:[],PackedProductList:[],UnExceptedList:[],inWarehousedays:"",searchkey:"",Operateddisable:!0,isdisabled:!1,isSealDisabled:!0,isCancelSealDisabled:!0,SelectRow:[],setOrigin:!1,Conveyingplace:[],Origin:"",ChangeOrigin_datas:{OriginValue:"",OrderItemID:"",AdminID:"",OriginText:""},SelectdeItemID:"",SelectedIndex:"",splitModel:!1,abnormal_enter:!1,Storages:[],timer:"",Storehouselist:[],PackingModal:!1,saleDate:"",AVGWeightsum:null,options3:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},newboxcode:"",sharevalue:null,ExpressCompanyInfo:[],showEdit:!1,oldboxcode:"",packingIDBoxChange:"",unExpectedBoxChange:"",newboxcodePacked:"",PackingInfo_datas:{OrderID:"",EntryNoticeID:"",PackingDate:"",BoxIndex:"",Weight:"",IsExpress:!1,CarrierID:"",ExpressCompany:"",WaybillNo:"",AdminID:"",PackingItems:[]},ChangeModel_datas:{OrderItemID:"",adminID:"",ProductModel:""},ChangeBrand_datas:{OrderItemID:"",AdminID:"",Manufacturer:""},SplitModel_datas:{OrderItemID:"",Origin:"",Manufacturer:"",Quantity:"",adminID:""},UnExpectedGoods_datas:[],EstimateWeight_datas:[],CarrierList:[],IsPersonal:!1,CarArr:[],CarArrName:"",DriversArr:[],DriversName:"",adddisabled:!1,showaddCarrier:!1,showaddcontacts:!1,oldcrriers:null,showaddDriver:!1,addDriverName:null,showaddCar:!1,addCarName:null,SumInfo:{totalWeight:0,totalBoxes:0,totalItems:0},TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"},{value:1,label:"送货上门"}],tabletitle:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"#",slot:"indexs",align:"left",width:50},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"型号")])},key:"Model",align:"center",width:270,render:function(t,a){var i=e;return t("Input",{props:{value:i.trim(a.row.Model)},on:{"on-blur":function(e){if(""!=e.target.value&&e.target.value!=i.ProductList[a.index].Model&&(a.row.Model=e.target.value,i.ProductList[a.index]=a.row,i.SelectedItemID=a.row.OrderItemID,i.ChangeModel_datas.ProductModel=a.row.Model,i.ChangeModel_datas.OrderItemID=i.SelectedItemID,i.ChangeModel_datas.adminID=sessionStorage.getItem("userID"),Object(g.i)(i.ChangeModel_datas).then(function(e){e.success?i.$Message.success(e.message):i.$Message.error(e.message)})),i.SelectRow.length>0)for(var t=0,n=i.SelectRow.length;t<n;t++)a.row.ID==i.SelectRow[t].ID&&(i.SelectRow[t]=a.row)}}})}},{title:"特殊类型",slot:"SpecialType",align:"center",width:200},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"品牌")])},key:"Brand",align:"center",width:220,render:function(t,a){var i=e;return t("Input",{props:{value:i.trim(a.row.Brand)},on:{"on-blur":function(e){if(""!=e.target.value&&e.target.value!=i.ProductList[a.index].Brand&&(a.row.Brand=e.target.value,i.ProductList[a.index]=a.row,i.SelectedItemID=a.row.OrderItemID,i.ChangeBrand_datas.Manufacturer=a.row.Brand,i.ChangeBrand_datas.OrderItemID=i.SelectedItemID,i.ChangeBrand_datas.AdminID=sessionStorage.getItem("userID"),Object(g.g)(i.ChangeBrand_datas).then(function(e){e.success?i.$Message.success(e.message):i.$Message.error(e.message)})),i.SelectRow.length>0)for(var t=0,n=i.SelectRow.length;t<n;t++)a.row.ID==i.SelectRow[t].ID&&(i.SelectRow[t]=a.row)}}})}},{title:"应到",slot:"OrderItemQty",align:"center",width:100},{title:"已到",slot:"PackedQty",align:"center",width:100},{title:"剩余",slot:"RelQty",align:"center",width:100},{title:"批号",key:"batch",align:"center",width:200,render:function(t,a){var i=e;return t("Input",{props:{value:i.trim(a.row.DateCode)},on:{"on-blur":function(e){if(""!=e.target.value&&e.target.value!=i.ProductList[a.index].DateCode){a.row.DateCode=e.target.value,i.ProductList[a.index]=a.row,i.SelectedItemID=a.row.OrderItemID;var t={Batch:a.row.DateCode,OrderItemID:i.SelectedItemID,AdminID:sessionStorage.getItem("userID")};Object(g.e)(t).then(function(e){e.success?i.$Message.success(e.message):i.$Message.error(e.message)})}if(i.SelectRow.length>0)for(var n=0,r=i.SelectRow.length;n<r;n++)a.row.ID==i.SelectRow[n].ID&&(i.SelectRow[n]=a.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"本次到货")])},title:"本次到货",key:"Quantity",align:"center",width:100,render:function(t,a){var i=e;return t("Input",{props:{value:Number(a.row.RelQty)<0?0:a.row.RelQty},on:{"on-blur":function(e){if(""!=e.target.value){1==/^[0-9]*$/.test(e.target.value)&&0!=e.target.value&&e.target.value<=a.row.RelQty?(a.row.CurrentQuantity=Number(e.target.value),i.ProductList[a.index]=a.row):(i.$Message.error("只能输入正整数,且不能大于剩余数量!"),e.target.value=null,a.row.CurrentQuantity=null,i.ProductList[a.index]=a.row)}else e.target.value=null,a.row.CurrentQuantity=null,i.ProductList[a.index]=a.row;if(i.SelectRow.length>0)for(var t=0,n=i.SelectRow.length;t<n;t++)a.row.ID==i.SelectRow[t].ID&&(i.SelectRow[t]=a.row)},"on-change":function(){}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"原产地")])},slot:"Country_origin",align:"center",width:200},{title:"操作",slot:"operation",align:"center",width:100}],Waybilltabletitle:[{width:50,align:"center",fixed:"left",render:function(t,a){return t("Radio",{props:{value:a.row.isselected},on:{"on-change":function(){e.WaybillList.forEach(function(t){e.$set(t,"isselected",!1)}),e.WaybillList[a.index].isselected=!0,e.PackingInfo_datas.CarrierID=e.WaybillList[a.index].CarrierID,e.PackingInfo_datas.WaybillNo=e.WaybillList[a.index].WaybillNo}}})}},{title:"序号",slot:"indexs",align:"left",width:30},{title:"快递公司",slot:"CarrierCode",align:"center",width:195},{title:"运单号",slot:"WaybillNo",align:"center",width:195}],Packedtabletitle:[{title:"#",slot:"indexs",align:"left",width:30},{title:"订单号",slot:"OrderID",align:"center",width:150},{title:"箱号",slot:"BoxIndex",align:"center",width:80},{title:"型号",slot:"Model",align:"center",width:200},{title:"特殊类型",slot:"SpecialType",align:"center",width:150},{title:"品牌",slot:"Manufacturer",align:"center",width:200},{title:"批号",slot:"DateCode",align:"center",width:100},{title:"原产地",slot:"Origin",align:"center",width:100},{title:"重量",slot:"GrossWeight",align:"center",width:80},{title:"应到",slot:"OrderItemQty",align:"center",width:100},{title:"实到",slot:"Quantity",align:"center",width:100},{title:"承运商",slot:"CarrierName",align:"center",width:150},{title:"运单号",slot:"OrderWaybillCode",align:"center",width:150},{title:"操作",slot:"operation",align:"center",width:100}],UnExceptedtabletitle:[{title:"#",slot:"indexs",align:"left",width:50},{title:"订单号",slot:"OrderID",align:"center",width:250},{title:"箱号",slot:"BoxIndex",align:"center",width:100},{title:"型号",slot:"Model",align:"center",width:250},{title:"品牌",slot:"Manufacturer",align:"center",width:250},{title:"批号",slot:"DateCode",align:"center",width:200},{title:"原产地",slot:"Origin",align:"center",width:200},{title:"重量",slot:"GrossWeight",align:"center",width:145},{title:"实到",slot:"Quantity",align:"center",width:145},{title:"操作",slot:"operation",align:"center",width:100}]}},created:function(){this.SortingBasicInfo(this.$route.params.entryNoticeID),this.LoadFirst(this.$route.params.entryNoticeID,this.$route.params.orderID),this.LoadUnExcepted(this.$route.params.orderID),this.LoadOrigin(),this.LoadExpress(),this.StockedDays(this.$route.params.orderID)},methods:{SortingBasicInfo:function(e){var t=this;void 0!=e&&Object(g.G)(e).then(function(e){t.waybillinfo=e.obj,t.loading=!1,t.Carriers(t.waybillinfo.HKDeliveryType),2==t.waybillinfo.HKDeliveryType&&"Personal"==t.waybillinfo.CarrierID?t.IsPersonal=!0:(t.GetDriversCars(t.waybillinfo.CarrierID),t.IsPersonal=!1),t.CarArrName=t.waybillinfo.CarNumber,t.DriversName=t.waybillinfo.DriverID,t.$forceUpdate()})},StockedDays:function(e){var t=this;void 0!=e&&Object(g.I)(e).then(function(e){t.inWarehousedays=e.data,t.$forceUpdate()})},LoadFirst:function(e,t){var a=this;void 0!=e&&void 0!=t&&n.a.all([Object(g.w)(e,""),Object(g.x)(t)]).then(function(e){a.ProductList=e[0].obj,a.PackedProductList=e[1].obj.rows,a.PackedLoading=!1,a.ButtonDisable(),a.sumcal()})},LoadNoticeItems:function(e){var t=this;void 0!=e&&Object(g.w)(e,"").then(function(e){t.ProductList=e.obj,t.ButtonDisable()})},LoadPackedProduct:function(e){var t=this;void 0!=e&&Object(g.x)(e).then(function(e){t.PackedProductList=e.obj.rows,t.PackedLoading=!1,t.ButtonDisable(),t.sumcal()})},LoadUnExcepted:function(e){var t=this;void 0!=e&&Object(g.y)(e).then(function(e){t.UnExceptedList=e.obj.rows,t.UnExceptedLoading=!1,t.sumcal()})},LoadOrigin:function(){var e=this;Object(g.r)().then(function(t){e.Conveyingplace=t.obj})},LoadExpress:function(){var e=this;Object(g.q)().then(function(t){e.ExpressCompanyInfo=t.obj})},changewaybillType:function(e){this.Carriers(e),this.CarrierList.length<=0?this.waybillinfo.CarrierID="":this.waybillinfo.CarrierID=this.oldcrriers},handleSelectRow:function(e){this.SelectRow=e},search_pro:function(){var e=this;this.loading=!0,Object(g.w)(this.entryNoticeID,this.searchkey).then(function(t){e.ProductList=t.obj;for(var a=[],i=0;i<e.SelectRow.length;i++)a.push(e.SelectRow[i].ID);e.ProductList.forEach(function(e){a.indexOf(e.ID)>=0&&(e._checked=!0)}),e.loading=!1,e.ButtonDisable(),e.sumcal()})},search_Packed:function(){var e=this;this.PackedLoading=!0,Object(g.x)(this.waybillinfo.OrderID).then(function(t){e.PackedProductList=t.obj.rows,e.PackedLoading=!1,e.ButtonDisable(),e.sumcal()})},search_UnExpected:function(){var e=this;this.UnExceptedLoading=!0,Object(g.y)(this.waybillinfo.OrderID).then(function(t){e.UnExceptedList=t.obj.rows,e.UnExceptedLoading=!1,e.sumcal()})},Labelprint:function(){var e=this.SelectRow,t=[];if(e.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var a=0;a<e.length;a++){var i={Quantity:void 0==e[a].CurrentQuantity?e[a].RelQty:e[a].CurrentQuantity,inputsID:e[a].ID,Catalog:"",PartNumber:e[a].Model,Manufacturer:e[a].Brand,Packing:" ",PackageCase:" ",origin:e[a].Origin+" "+e[a].OriginText,SourceDes:"代报关"};t.push(i)}var n=Object(v.f)()["产品标签"],r=-1!=n.Url.indexOf("http");n.Url=1==r?n.Url:this.printurl+n.Url;var s={setting:n,data:t};Object(v.t)(s)}},trim:function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},clickOrigin:function(e,t,a){0==t.PackedQty?(this.setOrigin=!0,this.Origin=e,this.SelectedItemID=t.OrderItemID,this.SelectedIndex=a):this.$Message.error("已到货不能更改产地，如产地不一致，请拆分型号")},cancel:function(){this.setOrigin=!1,this.splitModel=!1,this.PackingModal=!1,this.isSensitive=!1,this.SensitiveAreaShow="",this.showEdit=!1,this.oldboxcode=null,this.packingIDBoxChange=null,this.unExpectedBoxChange=null,this.SensitiveModal=!1,this.SensitiveModalContext=null,this.btnPackingdisable=!1},changOrigin:function(e){this.ChangeOrigin_datas.OriginValue=e.value,this.ChangeOrigin_datas.OriginText=e.label},changeExpress:function(e){},primaryOrigin:function(){var e=this,t=this;t.ChangeOrigin_datas.OrderItemID=this.SelectedItemID,t.ChangeOrigin_datas.AdminID=sessionStorage.getItem("userID"),Object(g.h)(this.ChangeOrigin_datas).then(function(a){if(a.success){t.ProductList[t.SelectedIndex].Origin=e.ChangeOrigin_datas.OriginValue,t.ProductList[t.SelectedIndex].OriginText=e.ChangeOrigin_datas.OriginText.slice(3),t.setOrigin=!1;for(var i=[],n=0;n<e.SelectRow.length;n++)i.push(e.SelectRow[n].ID);e.ProductList.forEach(function(e){i.indexOf(e.ID)>=0&&(e._checked=!0)})}else t.setOrigin=!1,t.$Message.error(a.message)})},chaixiang:function(e,t){var a=this;a.splitModel=!0,a.SplitModel_datas.OrderItemID=t.OrderItemID,a.SplitModel_datas.Model=t.Model,a.SplitModel_datas.Manufacturer=t.Brand,a.SplitModel_datas.Quantity=void 0==t.CurrentQuantity?t.RelQty:t.CurrentQuantity,a.SplitModel_datas.Origin=t.Origin,a.SplitModel_datas.adminID=sessionStorage.getItem("userID"),a.SelectedIndex=e},splitModelConfirm:function(){var e=this;""!=e.SplitModel_datas.Quantity?e.SplitModel_datas.Origin!=e.ProductList[e.SelectedIndex].Origin?e.SplitModel_datas.Quantity!=e.ProductList[e.SelectedIndex].OrderItemQty?(e.splitDisable=!0,Object(g.H)(this.SplitModel_datas).then(function(t){t.success?(e.$Message.success(t.message),e.splitModel=!1,e.search_pro()):(e.$Message.error(t.message),e.splitModel=!1),e.splitDisable=!1})):e.$Message.error("拆分型号的数量不能和原数量相等!"):e.$Message.error("拆分型号的产地要与原产地不一致!"):e.$Message.error("请输入数量!")},ok_abnormal:function(){for(var e=this,t=0,a=this.Storages.length;t<a;t++){if("WL"!=this.Storages[t].BoxCode.slice(0,2))return void this.$Message.error("请输入正确的箱号");if(null==this.Storages[t].CurrentQuantity||null==this.Storages[t].Product.PartNumber||null==this.Storages[t].origin||null==this.Storages[t].BoxCode||null==this.Storages[t].Summary||null==this.Storages[t].Weight||null==this.Storages[t].Product.Manufacturer)return this.$refs.modal.visible=!0,this.abnormal_enter=!0,void this.$Message.error("请输入必填项目");var i={OrderID:this.waybillinfo.OrderID,Model:this.Storages[t].Product.PartNumber,Brand:this.Storages[t].Product.Manufacturer,Qty:this.Storages[t].CurrentQuantity,Batch:this.Storages[t].DateCode,Origin:this.Storages[t].origin,BoxIndex:this.Storages[t].BoxCode,GrossWeight:this.Storages[t].Weight,Volume:this.Storages[t].Volume,UnExpectedReason:this.Storages[t].Summary};this.UnExpectedGoods_datas.push(i)}this.Storages=[],Object(g.K)(this.UnExpectedGoods_datas).then(function(t){t.success?(e.$Message.success(t.message),e.abnormal_enter=!1,e.UnExpectedGoods_datas=[],e.search_UnExpected()):(e.$Message.error(t.message),e.abnormal_enter=!1,e.UnExpectedGoods_datas=[]),e.$forceUpdate()})},changeabnormal_enter:function(e){if(0==e);else{this.Storages=[];var t={iscx:!1,isenter:!0,_disabled:!1,ID:"LR1"+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},Conditions:{DevanningCheck:!1,Weigh:!1,CheckNumber:!1,OnlineDetection:!1,AttachLabel:!1,PaintLabel:!1,Repacking:!1,IsCCC:!1,IsCIQ:!1,IsEmbargo:!1,IsHighPrice:!1,IsDeclared:!1},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:"",Files:[],boxdate:null};this.Storages.push(t),this.timer=(new Date).getTime(),this.$nextTick(function(){})}},clickshowchangebox:function(){var e=this;if(0!=this.SelectRow.length){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();this.saleDate=a+"/"+i+"/"+n,this.PackingInfo_datas.PackingDate=this.saleDate;for(var r=0,s=this.SelectRow.length;r<s;r++){var l={Model:this.SelectRow[r].Model,Qty:1e3};this.EstimateWeight_datas.push(l)}Object(g.Q)(this.EstimateWeight_datas).then(function(t){t.success?e.AVGWeightsum=t.data:e.AVGWeightsum=t.message}),this.LoadWaybillExpress(this.waybillinfo.OrderID),this.PackingCheck(),this.PackingModal=!0}else this.$Message.error("请选择一条记录!")},changeData:function(e){this.saleDate=e,this.PackingInfo_datas.PackingDate=e},checkBoxCode:function(e){var t=this;if(""!=e&&"WL"==e.slice(0,2)){var a={BoxIndex:e,PackingDate:this.saleDate};Object(g.a)(a).then(function(a){a.success?t.PackingInfo_datas.BoxIndex=e:(t.newboxcode="",t.PackingInfo_datas.BoxIndex="",t.$Message.error(a.message))})}else this.$Message.error("请输入正确的箱号"),this.newboxcode=null},TestAVGWeightsum:function(){if(null!=this.sharevalue){0==/^\d+(\.\d{0,5})?$/.test(this.sharevalue)||0==this.sharevalue?(this.$Message.error("请输入数字,小数点保留五位，且不等于零"),this.sharevalue=null):(this.sharevalue<this.AVGWeightsum-.5*this.AVGWeightsum||this.sharevalue>this.AVGWeightsum+1.5*this.AVGWeightsum)&&this.$Modal.warning({title:"超过浮动50%！"})}},showBudgetIn:function(){this.feeRecord=!0},showBudgetOut:function(){this.feeRecordOut=!0},showBudget2:function(){this.storagecharge=!0,this.$refs.Storagecharge.IncomeParters(this.waybillinfo.MainOrderID)},changestoragecharge:function(e){this.storagecharge=e},changefeeRecord:function(e){this.feeRecord=e},changefeeRecordOut:function(e){this.feeRecordOut=e},Parentfun:function(){},LoadWaybillExpress:function(e){var t=this;void 0!=e&&Object(g.A)(e).then(function(e){t.WaybillList=e.obj,t.waybillListLoading=!1,0!=t.WaybillList.length?(t.PackingInfo_datas.IsExpress=!0,t.PackingInfo_datas.CarrierID=t.WaybillList[0].CarrierID,t.PackingInfo_datas.WaybillNo=t.WaybillList[0].WaybillNo):4==t.waybillinfo.HKDeliveryType&&(t.PackingInfo_datas.IsExpress=!0,t.PackingInfo_datas.CarrierID=t.waybillinfo.CarrierID,t.PackingInfo_datas.WaybillNo=t.waybillinfo.WayBillCode)})},select:function(e,t){this.$refs.waybillSelection.clearSelection(),0!=e.length&&this.$refs.waybillSelection.toggleRowSelection(t,!0)},PackingCheck:function(){var e=this,t={BoxIndex:"",Areas:[]};t.BoxIndex=this.PackingInfo_datas.BoxIndex;for(var a=0,i=this.SelectRow.length;a<i;a++)t.Areas.push(this.SelectRow[a].Origin);var n=[];n.push(t),Object(g.F)(n).then(function(t){t.success?(e.isSensitive=!1,e.SensitiveAreaShow=""):(e.isSensitive=!0,e.SensitiveAreaShow=t.message)})},btnPacking:function(){var e=this;if(""!=this.sharevalue&&""!=this.PackingInfo_datas.BoxIndex&&null!=this.PackingInfo_datas.BoxIndex)if(1!=this.PackingInfo_datas.IsExpress||""!=this.PackingInfo_datas.CarrierID&&""!=this.PackingInfo_datas.WaybillNo&&null!=this.PackingInfo_datas.CarrierID&&null!=this.PackingInfo_datas.WaybillNo){this.btnPackingdisable=!0,this.PackingInfo_datas.OrderID=this.waybillinfo.OrderID,this.PackingInfo_datas.EntryNoticeID=this.entryNoticeID,this.PackingInfo_datas.Weight=this.sharevalue,this.PackingInfo_datas.AdminID=sessionStorage.getItem("userID");for(var t={},a=0,i=this.SelectRow.length;a<i;a++)t={EntryNoticeItemID:this.SelectRow[a].ID,OrderItemID:this.SelectRow[a].OrderItemID,Quantity:void 0==this.SelectRow[a].CurrentQuantity?this.SelectRow[a].RelQty:this.SelectRow[a].CurrentQuantity},this.PackingInfo_datas.PackingItems.push(t);Object(g.B)(this.PackingInfo_datas).then(function(t){t.success?(e.$Message.success(t.message),e.PackingModal=!1,e.btnPackingdisable=!1,e.SelectRow=[],e.search_pro(),e.search_Packed()):e.$Message.error(t.message),e.sharevalue="",e.newboxcode="",e.PackingInfo_datas.BoxIndex="",e.PackingInfo_datas.PackingItems=[],e.PackingInfo_datas.CarrierID="",e.PackingInfo_datas.WaybillNo=""})}else this.$Message.error("请输入快递公司和快递单号");else this.$Message.error("请输入箱号和重量")},SealOrderCheck:function(){for(var e=this,t=[],a=[],i=0,n=this.PackedProductList.length;i<n;i++){a.indexOf(this.PackedProductList[i].BoxIndex);a.indexOf(this.PackedProductList[i].BoxIndex)<0&&a.push(this.PackedProductList[i].BoxIndex)}for(i=0;i<a.length;i++){for(var r={BoxIndex:a[i],Areas:[]},s=0;s<this.PackedProductList.length;s++)this.PackedProductList[s].BoxIndex==a[i]&&r.Areas.push(this.PackedProductList[s].Origin.slice(0,3));t.push(r)}Object(g.b)(this.tinyOrderID).then(function(a){a.success?Object(g.F)(t).then(function(t){t.success?e.SealOrder():(e.SensitiveModal=!0,e.SensitiveModalContext=t.message)}):e.$Message.error(a.message)})},SealOrder:function(){var e=this,t={EntryNoticeID:this.entryNoticeID,OrderID:this.waybillinfo.OrderID,AdminID:sessionStorage.getItem("userID")};Object(g.D)(t).then(function(t){t.success?(e.$Message.success(t.message),e.isSealDisabled=!0,e.isCancelSealDisabled=!1):e.$Message.error(t.message),e.SensitiveModal=!1})},CancelSealOrder:function(){var e=this,t={PackingID:this.PackedProductList[0].PackingID};Object(g.c)(t).then(function(t){t.success?(e.$Message.success(t.message),e.isSealDisabled=!1,e.isCancelSealDisabled=!0):e.$Message.error(t.message)})},cancelPacking:function(e,t){var a=this,i={PackingID:t.PackingID,EntryNoticeID:this.entryNoticeID,AdminID:sessionStorage.getItem("userID")};Object(g.l)(i).then(function(e){e.success?(a.$Message.success(e.message),a.search_pro(),a.search_Packed(),a.isSealDisabled=!0):a.$Message.error(e.message)})},delUnExcepted:function(e,t){var a=this;Object(g.m)(t.ID).then(function(e){e.success?(a.$Message.success(e.message),a.search_UnExpected()):a.$Message.error(e.message)})},sumcal:function(){for(var e=this,t=0,a=0,i=[],n=0,r=this.PackedProductList.length;n<r;n++)i.push(this.PackedProductList[n].BoxIndex),t+=this.PackedProductList[n].GrossWeight,a+=this.PackedProductList[n].Quantity;for(n=0,r=this.UnExceptedList.length;n<r;n++)i.push(this.UnExceptedList[n].BoxIndex),t+=this.UnExceptedList[n].GrossWeight,a+=this.UnExceptedList[n].Qty;this.SumInfo.totalWeight=t.toFixed(2),this.SumInfo.totalItems=a;var s={boxes:i};Object(g.R)(s).then(function(t){e.SumInfo.totalBoxes=t.data})},changeacrrier:function(e){void 0!=e&&(2==this.waybillinfo.HKDeliveryType&&"Personal"==e.value?(this.IsPersonal=!0,this.waybillinfo.CarNumber=this.CarArrName,this.waybillinfo.DriverID=this.DriversName):(2==this.waybillinfo.HKDeliveryType?(this.IsPersonal=!1,this.waybillinfo.CarNumber="",this.waybillinfo.DriverID="",this.GetDriversCars(e.value)):(this.IsPersonal=!1,this.waybillinfo.CarNumber="",this.waybillinfo.DriverID=""),this.waybillinfo.CarrierName=e.label),this.oldcrriers=e.value)},Carriers:function(e){var t=this;1==e?e=2:2==e&&(e=1),Object(f.i)(e,"HK",100).then(function(e){t.CarrierList=e})},GetDriversCars:function(e){var t=this;Object(f.W)(e).then(function(e){t.CarArr=[];var a=e.Transports;if(a.length>0)for(var i={},n=0;n<a.length;n++)i=null!=a[n].CarNumber1&&null!=a[n].CarNumber2?{value:a[n].CarNumber1+"  "+a[n].CarNumber2}:{value:a[n].CarNumber1},t.CarArr.push(i);else t.CarArr=[];t.DriversArr=e.Drivers})},handleCreate3:function(e){this.CarArr.push({ID:e,Name:e})},ok_addCarrier:function(e){1==e?this.$refs.addCarrier.sumbit_btn():2==e?(this.$refs.addCarrier.delitem(),this.showaddCarrier=!1):3==e?this.$refs.AddDriver.sumbit_btn():4==e?(this.$refs.AddDriver.delitem(),this.showaddDriver=!1):5==e?this.$refs.addcar.sumbit_btn():6==e?(this.$refs.addcar.delitem(),this.showaddCar=!1):7==e?this.$refs.Addcontacts.sumbit_btn():8==e&&(this.$refs.Addcontacts.delitem(),this.showaddcontacts=!1)},ok_contacts:function(e){if(this.adddisabled=!1,"false"!=e){var t=sessionStorage.getItem("UserWareHouse"),a={ID:e.Carrier.ID,Name:e.Carrier.Name};this.CarrierList.push(a),this.Carriers(this.waybillinfo.HKDeliveryType,t),this.waybillinfo.CarrierID=e.Carrier.ID,this.waybillinfo.CarrierName=e.Carrier.Name,this.oldcrriers=e.Carrier.ID,this.showaddcontacts=!1,this.$refs.Addcontacts.delitem()}},ok_addDriver:function(e){if(this.adddisabled=!1,"false"!=e){var t={Name:e,ID:""};this.DriversArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.Driver=e,this.showaddDriver=!1,this.$refs.AddDriver.delitem()}},ok_addCar:function(e){if(this.adddisabled=!1,"false"!=e){var t={value:e};this.CarArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.CarNumber=e,this.showaddCar=!1,this.$refs.AddDriver.delitem()}},setdisabled:function(e){this.adddisabled=e},fatherMethodCarrier:function(e){if(this.adddisabled=!1,"false"!=e){var t=sessionStorage.getItem("UserWareHouse"),a={ID:e.Carrier.ID,Name:e.Carrier.Name};this.CarrierList.push(a),this.Carriers(this.waybillinfo.Type,t),this.waybillinfo.CarrierID=e.Carrier.ID,this.waybillinfo.CarrierName=e.Carrier.Name;var i={Name:e.Driverinfo.Name,ID:""};this.DriversArr.push(i),this.waybillinfo.Driver=e.Driverinfo.Name;i={value:e.Carinfo.CarNumber1};this.CarArr.push(i),this.waybillinfo.CarNumber=e.Carinfo.CarNumber1,this.GetDriversCars(this.waybillinfo.CarrierID),this.showaddCarrier=!1,this.$refs.addCarrier.delitem()}},SeletUpload:function(e){window.PhotoUploaded=this.changed;var t={SessionID:this.waybillinfo.EntryNoticeID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.EntryNoticeID,WsOrderID:this.waybillinfo.MainOrderID,Type:8e3}};Object(v.r)(t)},fromphotos:function(e){window.PhotoUploaded=this.changed;var t={SessionID:this.waybillinfo.EntryNoticeID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.EntryNoticeID,WsOrderID:this.waybillinfo.MainOrderID,Type:8e3}};Object(v.c)(t)},clackFilesProcess:function(e){var t={Url:e};Object(v.b)(t)},fileprint:function(e){var t=Object(v.f)()["文档打印"];t.Url=e;var a=t;Object(v.a)(a)},SaveHKDeliveryInfo:function(){var e=this,t={orderID:this.tinyOrderID,CarrierID:this.waybillinfo.CarrierID,DriverID:this.waybillinfo.DriverID,CarNumber:this.waybillinfo.CarNumber,WaybillNo:this.waybillinfo.WayBillCode,HKDeliveryType:this.waybillinfo.HKDeliveryType};Object(g.u)(t).then(function(t){t.success?e.$Message.success(t.message):e.$Message.error(t.message)})},ButtonDisable:function(){this.ProductList.length>0?this.isdisabled=!1:this.PackedProductList.length>0&&0==this.ProductList.length&&(this.isdisabled=!0,this.isSealDisabled=!1)},TakeGoods:function(e){var t=this,a={orderID:this.tinyOrderID,deliveryNoticeStatus:e};Object(g.n)(a).then(function(a){1==a.success?(t.waybillinfo.DeliveryNoticeStatus=e,t.$forceUpdate(),3==e?t.$Message.success("提货锁定成功，请去提货"):t.$Message.success("提货完成")):t.$Message.error("提货锁定失败")})},changeboxcode:function(e){this.showEdit=!0,this.oldboxcode=e.BoxIndex,this.packingIDBoxChange=e.PackingID},changeUnExpecteddBoxCode:function(e){this.showEdit=!0,this.oldboxcode=e.BoxIndex,this.unExpectedBoxChange=e.ID},visiblechange:function(e){if(1==e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();this.saleDate=a+"/"+i+"/"+n}else this.newboxcodePacked=null,this.oldboxcode=null,this.packingIDBoxChange=null,this.unExpectedBoxChange=null},changeDataPacked:function(e){this.saleDate=e,""!=this.newboxcodePacked&&null!=this.newboxcodePacked&&this.handleCreate1(this.newboxcodePacked)},handleCreate1:function(e){var t=this;if(""!=e&&"WL"==e.slice(0,2)){var a={BoxIndex:e,PackingDate:this.saleDate};Object(g.a)(a).then(function(a){a.success?t.newboxcodePacked=e:(t.newboxcodePacked=null,t.$Message.error(a.message))})}else this.$Message.error("请输入正确的箱号"),this.newboxcodePacked=null},ok_changeWait:function(){var e=this;setTimeout(function(){e.$forceUpdate(),e.ok_change()},2e3)},ok_change:function(){var e=this;if(null!=this.newboxcodePacked&&""!=this.newboxcodePacked&&null!=this.packingIDBoxChange&&""!=this.packingIDBoxChange){var t={PackingID:this.packingIDBoxChange,PackingDate:this.saleDate,NewBoxIndex:this.newboxcodePacked,AdminID:sessionStorage.getItem("userID"),OrderID:this.tinyOrderID};Object(g.f)(t).then(function(t){t.success?(e.search_Packed(),e.$Message.success(t.message),e.newboxcodePacked=null,e.packingIDBoxChange=null):e.$Message.error(t.message)})}else if(null!=this.newboxcodePacked&&""!=this.newboxcodePacked&&null!=this.unExpectedBoxChange&&""!=this.unExpectedBoxChange){t={UnExpectedID:this.unExpectedBoxChange,PackingDate:this.saleDate,NewBoxIndex:this.newboxcodePacked,AdminID:sessionStorage.getItem("userID"),OrderID:this.tinyOrderID};Object(g.j)(t).then(function(t){t.success?(e.search_UnExpected(),e.$Message.success(t.message),e.newboxcodePacked=null,e.unExpectedBoxChange=null):e.$Message.error(t.message)})}else this.$Message.error("请选择或输入箱号")},handleRemove:function(e,t){var a=this,i={id:e.ID};Object(f.o)(i).then(function(i){1==i.Success?(a.Removebackfun(e,t),a.$Message.success("删除成功")):a.$Message.error("删除失败")})},Removebackfun:function(e,t){"Waybill"==t&&this.waybillinfo.StorageFiles.splice(this.waybillinfo.StorageFiles.indexOf(e),1)},changed:function(e){var t=e[0],a={FileName:t.FileName,ID:t.FileID,Url:t.Url,Type:8e3};this.waybillinfo.StorageFiles.push(a),this.$forceUpdate()},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()}},mounted:function(){}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Declare"},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"itembox"},[a("p",{staticClass:"detailtitle"},[e._v("代报关基础信息")]),e._v(" "),a("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[a("Row",[a("Col",{staticStyle:{width:"20%",float:"left"}},[a("ul",{staticClass:"detail_li detail1"},[a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("ID：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.EntryNoticeID))])]),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("状态：")]),e._v(" "),a("span",[e._v("\n                "+e._s(e.waybillinfo.EntryNoticeStatusName)+"\n                "),null!=e.waybillinfo.EntryNoticeID?a("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:e.logchange}},[e._v("日志管理")]):e._e()],1)]),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("提货状态：")]),e._v(" "),2==e.waybillinfo.HKDeliveryType&&1==e.waybillinfo.DeliveryNoticeStatus?a("Tag",{attrs:{color:"magenta"}},[e._v("等待提货")]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&3==e.waybillinfo.DeliveryNoticeStatus?a("Tag",{attrs:{color:"blue"}},[e._v("提货中")]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&2==e.waybillinfo.DeliveryNoticeStatus?a("Tag",{attrs:{color:"green"}},[e._v("提货完成")]):e._e()],1):e._e(),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("业务类型：")]),e._v(" "),a("span",[e._v("代报关")])]),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("客服人员：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.Merchandiser?e.waybillinfo.Merchandiser.RealName:""))])]),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1",staticStyle:{width:"112px"}},[e._v("是否收取入仓费：")]),e._v(" "),a("span",[2==e.waybillinfo.ChargeWH?a("Tag",{attrs:{color:"red"}},[2==e.waybillinfo.ChargeWH?a("span",[e._v("不收取")]):e._e()]):a("em",[1==e.waybillinfo.ChargeWH?a("span",[e._v("收取")]):e._e()])],1)]),e._v(" "),1==e.waybillinfo.ChargeWH?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("收取方式：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.ChargeType))])]):e._e(),e._v(" "),1==e.waybillinfo.ChargeWH?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title1"},[e._v("收取金额：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.AmountWH))])]):e._e()])]),e._v(" "),a("Col",{staticStyle:{width:"26%",float:"left"}},[a("ul",{staticClass:"detail_li"},[a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title2"},[e._v("制单时间：")]),e._v(" "),a("span",[e._v(e._s(e._f("showDateexact")(e.waybillinfo.OrderCreateDate)))])]),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title2"},[e._v("供应商：")]),e._v(" "),a("span",{staticStyle:{display:"inline-block",width:"75%","line-height":"20px"}},[e._v("\n                "+e._s(e.waybillinfo.ClientSupplierName)+"\n                "),a("Tag",{attrs:{color:"volcano"}},[e._v("LV "+e._s(e.waybillinfo.ClientSupplierGrade))])],1)]),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title2"},[e._v("到货方式：")]),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("span",[e._v(e._s(e.waybillinfo.HKDeliveryTypeName))]):a("Select",{staticStyle:{width:"40%"},on:{"on-change":e.changewaybillType},model:{value:e.waybillinfo.HKDeliveryType,callback:function(t){e.$set(e.waybillinfo,"HKDeliveryType",t)},expression:"waybillinfo.HKDeliveryType"}},e._l(e.TypeArr,function(t,i){return a("Option",{key:i,attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])}),1)],1),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title2"},[e._v("自提时间：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.PickUpTime))])]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title2"},[e._v("提货文件：")]),e._v(" "),a("span",{staticStyle:{display:"inline-block"}},e._l(e.waybillinfo.PickupFiles,function(t){return a("p",{key:t.FileName},[a("span",{staticClass:"linkurlcolor Filesbox",on:{click:function(a){return e.clackFilesProcess(t.FileUrl)}}},[e._v(e._s(t.FileName))]),e._v(" "),a("a",{on:{click:function(a){return e.fileprint(t.FileUrl)}}},[e._v("打印")])])}),0)]):e._e()])]),e._v(" "),a("Col",{staticStyle:{width:"31%",float:"left"}},[a("ul",{staticClass:"detail_li"},[a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[a("em",[e._v("  ")]),e._v("入  仓  号：")]),e._v(" "),a("span",[e._v("\n                "+e._s(e.waybillinfo.ClientCode)+"("+e._s(e.waybillinfo.ClientName)+")\n                "),a("Tag",{attrs:{color:"geekblue"}},[e._v("LV "+e._s(e.waybillinfo.ClientRank))])],1)]),e._v(" "),2!=e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[e._v("运单号(本次)：")]),e._v(" "),a("span",[a("Input",{staticStyle:{width:"60%"},model:{value:e.waybillinfo.WayBillCode,callback:function(t){e.$set(e.waybillinfo,"WayBillCode",t)},expression:"waybillinfo.WayBillCode"}})],1)]):e._e(),e._v(" "),a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[2==e.waybillinfo.HKDeliveryType?a("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v(" "),3==e.waybillinfo.HKDeliveryType?a("i",[e._v("快递公司(本次):")]):a("i",[e._v("承运商(本次):")])]),e._v(" "),a("span",[a("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0,filterable:"",disabled:3==e.waybillinfo.EntryNoticeStatus},on:{"on-change":e.changeacrrier},model:{value:e.waybillinfo.CarrierID,callback:function(t){e.$set(e.waybillinfo,"CarrierID",t)},expression:"waybillinfo.CarrierID"}},e._l(e.CarrierList,function(t){return a("Option",{key:t.ID,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1),e._v(" "),3!=e.waybillinfo.EntryNoticeStatus&&2==e.waybillinfo.HKDeliveryType&&"Personal"!=e.waybillinfo.CarrierID?a("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCarrier=!0}}}):e._e(),e._v(" "),3!=e.waybillinfo.EntryNoticeStatus&&3==e.waybillinfo.HKDeliveryType&&"Personal"!=e.waybillinfo.CarrierID?a("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddcontacts=!0}}}):e._e()],1)]),e._v(" "),2==e.waybillinfo.HKDeliveryType&&0==e.IsPersonal?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[2==e.waybillinfo.HKDeliveryType?a("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v(" 司        机:")]),e._v(" "),a("span",[a("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0,filterable:"",disabled:3==e.waybillinfo.EntryNoticeStatus},model:{value:e.waybillinfo.DriverID,callback:function(t){e.$set(e.waybillinfo,"DriverID",t)},expression:"waybillinfo.DriverID"}},e._l(e.DriversArr,function(t,i){return a("Option",{key:i,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),2==e.waybillinfo.HKDeliveryType&&null!=e.waybillinfo.CarrierID?a("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddDriver=!0}}}):e._e()],1):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&0==e.IsPersonal?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[2==e.waybillinfo.HKDeliveryType?a("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v(" 车  牌  号:")]),e._v(" "),a("span",[a("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0,disabled:3==e.waybillinfo.EntryNoticeStatus},on:{"on-create":e.handleCreate3},model:{value:e.waybillinfo.CarNumber,callback:function(t){e.$set(e.waybillinfo,"CarNumber",t)},expression:"waybillinfo.CarNumber"}},e._l(e.CarArr,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                    "+e._s(t.value)+"\n                  ")])}),1),e._v(" "),2==e.waybillinfo.HKDeliveryType&&null!=e.waybillinfo.CarrierID?a("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCar=!0}}}):e._e()],1)]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&1==e.IsPersonal?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("司        机:")]),e._v(" "),a("span",[a("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入司机"},model:{value:e.waybillinfo.DriverID,callback:function(t){e.$set(e.waybillinfo,"DriverID",t)},expression:"waybillinfo.DriverID"}})],1)]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&1==e.IsPersonal?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("车  牌  号:")]),e._v(" "),a("span",[a("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入车牌号"},model:{value:e.waybillinfo.CarNumber,callback:function(t){e.$set(e.waybillinfo,"CarNumber",t)},expression:"waybillinfo.CarNumber"}})],1)]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[a("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("联  系  人:")]),e._v(" "),a("span",[e._v(" "+e._s(e.waybillinfo.PickUpContactName)+"   (电话:"+e._s(e.waybillinfo.PickUpContactPhone)+")")])]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType?a("li",{staticClass:"itemli"},[a("span",{staticClass:"detail_title3"},[a("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("提货地址:")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.PickUpAddress))])]):e._e()])]),e._v(" "),a("Col",{staticStyle:{width:"23%",float:"left"}},[a("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[a("li",{staticClass:"itemli"},[a("span",{},[e._v("订单号：")]),e._v(" "),a("span",[e._v(e._s(e.waybillinfo.OrderID))])]),e._v(" "),a("li",{staticClass:"itemli"},[a("div",{staticClass:"setupload"},[a("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SaveHKDeliveryInfo()}}},[e._v("\n                  保存香港交货信息\n                ")]),e._v(" "),2==e.waybillinfo.HKDeliveryType&&1==e.waybillinfo.DeliveryNoticeStatus?a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.TakeGoods(3)}}},[e._v("\n                  "+e._s(e.TakeGoodsName)+"\n                ")]):e._e(),e._v(" "),2==e.waybillinfo.HKDeliveryType&&3==e.waybillinfo.DeliveryNoticeStatus?a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.TakeGoods(2)}}},[e._v("\n                  提货完成\n                ")]):e._e()],1),e._v(" "),a("div",{staticClass:"setupload"},[a("Button",{attrs:{disabled:0==e.Operateddisable,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SeletUpload("Waybill")}}},[e._v("\n                  传照\n                ")]),e._v(" "),a("Button",{attrs:{disabled:0==e.Operateddisable,size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:function(t){return e.fromphotos("Waybill")}}},[e._v("\n                  拍照\n                ")])],1)]),e._v(" "),a("li",{staticStyle:{clear:"both"}},e._l(e.waybillinfo.StorageFiles,function(t){return a("div",{key:t.FileName,staticClass:"Filesbox"},[a("span",{staticClass:"linkurlcolor",on:{click:function(a){return e.clackFilesProcess(t.FileUrl)}}},[e._v(e._s(t.FileName))]),e._v(" "),a("Tooltip",{attrs:{content:"删除",placement:"top"}},[a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemove(t,"Waybill")}}})],1),e._v(" "),a("Tooltip",{attrs:{content:"打印",placement:"top"}},[a("Icon",{attrs:{type:"ios-print-outline"},on:{click:function(a){return e.fileprint(t.FileUrl)}}})],1)],1)}),0)])]),e._v(" "),a("Col",{attrs:{span:"3"}})],1)],1)]),e._v(" "),a("div",{staticClass:"itembox"},[a("p",{staticClass:"detailtitle"},[e._v("产品清单")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}},[a("ButtonGroup",{staticStyle:{width:"28%"}},[a("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":e.search_pro},model:{value:e.searchkey,callback:function(t){e.searchkey="string"==typeof t?t.trim():t},expression:"searchkey"}}),e._v(" "),a("Button",{staticStyle:{float:"left"},attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:e.search_pro}},[e._v("筛选")])],1),e._v(" "),a("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.Labelprint}},[e._v("标签打印")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.clickshowchangebox}},[e._v("\n          一键入箱\n        ")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:e.showBudgetIn}},[e._v("收入")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:e.showBudgetOut}},[e._v("支出")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:function(t){e.abnormal_enter=!0}}},[e._v("无通知产品录入")]),e._v(" "),e.inWarehousedays>e.FreeStockDays?a("Button",{attrs:{type:"primary"},on:{click:e.showBudget2}},[e._v("仓储费录入")]):e._e(),e._v(" "),e.inWarehousedays>e.FreeStockDays?a("span",{staticStyle:{"font-size":"11px",color:"red"}},[e._v("（请收取仓储费，总共需收取仓储费的时长："+e._s(e.inWarehousedays-e.FreeStockDays)+"天）")]):e._e()],1),e._v(" "),a("div",[a("div",{staticClass:"detail_tablebox"},[a("Table",{ref:"selection",attrs:{columns:e.tabletitle,data:e.ProductList,loading:e.loading},on:{"on-selection-change":e.handleSelectRow},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var a=t.index;return[e._v("\n              "+e._s(a+1)+"\n            ")]}},{key:"SpecialType",fn:function(t){var i=t.row;return t.index,[a("div",[a("ul",[a("li",[(1&i.OrderItemType)>0?a("Tag",{attrs:{color:"primary"}},[e._v("商检")]):e._e()],1),e._v(" "),a("li",[(2&i.OrderItemType)>0?a("Tag",{attrs:{color:"warning"}},[e._v("CCC")]):e._e()],1),e._v(" "),a("li",[(8&i.OrderItemType)>0?a("Tag",{attrs:{color:"error"}},[e._v("禁运")]):e._e()],1),e._v(" "),a("li",[(32&i.OrderItemType)>0?a("Tag",{attrs:{color:"magenta"}},[e._v("高价值")]):e._e()],1)])])]}},{key:"OrderItemQty",fn:function(t){var i=t.row;return t.index,[0!=i.iscx?a("span",[e._v(e._s(i.OrderItemQty))]):e._e()]}},{key:"PackedQty",fn:function(t){var i=t.row;return t.index,[0!=i.iscx?a("span",[e._v(e._s(i.PackedQty))]):e._e()]}},{key:"RelQty",fn:function(t){var i=t.row;return t.index,[0!=i.iscx?a("div",[1!=i.isenter?a("P",[Number(i.RelQty)<=0?a("span",[e._v("0")]):a("span",[e._v(e._s(i.RelQty))])]):e._e()],1):e._e()]}},{key:"Country_origin",fn:function(t){var i=t.row,n=t.index;return[a("span",[e._v(e._s(i.Origin+" "+i.OriginText))]),e._v(" "),a("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(t){return e.clickOrigin(i.Origin,i,n)}}})]}},{key:"operation",fn:function(t){var i=t.row,n=t.index;return[a("div",{staticClass:"setupload"},[a("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:function(t){return e.chaixiang(n,i)}}},[e._v("\n                  拆项\n                ")])],1)]}}])})],1)])]),e._v(" "),a("div",{staticClass:"itembox"},[a("p",{staticClass:"detailtitle"},[e._v("已装箱信息")]),e._v(" "),a("div",[a("div",{staticClass:"detail_tablebox"},[a("Table",{ref:"Packedselection",attrs:{columns:e.Packedtabletitle,data:e.PackedProductList,loading:e.PackedLoading},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var a=t.index;return[e._v("\n              "+e._s(a+1)+"\n            ")]}},{key:"OrderID",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.OrderID))])]}},{key:"BoxIndex",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.BoxIndex))]),e._v(" "),3!=e.waybillinfo.EntryNoticeStatus?a("Icon",{attrs:{type:"md-create"},on:{click:function(t){return e.changeboxcode(i)}}}):e._e()]}},{key:"Model",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Model))])]}},{key:"SpecialType",fn:function(t){var i=t.row;return t.index,[a("div",[a("ul",[a("li",[(1&i.SpecialType)>0?a("Tag",{attrs:{color:"primary"}},[e._v("商检")]):e._e()],1),e._v(" "),a("li",[(2&i.SpecialType)>0?a("Tag",{attrs:{color:"warning"}},[e._v("CCC")]):e._e()],1),e._v(" "),a("li",[(8&i.SpecialType)>0?a("Tag",{attrs:{color:"error"}},[e._v("禁运")]):e._e()],1),e._v(" "),a("li",[(32&i.SpecialType)>0?a("Tag",{attrs:{color:"magenta"}},[e._v("高价值")]):e._e()],1)])])]}},{key:"Manufacturer",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Manufacturer))])]}},{key:"DateCode",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Batch))])]}},{key:"Origin",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Origin))])]}},{key:"GrossWeight",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.GrossWeight))])]}},{key:"OrderItemQty",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.OrderItemQty))])]}},{key:"Quantity",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Quantity))])]}},{key:"CarrierName",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.CarrierName))])]}},{key:"OrderWaybillCode",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.OrderWaybillCode))])]}},{key:"operation",fn:function(t){var i=t.row,n=t.index;return[a("div",{staticClass:"setupload"},[a("Button",{attrs:{type:"error",size:"small",icon:"md-checkmark"},on:{click:function(t){return e.cancelPacking(n,i)}}},[e._v("\n                  删除\n                ")])],1)]}}])})],1)]),e._v(" "),a("p",{staticClass:"detailtitle"},[e._v("异常到货信息")]),e._v(" "),a("div",[a("div",{staticClass:"detail_tablebox"},[a("Table",{ref:"UnExceptedselection",attrs:{columns:e.UnExceptedtabletitle,data:e.UnExceptedList,loading:e.UnExceptedLoading},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var a=t.index;return[e._v("\n              "+e._s(a+1)+"\n            ")]}},{key:"OrderID",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.OrderID))])]}},{key:"BoxIndex",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.BoxIndex))]),e._v(" "),3!=e.waybillinfo.EntryNoticeStatus?a("Icon",{attrs:{type:"md-create"},on:{click:function(t){return e.changeUnExpecteddBoxCode(i)}}}):e._e()]}},{key:"Model",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Model))])]}},{key:"Manufacturer",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Brand))])]}},{key:"DateCode",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Batch))])]}},{key:"Origin",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Origin))])]}},{key:"GrossWeight",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.GrossWeight))])]}},{key:"Quantity",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.Qty))])]}},{key:"operation",fn:function(t){var i=t.row,n=t.index;return[a("div",{staticClass:"setupload"},[a("Button",{attrs:{type:"error",size:"small",icon:"md-checkmark"},on:{click:function(t){return e.delUnExcepted(n,i)}}},[e._v("\n                  删除\n                ")])],1)]}}])})],1)]),e._v(" "),a("div",{staticStyle:{width:"100%","min-height":"50px",background:"#f5f7f9",margin:"5px 0"}},[a("Row",[a("Col",{staticStyle:{width:"100px",float:"left"}},[a("span",{},[e._v("合计：")])]),e._v(" "),a("Col",{staticStyle:{width:"200px",float:"left"}},[a("span",{},[e._v("总重量(Kg)：")]),e._v(" "),a("span",[e._v(e._s(e.SumInfo.totalWeight))])]),e._v(" "),a("Col",{staticStyle:{width:"200px",float:"left"}},[a("span",{},[e._v("总件数：")]),e._v(" "),a("span",[e._v(e._s(e.SumInfo.totalBoxes))])]),e._v(" "),a("Col",{staticStyle:{width:"200px",float:"left"}},[a("span",{},[e._v("总数量：")]),e._v(" "),a("span",[e._v(e._s(e.SumInfo.totalItems))])]),e._v(" "),a("Col",{staticStyle:{width:"200px",float:"left"}},[a("Button",{attrs:{type:"primary",disabled:1==e.isSealDisabled},on:{click:e.SealOrderCheck}},[e._v("封箱")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:1==e.isCancelSealDisabled},on:{click:e.CancelSealOrder}},[e._v("取消封箱")])],1)],1)],1)])]),e._v(" "),a("Modal",{attrs:{title:"选择原产地"},on:{"on-cancel":e.cancel},model:{value:e.setOrigin,callback:function(t){e.setOrigin=t},expression:"setOrigin"}},[a("Select",{attrs:{filterable:"","label-in-value":!0},on:{"on-change":e.changOrigin},model:{value:e.Origin,callback:function(t){e.Origin=t},expression:"Origin"}},e._l(e.Conveyingplace,function(e){return a("Option",{key:e.ID,attrs:{value:e.Code,label:e.Code+" "+e.Name}})}),1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.primaryOrigin}},[e._v("确定")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"拆分型号"},on:{"on-cancel":e.cancel},model:{value:e.splitModel,callback:function(t){e.splitModel=t},expression:"splitModel"}},[a("ul",[a("li",{staticStyle:{"margin-left":"30px"}},[a("span",{staticClass:"detail_title1"},[e._v("型号：")]),e._v(" "),a("Input",{staticClass:"inputitems",staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:e.SplitModel_datas.Model,callback:function(t){e.$set(e.SplitModel_datas,"Model",t)},expression:"SplitModel_datas.Model"}})],1),e._v(" "),a("li",{staticStyle:{"margin-left":"30px","margin-top":"10px"}},[a("span",{staticClass:"detail_title1"},[e._v("品牌：")]),e._v(" "),a("Input",{staticClass:"inputitems",staticStyle:{width:"300px"},on:{"on-enter":e.splitModelConfirm},model:{value:e.SplitModel_datas.Manufacturer,callback:function(t){e.$set(e.SplitModel_datas,"Manufacturer","string"==typeof t?t.trim():t)},expression:"SplitModel_datas.Manufacturer"}})],1),e._v(" "),a("li",{staticStyle:{"margin-left":"30px","margin-top":"10px"}},[a("span",{staticClass:"detail_title1"},[e._v("产地：")]),e._v(" "),a("Select",{staticStyle:{width:"300px"},attrs:{filterable:"","label-in-value":!0},on:{"on-change":e.changOrigin},model:{value:e.SplitModel_datas.Origin,callback:function(t){e.$set(e.SplitModel_datas,"Origin","string"==typeof t?t.trim():t)},expression:"SplitModel_datas.Origin"}},e._l(e.Conveyingplace,function(e){return a("Option",{key:e.ID,attrs:{value:e.Code,label:e.Code+" "+e.Name}})}),1)],1),e._v(" "),a("li",{staticStyle:{"margin-left":"30px","margin-top":"10px"}},[a("span",{staticClass:"detail_title1"},[e._v("数量:")]),e._v(" "),a("Input",{staticClass:"inputitems",staticStyle:{width:"300px"},on:{"on-enter":e.splitModelConfirm},model:{value:e.SplitModel_datas.Quantity,callback:function(t){e.$set(e.SplitModel_datas,"Quantity",t)},expression:"SplitModel_datas.Quantity"}})],1)]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.splitDisable},on:{click:e.splitModelConfirm}},[e._v("确定")])],1)]),e._v(" "),a("Modal",{ref:"modal",attrs:{title:"无通知产品录入",width:"90","mask-closable":!1},on:{"on-ok":e.ok_abnormal,"on-cancel":e.cancel,"on-visible-change":e.changeabnormal_enter},model:{value:e.abnormal_enter,callback:function(t){e.abnormal_enter=t},expression:"abnormal_enter"}},[a("span",{attrs:{slot:"close"},slot:"close"},[a("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),a("div",[a("div",[a("p",{staticClass:"detailtitle"},[e._v("\n          无通知产品录入\n          "),a("span",{staticStyle:{"margin-left":"15px",color:"red"}},[e._v("注意：仅能录入该运单下与通知型号不匹配的产品信息")])]),e._v(" "),a("div",{staticStyle:{padding:"15px 0px"}},[a("Noting-Enter",{key:e.timer,ref:"NotingEntername",attrs:{Storagesarr:e.Storages,Storehouselist:e.Storehouselist,status:2,EnterCode:e.waybillinfo.ClientCode,orderID:e.waybillinfo.OrderID}})],1)])])]),e._v(" "),a("Modal",{attrs:{title:"装箱"},on:{"on-cancel":e.cancel},model:{value:e.PackingModal,callback:function(t){e.PackingModal=t},expression:"PackingModal"}},[a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("日       期：\n      ")]),e._v(" "),a("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:e.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:e.saleDate},on:{"on-change":e.changeData}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("箱       号：\n      ")]),e._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入箱号"},on:{"on-blur":function(t){return e.checkBoxCode(e.newboxcode)}},model:{value:e.newboxcode,callback:function(t){e.newboxcode="string"==typeof t?t.trim():t},expression:"newboxcode"}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("重量(Kg)： ")]),e._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入重量"},on:{"on-blur":e.TestAVGWeightsum,"on-enter":e.TestAVGWeightsum},model:{value:e.sharevalue,callback:function(t){e.sharevalue=t},expression:"sharevalue"}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v(" ")]),e._v("推算重量(Kg)： ")]),e._v(" "),a("span",[e._v(e._s(e.AVGWeightsum))])]),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("Checkbox",{model:{value:e.PackingInfo_datas.IsExpress,callback:function(t){e.$set(e.PackingInfo_datas,"IsExpress",t)},expression:"PackingInfo_datas.IsExpress"}},[e._v("是否国际快递")])],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[e._v("\n        快递公司：\n      ")]),e._v(" "),a("Select",{staticStyle:{width:"80%"},attrs:{filterable:"","label-in-value":!0,disabled:!e.PackingInfo_datas.IsExpress},on:{"on-change":e.changeExpress},model:{value:e.PackingInfo_datas.CarrierID,callback:function(t){e.$set(e.PackingInfo_datas,"CarrierID","string"==typeof t?t.trim():t)},expression:"PackingInfo_datas.CarrierID"}},e._l(e.ExpressCompanyInfo,function(e){return a("Option",{key:e.Code,attrs:{value:e.ID,label:e.Code+" "+e.Name}})}),1)],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[e._v("\n        快递单号：\n      ")]),e._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{disabled:!e.PackingInfo_datas.IsExpress},model:{value:e.PackingInfo_datas.WaybillNo,callback:function(t){e.$set(e.PackingInfo_datas,"WaybillNo","string"==typeof t?t.trim():t)},expression:"PackingInfo_datas.WaybillNo"}})],1),e._v(" "),a("div",{staticClass:"detail_tablebox",staticStyle:{"padding-top":"10px"}},[a("Table",{ref:"waybillSelection",attrs:{columns:e.Waybilltabletitle,data:e.WaybillList,loading:e.waybillListLoading},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var a=t.index;return[e._v("\n          "+e._s(a+1)+"\n        ")]}},{key:"CarrierCode",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.CarrierCode))])]}},{key:"WaybillNo",fn:function(t){var i=t.row;return t.index,[a("span",[e._v(e._s(i.WaybillNo))])]}}])})],1),e._v(" "),a("div",[e.isSensitive?a("span",{staticStyle:{"font-size":"11px",color:"red"}},[e._v("("+e._s(e.SensitiveAreaShow)+"不能与一般产地装在同一个箱子中）")]):e._e()]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.btnPackingdisable},on:{click:e.btnPacking}},[e._v("确定")])],1)]),e._v(" "),a("Modal",{attrs:{title:"仓储费录入","mask-closable":!1,"footer-hide":!0,width:60},on:{"on-visible-change":e.changestoragecharge},model:{value:e.storagecharge,callback:function(t){e.storagecharge=t},expression:"storagecharge"}},[a("p",{attrs:{slot:"header"},slot:"header"},[e._v("\n      仓储费录入\n      "),a("span",{staticStyle:{"font-size":"14px","padding-left":"10px"}},[e._v("(总共需收取仓储费的时长："+e._s(e.inWarehousedays-e.FreeStockDays)+"天)")])]),e._v(" "),a("Storagecharge",{ref:"Storagecharge",attrs:{OrderID:e.mainOrderID,timedifference:e.inWarehousedays-e.FreeStockDays,TinyOrderID:e.tinyOrderID},on:{Parentfun:e.Parentfun}})],1),e._v(" "),a("Modal",{attrs:{title:"","mask-closable":!1,"footer-hide":!0,width:60},on:{"on-visible-change":e.changefeeRecord},model:{value:e.feeRecord,callback:function(t){e.feeRecord=t},expression:"feeRecord"}},[a("HKIncome",{ref:"HKIncome",attrs:{EnterType:e.EnterTypeIn,OrderID:e.mainOrderID,WaybillID:e.entryNoticeID,TinyOrderID:e.tinyOrderID}})],1),e._v(" "),a("Modal",{attrs:{title:"","mask-closable":!1,"footer-hide":!0,width:60},on:{"on-visible-change":e.changefeeRecordOut},model:{value:e.feeRecordOut,callback:function(t){e.feeRecordOut=t},expression:"feeRecordOut"}},[a("HKIncome",{ref:"HKOut",attrs:{EnterType:e.EnterTypeOut,OrderID:e.mainOrderID,WaybillID:e.entryNoticeID,TinyOrderID:e.tinyOrderID}})],1),e._v(" "),a("Modal",{attrs:{title:"新增快递公司","mask-closable":!1},model:{value:e.showaddcontacts,callback:function(t){e.showaddcontacts=t},expression:"showaddcontacts"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(8)}}})],1),e._v(" "),a("Add-contacts",{ref:"Addcontacts",attrs:{Conveyingplace:e.Conveyingplace},on:{ok_contacts:e.ok_contacts,setdisabled:e.setdisabled}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(8)}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(7)}}},[e._v("确认")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"新增承运商","mask-closable":!1},model:{value:e.showaddCarrier,callback:function(t){e.showaddCarrier=t},expression:"showaddCarrier"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(2)}}})],1),e._v(" "),a("Add-Carrier",{ref:"addCarrier",attrs:{Conveyingplace:e.Conveyingplace},on:{fatherMethodCarrier:e.fatherMethodCarrier,setdisabled:e.setdisabled}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(2)}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(1)}}},[e._v("确认")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"新增司机","mask-closable":!1},model:{value:e.showaddDriver,callback:function(t){e.showaddDriver=t},expression:"showaddDriver"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(4)}}})],1),e._v(" "),a("Add-Driver",{ref:"AddDriver",attrs:{EnterpriseName:e.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addDriver:e.ok_addDriver}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(4)}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(3)}}},[e._v("确认")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"新增车牌号","mask-closable":!1},model:{value:e.showaddCar,callback:function(t){e.showaddCar=t},expression:"showaddCar"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(6)}}})],1),e._v(" "),a("Add-Car",{ref:"addcar",attrs:{EnterpriseName:e.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addCar:e.ok_addCar}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(6)}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(5)}}},[e._v("确认")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"修改箱号","mask-closable":!1},on:{"on-visible-change":e.visiblechange},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("span",{attrs:{slot:"close"},slot:"close"},[a("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("日期：\n      ")]),e._v(" "),a("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:e.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:e.saleDate},on:{"on-change":e.changeDataPacked}})],1),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("label",[a("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("箱号：\n      ")]),e._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(t){return e.handleCreate1(e.newboxcodePacked)}},model:{value:e.newboxcodePacked,callback:function(t){e.newboxcodePacked="string"==typeof t?t.trim():t},expression:"newboxcodePacked"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.ok_changeWait}},[e._v("确定")])],1)]),e._v(" "),a("Modal",{attrs:{title:"敏感地区提示"},on:{"on-cancel":e.cancel},model:{value:e.SensitiveModal,callback:function(t){e.SensitiveModal=t},expression:"SensitiveModal"}},[a("div",[a("span",{staticStyle:{"font-size":"11px",color:"red"}},[e._v("("+e._s(e.SensitiveModalContext)+"不能与一般产地装在同一个箱子中）")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.SealOrder}},[e._v("确定")])],1)]),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"65"},model:{value:e.showlogged,callback:function(t){e.showlogged=t},expression:"showlogged"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),e._v(" "),a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[e._v("日志管理")])]),e._v(" "),e.showlogged?a("HKLog",{key:e.loggdetime,ref:"logged",attrs:{WaybillID:e.waybillinfo.OrderID}}):e._e()],1)],1)},staticRenderFns:[]};var m=a("VU/8")(y,b,!1,function(e){a("lcnQ")},"data-v-b8813ac6",null);t.default=m.exports},fubW:function(e,t){},lcnQ:function(e,t){},tPoR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("dciI"),n={name:"Accessrecords",data:function(){return{total:0,loading:!0,search_data:{WarehouseID:sessionStorage.getItem("UserWareHouse"),StartDate:null,EndDate:null,PartNumber:null,Manufacturer:null,ClientName:null,EnterCode:null,PageIndex:1,PageSize:50},columns11:[{title:"日期",slot:"CreateData",align:"center",width:120,fixed:"left"},{title:"型号",slot:"PartNumber",align:"center"},{title:"品牌",slot:"Manufacturer",align:"center"},{title:"原产地",slot:"Origin",align:"center"},{title:"借方",align:"center",children:[{title:"单价",slot:"lend_price",align:"center"},{title:"数量",slot:"lend_quantity",align:"center",width:""},{title:"金额",slot:"lend_money",align:"center",width:""}]},{title:"贷方",align:"center",children:[{title:"单价",slot:"loan_price",align:"center"},{title:"数量",slot:"loan_quantity",align:"center",width:""},{title:"金额",slot:"loan_money",align:"center",width:""}]},{title:"出库利润",slot:"profit",align:"center"},{title:"结存",align:"center",children:[{title:"单价",slot:"Settlement_price",align:"center"},{title:"数量",slot:"Settlement_quantity",align:"center",width:""},{title:"金额",slot:"Settlement_money",align:"center",width:""}]}],DataArr:[],saleDate:""}},created:function(){this.setnva(),this.getDates()},mounted:function(){this.CgClientReport()},computed:{showPageArr:function(){return this.$store.state.common.PageArr}},methods:{getDates:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();this.saleDate=[t+"-"+a+"-"+i,t+"-"+a+"-"+i],this.search_data.StartDate=t+"-"+a+"-"+i,this.search_data.EndDate=t+"-"+a+"-"+i},setnva:function(){this.$store.dispatch("setnvadata",[{title:"出入库单",href:""}])},CgClientReport:function(){var e=this;Object(i.j)(this.search_data).then(function(t){console.log(t),e.DataArr=t.obj.Data,e.total=t.obj.Total,e.loading=!1}).catch(function(e){console.log(e)})},changeDatePicker:function(e){console.log(e),""==e[0]&&""==e[1]?(this.search_data.StartDate=null,this.search_data.EndDate):(this.search_data.StartDate=e[0],this.search_data.EndDate,e[1])},search_btn:function(){this.loading=!0,this.CgClientReport()},clear_btn:function(){this.getDates(),this.search_data.ClientName=null,this.search_data.PartNumber=null,this.CgClientReport(),this.loading=!0},changepage:function(e){this.loading=!0,this.search_data.PageIndex=e,this.CgClientReport()},changepagesize:function(e){this.loading=!0,this.search_data.PageSize=e,this.search_data.PageIndex=1,this.CgClientReport()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"searchox"},[a("p",{staticClass:"search_width"},[a("label",{attrs:{for:""}},[e._v("客户名称：")]),e._v(" "),a("Input",{staticClass:"inputs",attrs:{placeholder:"客户名称"},model:{value:e.search_data.ClientName,callback:function(t){e.$set(e.search_data,"ClientName","string"==typeof t?t.trim():t)},expression:"search_data.ClientName"}})],1),e._v(" "),a("p",{staticClass:"search_width"},[a("label",{attrs:{for:""}},[e._v("型号：")]),e._v(" "),a("Input",{staticClass:"inputs",attrs:{placeholder:"型号"},model:{value:e.search_data.PartNumber,callback:function(t){e.$set(e.search_data,"PartNumber","string"==typeof t?t.trim():t)},expression:"search_data.PartNumber"}})],1),e._v(" "),a("p",{staticClass:"search_width"},[a("label",{attrs:{for:""}},[e._v("日   期：")]),e._v(" "),a("DatePicker",{ref:"element",staticClass:"inputs",attrs:{type:"daterange",clearable:!1},on:{"on-change":e.changeDatePicker},model:{value:e.saleDate,callback:function(t){e.saleDate=t},expression:"saleDate"}})],1),e._v(" "),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"ios-search"},on:{click:e.search_btn}},[e._v("查询")]),e._v(" "),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",icon:"ios-trash"},on:{click:e.clear_btn}},[e._v("清空")])],1),e._v(" "),a("div",{staticClass:"clearboth"},[a("Table",{attrs:{columns:e.columns11,data:e.DataArr,border:e.DataArr.length>0,loading:e.loading,"max-height":"560"},scopedSlots:e._u([{key:"CreateData",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(e._f("showDate")(i.Date)))])]}},{key:"PartNumber",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.PartNumber))])]}},{key:"Manufacturer",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.Manufacturer))])]}},{key:"Origin",fn:function(t){return t.row,t.index,[a("p",[e._v("空")])]}},{key:"lend_price",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.InUnitPrice))])]}},{key:"lend_quantity",fn:function(t){var i=t.row;return t.index,[1==i.ShowType?a("p",[e._v(e._s(i.Quantity))]):e._e()]}},{key:"lend_money",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.InTotal))])]}},{key:"loan_price",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.OutUnitPrice))])]}},{key:"loan_quantity",fn:function(t){var i=t.row;return t.index,[2==i.ShowType?a("p",[e._v(e._s(i.Quantity))]):e._e()]}},{key:"loan_money",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.OutTotal))])]}},{key:"profit",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.profit))])]}},{key:"Settlement_price",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.BalanceUnitPrice))])]}},{key:"Settlement_quantity",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.BalanceQuantity))])]}},{key:"Settlement_money",fn:function(t){var i=t.row;return t.index,[a("p",[e._v(e._s(i.BalanceTotal))])]}}])}),e._v(" "),a("div",{staticClass:"pagebox"},[a("Page",{attrs:{total:e.total,"page-size":e.search_data.PageSize,"show-total":"",current:e.search_data.PageIndex,"page-size-opts":e.showPageArr,"show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.changepagesize,"on-change":e.changepage}})],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(n,r,!1,function(e){a("FZbm")},"data-v-42ec5462",null);t.default=s.exports}});
//# sourceMappingURL=7.acee282fef03c6e7a432.js.map