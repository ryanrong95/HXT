webpackJsonp([9],{"74L0":function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("YQ7m"),l=e.n(a),s=e("bOdI"),r=e.n(s),n=e("mvHQ"),o=e.n(n),c=(e("NYxO"),e("Wxb1")),d=e("7GJn"),u=e("EE7l"),h=e("uWQ3"),f=e("CZn4"),y=e("MgEx"),v=e("93yw"),b=e("jRAW"),p=e("gyMJ"),_=e("dciI"),m=e("3PyT"),g=(e("7+uW"),e("PJh5")),w=e.n(g),C=(e("mw3O"),e("7t+N"),e("xrTZ").Base64,e("FHte")),D=e("M4fF"),I={name:"RoutineEnter",components:{"img-test":c.default,"photo-graph":d.default,"Historys-dom":u.default,"Add-Carrier":h.default,"Add-Driver":f.default,"Add-Car":y.default,"logg-ed":v.default,Storagecharge:b.default},props:{fatherMethod:{type:Function,default:null}},data:function(){var i,t=this;return i={showStoragecharge:!1,timedifference:null,storagecharge:!1,CheckRequirements:!1,CheckRequirementstitle:[{type:"index",width:60,align:"center"},{title:"送货时机",slot:"timing",align:"left"},{title:"支票处理",slot:"action",align:"left"},{title:"支票抬头",slot:"Invoicetitle",align:"left"},{title:"送票地址",slot:"TypeName",align:"left"},{title:"币种",slot:"Currency",align:"left"},{title:"价格",slot:"Price",align:"left"},{title:"创建日期",slot:"CreateDate",align:"left"}],CheckRequirementsdata:[],needtitle:[{type:"index",width:60,align:"center"},{title:"服务项目",key:"TypeName",align:"left"},{title:"服务要求",key:"Name",align:"left"},{title:"数量",key:"Quantity",align:"left"},{title:"具体要求",key:"Requirement",align:"left"},{title:"服务费(RMB)",key:"TotalPrice",align:"left"},{title:"文件",slot:"files",align:"left"}],needdata:[],showneed:!1,ispay:null,DelivaryOpportunity:null,loggdetime:"",showlogged:!1,Conveyingplace:[],showaddDriver:!1,addDriverName:null,showaddCar:!1,addCarName:null,showaddCarrier:!1,adddisabled:!1,IsPersonal:!1,clientGrade:null,isdisabled:!1,originalarr:[],TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],IsfileDel:!1,fruit:[],showprint:!1,fromroute:"",warehouseID:sessionStorage.getItem("UserWareHouse"),pusharr:[],stringcode:"",Childrencodearr:[],Childrencode:"",showChildrencode:!1,language:"SC",disabledwaybuill:!1,UserWareHouse:sessionStorage.getItem("UserWareHouse"),printurl:C.pfwms,productinfo:{count:""},ShipperCodesarr:[],GetExpTypesarr:[],outprint:!1,waybuillform:null,modelstype:"SF",modelstypehk:"098F3D3E2D243EA534E57A882F377BC7",IGetExpType:3,waybillprintbox:!1,viewtime:"",loading:!0,printlist:[]},r()(i,"Conveyingplace",[]),r()(i,"ClientCode",""),r()(i,"model11",""),r()(i,"sethousbox",!1),r()(i,"housenumber",""),r()(i,"Storehouselist",[]),r()(i,"detail_ID",""),r()(i,"searchkey",""),r()(i,"showphoto2",!1),r()(i,"time",""),r()(i,"WarehousingMsg",!1),r()(i,"Nomatching",[]),r()(i,"details",{waybillinfo:{},wayBillID:"",total:0,pageIndex:1,pageSize:1e4,WaybillNo:"90416165067",Carrier:"yunda",Conveyorsite:"",fathertype:""}),r()(i,"uploadList",[]),r()(i,"files",""),r()(i,"SelectRow",[]),r()(i,"isAbnormal",!1),r()(i,"remarks",""),r()(i,"Summary",""),r()(i,"historydata",!1),r()(i,"historydetail",{times:"",waybillLIst:[]}),r()(i,"company",""),r()(i,"listtitles",[{type:"index",width:60,align:"center"},{title:"型号",slot:"PartNumber",align:"left"},{title:"品牌",slot:"Manufacturer",align:"left"},{title:"产地",slot:"OriginName",align:"left"},{title:"库位",slot:"ShelveID",align:"left"},{title:"应出库数量",slot:"NoticeQuantity",align:"left"},{title:"已出库数量",slot:"PickedQuantity",align:"left"},{title:"剩余数量",slot:"LeftQuantity",align:"left"},{renderHeader:function(i,t){return i("div",[i("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),i("span",{},"本次发货数量")])},key:"PickingQuantity",align:"left",render:function(i,e){var a=t;return e.row.CurrentQuantity<=0,i("Input",{props:{value:e.row.CurrentQuantity,disabled:!0},on:{"on-change":function(i){},"on-blur":function(i){var t=a.trim(i.target.value);""!=t?1==/^[1-9]\d*$/.test(t)?t>e.row.LeftQuantity?(a.$Message.error("发货数量不能大于剩余数量"),e.row.CurrentQuantity="",i.target.value="",a.detailitem[e.index]=e.row):(e.row.CurrentQuantity=t,a.detailitem[e.index]=e.row):(a.$Message.error("只能输入正整数"),e.row.CurrentQuantity="",i.target.value="",a.detailitem[e.index]=e.row):(e.row.CurrentQuantity="",i.target.value="",a.detailitem[e.index]=e.row),a.clicktest(e.row)}}})}},{title:"毛重(kg)",key:"Weight",align:"center",render:function(i,e){var a=t,l="";return l=e.row.CurrentQuantity<=0,i("Input",{props:{value:e.row.Weight,autofocus:!0,disabled:l},on:{"on-change":function(i){},"on-blur":function(i){var t=a.trim(i.target.value);""!=t?1==/^\d+(\.\d{0,2})?$/.test(t)?(e.row.Weight=t,a.detailitem[e.index]=e.row):(a.$Message.error("只能输入数字,包括两位数的小数点"),e.row.Weight=null,i.target.value=null,a.detailitem[e.index]=e.row):(e.row.Weight=null,i.target.value=null,a.detailitem[e.index]=e.row),a.changeoriginalarr(e.row)},"on-enter":function(i){var t=a.trim(i.target.value);if(1==/^\d+(\.\d{0,2})?$/.test(t)){e.row.Weight=t,a.detailitem[e.index]=e.row;var l=e.row.Inputs,s=e.row.StandardProducts,r=[{ID:"0001",Type:200,url:"",size:{width:"363",height:"360"},data:{Quantity:e.row.CurrentQuantity,inputsID:l.ID,Catalog:s.Catalog,PartNumber:s.PartNumber,Manufacturer:s.Manufacturer,Packing:s.Packing,PackageCase:s.PackageCase,origin:l.Origin}}];o()(r)}else a.$Message.error("只能输入数字,包括两位数的小数点"),e.row.Weight="",i.target.value="",a.detailitem[e.index]=e.row}}})}},{title:"复核状态",key:"check_statu",align:"center",render:function(i,t){return 0==t.row.Checked?i("span",{props:{},style:{display:"inline-block",padding:"5px 10px",color:"#000000",border:"1px solid #e8eaec",background:"#f7f7f7"}},"未复核"):1==t.row.Checked?i("span",{props:{},style:{display:"inline-block",padding:"5px 10px",color:"#52c41a",border:"1px solid #b7eb8f",background:"#f6ffed"}},"复核通过"):void 0}},{title:"图片",slot:"imglist",align:"center",width:200},{title:"操作",slot:"operation",align:"center",width:160}]),r()(i,"detailitem",[]),r()(i,"CarrierList",[]),r()(i,"wayBillID",this.$route.params.wayBillID),r()(i,"waybillinfo",""),r()(i,"CarArr",[]),r()(i,"CarArrName",""),r()(i,"DriversArr",[]),r()(i,"DriversName",""),r()(i,"localCarrier",[{ID:"098F3D3E2D243EA534E57A882F377BC7",Name:"香港顺丰"},{ID:"53C6F3CCA240D98B5E648D93115A2426",Name:"DHL"},{ID:"0E60AC85BC39F1E221D66A048FF164DA",Name:"UPS"},{ID:"F2D4A36F60A5F4DF5769E10303B7CC93",Name:"FedEx"},{ID:"3ED8D415AB1BBAC628429A85851E53B6",Name:"TNT"}]),i},filters:{showDate:function(i){if(""!=i&&i){var t=i.split("(")[1].split(")")[0];return w()(+t).format("YYYY-MM-DD")}},changenumber:function(i){if(""!=i){var t=Number(i);return console.log(t),t}}},computed:{getarrs:function(){return this.Nomatching},Budgetdetail:function(){return this.$store.state.common.Budgetdetail},isdisabledFn:function(){return"HK01_WLT"==this.UserWareHouse?this.disabledwaybuill=!0:this.disabledwaybuill=!1,this.disabledwaybuill},setstring:function(){return console.log(this.stringcode),this.stringcode}},beforeRouteEnter:function(i,t,e){console.log(t),e(function(i){i.fromroute=t})},mounted:function(){this.WayParterdata(),this.getdetail_data();var i=this,t="";document.onkeydown=function(e){16!=e.keyCode&&13!=e.keyCode?t+=e.key:13===e.keyCode&&(i.stringcode=t,i.changestatus(i.stringcode),t="")}},created:function(){window.KdnPrinted=this.changed,window.PhotoUploaded=this.changimgs,console.log(this.$route.params)},methods:{IsPayPayments:function(i){var t=this;Object(_._14)(i,1).then(function(i){console.log(i),t.ispay=1==i?"已收款":2==i?"未收款":null})},rowClassName:function(i,t){return 1==t?(console.log(t),"demo-table-info-row"):2==t?"demo-table-error-row":""},clicktest:D.throttle(function(i){for(var t=0,e=this.SelectRow.length;t<e;t++)i.ID==this.SelectRow[t].ID&&(this.SelectRow[t]=i)},1e3),changeoriginalarr:function(i){for(var t=0,e=this.originalarr.length;t<e;t++)this.originalarr[t].ID==i.ID&&(this.originalarr[t]=i)},changestatus:function(i){for(var t=0;t<this.detailitem.length;t++)if(this.detailitem[t].ID==i){var e=this,a=t;Object(p.B)(this.detailitem[t].OutputID).then(function(i){1==i.success?(e.detailitem[a].Checked=!0,e.$Message.success("复核成功")):e.$Message.error("复核失败，请检查该条码是否在该出库单中")})}},testwinfrom:function(){TestCallJsFuntion()},trim:function(i){return i.replace(/(^\s*)|(\s*$)/g,"")},ok:function(){this.showphoto2=!1},cancel:function(){this.showphoto2=!1,this.showprint=!1,this.showaddCarrier=!1,this.showaddDriver=!1,this.showaddCar=!1},handleSelectRow:function(i){this.SelectRow=i},search_pro:function(){var i=this;this.loading=!0,""!=this.searchkey?Object(_.u)(this.waybillinfo.ID,this.searchkey).then(function(t){if(t.length>0){for(var e=i.detailitem,a=[],l=(new Array,0);l<e.length;l++)for(var s=e[l].ID,r=0;r<t.length;r++){s==t[r].ID&&a.push(e[l])}i.detailitem=a}else i.detailitem=[]}):this.detailitem=this.originalarr,this.loading=!1},finish_btn:function(){if("先款后货"==this.DelivaryOpportunity&&"未收款"==this.ispay)this.$Message.error("该订单为先款后货,且收款状态为未收款，需财务收款后再进行出库");else{console.log(this.originalarr),this.pusharr=[];for(var i=!1,t=0,e=this.originalarr.length;t<e;t++){if(""==this.originalarr[t].CurrentQuantity||"0"==this.originalarr[t].CurrentQuantity){this.$Message.error("请填写本次发货数量"),this.pusharr=[],i=!1;break}if(this.originalarr[t].CurrentQuantity>this.originalarr[t].LeftQuantity){this.$Message.error("发货数量不能大于剩余数量"),this.pusharr=[],i=!1;break}var a={NoticeID:this.originalarr[t].ID,OutputID:this.originalarr[t].OutputID,BoxCode:this.originalarr[t].ShelveID,Quantity:this.originalarr[t].CurrentQuantity,Weight:this.originalarr[t].Weight,NetWeight:this.originalarr[t].NetWeight,Volume:this.originalarr[t].Pickings.Volume,Files:this.originalarr[t].Imagefiles};this.pusharr.push(a),i=!0}1==i&&(2==this.waybillinfo.Type?null==this.waybillinfo.CarrierID||""==this.waybillinfo.CarrierID?this.$Message.error("请先选择承运商"):null==this.waybillinfo.Driver||""==this.waybillinfo.Driver?this.$Message.error("请选择司机"):null==this.waybillinfo.CarNumberID||""==this.waybillinfo.CarNumberID?this.$Message.error("请选择车牌号"):this.WarehousingMsg=!0:this.WarehousingMsg=!0)}},setWarehousing:function(i){var t=this;this.isdisabled=!0,Object(_.G)(i).then(function(i){if(console.log(i),1==i.Success){t.$Message.success("出库完成，一秒后自动关闭");var e=t;setTimeout(function(){"CgUntreated"==e.fromroute.name?(e.$store.dispatch("setshowtype",0),e.$store.dispatch("setshowdetailout",!1),e.$router.push({path:"/Outgoing/10"})):(e.$store.dispatch("setshowtype",0),e.$store.dispatch("setshowdetailout",!1),e.$router.go(-1))},1e3)}else t.$Message.error(i.Data),t.isdisabled=!1})},getCookie:function(i){for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");if(i==a[0])return a[1]}return""},ok_Warehousing:function(){this.WarehousingMsg=!1,this.isdisabled=!0;var i={Waybill:{ID:this.waybillinfo.ID,ExcuteStatus:this.waybillinfo.ExcuteStatus,Type:this.waybillinfo.Type,OrderID:this.waybillinfo.OrderID,CarrierID:this.waybillinfo.CarrierID,Summary:this.waybillinfo.Summary,Driver:this.waybillinfo.Driver,CarNumber1:this.waybillinfo.CarNumberID,Files:this.waybillinfo.FeliverGoodFile,LoadingExcuteStatus:this.waybillinfo.LoadingExcuteStatus,WarehouseID:this.warehouseID,Code:this.waybillinfo.Code},AdminID:sessionStorage.getItem("userID"),Pickings:this.pusharr};console.log(i),this.setWarehousing(i)},cancel_Warehousing:function(){this.WarehousingMsg=!1},changeimgs:function(i,t){for(var e=this.detailitem,a=0,l=e.length;a<l;a++)e[a].ID==t.ID&&e[a].Files.push(i)},getdetail_data:function(){var i=this;Object(_.t)(this.wayBillID).then(function(t){console.log(t),i.Getclientdata(t.Waybill.EnterCode),i.originalarr=t.Notices,i.waybillinfo=t.Waybill,i.detailitem=t.Notices,i.detailitem.forEach(function(i){i.LeftQuantity<=0?i._disabled=!0:i._disabled=!1}),i.$Spin.hide(),i.Carriers(t.Waybill.Type),i.GetDriversCars(t.Waybill.CarrierID),i.DelivaryOpportunity=t.Waybill.DelivaryOpportunity,i.IsPayPayments(t.Waybill.OrderID),null==t.Waybill.OrderRequirements?i.needdata=[]:i.needdata=t.Waybill.OrderRequirements,2==t.Waybill.Type&&"Personal"==t.Waybill.CarrierID?i.IsPersonal=!0:(i.IsPersonal=!0,i.GetDriversCars(t.Waybill.CarrierID)),i.CarArrName=t.Waybill.CarNumber1,i.DriversName=t.Waybill.Driver,-1==i.warehouseID.indexOf("SZ")?null!=t.Waybill.Extype&&null!=t.Waybill.ExPayType?i.fruit=["出库单打印","送货单打印","运单打印"]:i.fruit=["出库单打印","送货单打印"]:i.fruit=["出库单打印","送货单打印","运单打印"];var e=null;if(215==t.Waybill.ExcuteStatus?(i.isdisabled=!0,e=i.moment(t.Waybill.ModifyDate).format("YYYY-MM-DD")):(i.isdisabled=!1,e=i.moment((new Date).getTime()).format("YYYY-MM-DD")),i.loading=!1,null!=t.Waybill.FirstTempDate){var a=i.moment(t.Waybill.FirstTempDate).format("YYYY-MM-DD"),l=Date.parse(i.moment(t.Waybill.LsEndDate).format("YYYY-MM-DD")),s=Date.parse(a),r=Date.parse(e);if(t.Waybill.LsEndDate)if(i.waybillinfo.IsClientLs=!1,s>l){var n=(r-s)/864e5+1;console.log(n+"租赁过期减五天"),n>5&&(i.timedifference=n-5,i.showStoragecharge=!0,i.IsRecordWarehouseFee(i.waybillinfo.OrderID))}else if(s<=l){n=(r-l)/864e5;console.log(n+"在租期内，且出库日期在租期外"),n>=1&&(i.timedifference=n,i.showStoragecharge=!0,i.IsRecordWarehouseFee(i.waybillinfo.OrderID))}else r<=l&&(i.showStoragecharge=!1,i.waybillinfo.IsClientLs=!0);else{n=(r-s)/864e5+1;console.log(n+"未租赁，应免租五天"),n>5&&(i.timedifference=n-5,i.showStoragecharge=!0,i.IsRecordWarehouseFee(i.waybillinfo.OrderID))}}})},changewaybillType:function(i){this.Carriers(i)},detailspage:function(i){this.details.pageIndex=i,this.getdetail_data(this.details.wayBillID)},Removebackfun:function(i,t){if("Clientimg"==t)this.waybillinfo.SendGoodsFile.splice(this.waybillinfo.SendGoodsFile.indexOf(i),1);else if("Waybill"==t)this.waybillinfo.FeliverGoodFile.splice(this.waybillinfo.FeliverGoodFile.indexOf(i),1);else for(var e=this.detailitem,a=0;a<e.length;a++)e[a].ID==t.ID&&(e[a].Imagefiles.splice(i,1),this.changeoriginalarr(e[a]))},handleRemove:function(i,t,e){var a={id:i.ID};this.ok_CgDeleteFiles(a,i,t)},ok_CgDeleteFiles:function(i,t,e){var a=this;Object(_.o)(i).then(function(i){console.log(i),1==i.Success?(a.IsfileDel=!0,a.$Message.success("删除成功"),a.Removebackfun(t,e)):(a.IsfileDel=!1,a.$Message.error("删除失败"))})},Abnormalsettrue:function(){this.isAbnormal=!0},Abnormal_btn:function(){var i=this;if(void 0==this.Summary||""==this.Summary)this.isAbnormal=!0,this.$Message.error("请输入异常原因");else{this.isdisabled=!0;var t={waybillid:this.waybillinfo.ID,adminid:sessionStorage.getItem("userID"),orderid:this.waybillinfo.OrderID,summary:this.Summary};Object(_.E)(t).then(function(t){if(1==t.Success){i.$Message.success("出库完成，一秒后自动关闭");var e=i;setTimeout(function(){"CgUntreated"==e.fromroute.name?(e.$store.dispatch("setshowtype",0),e.$store.dispatch("setshowdetailout",!1),e.$router.push({path:"/Outgoing/10"})):(e.$store.dispatch("setshowtype",0),e.$store.dispatch("setshowdetailout",!1),e.$router.go(-1))},1e3)}else i.$Message.error("出库操作失败,请从新操作"),i.isdisabled=!1}),this.isAbnormal=!1}},closeerror:function(){this.isAbnormal=!1,this.Summary=""},errorstatue:function(i){1==i?this.isAbnormal=!0:(this.isAbnormal=!1,this.Summary="")},showhistory:function(){this.historydata=!0,this.historydetail.times=(new Date).getTime()},historywaybill:function(i){console.log(i),this.showhistory()},WayParterdata:function(){var i=this;Object(p.G)().then(function(t){console.log(t),i.Conveyingplace=t.obj})},changConveyingplace:function(i,t){console.log(i),console.log(t),"ClientCode"==t&&(this.details.waybillinfo.CorPlace=i.value,this.details.waybillinfo.CorPlaceDes=i.label)},showBudget:function(i,t,e){if(this.$store.dispatch("setBudget",!0),"meet"==i){var a="";this.$router.push({name:"outdetailBudget",query:{webillID:this.waybillinfo.ID,OrderID:this.waybillinfo.OrderID,type:t,otype:"out",conduct:e}})}else{a="";a="CgUntreated"==this.routername?"/CgUntreated/Oplog":"/CgProcessed/Oplog",this.$router.push({path:a,params:{webillID:this.details.waybillinfo.WaybillID}})}},closeBudget:function(){console.log("关闭收支明细"),this.$router.go(-1),this.$store.dispatch("setBudget",!1)},Carriers:function(i){var t=this;Object(_.i)(i,this.warehouseID,200).then(function(i){t.CarrierList=i})},GetDriversCars:function(i){var t=this;Object(_.W)(i).then(function(i){t.CarArr=[];var e=i.Transports;if(e.length>0)for(var a={},l=0;l<e.length;l++)a=null!=e[l].CarNumber1&&null!=e[l].CarNumber2?{value:e[l].CarNumber1+"  "+e[l].CarNumber2}:{value:e[l].CarNumber1},t.CarArr.push(a);else t.CarArr=[];t.DriversArr=i.Drivers,t.waybillinfon.Driver=null,t.waybillinfon.CarNumber1=null})},fromphotos:function(i){if("Waybill"==i||"Clientimg"==i){var t=null;t="Waybill"==i?8010:8020;var e={SessionID:i,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:"",InputID:"",Type:t}};Object(m.c)(e)}else{e={SessionID:i.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:i.ID,InputID:"",Type:8010}};Object(m.c)(e)}},changed:function(i){this.waybillinfo.Code=i,this.waybuillform.Code=i,this.initwaybillenter(this.modelstype)},changimgs:function(i){this.testfunction(i)},testfunction:function(i){var t=this,e=i[0],a={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:null};if("Waybill"==e.SessionID)a.Type=8010,this.waybillinfo.FeliverGoodFile.push(a);else if("Clientimg"==e.SessionID){a.Type=8020;var l=sessionStorage.getItem("userID"),s=this.waybillinfo.ID;Object(_.v)(l,s).then(function(i){1==i.Success&&t.waybillinfo.SendGoodsFile.push(a)})}else{a.Type=8010;for(var r=0;r<this.detailitem.length;r++)this.detailitem[r].ID==e.SessionID&&(this.detailitem[r].Imagefiles.push(a),this.changeoriginalarr(this.detailitem[r]))}},SeletUpload:function(i){if("Waybill"==i||"Clientimg"==i){var t=null;t="Waybill"==i?8010:8020;var e={SessionID:i,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:"",InputID:"",Type:t}};Object(m.r)(e)}else{e={SessionID:i.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:i.ID,InputID:"",Type:8010}};Object(m.r)(e)}},printdata:function(i){"waybuillprint"==i?(this.waybillinfon(),this.GetShipperCodes(),this.GetExpTypes("SF"),this.waybillprintbox=!0):"outprint"==i?this.outprint=!0:this.Boxing_print()},changwaytype:function(i){this.modelstype=i,this.GetExpTypes(this.modelstype)},sumbit_print:function(){"HK01_WLT"!=this.UserWareHouse?this.waybillprint():this.initwaybillenter(this.modelstypehk)},initwaybillenter:function(i){var t=this,e={ID:this.waybillinfo.WaybillID,Code:this.waybuillform.Code,TotalParts:this.waybuillform.TotalParts,TotalWeight:this.waybuillform.TotalWeight,TotalVolume:this.waybuillform.TotalVolume,CarrierID:i};Object(p.J)(e).then(function(i){if(1==i.success){t.$Message.success("保存成功，两秒后自动关闭");l()(function(){t.waybillprintbox=!1},2e3)}else t.$Message.error("保存失败，请检查相关信息")})},outorder_print:function(){var i={waybillinfo:this.waybillinfo,listdata:this.detailitem};Object(m.n)(i)},Boxing_print:function(){var i=null;-1!=this.warehouseID.indexOf("SZ")?(4==this.waybillinfo.Type||this.waybillinfo.Type,this.language="SC",i=2):4==this.waybillinfo.Type?(this.language="EN",i=2):3==this.waybillinfo.Type?(this.language="TC",i=2):(this.language="TC",i=4);var t={warehouseID:this.warehouseID,Language:this.language,waybillinfo:this.waybillinfo,listdata:this.detailitem,Numcopies:i};Object(m.i)(t)},waybillprint:function(){var i={ShipperCode:this.waybillinfo.CarrierName,ExPayType:this.waybillinfo.ExPayType,ExpType:this.waybillinfo.Extype,Sender:{Company:this.waybillinfo.Sender.Company,Name:this.waybillinfo.Sender.Name,Mobile:this.waybillinfo.Sender.Mobile,Address:"广东省"+this.waybillinfo.Sender.Address},Receiver:{Company:this.waybillinfo.Receiver.Company,Name:this.waybillinfo.Receiver.Name,Mobile:this.waybillinfo.Receiver.Mobile,Address:this.waybillinfo.Receiver.Address},Quantity:this.waybillinfo.TotalParts,Remark:"",volume:this.waybillinfo.TotalWeight,Weight:this.waybillinfo.TotalWeight,Commodity:[{GoodsName:"客户器件"}]};null!=this.waybillinfo.Code&&""!=this.waybillinfo.Code?Object(m.q)(this.waybillinfo.Code):(Object(m.l)(i),Object(m.m)())},outorder_clear:function(){this.outprint=!1},CgAllprint:function(){console.log(this.fruit),this.fruit.indexOf("运单打印")>-1&&this.waybillprint(),this.fruit.indexOf("国际快递针式打印")>-1&&this.Printinternational(),-1!=this.fruit.indexOf("出库单打印")&&this.outorder_print(),-1!=this.fruit.indexOf("送货单打印")&&this.Boxing_print()},fileprint:function(i){var t=Object(m.f)()["文档打印"];t.Url=i;var e=t;Object(m.a)(e)},waybillinfon:function(){var i=this;Object(p.I)(this.waybillinfo.WaybillID).then(function(t){i.waybuillform=t})},changeacrrier:function(i){2==this.waybillinfo.Type&&"Personal"==i.value?(this.IsPersonal=!0,this.waybillinfo.CarNumberID=this.CarArrName,this.waybillinfo.Driver=this.DriversName):(2==this.waybillinfo.Type?(this.IsPersonal=!1,this.waybillinfo.CarNumberID="",this.waybillinfo.Driver="",this.GetDriversCars(i.value)):(this.IsPersonal=!1,this.waybillinfo.CarNumberID="",this.waybillinfo.Driver=""),this.waybillinfo.CarrierName=i.label)},setcode:function(){this.showChildrencode=!0,this.getchildencode(this.waybillinfo.WaybillID)},Submitcode:function(){""==this.Childrencode?this.$Message.error("请输入运单号"):this.Childrencodearr.length>=8?this.$Message.error("最多可输入8个子运单"):(this.Childrencodearr.push(this.Childrencode),this.Childrencode="")},testchildrencode:function(){0==/^[A-Za-z0-9]+$/.test(this.Childrencode)&&(this.$Message.error("请输入正确的运单号"),this.Childrencode="")},Submitall:function(){var i=this;if(this.Childrencodearr.length>0){var t=this.Childrencodearr.join(","),e={waybillID:this.waybillinfo.WaybillID,subCodes:t};console.log(e),Object(p.y)(e).then(function(t){(console.log(t),1==t.success)?(i.$Message.success("提交成功"),i.getchildencode(i.waybillinfo.WaybillID),i.showChildrencode=!1):i.$Message.error("提交失败,请重试")})}else this.$Message.error("请输入子运单")},sliptitem:function(i){this.Childrencodearr.splice(i,1)},getchildencode:function(i){var t=this;Object(p.H)(i).then(function(i){t.Childrencodearr=""!=i?i.split(","):[]})},visiblechange:function(i){1==i?(this.showChildrencode=!0,this.getchildencode(this.waybillinfo.WaybillID)):this.showChildrencode=!1},closewaybull_btn:function(){this.waybillprintbox=!1},clackFilesProcess:function(i){var t={Url:i};console.log(t),Object(m.b)(t)},Getclientdata:function(i){var t=this;Object(_._9)(i).then(function(i){t.clientGrade=i.obj.Grade})},ok_addCarrier:function(i){1==i?this.$refs.addCarrier.sumbit_btn():2==i?(this.$refs.addCarrier.delitem(),this.showaddCarrier=!1):3==i?this.$refs.AddDriver.sumbit_btn():4==i?(this.$refs.AddDriver.delitem(),this.showaddDriver=!1):5==i?this.$refs.addcar.sumbit_btn():6==i&&(this.$refs.addcar.delitem(),this.showaddCar=!1)},setdisabled:function(i){this.adddisabled=i},fatherMethodCarrier:function(i){if(this.adddisabled=!1,"false"!=i){sessionStorage.getItem("UserWareHouse");var t={ID:i.Carrier.ID,Name:i.Carrier.Name};this.CarrierList.push(t),this.Carriers(this.waybillinfo.Type),this.waybillinfo.CarrierID=i.Carrier.ID,this.waybillinfo.CarrierName=i.Carrier.Name;var e={Name:i.Driverinfo.Name,ID:""};this.DriversArr.push(e),this.waybillinfo.Driver=i.Driverinfo.Name;e={value:i.Carinfo.CarNumber1};this.CarArr.push(e),this.waybillinfo.CarNumberID=i.Carinfo.CarNumber1,this.GetDriversCars(this.waybillinfo.CarrierID),this.showaddCarrier=!1,this.$refs.addCarrier.delitem()}},ok_addDriver:function(i){if(this.adddisabled=!1,"false"!=i){var t={Name:i,ID:""};this.DriversArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.Driver=i,this.showaddDriver=!1,this.$refs.AddDriver.delitem()}},ok_addCar:function(i){if(this.adddisabled=!1,"false"!=i){var t={value:i};this.CarArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.CarNumberID=i,this.showaddCar=!1,this.$refs.AddDriver.delitem()}},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()},Printinternational:function(){var i={expType:this.waybillinfo.CarrierName,ReceiverAccountNo:null,ReceiverCustomNo:null,TelOfContactPerson:this.waybillinfo.Receiver.Mobile,NameOfContactPerson:this.waybillinfo.Receiver.Name,ReceiverCompany:this.waybillinfo.coeCompany,ReceiverAddress:this.waybillinfo.Receiver.Address,ReceiverPostalCode:null,ReceiverCountry:null};Object(m.m)(i)},showBudget2:function(){this.storagecharge=!0,this.$refs.Storagecharge.IncomeParters(this.waybillinfo.OrderID)},changestoragecharge:function(i){this.storagecharge=i},IsRecordWarehouseFee:function(i){var t=this;Object(_._15)(i).then(function(i){console.log(i),"True"==i.data||(t.isdisabled=!0)})},Parentfun:function(){215==this.waybillinfo.ExcuteStatus?this.isdisabled=!0:this.isdisabled=!1}}},k={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",[e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"itembox"},[e("p",{staticClass:"detailtitle"},[i._v("基础信息")]),i._v(" "),e("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[null!=i.waybillinfo?e("Row",[e("Col",{staticStyle:{width:"20%",float:"left"}},[e("ul",{staticClass:"detail_li detail1"},[e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("ID：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.ID))])]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("状态：")]),i._v(" "),e("span",[i._v("\n                "+i._s(i.waybillinfo.ExcuteStatusName)+"\n                "),null!=i.waybillinfo.ID?e("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:i.logchange}},[i._v("日志管理")]):i._e()],1)]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("业务类型：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.SourceName))])]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("客服人员：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.Merchandiser))])]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("总货值：")]),i._v(" "),e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v(i._s(i.waybillinfo.chgTotalCurrency)+" "+i._s(i.waybillinfo.chgTotalPrice))])]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("总  额  度：")]),i._v(" "),e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v("CNY "+i._s(i.waybillinfo.total))])]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title1"},[i._v("是否逾期：")]),i._v(" "),1==i.waybillinfo.overDue?e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v("是")]):e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v("否")])]),i._v(" "),void 0!=i.waybillinfo.Condition?e("li",{staticClass:"itemli"},[void 0!=i.waybillinfo.Condition?e("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}):i._e(),i._v(" "),1==i.waybillinfo.Condition.AgencyCheck?e("Tag",{attrs:{color:"geekblue"}},[i._v("代检查")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.AgencyPayment?e("Tag",{attrs:{color:"purple"}},[i._v("代垫货款")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.AgencyReceive?e("Tag",{attrs:{color:"blue"}},[i._v("代收货款")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.ChangePackaging?e("Tag",{attrs:{color:"cyan"}},[i._v("代收货款")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.LableServices?e("Tag",{attrs:{color:"green"}},[i._v("标签服务")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.PayForFreight?e("Tag",{attrs:{color:"gold"}},[i._v("垫付运费")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.Repackaging?e("Tag",{attrs:{color:"orange"}},[i._v("重新包装")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.UnBoxed?e("Tag",{attrs:{color:"volcano"}},[i._v("拆箱验货")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.VacuumPackaging?e("Tag",{attrs:{color:"red"}},[i._v("真空包装")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.WaterproofPackaging?e("Tag",{attrs:{color:"magenta"}},[i._v("防水包装")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.QualityInspection?e("Tag",{attrs:{color:"lime"}},[i._v("质检")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.Unboxing?e("Tag",{attrs:{color:"yellow"}},[i._v("拆包装")]):i._e(),i._v(" "),1==i.waybillinfo.Condition.IsTurnDeclare?e("Tag",{attrs:{color:"#FFA2D3"}},[i._v("转报关")]):i._e()],1):i._e()])]),i._v(" "),e("Col",{staticStyle:{width:"24%",float:"left"}},[e("ul",{staticClass:"detail_li"},[e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("制单时间：")]),i._v(" "),i.detailitem.length>0?e("span",[i._v(i._s(i._f("showDateexact")(i.detailitem[0].CreateDate)))]):i._e()]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2",staticStyle:{float:"left"}},[i._v("供  应  商：")]),i._v(" "),e("span",{staticStyle:{display:"inline-block",width:"78%","line-height":"1"}},i._l(i.waybillinfo.Supplier,function(t,a){return e("p",[i._v(i._s(t.Supplier)+"  "),e("Tag",{attrs:{color:"volcano"}},[i._v("LV "+i._s(t.SupplierGrade))])],1)}),0)]),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("发货方式：")]),i._v(" "),-1!=i.warehouseID.indexOf("SZ")||1==i.waybillinfo.Type||2==i.waybillinfo.Type?e("span",[i._v(i._s(i.waybillinfo.TypeName))]):e("Select",{staticStyle:{width:"40%"},on:{"on-change":i.changewaybillType},model:{value:i.waybillinfo.Type,callback:function(t){i.$set(i.waybillinfo,"Type",t)},expression:"waybillinfo.Type"}},i._l(i.TypeArr,function(t,a){return e("Option",{key:a,attrs:{value:t.value}},[i._v("\n                  "+i._s(t.label)+"\n                ")])}),1)],1),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("总  欠  款：")]),i._v(" "),e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v("CNY "+i._s(i.waybillinfo.totalDebt))])]),i._v(" "),null!=i.DelivaryOpportunity?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("送货时机：")]),i._v(" "),e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v(i._s(i.DelivaryOpportunity))])]):i._e(),i._v(" "),null!=i.ispay?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("收款状态：")]),i._v(" "),e("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[i._v(i._s(i.ispay))])]):i._e(),i._v(" "),1==i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("自提时间：")]),i._v(" "),e("span",[i._v(i._s(i._f("showDateexact")(i.waybillinfo.AppointTime)))])]):i._e(),i._v(" "),e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2"},[i._v("特殊标签：")]),i._v(" "),e("span",{staticStyle:{"line-height":"20px",width:"70%",display:"inline-block"}},i._l(i.waybillinfo.LableFile,function(t,a){return e("div",[e("p",[e("a",[i._v(i._s(t.CustomName))]),i._v(" "),e("a",{on:{click:function(e){return i.fileprint(t.Url)}}},[i._v("打印")])])])}),0)]),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title2",staticStyle:{float:"left"}},[i._v("随货文件：")]),i._v(" "),e("span",{staticStyle:{float:"left"}},i._l(i.waybillinfo.Files,function(t,a){return 25==t.Type?e("div",[e("span",{staticClass:"linkurlcolor Filesbox",on:{click:function(e){return i.clackFilesProcess(t.Url)}}},[i._v(i._s(t.CustomName))]),i._v(" "),e("a",{on:{click:function(e){return i.fileprint(t.Url)}}},[i._v("打印")])]):i._e()}),0)]):i._e()])]),i._v(" "),e("Col",{staticStyle:{width:"30%",float:"left"}},[e("ul",{staticClass:"detail_li"},[e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("客户编号：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.EnterCode)+"（"+i._s(i.waybillinfo.ClientName)+"）"),e("Tag",{attrs:{color:"geekblue"}},[i._v("LV "+i._s(i.clientGrade))]),i._v(" "),1==i.waybillinfo.IsClientLs?e("i",{staticStyle:{background:"#f90",color:"#ffffff",padding:"6px","border-radius":"50%","font-size":"17px"}},[i._v("租")]):i._e()],1)]),i._v(" "),1==i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("提货人：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.coeContact))])]):i._e(),i._v(" "),1==i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("提货人证件：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.IDTypeName)+"（"+i._s(i.waybillinfo.IDNumber)+"）")])]):i._e(),i._v(" "),1==i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("提货人电话：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.coePhone))])]):i._e(),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("运单号(本次)：")]),i._v(" "),e("span",[e("Input",{staticStyle:{width:"60%"},model:{value:i.waybillinfo.Code,callback:function(t){i.$set(i.waybillinfo,"Code",t)},expression:"waybillinfo.Code"}})],1)]):i._e(),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[2==i.waybillinfo.Type?e("em",{staticClass:"Mustfill"},[i._v("*")]):i._e(),i._v("承运商(本次):")]),i._v(" "),e("span",[e("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0},on:{"on-change":i.changeacrrier},model:{value:i.waybillinfo.CarrierID,callback:function(t){i.$set(i.waybillinfo,"CarrierID",t)},expression:"waybillinfo.CarrierID"}},i._l(i.CarrierList,function(t){return e("Option",{key:t.ID,attrs:{value:t.ID}},[i._v("\n                    "+i._s(t.Name)+"\n                  ")])}),1),i._v(" "),2==i.waybillinfo.Type?e("Icon",{attrs:{type:"md-add"},on:{click:function(t){i.showaddCarrier=!0}}}):i._e()],1)]):i._e(),i._v(" "),2==i.waybillinfo.Type&&0==i.IsPersonal?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[e("em",{staticClass:"Mustfill"},[i._v("*")]),i._v("司        机:")]),i._v(" "),e("span",[e("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0},model:{value:i.waybillinfo.Driver,callback:function(t){i.$set(i.waybillinfo,"Driver",t)},expression:"waybillinfo.Driver"}},i._l(i.DriversArr,function(t){return e("Option",{key:t.ID,attrs:{value:t.Name}},[i._v("\n                    "+i._s(t.Name)+"\n                  ")])}),1),i._v(" "),2==i.waybillinfo.Type&&null!=i.waybillinfo.CarrierID?e("Icon",{attrs:{type:"md-add"},on:{click:function(t){i.showaddDriver=!0}}}):i._e()],1)]):i._e(),i._v(" "),2==i.waybillinfo.Type&&0==i.IsPersonal?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[e("em",{staticClass:"Mustfill"},[i._v("*")]),i._v("车  牌  号:")]),i._v(" "),e("span",[e("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0},model:{value:i.waybillinfo.CarNumberID,callback:function(t){i.$set(i.waybillinfo,"CarNumberID",t)},expression:"waybillinfo.CarNumberID"}},i._l(i.CarArr,function(t){return e("Option",{key:t.ID,attrs:{value:t.value}},[i._v("\n                    "+i._s(t.value)+"\n                  ")])}),1),i._v(" "),2==i.waybillinfo.Type&&null!=i.waybillinfo.CarrierID?e("Icon",{attrs:{type:"md-add"},on:{click:function(t){i.showaddCar=!0}}}):i._e()],1)]):i._e(),i._v(" "),2==i.waybillinfo.Type&&1==i.IsPersonal?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[e("em",{staticClass:"Mustfill"},[i._v("*")]),i._v("司        机:")]),i._v(" "),e("span",[e("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入司机"},model:{value:i.waybillinfo.Driver,callback:function(t){i.$set(i.waybillinfo,"Driver",t)},expression:"waybillinfo.Driver"}})],1)]):i._e(),i._v(" "),2==i.waybillinfo.Type&&1==i.IsPersonal?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[e("em",{staticClass:"Mustfill"},[i._v("*")]),i._v("车  牌  号:")]),i._v(" "),e("span",[e("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入车牌号"},model:{value:i.waybillinfo.CarNumberID,callback:function(t){i.$set(i.waybillinfo,"CarNumberID",t)},expression:"waybillinfo.CarNumberID"}})],1)]):i._e(),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("收  货  人：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.coeContact))])]):i._e(),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3"},[i._v("收货人电话：")]),i._v(" "),e("span",[i._v(i._s(i.waybillinfo.coePhone))])]):i._e(),i._v(" "),1!=i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3",staticStyle:{float:"left"}},[i._v("收货地址：")]),i._v(" "),e("span",{staticStyle:{display:"inline-block","max-width":"60%","line-height":"20px"}},[e("i",[i._v(" "+i._s(i.waybillinfo.CoeAddress))])])]):i._e(),i._v(" "),1==i.waybillinfo.Type?e("li",{staticClass:"itemli"},[e("span",{staticClass:"detail_title3",staticStyle:{float:"left"}},[i._v("随货文件：")]),i._v(" "),e("span",{staticStyle:{}},i._l(i.waybillinfo.Files,function(t,a){return 25==t.Type?e("div",[e("span",{staticClass:"linkurlcolor Filesbox",on:{click:function(e){return i.clackFilesProcess(t.Url)}}},[i._v(i._s(t.CustomName))]),i._v(" "),e("a",{on:{click:function(e){return i.fileprint(t.Url)}}},[i._v("打印")])]):i._e()}),0)]):i._e()])]),i._v(" "),e("Col",{staticStyle:{width:"20%",float:"left"}},[e("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[e("li",{staticClass:"itemli"},[i._v("备注："+i._s(i.waybillinfo.Summary))]),i._v(" "),e("li",{staticClass:"itemli"},[215!=i.waybillinfo.ExcuteStatus?e("span",{staticStyle:{float:"left","line-height":"27px"}},[i._v("发货情况拍照：")]):i._e(),i._v(" "),215!=i.waybillinfo.ExcuteStatus?e("div",[e("div",{staticClass:"setupload"},[e("Button",{attrs:{type:"primary",icon:"ios-cloud-upload"},on:{click:function(t){return i.SeletUpload("Waybill")}}},[i._v("\n                    传照\n                  ")])],1),i._v(" "),e("div",{staticClass:"setupload"},[e("Button",{attrs:{type:"primary",icon:"md-reverse-camera"},on:{click:function(t){return i.fromphotos("Waybill")}}},[i._v("\n                    拍照\n                  ")])],1)]):i._e()]),i._v(" "),2==i.waybillinfo.Type&&"215"==i.waybillinfo.ExcuteStatus||1==i.waybillinfo.Type&&"215"==i.waybillinfo.ExcuteStatus?e("li",{staticClass:"itemli",staticStyle:{"padding-top":"10px",clear:"both"}},[e("span",{staticStyle:{float:"left","line-height":"27px"}},[i._v("送 货 单 拍 照：")]),i._v(" "),e("div",{staticClass:"setupload"},[e("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return i.SeletUpload("Clientimg")}}},[i._v("\n                  传照\n                ")])],1),i._v(" "),e("div",{staticClass:"setupload"},[e("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(t){return i.fromphotos("Clientimg")}}},[i._v("\n                  拍照\n                ")])],1)]):i._e(),i._v(" "),e("li",{staticStyle:{clear:"both"}},[e("div",[e("p",[i._v("发货情况照片：")]),i._v(" "),i._l(i.waybillinfo.FeliverGoodFile,function(t,a){return e("div",[8010==t.Type?e("div",{staticClass:"Filesbox"},[e("span",{staticClass:"linkurlcolor",on:{click:function(e){return i.clackFilesProcess(t.Url)}}},[i._v(i._s(t.CustomName))]),i._v(" "),e("Tooltip",{attrs:{content:"删除",placement:"top"}},[e("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return i.handleRemove(t,"Waybill")}}})],1),i._v(" "),e("Tooltip",{attrs:{content:"打印",placement:"top"}},[e("Icon",{attrs:{type:"ios-print-outline"},on:{click:function(e){return i.fileprint(t.Url)}}})],1)],1):i._e()])})],2),i._v(" "),2==i.waybillinfo.Type&&215==i.waybillinfo.ExcuteStatus||1==i.waybillinfo.Type&&215==i.waybillinfo.ExcuteStatus?e("div",[e("p",[i._v("送货单照片：")]),i._v(" "),i._l(i.waybillinfo.SendGoodsFile,function(t,a){return e("div",[8020==t.Type?e("div",{staticClass:"Filesbox"},[e("span",{staticClass:"linkurlcolor",on:{click:function(e){return i.clackFilesProcess(t.Url)}}},[i._v(i._s(t.CustomName))]),i._v(" "),e("Tooltip",{attrs:{content:"删除",placement:"top"}},[e("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return i.handleRemove(t,"Clientimg")}}})],1),i._v(" "),e("Tooltip",{attrs:{content:"打印",placement:"top"}},[e("Icon",{attrs:{type:"ios-print-outline"},on:{click:function(e){return i.fileprint(t.Url)}}})],1)],1):i._e()])})],2):i._e()])])])],1):i._e()],1)]),i._v(" "),e("div",{staticClass:"itembox"},[e("p",{staticClass:"detailtitle"},[i._v("产品清单")]),i._v(" "),e("div",{staticStyle:{margin:"15px 0"}},[e("ButtonGroup",{staticStyle:{width:"28%"}},[e("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"输入型号或品牌",clearable:""},on:{"on-clear":i.search_pro},model:{value:i.searchkey,callback:function(t){i.searchkey="string"==typeof t?t.trim():t},expression:"searchkey"}}),i._v(" "),e("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:i.search_pro}},[i._v("筛选")])],1),i._v(" "),e("Button",{attrs:{type:"primary"},on:{click:function(t){i.showprint=!0}}},[i._v("一键打印")]),i._v(" "),e("Button",{attrs:{type:"primary"},on:{click:function(t){return i.showBudget("meet","in",i.waybillinfo.Source)}}},[i._v("收入")]),i._v(" "),e("Button",{attrs:{type:"primary"},on:{click:function(t){return i.showBudget("meet","out",i.waybillinfo.Source)}}},[i._v("支出")]),i._v(" "),-1!=i.warehouseID.indexOf("HK")?e("Button",{attrs:{type:"primary"},on:{click:function(t){i.showneed=!0}}},[i._v("特殊要求")]):i._e(),i._v(" "),1==i.showStoragecharge?e("Button",{attrs:{type:"primary"},on:{click:i.showBudget2}},[i._v("仓储费录入")]):i._e(),i._v(" "),1==i.showStoragecharge?e("span",{staticStyle:{"font-size":"11px",color:"red"}},[i._v("（请收取仓储费，总共需收取仓储费的时长："+i._s(i.timedifference)+"天）")]):i._e(),i._v(" "),e("div",{staticStyle:{float:"right"}},[e("Button",{attrs:{type:"primary",shape:"circle",icon:"md-checkmark",disabled:1==i.isdisabled},on:{click:i.finish_btn}},[i._v("\n            出库完成\n          ")]),i._v(" "),-1==i.warehouseID.indexOf("HK")?e("Button",{attrs:{disabled:1==i.isdisabled,type:"warning",shape:"circle",icon:"ios-alert-outline"},on:{click:i.Abnormalsettrue}},[i._v("\n            出库异常\n          ")]):i._e()],1)],1),i._v(" "),e("div",[e("div",{staticClass:"detail_tablebox"},[e("Table",{attrs:{loading:i.loading,columns:i.listtitles,data:i.detailitem},on:{"on-selection-change":i.handleSelectRow},scopedSlots:i._u([{key:"PartNumber",fn:function(t){var e=t.row;return t.index,void 0!=e.Product?[i._v("\n              "+i._s(e.Product.PartNumber)+"\n            ")]:void 0}},{key:"Manufacturer",fn:function(t){var e=t.row;return t.index,void 0!=e.Product?[i._v("\n              "+i._s(e.Product.Manufacturer)+"\n            ")]:void 0}},{key:"OriginName",fn:function(t){var e=t.row;return t.index,[i._v("\n              "+i._s(e.OriginName)+"\n            ")]}},{key:"ShelveID",fn:function(t){var e=t.row;return t.index,[i._v("\n              "+i._s(e.ShelveID)+"\n            ")]}},{key:"NoticeQuantity",fn:function(t){var e=t.row;return t.index,[i._v("\n              "+i._s(e.Quantity)+"\n            ")]}},{key:"PickedQuantity",fn:function(t){var e=t.row;return t.index,[i._v("\n              "+i._s(e.PickedQuantity)+"\n            ")]}},{key:"LeftQuantity",fn:function(t){var e=t.row;return t.index,[i._v("\n              "+i._s(e.LeftQuantity)+"\n            ")]}},{key:"imglist",fn:function(t){var a=t.row;return t.index,i._l(a.Imagefiles,function(t,l){return e("p",{staticClass:"Filesbox"},[e("span",{staticClass:"linkurlcolor",on:{click:function(e){return i.clackFilesProcess(t.Url)}}},[i._v(i._s(t.CustomName))]),i._v(" "),1!=t._disabled?e("Icon",{ref:a.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return i.handleRemove(t,a,l)}}}):i._e()],1)})}},{key:"operation",fn:function(t){var a=t.row;return t.index,[e("div",{staticClass:"setupload"},[e("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return i.SeletUpload(a)}}},[i._v("\n                  传照\n                ")])],1),i._v(" "),e("div",{staticClass:"setupload"},[e("Button",{attrs:{type:"primary",disabled:1==a._disabled,icon:"md-reverse-camera",size:"small"},on:{click:function(t){return i.fromphotos(a)}}},[i._v("\n                  拍照\n                ")])],1)]}}],null,!0)}),i._v(" "),e("div",{staticStyle:{padding:"10px"}}),i._v(" "),e("div",{staticClass:"successbtn"},[e("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==i.isdisabled},on:{click:i.finish_btn}},[i._v("\n              出库完成\n            ")]),i._v(" "),-1==i.warehouseID.indexOf("HK")?e("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==i.isdisabled},on:{click:i.Abnormalsettrue}},[i._v("\n              出库异常\n            ")]):i._e()],1)],1)])]),i._v(" "),1==i.WarehousingMsg?e("div",[e("Modal",{attrs:{title:"确定出库"},on:{"on-ok":i.ok_Warehousing,"on-cancel":i.cancel_Warehousing},model:{value:i.WarehousingMsg,callback:function(t){i.WarehousingMsg=t},expression:"WarehousingMsg"}},[e("div",[e("span",[i._v("是否进行出库操作")])])])],1):i._e(),i._v(" "),e("Modal",{attrs:{title:"出库异常"},on:{"on-visible-change":i.errorstatue},model:{value:i.isAbnormal,callback:function(t){i.isAbnormal=t},expression:"isAbnormal"}},[e("div",{attrs:{slot:"close"},slot:"close"},[e("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close",color:"rgb(33, 28, 28)"},on:{click:i.closeerror}})],1),i._v(" "),e("span",{staticStyle:{"line-height":"1",display:"block","padding-bottom":"10px"}},[e("em",{staticClass:"Mustfill"},[i._v("*")]),i._v("出库异常原因\n      ")]),i._v(" "),e("Input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:i.Summary,callback:function(t){i.Summary=t},expression:"Summary"}}),i._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:i.closeerror}},[i._v("取消")]),i._v(" "),e("Button",{attrs:{type:"primary",disabled:1==i.isdisabled},on:{click:i.Abnormal_btn}},[i._v("确定")])],1)],1),i._v(" "),e("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:i.Budgetdetail,callback:function(t){i.Budgetdetail=t},expression:"Budgetdetail"}},[e("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[e("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:i.closeBudget}})],1),i._v(" "),e("div",[e("router-view")],1)])],1),i._v(" "),e("Drawer",{attrs:{closable:!1,width:70},model:{value:i.historydata,callback:function(t){i.historydata=t},expression:"historydata"}},[e("Historys-dom",{key:i.historydetail.times})],1),i._v(" "),e("Modal",{attrs:{title:"打印"},on:{"on-ok":i.CgAllprint,"on-cancel":i.cancel},model:{value:i.showprint,callback:function(t){i.showprint=t},expression:"showprint"}},[e("CheckboxGroup",{model:{value:i.fruit,callback:function(t){i.fruit=t},expression:"fruit"}},[e("Checkbox",{attrs:{label:"出库单打印"}}),i._v(" "),e("Checkbox",{attrs:{label:"送货单打印"}}),i._v(" "),4!=i.waybillinfo.Type||"UPS"!=i.waybillinfo.CarrierName&&"TNT"!=i.waybillinfo.CarrierName?i._e():e("Checkbox",{attrs:{label:"国际快递针式打印"}}),i._v(" "),1==i.waybillinfo.Type&&null!=i.waybillinfo.Extype&&null!=i.waybillinfo.ExPayType?e("Checkbox",{attrs:{label:"运单打印"}}):i._e()],1)],1),i._v(" "),e("Modal",{attrs:{title:"新增承运商","mask-closable":!1},model:{value:i.showaddCarrier,callback:function(t){i.showaddCarrier=t},expression:"showaddCarrier"}},[e("div",{attrs:{slot:"close"},slot:"close"},[e("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return i.ok_addCarrier(2)}}})],1),i._v(" "),e("Add-Carrier",{ref:"addCarrier",attrs:{Conveyingplace:i.Conveyingplace},on:{fatherMethodCarrier:i.fatherMethodCarrier,setdisabled:i.setdisabled}}),i._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{disabled:i.adddisabled},on:{click:function(t){return i.ok_addCarrier(2)}}},[i._v("取消")]),i._v(" "),e("Button",{attrs:{disabled:i.adddisabled,type:"primary"},on:{click:function(t){return i.ok_addCarrier(1)}}},[i._v("确认")])],1)],1),i._v(" "),e("Modal",{attrs:{title:"新增司机","mask-closable":!1},model:{value:i.showaddDriver,callback:function(t){i.showaddDriver=t},expression:"showaddDriver"}},[e("div",{attrs:{slot:"close"},slot:"close"},[e("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return i.ok_addCarrier(4)}}})],1),i._v(" "),e("Add-Driver",{ref:"AddDriver",attrs:{EnterpriseName:i.waybillinfo.CarrierName},on:{setdisabled:i.setdisabled,ok_addDriver:i.ok_addDriver}}),i._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{disabled:i.adddisabled},on:{click:function(t){return i.ok_addCarrier(4)}}},[i._v("取消")]),i._v(" "),e("Button",{attrs:{disabled:i.adddisabled,type:"primary"},on:{click:function(t){return i.ok_addCarrier(3)}}},[i._v("确认")])],1)],1),i._v(" "),e("Modal",{attrs:{title:"新增车牌号","mask-closable":!1},model:{value:i.showaddCar,callback:function(t){i.showaddCar=t},expression:"showaddCar"}},[e("div",{attrs:{slot:"close"},slot:"close"},[e("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return i.ok_addCarrier(6)}}})],1),i._v(" "),e("Add-Car",{ref:"addcar",attrs:{EnterpriseName:i.waybillinfo.CarrierName},on:{setdisabled:i.setdisabled,ok_addCar:i.ok_addCar}}),i._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{disabled:i.adddisabled},on:{click:function(t){return i.ok_addCarrier(6)}}},[i._v("取消")]),i._v(" "),e("Button",{attrs:{disabled:i.adddisabled,type:"primary"},on:{click:function(t){return i.ok_addCarrier(5)}}},[i._v("确认")])],1)],1),i._v(" "),e("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:i.showlogged,callback:function(t){i.showlogged=t},expression:"showlogged"}},[e("div",{attrs:{slot:"close"},slot:"close"},[e("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),i._v(" "),e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[i._v("日志管理")])]),i._v(" "),i.showlogged?e("logg-ed",{key:i.loggdetime,ref:"logged",attrs:{WaybillID:i.waybillinfo.ID}}):i._e()],1),i._v(" "),e("Modal",{attrs:{width:"60",title:"特殊要求"},model:{value:i.showneed,callback:function(t){i.showneed=t},expression:"showneed"}},[e("Table",{attrs:{columns:i.needtitle,data:i.needdata},scopedSlots:i._u([{key:"files",fn:function(t){var a=t.row;return t.index,[null!=a.File?e("span",{staticClass:"linkurlcolor Filesbox",on:{click:function(t){return i.clackFilesProcess(a.File.Url)}}},[i._v(i._s(a.File.CustomName))]):i._e()]}}])}),i._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"})],1),i._v(" "),e("Modal",{attrs:{title:"仓储费录入","mask-closable":!1,"footer-hide":!0,width:60},on:{"on-visible-change":i.changestoragecharge},model:{value:i.storagecharge,callback:function(t){i.storagecharge=t},expression:"storagecharge"}},[e("p",{attrs:{slot:"header"},slot:"header"},[i._v("\n      仓储费录入\n      "),e("span",{staticStyle:{"font-size":"14px","padding-left":"10px"}},[i._v("(总共需收取仓储费的时长："+i._s(i.timedifference)+"天)")])]),i._v(" "),e("Storagecharge",{ref:"Storagecharge",attrs:{OrderID:i.waybillinfo.OrderID,timedifference:i.timedifference},on:{Parentfun:i.Parentfun}})],1)],1)},staticRenderFns:[]};var S=e("VU/8")(I,k,!1,function(i){e("uvJb")},"data-v-23d3ebab",null);t.default=S.exports},YQ7m:function(i,t,e){i.exports={default:e("hM5s"),__esModule:!0}},cnZr:function(i,t,e){var a=e("kM2E"),l=e("L42u");a(a.G+a.B,{setImmediate:l.set,clearImmediate:l.clear})},hM5s:function(i,t,e){e("cnZr"),i.exports=e("FeBl").setImmediate},uvJb:function(i,t){}});
//# sourceMappingURL=9.8825ff775d9e356ae350.js.map