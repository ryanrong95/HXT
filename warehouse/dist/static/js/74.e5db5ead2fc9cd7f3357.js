webpackJsonp([74],{JGjz:function(t,e){},JThy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Qcdk"),s={name:"VoyageList",data:function(){return{total:0,loading:!0,search_data:{PageIndex:1,PageSize:20,LotNumber:null,Carrier:null,StartDate:null,EndDate:null,Status:1},list_title:[{type:"index",width:60,align:"center"},{title:"运输批次号",slot:"LotNumber"},{title:"运输时间",slot:"DepartDate"},{title:"承运商",key:"Carrier"},{title:"车牌号",slot:"CarNumber"},{title:"司机姓名",slot:"Driver"},{title:"运输类型",slot:"WaybillType"},{title:"截单状态",slot:"CuttingOrderStatus"},{title:"操作",slot:"action",width:100,align:"center"}],list_data:[],Carrierarr:[],OrderStatusarr:[],tableHeight:500}},computed:{showTransportDetail:{get:function(){return this.$store.state.common.TransportDetailHK},set:function(t){}},showPageArr:function(){return this.$store.state.common.PageArr}},created:function(){this.CuttingOrderStatus(),this.getCustomTransport(this.search_data),this.getCarriers()},mounted:function(){this.setnva(),this.tableHeight=window.innerHeight-this.$refs.selection.$el.offsetTop-100},methods:{CuttingOrderStatus:function(){var t=this;Object(r.p)().then(function(e){t.OrderStatusarr=e.obj})},getCustomTransport:function(t){var e=this;Object(r.z)(t).then(function(t){e.list_data=t.obj.rows,e.total=t.obj.total,e.loading=!1})},setnva:function(){this.$store.dispatch("setnvadata",[{title:"报关运输列表",href:"/VoyageList"}])},action_btn:function(t){this.$store.dispatch("setTransportDetailHK",!0),this.$router.push({name:"VoyageInfo",params:{voyageNo:t}})},Drawerstate:function(t){1==t?this.$store.dispatch("setTransportDetailHK",!0):(this.$store.dispatch("setTransportDetailHK",!1),this.$router.go(-1),this.getCustomTransport(this.search_data))},changepage:function(t){this.loading=!0,this.search_data.PageIndex=t,this.getCustomTransport(this.search_data)},changepagesize:function(t){this.loading=!0,this.search_data.PageSize=t,this.getCustomTransport(this.search_data)},changedata:function(t){console.log(t),""==t[0]||""==t[1]?(this.search_data.StartDate=null,this.search_data.EndDate=null):(this.search_data.StartDate=t[0],this.search_data.EndDate=t[1])},getCarriers:function(){var t=this;Object(r.d)().then(function(e){t.Carrierarr=e.data})},search_btn:function(){this.loading=!0,this.search_data.PageIndex=1,this.getCustomTransport(this.search_data)},cancel_btn:function(){this.loading=!0,this.search_data.LotNumber=null,this.search_data.Carrier=null,this.search_data.StartDate=null,this.search_data.EndDate=null,this.search_data.Status=1,this.search_data.PageIndex=1,this.getCustomTransport(this.search_data),this.$refs.element.handleClear()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Input",{staticClass:"inputwidth",attrs:{placeholder:"运输批次号"},model:{value:t.search_data.LotNumber,callback:function(e){t.$set(t.search_data,"LotNumber","string"==typeof e?e.trim():e)},expression:"search_data.LotNumber"}}),t._v(" "),a("DatePicker",{ref:"element",staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择开始与结束时间",editable:!1,separator:"  至  "},on:{"on-change":t.changedata}}),t._v(" "),a("Select",{ref:"resetSelect",staticClass:"inputwidth",attrs:{placeholder:"选择承运商"},model:{value:t.search_data.Carrier,callback:function(e){t.$set(t.search_data,"Carrier",e)},expression:"search_data.Carrier"}},t._l(t.Carrierarr,function(e,r){return a("Option",{key:r,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1),t._v(" "),a("Select",{ref:"resetSelect",staticClass:"inputwidth",attrs:{placeholder:"截单状态"},model:{value:t.search_data.Status,callback:function(e){t.$set(t.search_data,"Status",e)},expression:"search_data.Status"}},t._l(t.OrderStatusarr,function(e,r){return a("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.cancel_btn}},[t._v("清空")])],1),t._v(" "),a("div",{staticStyle:{margin:"15px 0",height:"35px"}}),t._v(" "),a("div",[a("Table",{ref:"selection",attrs:{"max-height":t.tableHeight,columns:t.list_title,data:t.list_data,loading:t.loading},scopedSlots:t._u([{key:"LotNumber",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.VoyageNo))])]}},{key:"DepartDate",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.TransportTime))])]}},{key:"CarNumber",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.VehicleLicence))]),t._v("    \n        "),a("span",[t._v(t._s(r.HKLicense))])]}},{key:"Driver",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.DriverName))])]}},{key:"WaybillType",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.VoyageType))])]}},{key:"CuttingOrderStatus",fn:function(e){var r=e.row;return e.index,[0==r.CutStatusValue?a("Tag",{attrs:{color:"orange"}},[t._v("等待")]):t._e(),t._v(" "),1==r.CutStatusValue?a("Tag",{attrs:{color:"green"}},[t._v("已截单")]):t._e(),t._v(" "),2==r.CutStatusValue?a("Tag",{attrs:{color:"default"}},[t._v("已完成")]):t._e()]}},{key:"action",fn:function(e){var r=e.row;return e.index,[a("Button",{attrs:{type:"primary",icon:"md-create",size:"small"},on:{click:function(e){return t.action_btn(r.ID)}}},[t._v("处理")])]}}])}),t._v(" "),a("div",{staticClass:"pagebox"},[a("Page",{attrs:{"show-total":"",total:t.total,"show-elevator":"","show-sizer":"",current:t.search_data.PageIndex,"page-size":t.search_data.PageSize,"page-size-opts":t.showPageArr},on:{"on-change":t.changepage,"on-page-size-change":t.changepagesize}})],1)],1),t._v(" "),a("Drawer",{attrs:{closable:!0,"mask-closable":!1,width:85},on:{"on-visible-change":t.Drawerstate},model:{value:t.showTransportDetail,callback:function(e){t.showTransportDetail=e},expression:"showTransportDetail"}},[a("router-view")],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,n,!1,function(t){a("JGjz")},"data-v-2039b470",null);e.default=i.exports}});
//# sourceMappingURL=74.e5db5ead2fc9cd7f3357.js.map