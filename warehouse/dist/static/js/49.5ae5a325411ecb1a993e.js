webpackJsonp([49],{nEGc:function(t,e){},ysDL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dciI"),n={data:function(){var t=this;return{columns1:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"客户名称",key:"Name",align:"center"},{title:"入仓号",key:"EnterCode",align:"center"},{title:"日期",slot:"CreateDate",align:"center"},{title:"面积",key:"Quantity",align:"center",render:function(e,a){var i=t;return e("Input",{props:{value:a.row.Quantity,disabled:a.row._disabled},on:{"on-blur":function(t){if(""!=t.target.value){1==/^(\d+)(.\d{0,2})?$/.test(t.target.value)?(a.row.Quantity=Number(t.target.value),i.listdata[a.index]=a.row,i.clicktest(a.row)):(i.$Message.error("请输入体积"),t.target.value="",a.row.Quantity="",i.listdata[a.index]=a.row)}else i.$Message.error("请输入体积"),t.target.value="",a.row.Quantity="",i.listdata[a.index]=a.row}}})}},{title:"大箱",key:"largebox",align:"center",render:function(e,a){var i=t;return e("Input",{props:{value:a.row.Box3Quantity,disabled:a.row._disabled},on:{"on-blur":function(t){if(""!=t.target.value){1==/^[0-9]*$/.test(t.target.value)?(a.row.Box3Quantity=Number(t.target.value),i.listdata[a.index]=a.row,i.clicktest(a.row)):(i.$Message.error("请输入数量"),t.target.value="",a.row.Box3Quantity="",i.listdata[a.index]=a.row)}else i.$Message.error("请输入数量"),t.target.value="",a.row.Box3Quantity="",i.listdata[a.index]=a.row}}})}},{title:"中箱",key:"mediumbox",align:"center",render:function(e,a){var i=t;return e("Input",{props:{value:a.row.Box2Quantity,disabled:a.row._disabled},on:{"on-blur":function(t){if(""!=t.target.value){1==/^[0-9]*$/.test(t.target.value)?(a.row.Box2Quantity=Number(t.target.value),i.listdata[a.index]=a.row,i.clicktest(a.row)):(i.$Message.error("请输入数量"),t.target.value="",a.row.Box2Quantity="",i.listdata[a.index]=a.row)}else i.$Message.error("请输入数量"),t.target.value="",a.row.Box2Quantity="",i.listdata[a.index]=a.row}}})}},{title:"小箱",key:"smallbox",align:"center",render:function(e,a){var i=t;return e("Input",{props:{value:a.row.Box1Quantity,disabled:a.row._disabled},on:{"on-blur":function(t){if(""!=t.target.value){1==/^[0-9]*$/.test(t.target.value)?(a.row.Box1Quantity=Number(t.target.value),i.listdata[a.index]=a.row,i.clicktest(a.row)):(i.$Message.error("请输入数量"),t.target.value="",a.row.Box1Quantity="",i.listdata[a.index]=a.row)}else i.$Message.error("请输入数量"),t.target.value="",a.row.Box1Quantity="",i.listdata[a.index]=a.row}}})}},{title:"操作",slot:"Action",align:"center"}],listdata:[],total:200,loading:!0,client:"",EnterCode:"",StartDate:"",EndDate:"",PageIndex:1,PageSize:20,saleDate:"",Selectdata:[],tableHeight:500}},computed:{showPageArr:function(){return this.$store.state.common.PageArr}},mounted:function(){this.setnva(),this.getDates(),this.statisticstorageshow(),this.tableHeight=window.innerHeight-this.$refs.selection.$el.offsetTop-100},methods:{trim:function(t){if(t)return t.replace(/(^\s*)|(\s*$)/g,"")},setnva:function(){this.$store.dispatch("setnvadata",[{title:"仓储费管理"}])},clicktest:a("M4fF").throttle(function(t){for(var e=0,a=this.Selectdata.length;e<a;e++)t.ID==this.Selectdata[e].ID&&(this.Selectdata[e]=t)},0),getDates:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();this.saleDate=[e+"-"+a+"-"+i,e+"-"+a+"-"+i],this.StartDate=e+"-"+a+"-"+i,this.EndDate=e+"-"+a+"-"+i},changeDatePicker:function(t){console.log(t),""==t[0]&&""==t[1]?(this.StartDate=null,this.EndDate=null):(this.StartDate=t[0],this.EndDate=t[1])},statisticstorageshow:function(){var t=this,e={WhID:sessionStorage.getItem("UserWareHouse"),EnterCode:this.EnterCode,StartTime:this.StartDate,EndTime:this.EndDate,ClientName:this.client,PageIndex:this.PageIndex,PageSize:this.PageSize};console.log(e),Object(i._59)(e).then(function(e){console.log(e),t.total=e.data.Total,t.listdata=e.data.Data,t.loading=!1})},changepage:function(t){this.loading=!0,this.PageIndex=t,this.statisticstorageshow()},changepagesize:function(t){this.loading=!0,this.PageSize=t,this.PageIndex=1,this.statisticstorageshow()},search_btn:function(){this.loading=!0,this.PageIndex=1,this.statisticstorageshow()},empty_btn:function(){this.EnterCode="",this.StartDate="",this.EndDate="",this.client="",this.PageIndex=1,this.PageSize=20,this.getDates(),this.statisticstorageshow()},confirm:function(t,e){var a=this,i=[];if(0==t)for(var n=0;n<e.length;n++){var s={Quantity:e[n].Quantity,Box1Quantity:e[n].Box1Quantity,Box2Quantity:e[n].Box2Quantity,Box3Quantity:e[n].Box3Quantity,AdminID:e[n].AdminID,ID:e[n].ID};i.push(s)}else{e={Quantity:e.Quantity,Box1Quantity:e.Box1Quantity,Box2Quantity:e.Box2Quantity,Box3Quantity:e.Box3Quantity,AdminID:e.AdminID,ID:e.ID};i.push(e)}console.log(i),i.length>0&&this.$Modal.confirm({title:"是否确认修改",onOk:function(){a.statisticstorageModify(i)},onCancel:function(){}})},changeselection:function(t){console.log(t),this.Selectdata=t},clickall:function(){var t=this;if(this.Selectdata.length<=0)this.$Message.warning("请至少选择一条");else try{this.Selectdata.forEach(function(e,a){if(""===e.Box1Quantity||""===e.Box2Quantity||""===e.Box3Quantity)throw t.$Message.error("请输入数量"),new Error("");a==t.Selectdata.length-1&&t.confirm(0,t.Selectdata)})}catch(t){}},clickitem:function(t){""!==t.Box1Quantity&&""!==t.Box2Quantity&&""!==t.Box3Quantity?this.confirm(1,t):this.$Message.error("请输入数量")},statisticstorageModify:function(t){var e=this,a={StatisticStorages:t};Object(i._58)(a).then(function(t){console.log(t),1==t.success?(e.$Message.success("修改成功"),e.loading=!0,e.statisticstorageshow(),e.Selectdata=[]):e.$Message.error(t.data)})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"searchbox"},[a("div",{staticClass:"inputbox"},[a("label",[t._v("客户名称：")]),t._v(" "),a("Input",{staticClass:"inputitem",attrs:{placeholder:"请输入客户名称"},model:{value:t.client,callback:function(e){t.client=e},expression:"client"}})],1),t._v(" "),a("div",{staticClass:"inputbox"},[a("label",[t._v("入仓号：")]),a("Input",{staticClass:"inputitem",attrs:{placeholder:"请输入入仓号"},model:{value:t.EnterCode,callback:function(e){t.EnterCode=e},expression:"EnterCode"}})],1),t._v(" "),a("div",{staticClass:"inputbox"},[a("label",[t._v("日期：")]),t._v(" "),a("DatePicker",{ref:"element",staticClass:"inputitem",attrs:{type:"daterange",clearable:!1},on:{"on-change":t.changeDatePicker},model:{value:t.saleDate,callback:function(e){t.saleDate=e},expression:"saleDate"}})],1),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.empty_btn}},[t._v("清空")])],1),t._v(" "),a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.clickall}},[t._v("修改")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("注意：可以批量进行修改")])],1),t._v(" "),a("div",{staticClass:"tablebox"},[a("Table",{ref:"selection",attrs:{columns:t.columns1,data:t.listdata,loading:t.loading,"max-height":t.tableHeight},on:{"on-selection-change":t.changeselection},scopedSlots:t._u([{key:"CreateDate",fn:function(e){var a=e.row;return[t._v(t._s(t._f("showDateexact")(a.CreateDate))+"\n      ")]}},{key:"Action",fn:function(e){var i=e.row;return[a("Button",{attrs:{disabled:1==i._disabled,type:"primary",size:"small"},on:{click:function(e){return t.clickitem(i)}}},[t._v("修改")])]}}])}),t._v(" "),a("div",{staticStyle:{"margin-top":"20px",float:"right"}},[a("Page",{attrs:{total:t.total,"page-size":t.PageSize,"show-total":"",current:t.PageIndex,"page-size-opts":t.showPageArr,"show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.changepagesize,"on-change":t.changepage}})],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(t){a("nEGc")},"data-v-748322f8",null);e.default=o.exports}});
//# sourceMappingURL=49.5ae5a325411ecb1a993e.js.map