webpackJsonp([31],{npC9:function(t,e){},sXp1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3PyT"),s=i("dciI"),o=i("Qcdk"),n={components:{name:"VoyageInfo"},data:function(){var t=this;return{disableclick:0,IsSealNo:!0,SealNo:"",lotnumber:this.$route.params.voyageNo,houseid:sessionStorage.getItem("UserWareHouse"),detailinfo:null,titlelable:[{type:"index",width:60,align:"center"},{title:"订单号",key:"OrderID"},{title:"客户编号",key:"ClientCode"},{title:"客户名称",key:"ClientName"},{title:"总条数",key:"ItemCount",width:100},{title:"箱号",slot:"boxcode",align:"center"},{title:"装箱时间",key:"list",align:"center",render:function(e,i){return e("div",{attrs:{class:"subCol"}},[e("ul",t.Notices[i.index].BoxInfo.map(function(t){return e("li",{},t.PackingDate)}))])}}],Notices:[],AllData:[],innerData:[],externalData:[],disabledGroup:"0"}},created:function(){window.PhotoUploaded=this.changed},mounted:function(){this.getdetail(),this.getItemInfo()},methods:{getdetail:function(){var t=this;Object(o.P)(this.lotnumber).then(function(e){t.detailinfo=e.data,t.SealNo=e.data.SealNo})},getItemInfo:function(){var t=this,e={voyageNo:this.lotnumber,PageIndex:1,PageSize:200};Object(o.O)(e).then(function(e){t.Notices=e.obj.rows,t.AllData=e.obj.rows;for(var i=0,a=e.obj.rows.length;i<a;i++)2==t.Notices[i].ClientType?t.externalData.push(t.Notices[i]):t.innerData.push(t.Notices[i])})},cancel:function(){},changeradio:function(t){this.Notices="0"==t?this.AllData:"1"==t?this.innerData:this.externalData},logchange:function(){},SeletUpload:function(t){var e={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.detailinfo.ID,ShipID:this.detailinfo.VoyageNo}};Object(a.r)(e)},fromphotos:function(t){var e={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.detailinfo.ID,ShipID:this.detailinfo.VoyageNo}};Object(a.c)(e)},clackFilesProcess:function(t){var e={Url:t};Object(a.b)(e)},changed:function(t){var e=t[0],i={FileName:e.FileName,ID:e.FileID,Url:e.Url,Type:8e3};this.detailinfo.VoyageFiles.push(i)},handleRemove:function(t){var e=this,i={id:t.ID};Object(s.o)(i).then(function(i){1==i.Success?(e.detailinfo.VoyageFiles.splice(e.detailinfo.VoyageFiles.indexOf(t),1),e.$Message.success("删除成功")):e.$Message.error("删除失败")})},setSealNo:function(){var t=this;if(""!=this.SealNo&&null!=this.SealNo){var e={voyageNo:this.lotnumber,sealNo:this.SealNo};Object(o.M)(e).then(function(e){1==e.success?(t.$Message.success("封条号保存成功"),t.IsSealNo=!0):(t.$Message.error(e.data),t.IsSealNo=!1)})}else this.$Message.warning("请输入封条号")},printfile:function(t){var e=this,i={voyageNo:this.detailinfo.VoyageNo,fileType:t,totalPackNo:this.detailinfo.TotalPackNo,totalWeight:this.detailinfo.TotalGrossWt};this.disableclick="thwt"==t?1:2,Object(o.C)(i).then(function(t){1==t.success?(e.fileprint(t.data),e.$Message.success("打印成功")):e.$Message.error(t.data)});var a=this;setTimeout(function(){a.disableclick=0},500)},fileprint:function(t){var e=Object(a.f)()["文档打印"];e.Url=t;var i=e;Object(a.a)(i)},confirm:function(){var t=this,e={voyageNo:this.lotnumber,packNo:this.detailinfo.TotalPackNo};Object(o.N)(e).then(function(e){1==e.success?t.$Message.success("确认成功"):t.$Message.error(e.data)})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"TransportDetail",attrs:{id:"TransportDetail"}},[i("p",{staticClass:"details_title"},[t._v("基本信息")]),t._v(" "),i("div",{staticClass:"info_box"},[null!=t.detailinfo?i("Row",[i("Col",{attrs:{span:"7"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输批次：")]),t._v(" "),i("span",{},[t._v("\n          "+t._s(t.detailinfo.VoyageNo)+"          \n        ")])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("截单状态：")]),t._v(" "),0==t.detailinfo.CutStatus?i("span",[t._v("等待")]):t._e(),t._v(" "),1==t.detailinfo.CutStatus?i("span",[t._v("已截单")]):t._e(),t._v(" "),2==t.detailinfo.CutStatus?i("span",[t._v("已完成")]):t._e()]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",[t._v("封  条  号：")]),t._v(" "),i("span",[0==t.IsSealNo?i("ButtonGroup",[i("Input",{staticStyle:{width:"160px",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入封条号",clearable:""},model:{value:t.SealNo,callback:function(e){t.SealNo="string"==typeof e?e.trim():e},expression:"SealNo"}}),t._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.setSealNo}},[t._v("确定")])],1):i("i",[""!=t.SealNo&&null!=t.SealNo?i("em",[t._v(t._s(t.SealNo))]):i("em",{staticStyle:{color:"red"}},[t._v("暂无封条号")]),t._v(" "),i("Tooltip",{staticClass:"editbtn",attrs:{content:"录入/修改封条号",placement:"right-start",theme:"light"}},[i("Icon",{attrs:{type:"md-create"},on:{click:function(e){t.IsSealNo=!1}}})],1)],1)],1)])]),t._v(" "),i("Col",{attrs:{span:"6"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("承  运  商：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.CarrierName))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输类型：")]),t._v(" "),i("span",[t._v(t._s(t.detailinfo.VoyageTypeName))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("司      机：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.DriverName))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("联系电话：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.DriverPhone))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输时间：")]),t._v(" "),i("span",{},[t._v(t._s(t._f("showDate")(t.detailinfo.TransportTime)))])])]),t._v(" "),i("Col",{attrs:{span:"6"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  数  量：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalQuantity))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  条  数：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalItems))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  箱  数：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalPackNo))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  金  额：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.Currency)+t._s(t.detailinfo.TotalAmount))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总毛重(kg)：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalGrossWt))])])]),t._v(" "),i("Col",{attrs:{span:"4"}},[i("div",{staticStyle:{"margin-top":"8px"}},[i("Button",{attrs:{type:"primary",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("传照")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("拍照")]),t._v(" "),i("ul",{staticClass:"frilebox"},t._l(t.detailinfo.VoyageFiles,function(e){return i("li",[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.FileUrl)}}},[t._v(t._s(e.FileName))]),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)}),0)],1)])],1):t._e()],1),t._v(" "),i("p",{staticClass:"details_title"},[t._v("运输清单")]),t._v(" "),i("div",{staticClass:"tablebox"}),t._v(" "),i("div",[i("div",[i("div",{staticClass:"RadioGroupbox"},[i("div",{staticStyle:{width:"60%",float:"left","padding-top":"5px"}},[i("label",[t._v("订单类型：")]),t._v(" "),i("RadioGroup",{staticStyle:{"padding-right":"20px"},on:{"on-change":t.changeradio},model:{value:t.disabledGroup,callback:function(e){t.disabledGroup=e},expression:"disabledGroup"}},[i("Radio",{attrs:{label:"0"}},[t._v("全部")]),t._v(" "),i("Radio",{attrs:{label:"1"}},[t._v("内单")]),t._v(" "),i("Radio",{attrs:{label:"2"}},[t._v("外单")])],1),t._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-print-outline",disabled:1==t.disableclick},on:{click:function(e){return t.printfile("thwt")}}},[t._v("提货委托书")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-print-outline",disabled:2==t.disableclick},on:{click:function(e){return t.printfile("hwlz")}}},[t._v("货物流转确认书")]),t._v(" "),1==t.detailinfo.CutStatus?i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm()}}},[t._v("完成")]):t._e()],1)]),t._v(" "),i("div",{staticStyle:{clear:"both","padding-top":"15px"}},[i("Table",{attrs:{columns:t.titlelable,data:t.Notices,border:t.Notices.length>0},scopedSlots:t._u([{key:"boxcode",fn:function(e){var a=e.row;return e.index,[i("div",{staticClass:"subCol"},[i("ul",t._l(a.BoxInfo,function(e){return i("li",[t._v(t._s(e.BoxIndex))])}),0)])]}}])})],1)])])])},staticRenderFns:[]};var r=i("VU/8")(n,l,!1,function(t){i("npC9")},null,null);e.default=r.exports}});
//# sourceMappingURL=31.4ee72d96a4eac20de075.js.map