webpackJsonp([41],{"/AHQ":function(t,e){},Jm0p:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("dciI"),r=i("3PyT"),a={props:["Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Currents","conduct","Files","delCash","EnterType"],data:function(){return{Labeltotal:"",Labelfee:!1,spinShow:!0,Subject:"",Currency:3,RightPrice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"金额",slot:"RightPrice",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,TrackingNumber:"",TrackingNumberarr:[]}},watch:{theUrl:{Currents:function(t,e){this.refreshAudio(),this.url=""!=t?this.Commonconst.recordForwardPrefix+t:""},deep:!0}},mounted:function(){-1!=sessionStorage.getItem("WareHouseName").indexOf("香港")&&"in"==this.EnterType&&(this.Subject="入仓费"),"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(t){return"运单号"===t.title}),1),console.log(this.columns1)):this.columns1[3].title="收款人"},methods:{testprice:function(t){if(""!=t){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)&&(this.RightPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(t){if(""!=t){if(0==/^[0-9]*$/.test(t))this.RightPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,t<=10)this.RightPrice=100;else{var e=5*(t-10);this.RightPrice=100+e}}},changePayeeID:function(t){var e=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(s._7)(this.OrderID,t).then(function(t){e.TrackingNumberarr=t.data}))},change_subject:function(t){var e=this;this.Labelfee="处理标签费"==t;var i;i=this.Subjectarr.filter(function(e){return e.Name==t&&null!=e.PayQuote.Price}),console.log(i);var r=i[0];i.length>0?(this.disabledis=!0,this.Currency=r.PayQuote.Currency,this.RightPrice=r.PayQuote.Price):"处理标签费"==t?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==t&&Object(s._7)(this.OrderID,this.PayeeID).then(function(t){e.TrackingNumberarr=t.data})},currency_subject:function(){var t=this;Object(s._48)().then(function(e){t.Currencyarr=e.obj})},submit_btn:function(){var t=this,e="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.RightPrice&&(this.PayeeID!=e&&this.PayerID!=e||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType);else{var i=null;i=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var r=null,a=null;30==this.conduct||35==this.conduct||60==this.conduct?(r="代报关",a="杂费"):(r="代仓储",a="仓储服务费");var n={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal,Anonymity:this.Anonymity,Conduct:r,Source:i,TrackingNumber:this.TrackingNumber,Catalog:a};Object(s._61)(n).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.Subject="",t.Currency=3,t.LeftPrice="",t.Labeltotal="",t.Files=[],t.RightPrice="",t.Anonymity="",t.$emit("fatherMethod"),t.$emit("delCash")):t.$Message.error(e.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var t={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(r.r)(t)},FormPhoto:function(){var t={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(r.c)(t)},changedimg:function(t){var e=t[0],i={CustomName:e.FileName,ID:e.FileID,Url:e.Url};this.Files.push(i)},handleRemove:function(t){var e=this,i={id:t.ID};Object(s.o)(i).then(function(i){console.log(i),1==i.Success?(e.$Message.success("删除成功"),e.Files.splice(e.Files.indexOf(t),1)):e.$Message.error("删除失败")})}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cashbox"},[i("div",[i("div",[i("h1",{staticClass:"setpadding_bottom"},[t._v("费用录入")]),t._v(" "),i("p",{staticClass:"iteminput"},[i("label",{attrs:{for:""}},[t._v("收款人：")]),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":t.changePayeeID},model:{value:t.PayeeID,callback:function(e){t.PayeeID=e},expression:"PayeeID"}},t._l(this.Payeearr,function(e,s){return i("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayeeID?i("p",{staticClass:"iteminput"},[t._m(0),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),i("p",{staticClass:"iteminput"},[i("label",{attrs:{for:""}},[t._v("付 款  人：")]),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:t.PayerID,callback:function(e){t.PayerID=e},expression:"PayerID"}},t._l(this.Payerarr,function(e,s){return i("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayerID?i("p",{staticClass:"iteminput"},[t._m(1),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),i("p",{staticClass:"iteminput"},[t._m(2),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":t.change_subject},model:{value:t.Subject,callback:function(e){t.Subject=e},expression:"Subject"}},t._l(this.Subjectarr,function(e,s){return i("Option",{key:e.index,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),"快递运费"==t.Subject&&"out"==t.EnterType?i("p",{staticClass:"iteminput"},[t._m(3),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:t.disabledis},model:{value:t.TrackingNumber,callback:function(e){t.TrackingNumber=e},expression:"TrackingNumber"}},t._l(t.TrackingNumberarr,function(e,s){return i("Option",{key:e.index,attrs:{value:e.wbCode}},[t._v(t._s(e.wbCode))])}),1)],1):t._e(),t._v(" "),1==t.Labelfee?i("p",{staticClass:"iteminput"},[t._m(4),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(e){return t.Labelchange(t.Labeltotal)}},model:{value:t.Labeltotal,callback:function(e){t.Labeltotal=e},expression:"Labeltotal"}})],1):t._e(),t._v(" "),i("p",{staticClass:"iteminput"},[t._m(5),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},model:{value:t.Currency,callback:function(e){t.Currency=e},expression:"Currency"}},t._l(t.Currencyarr,function(e,s){return i("Option",{key:e.index,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),i("p",{staticClass:"iteminput"},[t._m(6),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(e){return t.testprice(t.RightPrice)}},model:{value:t.RightPrice,callback:function(e){t.RightPrice=e},expression:"RightPrice"}})],1),t._v(" "),i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:t.SeletUploadFile}},[t._v("传照")]),t._v(" "),i("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:t.FormPhoto}},[t._v("拍照")]),t._v(" "),i("h3",{staticStyle:{"padding-bottom":"5px"}},[t._v("文件列表：")]),t._v(" "),t.Files.length>0?i("ul",t._l(t.Files,function(e){return i("li",[t._v("\n            "+t._s(e.CustomName)+"\n            "),i("Icon",{attrs:{type:"ios-trash"},on:{click:function(i){return t.handleRemove(e)}}})],1)}),0):i("div",[t._v("暂无数据")]),t._v(" "),i("div",{staticStyle:{padding:"15px 0"}},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:t.submit_btn}},[t._v("提交")])],1)],1),t._v(" "),i("div",[i("h1",{staticClass:"setpadding_bottom"},[t._v("流水列表")]),t._v(" "),i("Table",{attrs:{stripe:"",columns:t.columns1,data:t.Currents,"max-height":"380"},scopedSlots:t._u([{key:"type",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Conduct))])]}},{key:"Subject",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Subject))])]}},{key:"TargetName",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.TargetName))])]}},{key:"TrackingNumber",fn:function(e){var s=e.row;return"out"==t.EnterType?[i("span",[t._v(t._s(s.TrackingNumber))])]:void 0}},{key:"RightPrice",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Price))])]}},{key:"createdata",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.CreateDate))])]}},{key:"user",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Creator))])]}}],null,!0)})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("运单号：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("金     额：")])}]};var l=i("VU/8")(a,n,!1,function(t){i("/AHQ")},"data-v-9561ba0e",null);e.default=l.exports}});
//# sourceMappingURL=41.3483085d5e1d07bd54d8.js.map