webpackJsonp([64],{RiIw:function(t,e){},Yi9d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("dciI"),r={data:function(){return{showEdit:!1,EditQuantity:"",obj:null,current:1,loading:!0,search_data:{WhID:sessionStorage.getItem("UserWareHouse"),PartNumber:null,Manufacturer:null,ShelveID:null,StartTime:null,EndTime:null,PageIndex:1,PageSize:50},total:0,storages_title:[{type:"index",width:60,align:"center"},{title:"型号",slot:"PartNumber"},{title:"品牌",slot:"Manufacturer"},{title:"批号",slot:"Datacode"},{title:"原产地",slot:"Origin"},{title:"供应商",slot:"Supplier"},{title:"数量",key:"Quantity"},{title:"入库时间",slot:"CreateDate"},{title:"所属库位编号",key:"ShelveID"},{title:"存储状态",key:"StoragesStatusDes"}],storages_data:[],columns1:[{title:"品名",key:"name"},{title:"品牌",key:"age"},{title:"型号",key:"address"},{title:"批次号",key:"address"},{title:"数量",key:"address"},{title:"入库时间",key:"address"},{title:"进价总值",key:"address"},{title:"报关总值",key:"address"},{title:"销售单价",key:"address"},{title:"销售总值",key:"address"}],data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}],tableHeight:500}},computed:{showPageArr:function(){return this.$store.state.common.PageArr}},mounted:function(){this.setnva(),this.storages(this.search_data),this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-100},methods:{setnva:function(){this.$store.dispatch("setnvadata",[{title:"库存查询"}])},storages:function(t){var e=this;Object(s.H)(t).then(function(t){3!=t.val&&(0!=t.obj.Total?(e.storages_data=t.obj.Data,e.total=t.obj.Total):(e.storages_data=[],e.total=0),e.loading=!1)})},changedata:function(t){""==t[0]||""==t[1]?(this.search_data.StartTime=null,this.search_data.EndTime=null):(this.search_data.StartTime=t[0],this.search_data.EndTime=t[1])},changepage:function(t){this.loading=!0,this.search_data.PageIndex=t,this.storages(this.search_data)},changepagesize:function(t){this.loading=!0,this.search_data.PageSize=t,this.search_data.PageIndex=1,this.storages(this.search_data)},search_btn:function(){null!=this.search_data.PartNumber||null!=this.search_data.Manufacturer||null!=this.search_data.StartTime||null!=this.search_data.EndTime||null!=this.search_data.ShelveID?(this.search_data.PageIndex=1,this.loading=!0,this.storages(this.search_data)):this.$Message.warning("请输入查询条件")},empty_btn:function(){null==this.search_data.PartNumber&&null==this.search_data.Manufacturer&&null==this.search_data.StartTime&&null==this.search_data.EndTime&&null==this.search_data.ShelveID||(this.search_data={PartNumber:null,Manufacturer:null,ShelveID:null,StartTime:null,EndTime:null,PageIndex:1,PageSize:10},this.loading=!0,this.$refs.element.handleClear(),this.storages(this.search_data))},EditQuantityblur:function(){0!=/\d+(\.\d{0,2})?/.test(this.EditQuantity)&&0!=this.EditQuantity||(this.$Message.error("只能输入数量且不小于0"),this.EditQuantity="")},openshowEdit:function(t){this.showEdit=!0,this.obj=t},visiblechange:function(t){0==t?(this.showEdit=!1,this.obj=null):this.showEdit=!0,this.EditQuantity=""},Clear:function(){this.showEdit=!1,this.$Message.info("取消修改")},Ok_btn:function(){var t=this;if(console.log(this.obj),""!=this.EditQuantity){if(1==/\d+(\.\d{0,2})?/.test(this.EditQuantity)){var e={storageId:this.obj.ID,quantity:this.EditQuantity};Object(s.A)(e).then(function(e){1==e.Success?(t.$Message.success("数量修改成功"),t.showEdit=!1,t.loading=!0,t.storages(t.search_data),t.EditQuantity=""):t.$Message.error("数量修改失败")})}else this.$Message.error("只能输入数量且不小于0")}else this.$Message.error("数量不能为空")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("label",{attrs:{for:""}},[t._v("型号：")]),a("Input",{staticClass:"setwidth",attrs:{placeholder:"型号"},model:{value:t.search_data.PartNumber,callback:function(e){t.$set(t.search_data,"PartNumber","string"==typeof e?e.trim():e)},expression:"search_data.PartNumber"}}),t._v(" "),a("label",{attrs:{for:""}},[t._v("品牌：")]),a("Input",{staticClass:"setwidth",attrs:{placeholder:"品牌"},model:{value:t.search_data.Manufacturer,callback:function(e){t.$set(t.search_data,"Manufacturer","string"==typeof e?e.trim():e)},expression:"search_data.Manufacturer"}}),t._v(" "),a("label",{attrs:{for:""}},[t._v("库位：")]),a("Input",{staticClass:"setwidth",attrs:{placeholder:"库位"},model:{value:t.search_data.ShelveID,callback:function(e){t.$set(t.search_data,"ShelveID","string"==typeof e?e.trim():e)},expression:"search_data.ShelveID"}}),t._v(" "),a("label",{attrs:{for:""}},[t._v("开始时间与结束时间：")]),t._v(" "),a("DatePicker",{ref:"element",staticStyle:{width:"240px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择入库时间",editable:!1,separator:"  至  "},on:{"on-change":t.changedata}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.empty_btn}},[t._v("清空")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Table",{ref:"table",attrs:{columns:t.storages_title,data:t.storages_data,loading:t.loading,"max-height":t.tableHeight},scopedSlots:t._u([{key:"PartNumber",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(s.PartNumber))])]}},{key:"Manufacturer",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(s.Manufacturer))])]}},{key:"Datacode",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(s.DateCode))])]}},{key:"Origin",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(s.Origin))])]}},{key:"Supplier",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(s.Supplier))])]}},{key:"CreateDate",fn:function(e){var s=e.row;return[a("p",[t._v(t._s(t._f("showDateexact")(s.CreateDate)))])]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px",float:"right"}},[a("Page",{attrs:{total:t.total,"page-size":t.search_data.PageSize,"show-total":"",current:t.search_data.PageIndex,"page-size-opts":t.showPageArr,"show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.changepagesize,"on-change":t.changepage}})],1),t._v(" "),a("Modal",{attrs:{title:"修改库存数量"},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[a("div",[a("Input",{attrs:{placeholder:"请输入数量"},on:{"on-blur":t.EditQuantityblur},model:{value:t.EditQuantity,callback:function(e){t.EditQuantity="string"==typeof e?e.trim():e},expression:"EditQuantity"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.Clear}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.Ok_btn}},[t._v("确认")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(t){a("RiIw")},"data-v-3b816676",null);e.default=n.exports}});
//# sourceMappingURL=64.0ffd31a58206fe4f1e80.js.map