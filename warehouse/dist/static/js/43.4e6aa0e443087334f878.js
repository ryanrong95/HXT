webpackJsonp([43],{MxIC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3PyT"),s=i("93yw"),l=i("dciI"),o={components:{"logg-ed":s.default},data:function(){var t=this;return{disableclick:0,IsSealNo:!0,SealNo:"",loggdetime:"",showlogged:!1,isconfirm:!1,lotnumber:this.$route.params.id,houseid:sessionStorage.getItem("UserWareHouse"),detailinfo:null,titlelable:[{type:"index",width:60,align:"center"},{title:"订单号",key:"TinyOrderID"},{title:"客户编号",key:"EnterCode"},{title:"客户名称",key:"ClientName"},{title:"总条数",key:"Count",width:100},{title:"箱号",slot:"boxcode",align:"center"},{title:"装箱时间",key:"list",align:"center",render:function(e,i){return e("div",{attrs:{class:"subCol"}},[e("ul",t.Notices[i.index].PackDate.map(function(t){return e("li",{},t.PackDate)}))])}}],Notices:[],AllData:[],innerData:[],externalData:[],disabledGroup:"0",disabledIs:!0}},created:function(){window.PhotoUploaded=this.changed},mounted:function(){this.getdetail()},methods:{getdetail:function(){var t=this;Object(l.k)(this.lotnumber).then(function(e){1==e.CuttingOrderStatus?t.disabledIs=!1:t.disabledIs=!0,t.detailinfo=e,t.SealNo=e.HKSealNumber,t.Notices=e.Notices,t.AllData=e.Notices;for(var i=0,a=e.Notices.length;i<a;i++)35==e.Notices[i].Source?t.innerData.push(e.Notices[i]):t.externalData.push(e.Notices[i])})},ok_confirm:function(){var t=this;this.disabledIs=!0;var e=sessionStorage.getItem("userID");Object(l.g)(this.detailinfo.LotNumber,e).then(function(e){if(1==e.success&&200==e.code){t.$Message.success("出库完成");var i=t;setTimeout(function(){i.$store.dispatch("setTransportDetail",!1)},1e3)}else t.$Message.error(e.data);t.disabledIs=!1})},cancel:function(){this.isconfirm=!1},changeradio:function(t){this.Notices="0"==t?this.AllData:"1"==t?this.innerData:this.externalData},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()},SeletUpload:function(t){var e={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.detailinfo.ID,ShipID:this.detailinfo.LotNumber}};Object(a.r)(e)},fromphotos:function(t){var e={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.detailinfo.ID,ShipID:this.detailinfo.LotNumber}};Object(a.c)(e)},clackFilesProcess:function(t){var e={Url:t};Object(a.b)(e)},changed:function(t){var e=t[0],i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8e3};this.detailinfo.Files.push(i)},handleRemove:function(t,e){var i=this,a={id:t.ID};Object(l.o)(a).then(function(e){1==e.Success?(i.detailinfo.Files.splice(i.detailinfo.Files.indexOf(t),1),i.$Message.success("删除成功")):i.$Message.error("删除失败")})},setSealNo:function(){var t=this;if(""!=this.SealNo&&null!=this.SealNo){var e={WaybillID:this.detailinfo.ID,HKSealNumber:this.SealNo};Object(l._31)(e).then(function(e){1==e.success?(t.$Message.success("封条号保存成功"),t.IsSealNo=!0):(t.$Message.error(e.data),t.IsSealNo=!1)})}else this.$Message.warning("请输入封条号")},printfile:function(t){var e=this,i={WaybillID:this.detailinfo.ID,FileName:t,TotalParts:this.detailinfo.TotalParts};this.disableclick="thwt"==t?1:2,Object(l._22)(i).then(function(t){1==t.success?(e.fileprint(t.data),e.$Message.success("打印成功")):e.$Message.error(t.data)});var a=this;setTimeout(function(){a.disableclick=0},500)},fileprint:function(t){var e=Object(a.f)()["文档打印"];e.Url=t;var i=e;Object(a.a)(i)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"TransportDetail",attrs:{id:"TransportDetail"}},[i("p",{staticClass:"details_title"},[t._v("基本信息")]),t._v(" "),i("div",{staticClass:"info_box"},[null!=t.detailinfo?i("Row",[i("Col",{attrs:{span:"7"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输批次：")]),t._v(" "),i("span",{},[t._v("\n            "+t._s(t.detailinfo.LotNumber)+"\n            "),null!=t.detailinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:t.logchange}},[t._v("日志管理")]):t._e()],1)]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("截单状态：")]),t._v(" "),0==t.detailinfo.CuttingOrderStatus?i("span",[t._v("等待")]):t._e(),t._v(" "),1==t.detailinfo.CuttingOrderStatus?i("span",[t._v("已截单")]):t._e(),t._v(" "),2==t.detailinfo.CuttingOrderStatus?i("span",[t._v("已完成")]):t._e()]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",[t._v("封  条  号：")]),t._v(" "),i("span",[0==t.IsSealNo?i("ButtonGroup",[i("Input",{staticStyle:{width:"160px",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入封条号",clearable:""},model:{value:t.SealNo,callback:function(e){t.SealNo="string"==typeof e?e.trim():e},expression:"SealNo"}}),t._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.setSealNo}},[t._v("确定")])],1):i("i",[""!=t.SealNo&&null!=t.SealNo?i("em",[t._v(t._s(t.SealNo))]):i("em",{staticStyle:{color:"red"}},[t._v("暂无封条号")]),t._v(" "),i("Tooltip",{staticClass:"editbtn",attrs:{content:"录入/修改封条号",placement:"right-start",theme:"light"}},[i("Icon",{attrs:{type:"md-create"},on:{click:function(e){t.IsSealNo=!1}}})],1)],1)],1)])]),t._v(" "),i("Col",{attrs:{span:"6"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("承  运  商：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.CarrierName))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输类型：")]),t._v(" "),1==t.detailinfo.IsOnevehicle?i("span",[t._v("包车")]):t._e(),t._v(" "),0==t.detailinfo.IsOnevehicle?i("span",[t._v("普通")]):t._e()]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("司      机：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.Driver))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("联系电话：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.Phone))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("运输时间：")]),t._v(" "),i("span",{},[t._v(t._s(t._f("showDate")(t.detailinfo.DepartDate)))])])]),t._v(" "),i("Col",{attrs:{span:"6"}},[i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  数  量：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalQuantity))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  条  数：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalRecord))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  箱  数：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalParts))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总  金  额：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.Currency)+t._s(t.detailinfo.TotalPrice))])]),t._v(" "),i("p",{staticClass:"infoitem"},[i("label",{},[t._v("总毛重(kg)：")]),t._v(" "),i("span",{},[t._v(t._s(t.detailinfo.TotalWeight))])])]),t._v(" "),i("Col",{attrs:{span:"4"}},[i("div",{staticStyle:{"margin-top":"8px"}},[i("Button",{attrs:{type:"primary",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("传照")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("拍照")]),t._v(" "),i("ul",{staticClass:"frilebox"},t._l(t.detailinfo.Files,function(e){return i("li",[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)}),0)],1)])],1):t._e()],1),t._v(" "),i("p",{staticClass:"details_title"},[t._v("运输清单")]),t._v(" "),i("div",{staticClass:"tablebox"}),t._v(" "),i("div",[i("div",[i("div",{staticClass:"RadioGroupbox"},[i("div",{staticStyle:{width:"60%",float:"left","padding-top":"5px"}},[i("label",[t._v("订单类型：")]),t._v(" "),i("RadioGroup",{staticStyle:{"padding-right":"20px"},on:{"on-change":t.changeradio},model:{value:t.disabledGroup,callback:function(e){t.disabledGroup=e},expression:"disabledGroup"}},[i("Radio",{attrs:{label:"0"}},[t._v("全部")]),t._v(" "),i("Radio",{attrs:{label:"1"}},[t._v("内单")]),t._v(" "),i("Radio",{attrs:{label:"2"}},[t._v("外单")])],1),t._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-print-outline",disabled:1==t.disableclick},on:{click:function(e){return t.printfile("thwt")}}},[t._v("提货委托书")]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"ios-print-outline",disabled:2==t.disableclick},on:{click:function(e){return t.printfile("hwlz")}}},[t._v("货物流转确认书")])],1),t._v(" "),null!=t.detailinfo?i("div",{staticStyle:{width:"35%",float:"right","text-align":"right","padding-right":"50px"}},[i("Button",{attrs:{icon:"md-checkmark",type:"success",disabled:1==t.disabledIs},on:{click:function(e){t.isconfirm=!0}}},[t._v("完成出库")])],1):t._e()]),t._v(" "),i("div",{staticStyle:{clear:"both","padding-top":"15px"}},[i("Table",{attrs:{columns:t.titlelable,data:t.Notices,border:t.Notices.length>0},scopedSlots:t._u([{key:"total",fn:function(e){var i=e.row;return e.index,[t._v(t._s(i.BoxesNotices.length))]}},{key:"boxcode",fn:function(e){var a=e.row;return e.index,[i("div",{staticClass:"subCol"},[i("ul",t._l(a.PackDate,function(e){return i("li",[t._v(t._s(t._f("showboxcode")(e.BoxCode)))])}),0)])]}}])}),t._v(" "),null!=t.detailinfo?i("div",{staticStyle:{"text-align":"center",padding:"30px 0"}},[i("Button",{attrs:{icon:"md-checkmark",type:"success",disabled:1==t.disabledIs},on:{click:function(e){t.isconfirm=!0}}},[t._v("完成出库")])],1):t._e()],1)])]),t._v(" "),i("Modal",{attrs:{title:"提示"},on:{"on-ok":t.ok_confirm,"on-cancel":t.cancel},model:{value:t.isconfirm,callback:function(e){t.isconfirm=e},expression:"isconfirm"}},[i("p",[t._v("是否确认出库")])]),t._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:t.showlogged,callback:function(e){t.showlogged=e},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),t._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[t._v("日志管理")])]),t._v(" "),t.showlogged?i("logg-ed",{key:t.loggdetime,ref:"logged",attrs:{WaybillID:t.detailinfo.ID}}):t._e()],1)],1)},staticRenderFns:[]};var c=i("VU/8")(o,n,!1,function(t){i("jAoI")},null,null);e.default=c.exports},jAoI:function(t,e){}});
//# sourceMappingURL=43.4e6aa0e443087334f878.js.map