webpackJsonp([6,28,35,37,41],{"/AHQ":function(e,t){},I8NF:function(e,t){},Jm0p:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("dciI"),s=r("3PyT"),a={props:["Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Currents","conduct","Files","delCash","EnterType"],data:function(){return{Labeltotal:"",Labelfee:!1,spinShow:!0,Subject:"",Currency:3,RightPrice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"金额",slot:"RightPrice",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,TrackingNumber:"",TrackingNumberarr:[]}},watch:{theUrl:{Currents:function(e,t){this.refreshAudio(),this.url=""!=e?this.Commonconst.recordForwardPrefix+e:""},deep:!0}},mounted:function(){-1!=sessionStorage.getItem("WareHouseName").indexOf("香港")&&"in"==this.EnterType&&(this.Subject="入仓费"),"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(e){return"运单号"===e.title}),1),console.log(this.columns1)):this.columns1[3].title="收款人"},methods:{testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.RightPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(e){if(""!=e){if(0==/^[0-9]*$/.test(e))this.RightPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,e<=10)this.RightPrice=100;else{var t=5*(e-10);this.RightPrice=100+t}}},changePayeeID:function(e){var t=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(i._7)(this.OrderID,e).then(function(e){t.TrackingNumberarr=e.data}))},change_subject:function(e){var t=this;this.Labelfee="处理标签费"==e;var r;r=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(r);var s=r[0];r.length>0?(this.disabledis=!0,this.Currency=s.PayQuote.Currency,this.RightPrice=s.PayQuote.Price):"处理标签费"==e?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==e&&Object(i._7)(this.OrderID,this.PayeeID).then(function(e){t.TrackingNumberarr=e.data})},currency_subject:function(){var e=this;Object(i._48)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this,t="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.RightPrice&&(this.PayeeID!=t&&this.PayerID!=t||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType);else{var r=null;r=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var s=null,a=null;30==this.conduct||35==this.conduct||60==this.conduct?(s="代报关",a="杂费"):(s="代仓储",a="仓储服务费");var n={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal,Anonymity:this.Anonymity,Conduct:s,Source:r,TrackingNumber:this.TrackingNumber,Catalog:a};Object(i._61)(n).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.Labeltotal="",e.Files=[],e.RightPrice="",e.Anonymity="",e.$emit("fatherMethod"),e.$emit("delCash")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var e={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.r)(e)},FormPhoto:function(){var e={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.c)(e)},changedimg:function(e){var t=e[0],r={CustomName:t.FileName,ID:t.FileID,Url:t.Url};this.Files.push(r)},handleRemove:function(e){var t=this,r={id:e.ID};Object(i.o)(r).then(function(r){console.log(r),1==r.Success?(t.$Message.success("删除成功"),t.Files.splice(t.Files.indexOf(e),1)):t.$Message.error("删除失败")})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cashbox"},[r("div",[r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v("收款人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":e.changePayeeID},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayeeID?r("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v("付 款  人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayerID?r("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(2),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":e.change_subject},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}},e._l(this.Subjectarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),"快递运费"==e.Subject&&"out"==e.EnterType?r("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:e.disabledis},model:{value:e.TrackingNumber,callback:function(t){e.TrackingNumber=t},expression:"TrackingNumber"}},e._l(e.TrackingNumberarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.wbCode}},[e._v(e._s(t.wbCode))])}),1)],1):e._e(),e._v(" "),1==e.Labelfee?r("p",{staticClass:"iteminput"},[e._m(4),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(t){return e.Labelchange(e.Labeltotal)}},model:{value:e.Labeltotal,callback:function(t){e.Labeltotal=t},expression:"Labeltotal"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(5),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},model:{value:e.Currency,callback:function(t){e.Currency=t},expression:"Currency"}},e._l(e.Currencyarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(6),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(t){return e.testprice(e.RightPrice)}},model:{value:e.RightPrice,callback:function(t){e.RightPrice=t},expression:"RightPrice"}})],1),e._v(" "),r("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:e.SeletUploadFile}},[e._v("传照")]),e._v(" "),r("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:e.FormPhoto}},[e._v("拍照")]),e._v(" "),r("h3",{staticStyle:{"padding-bottom":"5px"}},[e._v("文件列表：")]),e._v(" "),e.Files.length>0?r("ul",e._l(e.Files,function(t){return r("li",[e._v("\n            "+e._s(t.CustomName)+"\n            "),r("Icon",{attrs:{type:"ios-trash"},on:{click:function(r){return e.handleRemove(t)}}})],1)}),0):r("div",[e._v("暂无数据")]),e._v(" "),r("div",{staticStyle:{padding:"15px 0"}},[r("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:e.submit_btn}},[e._v("提交")])],1)],1),e._v(" "),r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),r("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Currents,"max-height":"380"},scopedSlots:e._u([{key:"type",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Conduct))])]}},{key:"Subject",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Subject))])]}},{key:"TargetName",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.TargetName))])]}},{key:"TrackingNumber",fn:function(t){var i=t.row;return"out"==e.EnterType?[r("span",[e._v(e._s(i.TrackingNumber))])]:void 0}},{key:"RightPrice",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Price))])]}},{key:"createdata",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.CreateDate))])]}},{key:"user",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Creator))])]}}],null,!0)})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("运单号：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("金     额：")])}]};var c=r("VU/8")(a,n,!1,function(e){r("/AHQ")},"data-v-9561ba0e",null);t.default=c.exports},OR8S:function(e,t){},Qdfc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("dciI"),s=r("3PyT"),a={props:["lableName","Currencyarr","Payeearr","Payerarr","OrderID","WaybillID","Records","conduct","delbookeep","EnterType"],data:function(){return{Quantity:"",Labelfee:!1,Subject:[],Currency:3,LeftPrice:"",unitprice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center",width:190},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"计价金额",slot:"valuationCurrency",align:"center"},{title:"结算金额",slot:"SettlementCurrency",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,showAnonymity:!1,TrackingNumber:"",TrackingNumberarr:[],Subjectarr:[],getselectedData:null,Files:[]}},mounted:function(){30==this.conduct||35==this.conduct||60==this.conduct?this.DeclarationJson():this.SorageJson(),"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(e){return"运单号"===e.title}),1)):this.columns1[3].title="收款人"},methods:{DeclarationJson:function(){var e=this;Object(i.P)().then(function(t){e.Subjectarr=t})},SorageJson:function(){var e=this;Object(i._24)().then(function(t){e.Subjectarr=t})},testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.LeftPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},changenumber:function(e){if(""!=e){1==/^[0-9]*$/.test(e)&&e>0?this.LeftPrice=this.Quantity*this.unitprice:(this.Quantity="",this.$Message.error("请输入数量"))}},changePayeeID:function(e){var t=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(i._7)(this.OrderID,e).then(function(e){t.TrackingNumberarr=e.data}))},change_subject:function(e){var t=this;this.Labelfee="处理标签费"==e;var r;r=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(r);var s=r[0];r.length>0?(this.disabledis=!0,this.Currency=s.PayQuote.Currency,this.LeftPrice=s.PayQuote.Price):"处理标签费"==e?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==e&&Object(i._7)(this.OrderID,this.PayeeID).then(function(e){t.TrackingNumberarr=e.data})},changecascader:function(e,t){var r=t[t.length-1];this.Quantity="",1==r.Isquantity?(this.Labelfee=!0,this.unitprice=r.prices,this.LeftPrice=r.prices):(this.Labelfee=!1,this.unitprice=r.prices,this.LeftPrice=r.prices),this.Currency=r.currency,console.log(this.Currency);var i=t.reverse(),s={},a="children";i.forEach(function(e,t){s?(e[a]=s,s=e):(s=e)[a]=[]}),this.getselectedData=s},currency_subject:function(){var e=this;Object(i._48)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this;if(""!=this.LeftPrice&&null!=this.LeftPrice&&""!=this.Subject[0]){if(1==this.Labelfee&&""==this.Quantity)this.$Message.error("请输入数量");else if("A235E8E7773EDB26697E7E771915197D"!=this.PayerID||null!=this.Anonymity&&""!=this.Anonymity){var t=null;t=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var r=null,s=null;30==this.conduct||35==this.conduct||60==this.conduct?(r="代报关",s="杂费"):(r="代仓储",s="仓储服务费");var a={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject[0],WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:r,Source:t,TrackingNumber:this.TrackingNumber,Catalog:s,Data:this.getselectedData};console.log(a),Object(i._61)(a).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject=[],e.Currency="",e.LeftPrice="",e.Quantity="",e.Files=[],e.getselectedData=null,e.$emit("fatherMethod"),e.$emit("delbookeep")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")}else this.$Message.error("请输入必填项")},submit_btnold:function(){var e=this,t="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.LeftPrice&&(this.PayeeID!=t&&this.PayerID!=t||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Quantity)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType)this.$Message.error({content:"选择的科目是快递运费，请选择运单号",duration:3});else{var r=null;r=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var s=null,a=null;30==this.conduct||35==this.conduct||60==this.conduct?(s="代报关",a="杂费"):(s="代仓储",a="仓储服务费");var n={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:s,Source:r,TrackingNumber:this.TrackingNumber,Catalog:a};console.log(n),Object(i._61)(n).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.Quantity="",e.Files=[],e.$emit("fatherMethod"),e.$emit("delbookeep")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var e={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.r)(e)},FormPhoto:function(){var e={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.c)(e)},changed:function(e){var t=e[0],r={CustomName:t.FileName,ID:t.FileID,Url:t.Url};this.Files.push(r)},handleRemove:function(e){var t=this,r={id:e.ID};Object(i.o)(r).then(function(r){console.log(r),1==r.Success?(t.$Message.success("删除成功"),t.Files.splice(t.Files.indexOf(e),1)):t.$Message.error("删除失败")})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cashbox"},[r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v("  收 款 人 ：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":e.changePayeeID},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayeeID?r("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v(" 付 款 人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayerID?r("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("div",{staticClass:"iteminput"},[r("div",{staticStyle:{display:"flex","flex-direction":"row"}},[e._m(2),e._v(" "),r("Cascader",{staticClass:"inputwidth",attrs:{transfer:!0,data:e.Subjectarr},on:{"on-change":e.changecascader},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}})],1)]),e._v(" "),1==e.Labelfee?r("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入数量"},on:{"on-blur":function(t){return e.changenumber(e.Quantity)}},model:{value:e.Quantity,callback:function(t){e.Quantity=t},expression:"Quantity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[r("span",{staticClass:"spanMust"},[e._v("*")]),e._v(e._s(e.lableName)+"金额：")]),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额",disabled:null!=e.unitprice},on:{"on-blur":function(t){return e.testprice(e.LeftPrice)}},model:{value:e.LeftPrice,callback:function(t){e.LeftPrice=t},expression:"LeftPrice"}})],1),e._v(" "),r("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:e.SeletUploadFile}},[e._v("传照")]),e._v(" "),r("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:e.FormPhoto}},[e._v("拍照")]),e._v(" "),r("h3",{staticStyle:{"padding-bottom":"5px"}},[e._v("文件列表：")]),e._v(" "),e.Files.length>0?r("ul",e._l(e.Files,function(t){return r("li",[e._v("\n        "+e._s(t.CustomName)+"\n        "),r("Icon",{attrs:{type:"ios-trash"},on:{click:function(r){return e.handleRemove(t)}}})],1)}),0):r("div",[e._v("暂无数据")]),e._v(" "),r("div",{staticStyle:{padding:"15px 0"}},[r("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:e.submit_btn}},[e._v("提交")])],1)],1),e._v(" "),r("div",{staticClass:"tanlebox"},[r("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),r("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Records,"max-height":"380"},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var i=t.index;return[r("span",[e._v(e._s(i+1))])]}},{key:"type",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Conduct))])]}},{key:"Subject",fn:function(t){var i=t.row;return[""!=i.Descirption?r("span",[e._v(e._s(i.Subject)+" - "+e._s(i.Descirption)+"\n         "),null!=i.Quantity?r("em",[e._v("（"+e._s(i.Quantity)+"）")]):e._e()]):r("span",[e._v("\n          "+e._s(i.Subject)+"\n          "),null!=i.Quantity?r("em",[e._v("（"+e._s(i.Quantity)+"）")]):e._e()])]}},{key:"TargetName",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.TargetName))])]}},{key:"TrackingNumber",fn:function(t){var i=t.row;return"out"==e.EnterType?[r("span",[e._v(e._s(i.TrackingNumber))])]:void 0}},{key:"valuationCurrency",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.RecordPrice))])]}},{key:"SettlementCurrency",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.SettlePrice))])]}},{key:"createdata",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.CreateDate))])]}},{key:"user",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Creator))])]}}],null,!0)})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticStyle:{"line-height":"2"},attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数      量：")])}]};var c=r("VU/8")(a,n,!1,function(e){r("I8NF")},"data-v-d9c3ee64",null);t.default=c.exports},Takf:function(e,t){},cohX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("dciI"),s=r("3PyT"),a={props:["lableName","Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Records","conduct","Files","delbookeep","EnterType"],data:function(){return{Labeltotal:"",Labelfee:!1,Subject:"",Currency:3,LeftPrice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"计价金额",slot:"valuationCurrency",align:"center"},{title:"结算金额",slot:"SettlementCurrency",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,showAnonymity:!1,TrackingNumber:"",TrackingNumberarr:[]}},mounted:function(){"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(e){return"运单号"===e.title}),1)):this.columns1[3].title="收款人"},methods:{testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.LeftPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(e){if(""!=e){if(0==/^[0-9]*$/.test(e))this.LeftPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,e<=10)this.LeftPrice=100;else{var t=5*(e-10);this.LeftPrice=100+t}}},changePayeeID:function(e){var t=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(i._7)(this.OrderID,e).then(function(e){t.TrackingNumberarr=e.data}))},change_subject:function(e){var t=this;this.Labelfee="处理标签费"==e;var r;r=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(r);var s=r[0];r.length>0?(this.disabledis=!0,this.Currency=s.PayQuote.Currency,this.LeftPrice=s.PayQuote.Price):"处理标签费"==e?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==e&&Object(i._7)(this.OrderID,this.PayeeID).then(function(e){t.TrackingNumberarr=e.data})},currency_subject:function(){var e=this;Object(i._48)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this,t="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.LeftPrice&&(this.PayeeID!=t&&this.PayerID!=t||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType)this.$Message.error({content:"选择的科目是快递运费，请选择运单号",duration:3});else{var r=null;r=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var s=null,a=null;30==this.conduct||35==this.conduct||60==this.conduct?(s="代报关",a="杂费"):(s="代仓储",a="仓储服务费");var n={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal,Anonymity:this.Anonymity,Conduct:s,Source:r,TrackingNumber:this.TrackingNumber,Catalog:a};console.log(n),Object(i._61)(n).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.Labeltotal="",e.Files=[],e.$emit("fatherMethod"),e.$emit("delbookeep")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var e={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.r)(e)},FormPhoto:function(){var e={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.c)(e)},changed:function(e){var t=e[0],r={CustomName:t.FileName,ID:t.FileID,Url:t.Url};this.Files.push(r)},handleRemove:function(e){var t=this,r={id:e.ID};Object(i.o)(r).then(function(r){console.log(r),1==r.Success?(t.$Message.success("删除成功"),t.Files.splice(t.Files.indexOf(e),1)):t.$Message.error("删除失败")})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cashbox"},[r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v(" 收款人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":e.changePayeeID},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayeeID?r("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v(" 付  款  人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayerID?r("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(2),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":e.change_subject},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}},e._l(this.Subjectarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),1==e.Labelfee?r("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入数量"},on:{"on-blur":function(t){return e.Labelchange(e.Labeltotal)}},model:{value:e.Labeltotal,callback:function(t){e.Labeltotal=t},expression:"Labeltotal"}})],1):e._e(),e._v(" "),"快递运费"==e.Subject&&"out"==e.EnterType?r("p",{staticClass:"iteminput"},[e._m(4),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:e.disabledis},model:{value:e.TrackingNumber,callback:function(t){e.TrackingNumber=t},expression:"TrackingNumber"}},e._l(e.TrackingNumberarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.wbCode}},[e._v(e._s(t.wbCode))])}),1)],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(5),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:e.disabledis},model:{value:e.Currency,callback:function(t){e.Currency=t},expression:"Currency"}},e._l(e.Currencyarr,function(t,i){return r("Option",{key:t.index,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[r("span",{staticClass:"spanMust"},[e._v("*")]),e._v(e._s(e.lableName)+"金额：")]),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额",disabled:e.disabledis},on:{"on-blur":function(t){return e.testprice(e.LeftPrice)}},model:{value:e.LeftPrice,callback:function(t){e.LeftPrice=t},expression:"LeftPrice"}})],1),e._v(" "),r("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:e.SeletUploadFile}},[e._v("传照")]),e._v(" "),r("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:e.FormPhoto}},[e._v("拍照")]),e._v(" "),r("h3",{staticStyle:{"padding-bottom":"5px"}},[e._v("文件列表：")]),e._v(" "),e.Files.length>0?r("ul",e._l(e.Files,function(t){return r("li",[e._v("\n        "+e._s(t.CustomName)+"\n        "),r("Icon",{attrs:{type:"ios-trash"},on:{click:function(r){return e.handleRemove(t)}}})],1)}),0):r("div",[e._v("暂无数据")]),e._v(" "),r("div",{staticStyle:{padding:"15px 0"}},[r("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:e.submit_btn}},[e._v("提交")])],1)],1),e._v(" "),r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),r("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Records,"max-height":"380"},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var i=t.index;return[r("span",[e._v(e._s(i+1))])]}},{key:"type",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Conduct))])]}},{key:"Subject",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Subject))])]}},{key:"TargetName",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.TargetName))])]}},{key:"TrackingNumber",fn:function(t){var i=t.row;return"out"==e.EnterType?[r("span",[e._v(e._s(i.TrackingNumber))])]:void 0}},{key:"valuationCurrency",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.RecordPrice))])]}},{key:"SettlementCurrency",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.SettlePrice))])]}},{key:"createdata",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.CreateDate))])]}},{key:"user",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Creator))])]}}],null,!0)})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("运单号：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])}]};var c=r("VU/8")(a,n,!1,function(e){r("Takf")},"data-v-b2452768",null);t.default=c.exports},"m+a5":function(e,t){},rxW1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Jm0p"),s=r("cohX"),a=r("w8p2"),n=r("Qdfc"),c=r("dciI"),l=(r("gyMJ"),{components:{Cash:i.default,Bookkeeping:s.default,IncomeCash:a.default,IncomeBookkeeping:n.default},data:function(){return{EnterType:null,conduct:null,otype:"",spinShow:!1,Bookkeepinglabel:"记账（应收）",Cashlabel:"现金（实收）",getformdata:"",Currencyarr:[],Subjectarr:[],Bookkeeping:{Payee:"",Payer:"",Payeearr:[],Payerarr:[]},Cash:{Payee:"",Payer:"",Payeearr:[],Payerarr:[]},Payee:"",Payer:"",OrderID:"",WaybillID:"",Records:[],Currents:[],Source:"",lableName:"",CashFile:[],BookeepFile:[]}},created:function(){this.EnterType=this.$route.query.type,this.otype=this.$route.query.otype,this.OrderID=this.$route.query.OrderID,this.WaybillID=this.$route.query.webillID,this.Source=this.$route.query.Source,this.conduct=this.$route.query.conduct,this.changtabledata(),console.log(this.conduct),window.PhotoUploaded=this.changedimg},mounted:function(){"in"==this.$route.query.type?(this.Bookkeepinglabel="记账",this.Cashlabel="现金",this.lableName="应收",this.getlistdata(this.$route.query.type),this.IncomeParters(this.OrderID)):(this.Bookkeepinglabel="记账",this.Cashlabel="现金",this.lableName="应付",this.getlistdata(this.$route.query.type),this.OutcomeParters(this.OrderID)),this.currency_subject(),this.getsubject(this.$route.query.type,this.conduct)},methods:{changetab:function(e){this.changtabledata()},changtabledata:function(){"in"==this.$route.query.type?this.IncomeRecords(this.OrderID):this.OutcomeRecords(this.OrderID)},currency_subject:function(){var e=this;Object(c._48)().then(function(t){e.Currencyarr=t.obj})},getsubject:function(e,t){var r=this;console.log(t);var i="",s="";30==t||35==t||60==t?(i="代报关",s=!0):(i="代仓储",s=!1);var a={type:e,conduct:i,isCustoms:s};console.log(a),Object(c._60)(a).then(function(e){r.Subjectarr=e})},getlistdata:function(e){"in"==e?this.IncomeRecords(this.$route.query.OrderID):this.OutcomeRecords(this.$route.query.OrderID)},IncomeRecords:function(e){var t=this;Object(c._12)(e).then(function(e){console.log(e),1==e.success&&(t.Records=e.data.Records,t.Currents=e.data.Currents)})},OutcomeRecords:function(e){var t=this;Object(c._21)(e).then(function(e){1==e.success&&(t.Records=e.data.Records,t.Currents=e.data.Currents)})},IncomeParters:function(e){var t=this;Object(c._11)(e).then(function(e){t.Bookkeeping.Payeearr=e.data.Record.Payees,t.Bookkeeping.Payerarr=e.data.Record.Payers,t.Cash.Payeearr=e.data.Current.Payees,t.Cash.Payerarr=e.data.Current.Payers,t.$refs.IncomeCash.PayeeID=e.data.Current.Payees[0].ID,t.$refs.IncomeCash.PayerID=e.data.Current.Payers[0].ID,t.$refs.IncomeBookkeeping.PayeeID=e.data.Record.Payees[0].ID,t.$refs.IncomeBookkeeping.PayerID=e.data.Record.Payers[0].ID})},OutcomeParters:function(e){var t=this;Object(c._20)(e).then(function(e){t.Bookkeeping.Payeearr=e.data.Record.Payees,t.Bookkeeping.Payerarr=e.data.Record.Payers,t.Cash.Payeearr=e.data.Current.Payees,t.Cash.Payerarr=e.data.Current.Payers,t.$refs.Cash.PayeeID=e.data.Current.Payees[0].ID,t.$refs.Cash.PayerID=e.data.Current.Payers[0].ID,t.$refs.Bookkeeping.PayeeID=e.data.Record.Payees[0].ID,t.$refs.Bookkeeping.PayerID=e.data.Record.Payers[0].ID})},changedimg:function(e){var t=e[0],r={CustomName:t.FileName,ID:t.FileID,Url:t.Url};"Cash"==t.SessionID?this.CashFile.push(r):this.BookeepFile.push(r)},delbookeep:function(){this.BookeepFile=[]},delCash:function(){this.CashFile=[]}}}),o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"cashbox"},[r("Tabs",{attrs:{value:"Bookkeeping",animated:!1},on:{"on-click":e.changetab}},[r("TabPane",{attrs:{label:e.Bookkeepinglabel,name:"Bookkeeping"}},[r("Spin",{directives:[{name:"show",rawName:"v-show",value:1==e.spinShow,expression:"spinShow==true"}],attrs:{size:"large",fix:""}}),e._v(" "),"out"==this.$route.query.type?r("Bookkeeping",{directives:[{name:"show",rawName:"v-show",value:0==e.spinShow,expression:"spinShow==false"}],ref:"Bookkeeping",attrs:{lableName:e.lableName,Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Bookkeeping.Payeearr,Payerarr:e.Bookkeeping.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Records:e.Records,conduct:e.conduct,EnterType:e.EnterType,Files:e.BookeepFile},on:{"update:Records":function(t){e.Records=t},"update:records":function(t){e.Records=t},fatherMethod:e.changtabledata,delbookeep:e.delbookeep}}):r("div",[r("IncomeBookkeeping",{directives:[{name:"show",rawName:"v-show",value:0==e.spinShow,expression:"spinShow==false"}],ref:"IncomeBookkeeping",attrs:{lableName:e.lableName,Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Bookkeeping.Payeearr,Payerarr:e.Bookkeeping.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Records:e.Records,conduct:e.conduct,EnterType:e.EnterType,Files:e.BookeepFile},on:{"update:Records":function(t){e.Records=t},"update:records":function(t){e.Records=t},fatherMethod:e.changtabledata,delbookeep:e.delbookeep}})],1)],1),e._v(" "),r("TabPane",{attrs:{label:e.Cashlabel,name:"Cash"}},["out"==this.$route.query.type?r("Cash",{ref:"Cash",attrs:{Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Cash.Payeearr,Payerarr:e.Cash.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Currents:e.Currents,conduct:e.conduct,EnterType:e.EnterType,Files:e.CashFile},on:{"update:Currents":function(t){e.Currents=t},"update:currents":function(t){e.Currents=t},fatherMethod:e.changtabledata,delCash:e.delCash}}):r("div",[r("IncomeCash",{ref:"IncomeCash",attrs:{Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Cash.Payeearr,Payerarr:e.Cash.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Currents:e.Currents,conduct:e.conduct,EnterType:e.EnterType,Files:e.CashFile},on:{"update:Currents":function(t){e.Currents=t},"update:currents":function(t){e.Currents=t},fatherMethod:e.changtabledata,delCash:e.delCash}})],1)],1)],1)],1)])},staticRenderFns:[]};var u=r("VU/8")(l,o,!1,function(e){r("m+a5")},"data-v-deb9db88",null);t.default=u.exports},w8p2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("dciI"),s=r("3PyT"),a={props:["Currencyarr","Payeearr","Payerarr","OrderID","WaybillID","Currents","conduct","Files","delCash","EnterType"],data:function(){return{Quantity:"",Labelfee:!1,spinShow:!0,Subject:[],Currency:3,RightPrice:"",unitprice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center",width:180},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"金额",slot:"RightPrice",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,TrackingNumber:"",TrackingNumberarr:[],Subjectarr:[],getselectedData:null}},watch:{theUrl:{Currents:function(e,t){this.refreshAudio(),this.url=""!=e?this.Commonconst.recordForwardPrefix+e:""},deep:!0}},mounted:function(){30==this.conduct||35==this.conduct||60==this.conduct?this.DeclarationJson():this.SorageJson(),"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(e){return"运单号"===e.title}),1),console.log(this.columns1)):this.columns1[3].title="收款人"},methods:{DeclarationJson:function(){var e=this;Object(i.P)().then(function(t){e.Subjectarr=t})},SorageJson:function(){var e=this;Object(i._24)().then(function(t){e.Subjectarr=t})},testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.RightPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},changenumber:function(e){if(""!=e){1==/^[0-9]*$/.test(e)&&e>0?this.RightPrice=this.Quantity*this.unitprice:(this.Quantity="",this.$Message.error("请输入数量"))}},changePayeeID:function(e){var t=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(i._7)(this.OrderID,e).then(function(e){t.TrackingNumberarr=e.data}))},changecascader:function(e,t){var r=t[t.length-1];this.Quantity="",1==r.Isquantity?(this.Labelfee=!0,this.unitprice=r.prices,this.RightPrice=r.prices):(this.Labelfee=!1,this.unitprice=r.prices,this.RightPrice=r.prices),this.Currency=r.currency,console.log(this.Currency);var i=t.reverse(),s={},a="children";i.forEach(function(e,t){s?(e[a]=s,s=e):(s=e)[a]=[]}),this.getselectedData=s},change_subject:function(e){var t=this;this.Labelfee="处理标签费"==e;var r;r=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(r);var s=r[0];r.length>0?(this.disabledis=!0,this.Currency=s.PayQuote.Currency,this.RightPrice=s.PayQuote.Price):"处理标签费"==e?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==e&&Object(i._7)(this.OrderID,this.PayeeID).then(function(e){t.TrackingNumberarr=e.data})},currency_subject:function(){var e=this;Object(i._48)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this;if(console.log(this.Subject[0]),""!=this.RightPrice&&null!=this.RightPrice&&""!=this.Subject[0]){if(1==this.Labelfee&&""==this.Quantity)this.$Message.error("请输入数量");else if("A235E8E7773EDB26697E7E771915197D"!=this.PayerID||null!=this.Anonymity&&""!=this.Anonymity){var t=null;t=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var r=null,s=null;30==this.conduct||35==this.conduct||60==this.conduct?(r="代报关",s="杂费"):(r="代仓储",s="仓储服务费");var a={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject[0],WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:r,Source:t,TrackingNumber:this.TrackingNumber,Catalog:s,Data:this.getselectedData};console.log(this.fee),Object(i._61)(a).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject=[],e.Currency=3,e.LeftPrice="",e.Quantity="",e.RightPrice="",e.Anonymity="",e.$emit("fatherMethod"),e.$emit("delCash")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")}else this.$Message.error("请输入必填项")},submit_btnold:function(){var e=this,t="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.RightPrice&&(this.PayeeID!=t&&this.PayerID!=t||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Quantity)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType);else{var r=null;r=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var s=null,a=null;30==this.conduct||35==this.conduct||60==this.conduct?(s="代报关",a="杂费"):(s="代仓储",a="仓储服务费");var n={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:s,Source:r,TrackingNumber:this.TrackingNumber,Catalog:a};Object(i._61)(n).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.Quantity="",e.Files=[],e.RightPrice="",e.Anonymity="",e.$emit("fatherMethod"),e.$emit("delCash")):e.$Message.error(t.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var e={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.r)(e)},FormPhoto:function(){var e={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(s.c)(e)},changedimg:function(e){var t=e[0],r={CustomName:t.FileName,ID:t.FileID,Url:t.Url};this.Files.push(r)},handleRemove:function(e){var t=this,r={id:e.ID};Object(i.o)(r).then(function(r){console.log(r),1==r.Success?(t.$Message.success("删除成功"),t.Files.splice(t.Files.indexOf(e),1)):t.$Message.error("删除失败")})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cashbox"},[r("div",[r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v("收款人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":e.changePayeeID},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayeeID?r("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[r("label",{attrs:{for:""}},[e._v("付 款  人：")]),e._v(" "),r("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,i){return r("Option",{key:i,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==e.PayerID?r("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:e.Anonymity,callback:function(t){e.Anonymity=t},expression:"Anonymity"}})],1):e._e(),e._v(" "),r("div",{staticClass:"iteminput"},[r("div",{staticStyle:{display:"flex","flex-direction":"row"}},[e._m(2),e._v(" "),r("Cascader",{staticClass:"inputwidth",attrs:{transfer:!0,data:e.Subjectarr},on:{"on-change":e.changecascader},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}})],1)]),e._v(" "),1==e.Labelfee?r("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入数量"},on:{"on-blur":function(t){return e.changenumber(e.Quantity)}},model:{value:e.Quantity,callback:function(t){e.Quantity=t},expression:"Quantity"}})],1):e._e(),e._v(" "),r("p",{staticClass:"iteminput"},[e._m(4),e._v(" "),r("Input",{staticClass:"inputwidth",attrs:{disabled:null!=e.unitprice,placeholder:"请输入金额"},on:{"on-blur":function(t){return e.testprice(e.RightPrice)}},model:{value:e.RightPrice,callback:function(t){e.RightPrice=t},expression:"RightPrice"}})],1),e._v(" "),r("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:e.SeletUploadFile}},[e._v("传照")]),e._v(" "),r("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:e.FormPhoto}},[e._v("拍照")]),e._v(" "),r("h3",{staticStyle:{"padding-bottom":"5px"}},[e._v("文件列表：")]),e._v(" "),e.Files.length>0?r("ul",e._l(e.Files,function(t){return r("li",[e._v("\n            "+e._s(t.CustomName)+"\n            "),r("Icon",{attrs:{type:"ios-trash"},on:{click:function(r){return e.handleRemove(t)}}})],1)}),0):r("div",[e._v("暂无数据")]),e._v(" "),r("div",{staticStyle:{padding:"15px 0"}},[r("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:e.submit_btn}},[e._v("提交")])],1)],1),e._v(" "),r("div",[r("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),r("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Currents,"max-height":"380"},scopedSlots:e._u([{key:"type",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Conduct))])]}},{key:"Subject",fn:function(t){var i=t.row;return[""!=i.Descirption?r("span",[e._v(e._s(i.Subject)+" - "+e._s(i.Descirption))]):r("span",[e._v(e._s(i.Subject))])]}},{key:"TargetName",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.TargetName))])]}},{key:"TrackingNumber",fn:function(t){var i=t.row;return"out"==e.EnterType?[r("span",[e._v(e._s(i.TrackingNumber))])]:void 0}},{key:"RightPrice",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Price))])]}},{key:"createdata",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.CreateDate))])]}},{key:"user",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(i.Creator))])]}}],null,!0)})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticStyle:{"line-height":"2"},attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("金     额：")])}]};var c=r("VU/8")(a,n,!1,function(e){r("OR8S")},"data-v-a93dd916",null);t.default=c.exports}});
//# sourceMappingURL=6.d59834d1c2f6ed52a269.js.map