webpackJsonp([53],{NCgN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("dciI"),i={inject:["reload"],data:function(){return{carrierList:[],listTitle:[{type:"index",width:60,align:"center"},{title:"运输批次号",slot:"LotNumber"},{title:"承运商",slot:"CarrierName"},{title:"车牌号",slot:"CarNumber"},{title:"运输时间",slot:"DepartDate"},{title:"司机姓名",slot:"Driver"},{title:"运输类型",slot:"WaybillTypeDes"},{title:"总件数",slot:"BoxNumber"},{title:"已上架数",slot:"UpperNumber"},{title:"操作",slot:"action",width:200,align:"center"}],listData:[],loading:!1,total:0,carrierName:"",searchData:{WhID:sessionStorage.getItem("UserWareHouse"),LotNumber:"",CarNumber:"",WaybillExcuteStatus:"10",Code:"",TinyOrderID:"",PageSize:20,PageIndex:1,StartDate:null,EndDate:null,Status:!1},getDataInterval:null,tableHeight:500}},beforeRouteUpdate:function(t,e,a){"/Szlist/0"==t.path&&0==this.showTransportDetail?this.reload():"/Szlist/1"==t.path&&0==this.showTransportDetail&&this.reload(),a()},computed:{showTransportDetail:{get:function(){return this.$store.state.common.TransportDetail},set:function(t){}},showPageArr:function(){return this.$store.state.common.PageArr}},created:function(){this.loading=!0,this.getListData()},mounted:function(){this.setNav(),this.tableHeight=window.innerHeight-this.$refs.table.$el.offsetTop-100},methods:{setNav:function(){this.$store.dispatch("setnvadata",[{title:"待入库",href:"/TransportList"}])},actionBtn:function(t){this.$store.dispatch("setTransportDetail",!0);var e=null;e=0!=this.$route.params.Type,this.$router.push({path:"/Szlist/SzDetail/"+t+"?status="+e})},DrawerState:function(t){1==t?this.$store.dispatch("setTransportDetail",!0):(this.$store.dispatch("setTransportDetail",!1),this.$router.go(-1))},Carriers:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;Carriers().then(function(e){t.carrierList=e.obj})}),getListData:function(){var t=this;console.log(this.$route.params.Type),0==this.$route.params.Type?this.searchData.Status=!1:this.searchData.Status=!0,Object(r._46)(this.searchData).then(function(e){console.log(e),t.listData=e.obj.Data,t.total=e.obj.Total,t.loading=!1})},changePage:function(t){this.searchData.PageIndex=t,this.loading=!0,this.getListData()},changePageSize:function(t){this.loading=!0,this.searchData.PageSize=t,this.getListData()},search:function(){console.log(this.searchData),this.searchData.PageIndex=1,this.loading=!0,this.getListData()},reset:function(){this.searchData.LotNumber="",this.searchData.CarNumber="",this.searchData.Code="",this.searchData.TinyOrderID="",this.searchData.PageIndex=1,this.searchData.StartDate=null,this.searchData.EndDate=null,this.loading=!0,this.$refs.element.handleClear(),this.getListData()},changeData:function(t){this.searchData.StartDate=t[0],this.searchData.EndDate=t[1]}},beforeDestroy:function(){clearInterval(this.getDataInterval)}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb20"},[a("label",[t._v("运输批次号：")]),a("Input",{staticClass:"input_width",attrs:{placeholder:"运输批次号"},model:{value:t.searchData.LotNumber,callback:function(e){t.$set(t.searchData,"LotNumber","string"==typeof e?e.trim():e)},expression:"searchData.LotNumber"}}),t._v(" "),a("label",[t._v("订单号：")]),a("Input",{staticClass:"input_width",attrs:{placeholder:"订单号"},model:{value:t.searchData.TinyOrderID,callback:function(e){t.$set(t.searchData,"TinyOrderID","string"==typeof e?e.trim():e)},expression:"searchData.TinyOrderID"}}),t._v(" "),a("label",[t._v("车牌号：")]),a("Input",{staticClass:"input_width",attrs:{placeholder:"车牌号"},model:{value:t.searchData.CarNumber,callback:function(e){t.$set(t.searchData,"CarNumber","string"==typeof e?e.trim():e)},expression:"searchData.CarNumber"}}),t._v(" "),a("label",[t._v("运输时间：")]),t._v(" "),a("DatePicker",{ref:"element",staticClass:"input_width",attrs:{clearable:!1,type:"daterange",placement:"bottom-end",placeholder:"运输时间"},on:{"on-change":t.changeData}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.reset}},[t._v("清空")])],1),t._v(" "),a("div",[a("Table",{ref:"table",attrs:{columns:t.listTitle,data:t.listData,loading:t.loading,"max-height":t.tableHeight},scopedSlots:t._u([{key:"LotNumber",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.LotNumber))])]}},{key:"CarrierName",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.CarrierName))])]}},{key:"DepartDate",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(t._f("showDate")(r.Waybill.DepartDate)))])]}},{key:"Driver",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.Driver))])]}},{key:"WaybillTypeDes",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.Type))])]}},{key:"BoxNumber",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.TotalParts))])]}},{key:"UpperNumber",fn:function(e){var r=e.row;return e.index,[a("p",[t._v(t._s(r.Waybill.ShelveQuantity))])]}},{key:"CarNumber",fn:function(e){var r=e.row;return e.index,[a("span",[t._v(t._s(r.Waybill.CarNumber1))]),t._v("    \n        "),a("span",[t._v(t._s(r.Waybill.CarNumber2))])]}},{key:"action",fn:function(e){var r=e.row;return e.index,[a("Button",{attrs:{type:"primary",icon:"md-create",size:"small"},on:{click:function(e){return t.actionBtn(r.Waybill.ID)}}},[t._v("详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"pages"},[a("Page",{attrs:{"show-total":"","show-elevator":"","show-sizer":"",total:t.total,"page-size":t.searchData.PageSize,current:t.searchData.PageIndex,"page-size-opts":t.showPageArr},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t._v(" "),a("Drawer",{attrs:{closable:!0,width:80},on:{"on-visible-change":t.DrawerState},model:{value:t.showTransportDetail,callback:function(e){t.showTransportDetail=e},expression:"showTransportDetail"}},[a("router-view")],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("QbDK")},"data-v-6b27d942",null);e.default=n.exports},QbDK:function(t,e){}});
//# sourceMappingURL=53.df071fd012560f0d9063.js.map