webpackJsonp([28],{I8NF:function(t,e){},Qdfc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("dciI"),n=i("3PyT"),r={props:["lableName","Currencyarr","Payeearr","Payerarr","OrderID","WaybillID","Records","conduct","delbookeep","EnterType"],data:function(){return{Quantity:"",Labelfee:!1,Subject:[],Currency:3,LeftPrice:"",unitprice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center",width:190},{title:"收款人",slot:"TargetName",align:"center"},{title:"运单号",slot:"TrackingNumber",align:"center"},{title:"计价金额",slot:"valuationCurrency",align:"center"},{title:"结算金额",slot:"SettlementCurrency",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null,showAnonymity:!1,TrackingNumber:"",TrackingNumberarr:[],Subjectarr:[],getselectedData:null,Files:[]}},mounted:function(){30==this.conduct||35==this.conduct||60==this.conduct?this.DeclarationJson():this.SorageJson(),"in"==this.EnterType?(this.columns1[3].title="付款人",this.columns1.splice(this.columns1.findIndex(function(t){return"运单号"===t.title}),1)):this.columns1[3].title="收款人"},methods:{DeclarationJson:function(){var t=this;Object(s.P)().then(function(e){t.Subjectarr=e})},SorageJson:function(){var t=this;Object(s._24)().then(function(e){t.Subjectarr=e})},testprice:function(t){if(""!=t){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)&&(this.LeftPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},changenumber:function(t){if(""!=t){1==/^[0-9]*$/.test(t)&&t>0?this.LeftPrice=this.Quantity*this.unitprice:(this.Quantity="",this.$Message.error("请输入数量"))}},changePayeeID:function(t){var e=this;"快递运费"==this.Subject&&(this.TrackingNumber="",Object(s._7)(this.OrderID,t).then(function(t){e.TrackingNumberarr=t.data}))},change_subject:function(t){var e=this;this.Labelfee="处理标签费"==t;var i;i=this.Subjectarr.filter(function(e){return e.Name==t&&null!=e.PayQuote.Price}),console.log(i);var n=i[0];i.length>0?(this.disabledis=!0,this.Currency=n.PayQuote.Currency,this.LeftPrice=n.PayQuote.Price):"处理标签费"==t?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice=""),"快递运费"==t&&Object(s._7)(this.OrderID,this.PayeeID).then(function(t){e.TrackingNumberarr=t.data})},changecascader:function(t,e){var i=e[e.length-1];this.Quantity="",1==i.Isquantity?(this.Labelfee=!0,this.unitprice=i.prices,this.LeftPrice=i.prices):(this.Labelfee=!1,this.unitprice=i.prices,this.LeftPrice=i.prices),this.Currency=i.currency,console.log(this.Currency);var s=e.reverse(),n={},r="children";s.forEach(function(t,e){n?(t[r]=n,n=t):(n=t)[r]=[]}),this.getselectedData=n},currency_subject:function(){var t=this;Object(s._48)().then(function(e){t.Currencyarr=e.obj})},submit_btn:function(){var t=this;if(""!=this.LeftPrice&&null!=this.LeftPrice&&""!=this.Subject[0]){if(1==this.Labelfee&&""==this.Quantity)this.$Message.error("请输入数量");else if("A235E8E7773EDB26697E7E771915197D"!=this.PayerID||null!=this.Anonymity&&""!=this.Anonymity){var e=null;e=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var i=null,n=null;30==this.conduct||35==this.conduct||60==this.conduct?(i="代报关",n="杂费"):(i="代仓储",n="仓储服务费");var r={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject[0],WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:i,Source:e,TrackingNumber:this.TrackingNumber,Catalog:n,Data:this.getselectedData};console.log(r),Object(s._61)(r).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.Subject=[],t.Currency="",t.LeftPrice="",t.Quantity="",t.Files=[],t.getselectedData=null,t.$emit("fatherMethod"),t.$emit("delbookeep")):t.$Message.error(e.data)})}else this.$Message.error("请输入必填项")}else this.$Message.error("请输入必填项")},submit_btnold:function(){var t=this,e="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.LeftPrice&&(this.PayeeID!=e&&this.PayerID!=e||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Quantity)this.$Message.error("请输入处理标签的个数");else if("快递运费"==this.Subject&&""==this.TrackingNumber&&"out"==this.EnterType)this.$Message.error({content:"选择的科目是快递运费，请选择运单号",duration:3});else{var i=null;i=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var n=null,r=null;30==this.conduct||35==this.conduct||60==this.conduct?(n="代报关",r="杂费"):(n="代仓储",r="仓储服务费");var a={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Quantity,Anonymity:this.Anonymity,Conduct:n,Source:i,TrackingNumber:this.TrackingNumber,Catalog:r};console.log(a),Object(s._61)(a).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.Subject="",t.Currency=3,t.LeftPrice="",t.Quantity="",t.Files=[],t.$emit("fatherMethod"),t.$emit("delbookeep")):t.$Message.error(e.data)})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var t={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(n.r)(t)},FormPhoto:function(){var t={SessionID:"Bookkeeping",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(n.c)(t)},changed:function(t){var e=t[0],i={CustomName:e.FileName,ID:e.FileID,Url:e.Url};this.Files.push(i)},handleRemove:function(t){var e=this,i={id:t.ID};Object(s.o)(i).then(function(i){console.log(i),1==i.Success?(e.$Message.success("删除成功"),e.Files.splice(e.Files.indexOf(t),1)):e.$Message.error("删除失败")})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cashbox"},[i("div",[i("h1",{staticClass:"setpadding_bottom"},[t._v("费用录入")]),t._v(" "),i("p",{staticClass:"iteminput"},[i("label",{attrs:{for:""}},[t._v("  收 款 人 ：")]),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},on:{"on-change":t.changePayeeID},model:{value:t.PayeeID,callback:function(e){t.PayeeID=e},expression:"PayeeID"}},t._l(this.Payeearr,function(e,s){return i("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayeeID?i("p",{staticClass:"iteminput"},[t._m(0),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),i("p",{staticClass:"iteminput"},[i("label",{attrs:{for:""}},[t._v(" 付 款 人：")]),t._v(" "),i("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:t.PayerID,callback:function(e){t.PayerID=e},expression:"PayerID"}},t._l(this.Payerarr,function(e,s){return i("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayerID?i("p",{staticClass:"iteminput"},[t._m(1),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),i("div",{staticClass:"iteminput"},[i("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t._m(2),t._v(" "),i("Cascader",{staticClass:"inputwidth",attrs:{transfer:!0,data:t.Subjectarr},on:{"on-change":t.changecascader},model:{value:t.Subject,callback:function(e){t.Subject=e},expression:"Subject"}})],1)]),t._v(" "),1==t.Labelfee?i("p",{staticClass:"iteminput"},[t._m(3),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入数量"},on:{"on-blur":function(e){return t.changenumber(t.Quantity)}},model:{value:t.Quantity,callback:function(e){t.Quantity=e},expression:"Quantity"}})],1):t._e(),t._v(" "),i("p",{staticClass:"iteminput"},[i("label",{attrs:{for:""}},[i("span",{staticClass:"spanMust"},[t._v("*")]),t._v(t._s(t.lableName)+"金额：")]),t._v(" "),i("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额",disabled:null!=t.unitprice},on:{"on-blur":function(e){return t.testprice(t.LeftPrice)}},model:{value:t.LeftPrice,callback:function(e){t.LeftPrice=e},expression:"LeftPrice"}})],1),t._v(" "),i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:t.SeletUploadFile}},[t._v("传照")]),t._v(" "),i("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:t.FormPhoto}},[t._v("拍照")]),t._v(" "),i("h3",{staticStyle:{"padding-bottom":"5px"}},[t._v("文件列表：")]),t._v(" "),t.Files.length>0?i("ul",t._l(t.Files,function(e){return i("li",[t._v("\n        "+t._s(e.CustomName)+"\n        "),i("Icon",{attrs:{type:"ios-trash"},on:{click:function(i){return t.handleRemove(e)}}})],1)}),0):i("div",[t._v("暂无数据")]),t._v(" "),i("div",{staticStyle:{padding:"15px 0"}},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:t.submit_btn}},[t._v("提交")])],1)],1),t._v(" "),i("div",{staticClass:"tanlebox"},[i("h1",{staticClass:"setpadding_bottom"},[t._v("流水列表")]),t._v(" "),i("Table",{attrs:{stripe:"",columns:t.columns1,data:t.Records,"max-height":"380"},scopedSlots:t._u([{key:"indexs",fn:function(e){e.row;var s=e.index;return[i("span",[t._v(t._s(s+1))])]}},{key:"type",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Conduct))])]}},{key:"Subject",fn:function(e){var s=e.row;return[""!=s.Descirption?i("span",[t._v(t._s(s.Subject)+" - "+t._s(s.Descirption)+"\n         "),null!=s.Quantity?i("em",[t._v("（"+t._s(s.Quantity)+"）")]):t._e()]):i("span",[t._v("\n          "+t._s(s.Subject)+"\n          "),null!=s.Quantity?i("em",[t._v("（"+t._s(s.Quantity)+"）")]):t._e()])]}},{key:"TargetName",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.TargetName))])]}},{key:"TrackingNumber",fn:function(e){var s=e.row;return"out"==t.EnterType?[i("span",[t._v(t._s(s.TrackingNumber))])]:void 0}},{key:"valuationCurrency",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.RecordPrice))])]}},{key:"SettlementCurrency",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.SettlePrice))])]}},{key:"createdata",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.CreateDate))])]}},{key:"user",fn:function(e){var s=e.row;return[i("span",[t._v(t._s(s.Creator))])]}}],null,!0)})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{"line-height":"2"},attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数      量：")])}]};var c=i("VU/8")(r,a,!1,function(t){i("I8NF")},"data-v-d9c3ee64",null);e.default=c.exports}});
//# sourceMappingURL=28.dba9db30912358357182.js.map