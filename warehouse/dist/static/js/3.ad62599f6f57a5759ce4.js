webpackJsonp([3],{Uxjx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("bOdI"),a=n.n(r),i=n("dciI"),l=n("gyMJ"),u=n("Qcdk"),s={name:"HKNothingEnter",props:["Storagesarr","Storehouselist","status","EnterCode","orderID"],data:function(){var e=this;return{options3:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},saleDate:"",isclickbtn:!1,itemSortingID:null,newboxcode:null,newboxcodeback:null,oldboxcode:null,boxingarr:[],boxcodetype:"1",showEdit:!1,Conveyingplace:[],Storages:this.Storagesarr,titlename:"",columns7:[{title:"",slot:"indexs",width:30,align:"center"},{title:" ",slot:"action",width:100,align:"center"},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"型号")])},key:"PartNumber",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.Product.PartNumber},on:{"on-change":function(e){n.row.Product.PartNumber=e.target.value,o.Storages[n.index]=n.row},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(n.row.Product.PartNumber=o.trim(t),o.Storages[n.index]=n.row):(n.row.Product.PartNumber=null,o.Storages[n.index]=n.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"品牌")])},key:"Manufacturer",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.Product.Manufacturer},on:{"on-change":function(e){n.row.Product.Manufacturer=e.target.value,o.Storages[n.index]=n.row},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(n.row.Product.Manufacturer=o.trim(t),o.Storages[n.index]=n.row):(n.row.Product.Manufacturer=null,o.Storages[n.index]=n.row)}}})}},{title:"批号",key:"DateCode",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.DateCode},on:{"on-change":function(e){n.row.DateCode=e.target.value,o.Storages[n.index]=n.row},"on-blur":function(e){var t=e.target.value;null==t&&""==t||(n.row.DateCode=o.trim(t),o.Storages[n.index]=n.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"到货数量")])},key:"Quantity",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.CurrentQuantity},on:{"on-change":function(e){if(""!=e.target.value){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(n.row.CurrentQuantity=e.target.value,o.Storages[n.index]=n.row):(o.$Message.error("只能输入数量"),e.target.value=null,n.row.CurrentQuantity=null,o.Storages[n.index]=n.row)}},"on-blur":function(e){var t=e.target.value;null!=t&&""!=t?(n.row.CurrentQuantity=o.trim(t),o.Storages[n.index]=n.row):(n.row.CurrentQuantity=null,o.Storages[n.index]=n.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"原产地")])},slot:"Place"},{renderHeader:function(t,n){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},1==e.status?"库位":"箱号")])},slot:"ShelveID",align:"center",width:250},{title:"体积(cm³)",key:"Volume",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.Volume},on:{"on-change":function(e){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(n.row.Volume=e.target.value,o.Storages[n.index]=n.row):(n.row.Volume="",e.target.value="",o.Storages[n.index]=n.row)},"on-blur":function(){var e=event.target.value;""==e&&null==e||(1==/^\d+(\.\d{0,2})?$/.test(e)?(n.row.Volume=o.trim(e),o.Storages[n.index]=n.row):(o.$Message.error("只能输入数字,包括两位数的小数点"),n.row.Volume=null,event.target.value=null,o.Storages[n.index]=n.row))}}})}},{renderHeader:function(t,n){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},1==e.status?"":"*"),t("span",{},"毛重(kg)")])},key:"Weight",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.Weight,autofocus:!0},on:{"on-change":function(e){var t=o.trim(e.target.value);""!=t&&null!=t&&(1==/^\d+(\.\d{0,2})?$/.test(t)?(n.row.Weight=t,o.Storages[n.index]=n.row):(n.row.Weight="",e.target.value="",o.Storages[n.index]=n.row))},"on-blur":function(e){var t=o.trim(e.target.value);if(console.log(t),null!=t&&""!=t){1==/^\d+(\.\d{0,2})?$/.test(t)?(n.row.Weight=t,o.Storages[n.index]=n.row):(o.$Message.error("只能输入数字,包括两位数的小数点"),n.row.Weight=null,e.target.value=null,o.Storages[n.index]=n.row)}else n.row.Weight=null,e.target.value=null,o.Storages[n.index]=n.row},"on-enter":function(t){var r=o.trim(t.target.value);if(1==/^\d+(\.\d{0,2})?$/.test(r)){n.row.Weight=r,o.Storages[n.index]=n.row;var a=n.row.Input,i=n.row.Product,l={Quantity:n.row.Quantity,inputsID:a.ID,Catalog:i.Catalog,PartNumber:i.PartNumber,Manufacturer:i.Manufacturer,Packing:i.Packing,PackageCase:i.PackageCase,origin:a.Origin},u=[];u.push(l);var s=GetPrinterDictionary()["产品标签"],c=-1!=s.Url.indexOf("http");s.Url=1==c?s.Url:e.printurl+s.Url,TemplatePrint({setting:s,data:u})}else o.$Message.error("只能输入数字,包括两位数的小数点"),n.row.Weight=null,t.target.value=null,o.Storages[n.index]=n.row}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"异常原因")])},key:"imglist",align:"center",render:function(t,n){var o=e;return t("Input",{props:{value:n.row.Summary},on:{"on-change":function(e){n.row.Summary=e.target.value,o.Storages[n.index]=n.row;var t=e.target.value;null!=t&&""!=t?(n.row.Summary=o.trim(t),o.Storages[n.index]=n.row):(n.row.Summary=null,o.Storages[n.index]=n.row)},"on-blur":function(e){console.log(e.target.value);var t=e.target.value;null!=t&&""!=t?(n.row.Summary=o.trim(t),o.Storages[n.index]=n.row):(n.row.Summary=null,o.Storages[n.index]=n.row)}}})}}]}},created:function(){},computed:{},mounted:function(){this.WayParterdata(),console.log(this.status),1==this.status?this.titlename="库位":this.titlename="箱号"},methods:(o={setboxsplit:function(e){if(e)return e.split("]")[1]},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},WayParterdata:function(){var e=this;Object(l.G)().then(function(t){e.Conveyingplace=t.obj})},CgBoxesShow:function(){var e=this,t={enterCode:this.EnterCode,date:""};Object(i.h)(t).then(function(t){t.length>0?e.boxingarr=t:e.boxingarr=[]})},delrow:function(e){this.Storages.splice(e,1)},addrow:function(e){var t=this;Object(i._3)().then(function(n){var o={iscx:!1,isenter:!0,ID:"LR"+e+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},Conditions:{DevanningCheck:!1,Weigh:!1,CheckNumber:!1,OnlineDetection:!1,AttachLabel:!1,PaintLabel:!1,Repacking:!1,IsCCC:!1,IsCIQ:!1,IsEmbargo:!1,IsHighPrice:!1,IsDeclared:!1},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:n,Files:[],_disabled:!1,boxdate:null};t.Storages.push(o)})},consoleStorages:function(){this.$parent.consoleStorages()},changConveyingplace:function(e,t){this.Storages.forEach(function(n){n.ID==t.ID&&(n.ShelveID=e.value)})},changConveyingplace2:function(e,t){var n=this,o={boxCode:e.value,adminID:sessionStorage.getItem("userID"),enterCode:this.EnterCode};Object(i.d)(o).then(function(o){console.log(o),0==o.success&&400==o.code?(n.$Message.error("箱号已经被选择，请选择其他箱号"),n.Storages.forEach(function(e){e.ID==t.ID&&(e.BoxCode=null)})):n.Storages.forEach(function(n){n.ID==t.ID&&(n.BoxCode=e.value)})})},changoriginID:function(e,t){console.log(e),this.Storages.forEach(function(n){n.ID==t.ID&&(n.origin=e.value,n.origintext=e.label,n.originDes=e.label)})},visiblechange:function(e){if(1==e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,r=t.getDate();this.saleDate=n+"/"+o+"/"+r,this.newboxcode=null,this.newboxcodeback=null}else this.newboxcode=null,this.newboxcodeback=null,this.oldboxcode=null,this.boxcodetype="1"},cancel:function(){this.showEdit=!1,this.oldboxcode=null,null!=this.newboxcode&&this.BoxcodeDelete()},handleCreate1:function(e){var t=this;if(0==!e){if("WL"!=e.slice(0,2))return this.$Message.error("请输入正确的箱号"),void(this.newboxcode=null);var n={BoxIndex:e,PackingDate:this.saleDate};Object(u.a)(n).then(function(n){n.success?(t.newboxcode=e,t.newboxcodeback=e,t.isclickbtn=!0):(t.newboxcode="",t.$Message.error(n.message),t.isclickbtn=!1)})}else this.$Message.error("请输入正确的箱号"),this.newboxcode=null}},a()(o,"CgBoxesShow",function(){var e=this,t={enterCode:this.EnterCode,date:""};console.log(this.EnterCode),Object(i.h)(t).then(function(t){t.length>0?e.boxingarr=t:e.boxingarr=[]})}),a()(o,"ok_change",function(){var e=this;""!=this.newboxcodeback&&null!=this.newboxcodeback?1==this.isclickbtn&&(this.Storages.forEach(function(t){t.SortingID==e.itemSortingID&&(t.BoxCode=e.newboxcodeback,t.boxdate=e.saleDate)}),this.showEdit=!1,this.newboxcodeback=null,this.newboxcode=null):this.$Message.error("请选择或输入箱号")}),a()(o,"showboxarr",function(e){this.itemSortingID=e,this.showEdit=!0}),a()(o,"BoxcodeDelete",function(){var e={boxCode:this.newboxcodeback};Object(i.c)(e).then(function(e){})}),a()(o,"oldBoxDelete",function(e){var t={boxCode:e};Object(i.c)(t).then(function(e){})}),a()(o,"delarrbox",function(){console.log(this.Storages),this.Storages.forEach(function(e){if(null!=e.BoxCode||""!=e.BoxCode){var t={boxCode:e.BoxCode};Object(i.c)(t).then(function(e){})}})}),a()(o,"changeData",function(e){this.saleDate=e,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)}),o)},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Table",{attrs:{columns:e.columns7,data:e.Storages},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var n=t.index;return[e._v("\n      "+e._s(n+1)+"\n    ")]}},{key:"action",fn:function(t){t.row;var o=t.index;return[n("Icon",{staticStyle:{"margin-right":"5px","font-size":"20px","font-width":"600"},attrs:{type:"ios-add-circle-outline"},on:{click:function(t){return e.addrow(o)}}}),e._v(" "),n("Icon",{staticStyle:{"font-size":"20px","font-width":"600"},attrs:{type:"ios-trash-outline"},on:{click:function(t){return e.delrow(o)}}})]}},{key:"Place",fn:function(t){var o=t.row;return t.index,[n("Select",{attrs:{transfer:!0,filterable:"","label-in-value":!0},on:{"on-change":function(t){return e.changoriginID(t,o)}},model:{value:o.origin,callback:function(t){e.$set(o,"origin",t)},expression:"row.origin"}},e._l(e.Conveyingplace,function(t){return n("Option",{key:t.ID,attrs:{value:t.CorPlace}},[e._v(e._s(t.Text))])}),1)]}},{key:"ShelveID",fn:function(t){var o=t.row;return t.index,[1==e.status?n("div",[n("Select",{attrs:{size:"default",filterable:"",transfer:!0,"label-in-value":!0},on:{"on-change":function(t){return e.changConveyingplace(t,o)}},model:{value:o.ShelveID,callback:function(t){e.$set(o,"ShelveID",t)},expression:"row.ShelveID"}},e._l(e.Storehouselist,function(t,o){return n("Option",{key:o,attrs:{value:t.ShelveID,label:t.ShelveID}},[n("span",[e._v(e._s(t.ShelveID))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#ccc"}},[e._v(e._s(t.TotalPackage))])])}),1)],1):n("div",[n("span",[e._v(e._s(e._f("showboxcode")(o.BoxCode)))]),e._v(" "),n("Icon",{attrs:{type:"md-create"},on:{click:function(t){return e.showboxarr(o.SortingID)}}})],1)]}},{key:"imglist",fn:function(t){var o=t.row;return t.index,e._l(o.Files,function(t,r){return n("p",[n("span",[e._v(e._s(t.CustomName))]),e._v(" "),n("Icon",{ref:o.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemovelist(o,r)}}})],1)})}}])}),e._v(" "),n("Modal",{attrs:{title:"选择箱号","mask-closable":!1},on:{"on-visible-change":e.visiblechange},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[n("span",{attrs:{slot:"close"},slot:"close"},[n("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),n("p",{staticStyle:{"padding-top":"10px"}},[n("label",[n("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("日期：\n      ")]),e._v(" "),n("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:e.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:e.saleDate},on:{"on-change":e.changeData}})],1),e._v(" "),n("p",{staticStyle:{"padding-top":"10px"}},[n("label",[n("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("箱号：\n      ")]),e._v(" "),n("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(t){return e.handleCreate1(e.newboxcode)}},model:{value:e.newboxcode,callback:function(t){e.newboxcode="string"==typeof t?t.trim():t},expression:"newboxcode"}})],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:e.ok_change}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var d=n("VU/8")(s,c,!1,function(e){n("fubW")},"data-v-b2505058",null);t.default=d.exports},fubW:function(e,t){}});
//# sourceMappingURL=3.ad62599f6f57a5759ce4.js.map