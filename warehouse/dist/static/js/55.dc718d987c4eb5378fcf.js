webpackJsonp([55],{ODdg:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("bOdI"),i=l.n(a),s=l("gyMJ"),n=l("dciI"),r=l("3PyT"),o={components:{"logg-ed":l("93yw").default},data:function(){return{loggdetime:"",showlogged:!1,TempDays:null,ID:"",isEdit:!1,myplace:"",Conveyingplace:[],Carrier:"",CarrierList:[],WareHouseID:sessionStorage.getItem("UserWareHouse"),ShelveID:"",ShelveArr:[],Code:"",WaybillType:"",CarrierID:"",ConsignorID:"",ExcuteStatus:101,Place:"",phonenumber:"",ConsignorName:"",EnterCode:"",Summary:"",Files:[],Waybill:i()({ID:null,Code:null,EnterCode:null,ClientName:null,Supplier:null,Status:null,StatusDes:null,CarrierID:null,CarrierName:null,ForOrderID:null,CreateDate:null,Summary:null,Files:[],TempDays:null,ShelveID:null},"Status",null),value:"",cityList:[],model1:"",Delete:[],Delfiles:[]}},created:function(){this.getdetail(this.$route.query.detailID),this.setnva(),window.PhotoUploaded=this.changed,this.getWayParter(),this.Carriers(),this.GetUsableShelves()},mounted:function(){},methods:{getdetail:function(e){var t=this;Object(n._39)(e).then(function(e){var l={ID:e.Waybill.ID,Code:e.Waybill.Code,EnterCode:e.Waybill.EnterCode,ClientName:e.Waybill.ClientName,Supplier:e.Waybill.Supplier,Status:e.Waybill.Status,StatusDes:e.Waybill.StatusDes,CarrierID:e.Waybill.CarrierID,CarrierName:e.Waybill.CarrierName,ForOrderID:e.Waybill.ForOrderID,CreateDate:e.Waybill.CreateDate,Summary:e.Waybill.Summary,Files:e.Waybill.Files,TempDays:e.Waybill.TempDays,ShelveID:e.Waybill.ShelveID};t.Waybill=l})},setnva:function(){this.$store.dispatch("setnvadata",[{title:"暂存录入",href:"/Separate/separateenter"}])},handleCreate1:function(e){this.CarrierList.push({ID:e,Name:e})},getWayParter:function(){var e=this;Object(s.G)().then(function(t){console.log(t),e.Conveyingplace=t.obj})},Carriers:function(){var e=this;Object(n.f)(this.WareHouseID).then(function(t){e.CarrierList=t})},submitbtn:function(){var e=this;if(null==this.Waybill.ShelveID||this.Waybill.Files.length<=0)this.$Message.error("库位与图片不能为空");else{this.delimgall();var t=[];this.Waybill.Files.forEach(function(e,l){var a={ID:e.ID};t.push(a)});var l={AdminID:sessionStorage.getItem("userID"),Waybill:{ID:this.Waybill.ID,Code:this.Waybill.Code,EnterCode:this.Waybill.EnterCode,CarrierID:this.Waybill.CarrierID,Summary:this.Waybill.Summary,ForOrderID:this.Waybill.ForOrderID,WareHouseID:sessionStorage.getItem("UserWareHouse"),ShelveID:this.Waybill.ShelveID,Supplier:this.Waybill.Supplier,Files:t}};Object(n._49)(l).then(function(t){if(console.log(t),1==t.Success){e.$Message.success("暂存库录入成功");var l=e;setTimeout(function(){l.$store.dispatch("setSpearatedrawer",!1)},1e3)}else e.$Message.error(t.Data)})}},delimg:function(e){this.$Message.success("删除成功"),this.Waybill.Files.splice(this.Waybill.Files.indexOf(e),1),this.Delfiles.push(e.ID)},delimgall:function(){var e={ID:this.Delfiles};Object(n.n)(e).then(function(e){})},fromphotos:function(){var e={SessionID:"zancun",AdminID:sessionStorage.getItem("userID")};Object(r.c)(e)},SeletUpload:function(e){if("Waybill"==e){var t={SessionID:this.waybillid,AdminID:sessionStorage.getItem("userID")};Object(r.r)(t)}},changed:function(e){this.testfunction(e)},testfunction:function(e){var t=e[0],l={CustomName:t.FileName,ID:t.FileID,Url:t.Url,type:8e3};this.Waybill.Files.push(l)},setphone:function(){if(""!=this.Waybill.Phone){var e=/(^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$)/.test(this.Waybill.Phone);console.log(e),this.disabledphone=e,0==e&&(this.$Message.error("请输入正确的手机号"),this.Waybill.Phone="")}},clear_btn:function(){this.$store.dispatch("setSpearatedrawer",!1)},GetUsableShelves:function(){var e=this;sessionStorage.getItem("UserWareHouse");Object(n._6)("HK").then(function(t){console.log(t),e.ShelveArr=t.obj})},clackFilesProcess:function(e){var t={Url:e};Object(r.b)(t)},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("p",{staticClass:"detailtitle"},[e._v("基础信息")]),e._v(" "),a("div",{staticClass:"box"},[a("Row",{staticClass:"setpadding"},[a("Col",{attrs:{xs:2,sm:4,md:4,lg:7}},[a("p",[a("label",[e._v("\n            运  单  号：\n            "),a("Input",{staticClass:"inputwidths",attrs:{placeholder:"请输入运单号"},model:{value:e.Waybill.Code,callback:function(t){e.$set(e.Waybill,"Code",t)},expression:"Waybill.Code"}})],1)]),e._v(" "),a("p",{staticClass:"setpadding"},[a("label",[e._v("\n            入  仓  号：\n            "),a("Input",{staticClass:"inputwidths",attrs:{placeholder:"请输入入仓号"},model:{value:e.Waybill.EnterCode,callback:function(t){e.$set(e.Waybill,"EnterCode",t)},expression:"Waybill.EnterCode"}})],1)]),e._v(" "),a("p",{staticClass:"setpadding",staticStyle:{width:"172%"}},[a("label",[e._v("\n            备        注：\n            "),a("Input",{staticStyle:{width:"87%"},attrs:{type:"textarea",autosize:{maxRows:3,minRows:3},placeholder:"请输入备注信息"},model:{value:e.Waybill.Summary,callback:function(t){e.$set(e.Waybill,"Summary",t)},expression:"Waybill.Summary"}})],1)])]),e._v(" "),a("Col",{attrs:{xs:2,sm:16,md:10,lg:7}},[a("div",[a("label",[e._v("\n            承   运    商：\n          ")]),e._v(" "),a("Select",{staticClass:"inputwidths",attrs:{filterable:""},model:{value:e.Waybill.CarrierID,callback:function(t){e.$set(e.Waybill,"CarrierID",t)},expression:"Waybill.CarrierID"}},e._l(e.CarrierList,function(t,l){return a("Option",{key:l,attrs:{value:t.ID,label:t.Name}},[a("span",[e._v(e._s(t.Name))])])}),1)],1),e._v(" "),a("p",{staticClass:"setpadding"},[a("label",[e._v("\n            供   货    商：\n            "),a("Input",{staticClass:"inputwidths",attrs:{placeholder:"请输入供货商"},model:{value:e.Waybill.Supplier,callback:function(t){e.$set(e.Waybill,"Supplier",t)},expression:"Waybill.Supplier"}})],1)])]),e._v(" "),a("Col",{attrs:{xs:2,sm:4,md:4,lg:7}},[a("p",{staticClass:"setpadding"},[a("label",[a("em",{staticClass:"bitian"},[e._v("*")]),e._v("暂 存 库 位：\n          ")]),e._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:e.Waybill.ShelveID,callback:function(t){e.$set(e.Waybill,"ShelveID",t)},expression:"Waybill.ShelveID"}},e._l(e.ShelveArr,function(t,l){return a("Option",{key:l,attrs:{value:t.ShelveID,label:t.ShelveID}},[a("span",[e._v(e._s(t.ShelveID))])])}),1)],1),e._v(" "),null!=e.Waybill.TempDays?a("p",{staticClass:"setpadding"},[a("label",[e._v("   暂 存 天 数： ")]),e._v("\n          "+e._s(e.Waybill.TempDays)+"\n        ")]):e._e(),e._v(" "),2==e.Waybill.Status?a("p",{staticClass:"setpadding"},[a("label",[e._v("   订   单   号： ")]),e._v("\n          "+e._s(e.Waybill.ForOrderID)+"\n        ")]):e._e()])],1)],1)]),e._v(" "),a("div",[a("div",{staticStyle:{"padding-top":"30px"}},[a("p",{staticClass:"detailtitle"},[a("em",{staticStyle:{"padding-right":"10px"}},[e._v("图片列表")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload",disabled:1!=e.Waybill.Status},on:{click:function(t){return e.SeletUpload("Waybill")}}},[e._v("\n          传照\n        ")]),e._v(" "),a("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera",disabled:1!=e.Waybill.Status},on:{click:function(t){return e.fromphotos("Waybill")}}},[e._v("\n          拍照\n        ")]),e._v(" "),a("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:e.logchange}},[e._v("日志管理")])],1),e._v(" "),a("div",{staticStyle:{"padding-top":"20px"}},[e.Waybill.Files.length>0?a("ul",{staticClass:"libox"},e._l(e.Waybill.Files,function(t,l){return a("li",{key:t.ID},[1==e.Waybill.Status?a("Icon",{staticClass:"cancelicon",attrs:{type:"md-close-circle"},on:{click:function(l){return e.delimg(t)}}}):e._e(),e._v(" "),a("div",{staticClass:"imgbox",on:{click:function(l){return e.clackFilesProcess(t.Url)}}},[a("img",{attrs:{src:t.Url,alt:""}})])],1)}),0):a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:l("3qAc"),alt:""}}),e._v(" "),a("p",[e._v("暂无数据")])])]),e._v(" "),a("div",{staticStyle:{"padding-top":"10px"}},[a("div",{staticClass:"buttons"},[a("Button",{staticStyle:{"margin-rigth":"5px"},attrs:{type:"primary",size:"large",disabled:1!=e.Waybill.Status},on:{click:e.submitbtn}},[e._v("\n            保存\n          ")]),e._v(" "),a("Button",{attrs:{size:"large"},on:{click:e.clear_btn}},[e._v("取消")])],1)])])]),e._v(" "),a("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:e.showlogged,callback:function(t){e.showlogged=t},expression:"showlogged"}},[a("div",{attrs:{slot:"close"},slot:"close"},[a("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),e._v(" "),a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[e._v("日志管理")])]),e._v(" "),e.showlogged?a("logg-ed",{key:e.loggdetime,ref:"logged",attrs:{WaybillID:e.Waybill.ID}}):e._e()],1)],1)},staticRenderFns:[]};var u=l("VU/8")(o,c,!1,function(e){l("eHsh")},"data-v-5451ea76",null);t.default=u.exports},eHsh:function(e,t){}});
//# sourceMappingURL=55.dc718d987c4eb5378fcf.js.map