webpackJsonp([8,18],{"604n":function(t,e){},"97GW":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("dciI"),n={name:"Sealing",props:["OrderID","Type","EnterCode","hietorgetDetail","WaybillID","ExcuteStatus"],data:function(){return{options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},itemindex:-1,showinput:!1,changeQuantity:!1,NewQuantity:null,selectdata:[],saleDate:"",Operateddisable:!0,isclickbtn:!0,isSealingclick:!0,enterCode:null,boxingarr:[],houseid:sessionStorage.getItem("UserWareHouse"),AdminID:sessionStorage.getItem("userID"),oldboxcode:"",newboxcode:"",newboxcodeback:null,oldBoxCode2:null,boxcodetype:"1",showEdit:!1,Nameitem:"0",loading:!0,warehouseId:null,waybillinfo:{},NormalData:[],AbnormalData:[],Normalinfo:null,Abnormainfo:null,Normal:[{type:"selection",width:60,align:"center"},{title:"订单号",slot:"orderid",align:"center"},{title:"箱号",slot:"BoxCode",align:"center"},{title:"型号",slot:"PartNumber",align:"center",width:180},{title:"品牌",slot:"Manufacturer",align:"center"},{title:"批号",slot:"DateCode",align:"center"},{title:"原产地",slot:"Origin",align:"center"},{title:"重量(Kg)",slot:"Weight",align:"center"},{title:"体积",slot:"Volume",align:"center"},{title:"应到",slot:"Quantity",align:"center"},{title:"实到",slot:"PickedQuantity",align:"center",width:130},{title:"承运商",slot:"CarrierName",align:"center",width:150},{title:"运单号",slot:"code",align:"center",width:150},{title:"入库时间",slot:"CreateDate",align:"center",width:145}],showsealing:!1,overweight:[]}},created:function(){},computed:{getExcuteStatus:function(){return console.log(this.ExcuteStatus),this.ExcuteStatus}},mounted:function(){if(this.getlistdata(),console.log(this.getExcuteStatus),1==this.Type)this.Normal[7].title="库位",this.Abnormal[7].title="库位";else{this.Normal.push({title:"操作",slot:"Action",align:"center"})}},methods:{setboxsplit:function(t){if(t)return t.split("]")[1]},getlistdata:function(){var t=this;Object(o._29)(this.OrderID).then(function(e){t.loading=!1,t.Normalinfo=e,t.NormalData=e.TinyOrderID_Group})},delItem:function(t){var e=this;this.$Modal.confirm({title:"是否确认删除该分拣？",onOk:function(){var i={StorageID:t.StorageID,PickingID:t.PickingID,AdminID:sessionStorage.getItem("userID")};Object(o.Q)(i).then(function(t){1==t.success?(e.$Message.success("删除成功"),e.loading=!0,e.getlistdata(),e.$emit("hietorgetDetail")):0==t.success&&e.$Message.error(t.data)})},onCancel:function(){}})},changeboxcode:function(t){console.log(t),this.showEdit=!0,this.oldboxcode=t},handleCreate1:function(t){var e=this;if(""!=t&&null!=t)if(null!=this.oldBoxCode2){var i={boxCode:this.oldBoxCode2};Object(o.c)(i).then(function(i){var n={enterCode:e.EnterCode,code:t,date:e.saleDate,adminID:sessionStorage.getItem("userID")};Object(o.d)(n).then(function(t){console.log(t),0==t.success&&400==t.code?(e.$Message.error("箱号已经被选择，请选择其他箱号"),e.newboxcode=null,e.newboxcodeback=null,e.oldBoxCode2=null,e.isclickbtn=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.newboxcodeback=t.boxCode,e.oldBoxCode2=t.boxCode,e.isclickbtn=!0)})})}else{i={enterCode:this.EnterCode,code:t,date:this.saleDate,adminID:sessionStorage.getItem("userID")};Object(o.d)(i).then(function(t){0==t.success?(e.$Message.error(t.data),e.newboxcode=null,e.newboxcodeback=null,e.isclickbtn=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.newboxcodeback=t.boxCode,e.oldBoxCode2=t.boxCode,e.isclickbtn=!0)})}},CgBoxesShow:function(){var t=this,e={enterCode:this.EnterCode,date:""};console.log(this.EnterCode),Object(o.h)(e).then(function(e){e.length>0?t.boxingarr=e:t.boxingarr=[]})},visiblechange:function(t){if(1==t){this.showchangebox=!0;var e=new Date,i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate();this.saleDate=i+"/"+o+"/"+n}else this.newboxcode=null,this.oldBoxCode2=null,this.newboxcodeback=null,this.boxcodetype="1"},BoxcodeDeletefun:function(){var t={boxCode:this.newboxcodeback};Object(o.c)(t).then(function(t){console.log(t)})},oldBoxDelete:function(t){var e={boxCode:t};Object(o.c)(e).then(function(t){})},cancel:function(){this.BoxcodeDeletefun(),this.showEdit=!1,this.oldBoxCode2=null,this.newboxcodeback=null},ok_change:function(){var t=this;if(null!=this.newboxcode&&""!=this.newboxcode){if(1==this.isclickbtn&&null!=this.newboxcodeback){var e={date:this.saleDate,adminID:sessionStorage.getItem("userID"),storageID:this.oldboxcode.StorageID,oldBoxCode:this.oldboxcode.BoxCode,newBoxCode:this.newboxcodeback,source:60};Object(o.d)(e).then(function(e){0==e.success?(t.$Message.error(e.data),t.newboxcodeback=null,t.showEdit=!0):(t.$Message.success("修改成功"),t.loading=!0,t.getlistdata(),t.showEdit=!1)})}}else this.$Message.error("请输入箱号")},changeData:function(t){this.saleDate=t,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)},ok_Sealing:function(){var t=this;if(this.selectdata.length<=0)this.$Message.warning({content:"请选择要封箱的订单",duration:3});else{var e=[];this.overweight=[];for(var i=this.selectdata,o=0,n=i.length;o<n;o++)e.push(i[o].TinyOrderID),(i[o].TotalWeight<i[o].TotalAvgWeight-.5*i[o].TotalAvgWeight||i[o].TotalWeight>i[o].TotalAvgWeight+.5*i[o].TotalAvgWeight)&&this.overweight.push(i[o]);var a={AdminID:sessionStorage.getItem("userID"),TinyOrderID:e,WaybillID:this.WaybillID};console.log(this.overweight),this.overweight.length>0?this.showsealing=!0:(this.showsealing=!1,this.$Modal.confirm({title:"是否确认封箱",onOk:function(){t.isSealingclick=!1,t.cgCustomsStorageCloseBoxes(a)},onCancel:function(){}}))}},ok_sealing:function(){this.isSealingclick=!1;for(var t=[],e=this.selectdata,i=0,o=e.length;i<o;i++)t.push(e[i].TinyOrderID);var n={AdminID:sessionStorage.getItem("userID"),TinyOrderID:t,WaybillID:this.WaybillID};console.log(n),this.cgCustomsStorageCloseBoxes(n)},cancel_sealing:function(){this.showsealing=!1},cgCustomsStorageCloseBoxes:function(t){var e=this;Object(o._33)(t).then(function(t){1==t.success?(e.loading=!0,e.getlistdata(),e.$Message.success("封箱成功"),e.selectdata=[]):e.$Message.error({content:t.data,duration:3}),e.isSealingclick=!0})},selectionchange:function(t){this.selectdata=t,console.log(this.selectdata.length)},changeQuantityBtn:function(t){this.itemindex=t,this.showinput=!0},ok_changeQty:function(t){if(console.log(t),""!=t.SdQty&&null!=t.SdQty){this.loading=!0;var e=sessionStorage.getItem("userID"),i={StorageID:t.StorageID,AdminID:e,Quantity:t.SdQty};this.chengeModify(i)}else this.$Message.warning({content:"请输入要修改的数量",duration:3})},chengeModify:function(t){var e=this;Object(o._16)(t).then(function(t){console.log(t),1==t.Success?(e.itemindex=-1,e.showinput=!1,e.getlistdata()):e.$Message.error({content:t.Data,duration:3})})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"tablebox"}},[i("Table",{attrs:{columns:t.Normal,data:t.NormalData,border:t.NormalData.length>0,loading:t.loading},on:{"on-selection-change":t.selectionchange},scopedSlots:t._u([{key:"orderid",fn:function(e){var o=e.row;return e.index,[i("span",[t._v(t._s(o.TinyOrderID))])]}},{key:"BoxCode",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v("\n                    "+t._s(t._f("showboxcode")(e.BoxCode))+"\n                     "),1==o.IsAbleDeclare?i("Icon",{staticClass:"changeboxcodeicon",attrs:{type:"md-create"},on:{click:function(i){return t.changeboxcode(e)}}}):t._e()],1)}),0)]}},{key:"PartNumber",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.Product.PartNumber)+"\n                      "),null!=e.Condition?i("span",[1==e.Conditions.IsCIQ?i("Tag",{attrs:{color:"primary"}},[t._v("商检")]):t._e(),t._v(" "),1==e.Conditions.IsCCC?i("Tag",{attrs:{color:"warning"}},[t._v("CCC")]):t._e(),t._v(" "),1==e.Conditions.IsEmbargo?i("Tag",{attrs:{color:"error"}},[t._v("禁运")]):t._e(),t._v(" "),1==e.Conditions.IsHighPrice?i("Tag",{attrs:{color:"magenta"}},[t._v("高价值")]):t._e()],1):t._e()])}),0)]}},{key:"Manufacturer",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.Product.Manufacturer))])}),0)]}},{key:"DateCode",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.DateCode))])}),0)]}},{key:"Origin",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.Origin))])}),0)]}},{key:"Weight",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.Weight))])}),0)]}},{key:"Volume",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.Volume))])}),0)]}},{key:"Quantity",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.YdQty))])}),0)]}},{key:"PickedQuantity",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e,o){return i("li",[t.itemindex==o&&1==t.showinput?i("Input",{staticStyle:{width:"70%"},attrs:{type:"number"},on:{"on-blur":function(i){return t.ok_changeQty(e)},"on-enter":function(i){return t.ok_changeQty(e)}},model:{value:e.SdQty,callback:function(i){t.$set(e,"SdQty",i)},expression:"item.SdQty"}}):i("p",[i("span",[t._v(t._s(e.SdQty))])])],1)}),0)]}},{key:"CreateDate",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(t._f("showDateexact")(e.EnterDate)))])}),0)]}},{key:"CarrierName",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.CarrierName))])}),0)]}},{key:"code",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[t._v(t._s(e.wbCode))])}),0)]}},{key:"Action",fn:function(e){var o=e.row;return e.index,[i("ul",{staticClass:"subCol"},t._l(o.Groups,function(e){return i("li",[i("Button",{attrs:{type:"error",size:"small",disabled:0==e.Display},on:{click:function(i){return t.delItem(e)}}},[t._v("删除")])],1)}),0)]}}])}),t._v(" "),t.NormalData.length>0?i("p",{staticClass:"Statisticsbox"},[i("span",{staticClass:"Statisticspan"},[t._v("合计：")]),t._v(" "),i("span",{staticClass:"Statisticspan"},[t._v("总重量(Kg)："+t._s(t.Normalinfo.TotalWeight))]),t._v(" "),i("span",{staticClass:"Statisticspan"},[t._v("总件数："+t._s(t.Normalinfo.TotalPart))]),t._v(" "),i("span",{staticClass:"Statisticspan"},[t._v("总数量："+t._s(t.Normalinfo.TotalQuantity))]),t._v(" "),i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:0!=t.Normalinfo.IsDisabledDeclareBtn},on:{click:t.ok_Sealing}},[t._v("确认封箱")])],1):t._e()],1),t._v(" "),i("Modal",{attrs:{title:"修改箱号","mask-closable":!1},on:{"on-visible-change":t.visiblechange},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[i("span",{attrs:{slot:"close"},slot:"close"},[i("Icon",{attrs:{type:"ios-close"},on:{click:t.cancel}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("日期：\n      ")]),t._v(" "),i("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:t.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:t.saleDate},on:{"on-change":t.changeData}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("箱号：\n    ")]),t._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(e){return t.handleCreate1(t.newboxcode)}},model:{value:t.newboxcode,callback:function(e){t.newboxcode="string"==typeof e?e.trim():e},expression:"newboxcode"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.ok_change}},[t._v("确定")])],1)]),t._v(" "),i("Modal",{attrs:{title:"修改到货数量","mask-closable":!1},model:{value:t.changeQuantity,callback:function(e){t.changeQuantity=e},expression:"changeQuantity"}},[i("div",[i("label",{attrs:{for:""}},[t._v("数量:")]),t._v(" "),i("Input",{attrs:{placeholder:"请输入数量"},model:{value:t.NewQuantity,callback:function(e){t.NewQuantity=e},expression:"NewQuantity"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"}},[t._v("确认")])],1)]),t._v(" "),i("Modal",{on:{"on-ok":t.ok_sealing,"on-cancel":t.cancel_sealing},model:{value:t.showsealing,callback:function(e){t.showsealing=e},expression:"showsealing"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("Icon",{staticStyle:{"font-size":"28px",color:"#f90"},attrs:{type:"md-help-circle"}}),t._v(" "),i("span",{staticStyle:{"font-size":"15px","line-height":"26px","vertical-align":"bottom",color:"#0c0c0c","font-weight":"bold"}},[t._v("以下订单不符合重量浮动规则，是否确认封箱")])],1),t._v(" "),t._l(t.overweight,function(e){return i("p",[t._v(t._s(e.TinyOrderID)+" \n        "),i("span",{staticStyle:{"padding-right":"5px"}},[t._v("总重量："+t._s(e.TotalWeight))]),t._v(" "),i("span",{staticStyle:{"padding-right":"5px"}},[t._v("平均重量："+t._s(e.TotalAvgWeight))])])})],2)],1)},staticRenderFns:[]};var l=i("VU/8")(n,a,!1,function(t){i("mgFL"),i("604n")},"data-v-668c0c42",null);e.default=l.exports},HKMd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("bOdI"),n=i.n(o),a=i("gyMJ"),l=i("dciI"),s=i("PJh5"),r=i.n(s),c=i("3PyT"),u=i("dUDF"),d=i("93yw"),h=i("97GW"),g=i("jRAW"),f=i("M4fF"),v={name:"",components:{"Print-boxcode":u.default,"logg-ed":d.default,"Sealing-html":h.default,Storagecharge:g.default},data:function(){var t,e=this;return t={showStoragecharge:!1,timedifference:null,storagecharge:!1,options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},reFresh:!1,saleDate:"",loggdetime:"",showlogged:!1,isclick:!1,AVGWeightsum:null,issharevalue:!0,sharevalue:null,boxcodetype:"1",clientGrade:null,isdisabled:!1,originalarr:[],TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],showprintboxcode:!1,fruit:[],showprint:!1,loading:!0,pusharr:[],SelectRow:[],searchkey:"",boxingarr:[],printlist:[],wayBillID:this.$route.params.detailID,detail_ID:"",showphoto:!1,CarrierList:[],Conveyingplace:[],waybillinfo:{},detailitem:[],details:{wayBillID:"",total:0,pageIndex:1,pageSize:1,WaybillNo:"90416165067",Carrier:"",PlaceDescription:"美国"},tabletitle:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center"},{title:"型号",slot:"PartNumber",align:"center",minWidth:180},{title:"品牌",key:"brand",align:"center",width:100,render:function(t,e){return t("span",{},e.row.Product.Manufacturer)}},{title:"产地",key:"OriginName",width:100,align:"center",render:function(t,e){return t("span",{},e.row.OriginName)}},{title:"应出数量",key:"Quantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.Quantity)}},{title:"已出数量",key:"PickedQuantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.PickedQuantity)}},{title:"剩余数量",key:"LeftQuantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.LeftQuantity)}},{title:"本次发货数量",key:"practical",align:"center",width:90,render:function(t,i){var o=e;return t("Input",{props:{value:i.row.CurrentQuantity,disabled:!0},on:{"on-change":function(t){if(console.log(t.target.value),""!=t.target.value){1==/^[0-9]*$/.test(t.target.value)&&0!=t.target.value?(i.row.CurrentQuantity=Number(t.target.value),o.detailitem[i.index]=i.row):(o.$Message.error("只能输入正整数"),t.target.value=null,i.row.CurrentQuantity=null,o.detailitem[i.index]=i.row),o.clicktest(i.row)}else t.target.value=null,i.row.CurrentQuantity=null,o.detailitem[i.index]=i.row,o.clicktest(i.row)}}})}},{title:"小订单号",slot:"TinyOrderID",align:"center",minWidth:150},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"毛重(Kg)")])},key:"GrossWeight",align:"center",width:130,render:function(t,i){var o=e;return t("Input",{props:{value:i.row.Weight},on:{"on-blur":function(t){if(""!=t.target.value?1==/^\d+(\.\d{0,5})?$/.test(t.target.value)&&0!=t.target.value?(i.row.Weight=t.target.value,o.detailitem[i.index]=i.row):(o.$Message.error("请输入大于零的数字,保留小数点后五位"),i.row.Weight=null,t.target.value=null,o.detailitem[i.index]=i.row):(o.$Message.error("重量不能为空"),i.row.Weight=null,t.target.value=null),o.SelectRow.length>0)for(var e=0,n=o.SelectRow.length;e<n;e++)o.SelectRow[e].SortingID==i.row.SortingID&&(o.SelectRow[e]=i.row);o.changeoriginalarr(i.row)}}})}},{title:"库位",key:"ShelveID",align:"center",width:120,render:function(t,e){return t("span",{},e.row.ShelveID)}},{title:"图片",slot:"imglist",align:"center",width:200},{title:"操作",slot:"operation",align:"center",width:150,fixed:"right"}],tablelist:[],uploadList:[],files:""},n()(t,"Conveyingplace",[]),n()(t,"Conveyingplace2",[]),n()(t,"chengevalue",{inputval:"",value:"",type:""}),n()(t,"setClientCode",!1),n()(t,"ClientCode",""),n()(t,"showchangebox",!1),n()(t,"newboxcode",""),n()(t,"newboxcodeback",""),n()(t,"oldboxcode",null),n()(t,"applydata",[]),n()(t,"WarehousingMsg",!1),n()(t,"isAbnormal",!1),n()(t,"Summary",null),n()(t,"CarArr",[]),n()(t,"DriversArr",[]),n()(t,"warehouseID",sessionStorage.getItem("UserWareHouse")),t},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return r()(+e).format("YYYY-MM-DD")}}},created:function(){window.PhotoUploaded=this.changed,this.getdetail_data()},computed:{Budgetdetail:function(){return this.$store.state.common.Budgetdetail}},mounted:function(){},methods:{setboxsplit:function(t){if(t)return t.split("]")[1]},clicktest:f.throttle(function(t){for(var e=0,i=this.SelectRow.length;e<i;e++)t.ID==this.SelectRow[e].ID&&(this.SelectRow[e]=t)},1e3),changeoriginalarr:function(t){for(var e=0,i=this.originalarr.length;e<i;e++)this.originalarr[e].ID==t.ID&&(this.originalarr[e]=t)},showBudget:function(t,e,i){if(this.$store.dispatch("setBudget",!0),"meet"==t){this.$router.push({name:"TurnDeclareBudgetIncome",query:{webillID:this.waybillinfo.ID,OrderID:this.waybillinfo.OrderID,type:e,otype:"out",conduct:i}})}},closeBudget:function(){console.log("关闭收支明细"),this.$router.go(-1),this.$store.dispatch("setBudget",!1)},handleSelectRow:function(t){console.log(t),this.SelectRow=t},ok:function(){this.showphoto=!1},cancel:function(){this.showphoto=!1,this.showchangebox=!1,this.oldboxcode=null,0==this.showchangebox&&this.BoxcodeDelete()},getdetail_data:function(){var t=this;Object(l._34)(this.wayBillID).then(function(e){t.Getclientdata(e.Waybill.EnterCode);var i=null;215==e.Waybill.ExcuteStatus?(t.isdisabled=!0,i=t.moment(e.Waybill.ModifyDate).format("YYYY-MM-DD")):(t.isdisabled=!1,i=t.moment((new Date).getTime()).format("YYYY-MM-DD")),t.waybillinfo=e.Waybill;for(var o=0,n=e.Notices.length;o<n;o++)e.Notices[o].CurrentQuantity<=0?e.Notices[o]._disabled=!0:e.Notices[o]._disabled=!1;if(t.detailitem=e.Notices,t.originalarr=e.Notices,t.loading=!1,t.fruit=["出库单打印","送货单打印"],null!=e.Waybill.FirstTempDate){var a=t.moment(e.Waybill.FirstTempDate).format("YYYY-MM-DD"),l=Date.parse(t.moment(e.Waybill.LsEndDate).format("YYYY-MM-DD")),s=Date.parse(a),r=Date.parse(i);if(e.Waybill.LsEndDate)if(t.waybillinfo.IsClientLs=!1,s>l){var c=(r-s)/864e5+1;console.log(c+"租赁过期减五天"),c>5&&(t.timedifference=c-5,t.showStoragecharge=!0,t.IsRecordWarehouseFee(t.waybillinfo.OrderID))}else if(s<=l){c=(r-l)/864e5;console.log(c+"在租期内，且出库日期在租期外"),c>=1&&(t.timedifference=c,t.showStoragecharge=!0,t.IsRecordWarehouseFee(t.waybillinfo.OrderID))}else r<=l&&(t.showStoragecharge=!1,t.waybillinfo.IsClientLs=!0);else{c=(r-s)/864e5+1;console.log(c+"未租赁，应免租五天"),c>5&&(t.timedifference=c-5,t.showStoragecharge=!0,t.IsRecordWarehouseFee(t.waybillinfo.OrderID))}}t.reFresh=!0})},fromphotos:function(t){if("Waybill"==t||"Clientimg"==t){var e=null;e="Waybill"==t?8010:8020;var i={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,Type:e}};Object(c.c)(i)}else{i={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:t.ID,InputID:"",Type:8010}};Object(c.c)(i)}},changed:function(t){this.testfunction(t)},testfunction:function(t){var e=t[0];if("Waybill"==e.SessionID){var i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8010};this.waybillinfo.FeliverGoodFile.push(i)}else if("Clientimg"==e.SessionID){i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8020};this.waybillinfo.SendGoodsFile.push(i)}else{i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8010};for(var o=0;o<this.detailitem.length;o++)this.detailitem[o].ID==e.SessionID&&(this.detailitem[o].Imagefiles.push(i),this.changeoriginalarr(this.detailitem[o]))}},SeletUpload:function(t){if("Waybill"==t||"Clientimg"==t){var e=null;e="Waybill"==t?8010:8020;var i={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,Type:e}};Object(c.r)(i)}else{i={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:t.ID,InputID:"",Type:8010}};Object(c.r)(i)}},clickClient:function(t,e){this.setClientCode=!0,this.chengevalue.value=t,this.chengevalue.type=e,this.Conveyingplace2=this.Conveyingplace,this.ClientCode=String(t)},changeshowbox:function(t){var e=this;if(1==t){this.AVGWeightsum=null,this.SelectRow.forEach(function(t){e.AVGWeightsum+=t.AVGWeight*t.CurrentQuantity});var i=new Date,o=i.getFullYear(),n=i.getMonth()+1,a=i.getDate();this.saleDate=o+"/"+n+"/"+a}},handleCreate1:function(t){var e=this;if(0==!t&&"WL"!=t){var i={enterCode:this.waybillinfo.EnterCode,code:t,date:this.saleDate,adminID:sessionStorage.getItem("userID")};if(console.log(i),null!=this.oldboxcode){var o={boxCode:this.oldboxcode};Object(l.c)(o).then(function(t){Object(l.d)(i).then(function(t){0==t.success?(e.$Message.error(t.data),e.newboxcode=null,e.oldboxcode=null,e.newboxcodeback=null,e.isclick=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.oldboxcode=t.boxCode,e.newboxcodeback=t.boxCode,e.isclick=!0)})})}else Object(l.d)(i).then(function(t){0==t.success?(e.$Message.error(t.data),e.newboxcode=null,e.oldboxcode=null,e.newboxcodeback=null,e.isclickbtn=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.oldboxcode=t.boxCode,e.newboxcodeback=t.boxCode,e.isclick=!0)})}else this.$Message.error("请输入正确的箱号"),this.newboxcode=null},BoxcodeDelete:function(){var t={boxCode:this.newboxcodeback};Object(l.c)(t).then(function(t){})},oldBoxDelete:function(t){var e={boxCode:t};Object(l.c)(e).then(function(t){})},getboxarr:function(){var t=this,e={whCode:sessionStorage.getItem("UserWareHouse"),enterCode:this.waybillinfo.EnterCode,date:"",orderID:this.waybillinfo.OrderID};Object(l.h)(e).then(function(e){e.length>0?t.boxingarr=e:t.boxingarr=[]})},okapply:function(){var t=this;Object(a.b)(this.applyfrom).then(function(e){1==e.success?(t.$Message.success("申请成功"),t.getboxarr()):t.$Message.error("箱号申请失败")})},clickshowchangebox:function(){if(0==this.SelectRow.length)this.$Message.error("至少选择一条产品");else for(var t=this.SelectRow[0].TinyOrderID,e=0;e<this.SelectRow.length;e++){if(this.SelectRow[e].TinyOrderID!=t){this.$Message.error("小订单号不一致，请选择小订单号一致的进行操作");break}if(e==this.SelectRow.length-1){for(var i=[],o=[],n=(e=0,this.SelectRow.length);e<n;e++)null==this.SelectRow[e].Weight?i.push(this.SelectRow[e]):o.push(this.SelectRow[e]);console.log(i),console.log(o),0!=i.length&&0!=o.length?this.$Message.error("勾选型号重量有误"):(i.length>0?this.issharevalue=!0:this.issharevalue=!1,this.sharevalue=null,this.newboxcode=null,this.newboxcodeback=null,this.boxcodetype="1",this.showchangebox=!0)}}},ok_changebox:function(){if(null==this.newboxcode||""==this.newboxcode)this.$Message.error("请输入必填项"),this.showchangebox=!0;else if(1==this.issharevalue&&null==this.sharevalue)this.$Message.error("请输入必填项"),this.showchangebox=!0;else{1!=this.issharevalue||0!=/^\d+(\.\d{0,2})?$/.test(this.sharevalue)&&0!=this.sharevalue?1==this.isclick&&(this.issharevalue,this.finish_btn(),this.showchangebox=!1):this.$Message.error("请输入数字,小数点保留两位，且不等于零")}},ok_share:function(){for(var t=null,e=0,i=this.SelectRow.length;e<i;e++)console.log(this.SelectRow[e]),null!=this.SelectRow[e].CurrentQuantity&&""!=this.SelectRow[e].CurrentQuantity&&(t+=Number(this.SelectRow[e].CurrentQuantity));if(null!=t)for(e=0,i=this.SelectRow.length;e<i;e++)null!=this.SelectRow[e].CurrentQuantity&&""!=this.SelectRow[e].CurrentQuantity&&(this.SelectRow[e].Weight=(this.SelectRow[e].CurrentQuantity*(this.sharevalue/t)).toFixed(2))},GetBoxesdates:function(){var t=this;Object(a.j)().then(function(e){console.log(e),t.applydata=e})},detailelist:function(){if(this.printlist.length>0){var t=Object(c.f)()["清单打印"],e=-1!=t.Url.indexOf("http");t.Url=1==e?t.Url:this.printurl+t.Url;var i={setting:t,data:[{waybill:this.waybillinfo,listdata:this.printlist}]};Object(c.t)(i)}},Labelprint:function(){console.log(this.SelectRow);var t=this.SelectRow,e=[];if(t.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var i=0;i<t.length;i++){t[i].Inputs,t[i].StandardProducts;var o={Quantity:t[i].CurrentQuantity,inputsID:t[i].Input.SortingID,Catalog:t[i].Product.Catalog,PartNumber:t[i].Product.PartNumber,Manufacturer:t[i].Product.Manufacturer,Packing:t[i].Product.Packing,PackageCase:t[i].Product.PackageCase,origin:t[i].originDes,SourceDes:this.details.waybillinfo.SourceDes};e.push(o)}var n=Object(c.f)()["产品标签"],a=-1!=n.Url.indexOf("http");n.Url=1==a?n.Url:this.printurl+n.Url;var l={setting:n,data:e};Object(c.t)(l)}},finish_btn:function(){this.SelectRow.length<=0?this.$Message.error("请选择要分拣的产品"):this.WarehousingMsg=!0},setWarehousing:function(t){var e=this;Object(l._36)(t).then(function(t){if(console.log(t),1==t.Success){e.$Message.success("分拣完成");var i=e;setTimeout(function(){i.loading=!0,i.getdetail_data(this.wayBillID),i.SelectRow=[],i.$refs.reFresh.loading=!0,i.$refs.reFresh.getlistdata()},1e3)}else e.$Message.error(t.Data),e.isdisabled=!1})},getCookie:function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return o[1]}return""},ok_Warehousing:function(){1==this.issharevalue&&this.ok_share(),console.log(this.issharevalue),this.isdisabled=!0,this.WarehousingMsg=!1,this.pusharr=[];for(var t=0,e=this.SelectRow.length;t<e;t++){var i={NoticeID:this.SelectRow[t].ID,OutputID:this.SelectRow[t].OutputID,BoxCode:this.newboxcodeback,Quantity:this.SelectRow[t].CurrentQuantity,Weight:this.SelectRow[t].Weight,NetWeight:this.SelectRow[t].NetWeight,Volume:this.SelectRow[t].Pickings.Volume,Files:this.SelectRow[t].Imagefiles};this.pusharr.push(i)}var o={Waybill:{ID:this.waybillinfo.ID,ExcuteStatus:this.waybillinfo.ExcuteStatus,Type:this.waybillinfo.Type,OrderID:this.waybillinfo.OrderID,Summary:"",Files:this.waybillinfo.FeliverGoodFile,LoadingExcuteStatus:this.waybillinfo.LoadingExcuteStatus,WarehouseID:sessionStorage.getItem("UserWareHouse")},AdminID:sessionStorage.getItem("userID"),Pickings:this.pusharr};this.setWarehousing(o)},cancel_Warehousing:function(){this.WarehousingMsg=!1,this.oldboxcode=null,this.BoxcodeDelete()},errorstatue:function(t){1==t?this.isAbnormal=!0:(this.isAbnormal=!1,this.Summary="")},Abnormal_btn:function(){var t=this;if(void 0==this.Summary||""==this.Summary)this.isAbnormal=!0,this.$Message.error("请输入异常原因");else{this.isdisabled=!0,this.isAbnormal=!1;var e={waybillid:this.waybillinfo.ID,adminid:sessionStorage.getItem("userID"),orderid:this.waybillinfo.OrderID,summary:this.Summary};console.log(e),Object(l.E)(e).then(function(e){if(1==e.Success){t.$Message.success("出库完成，一秒后自动关闭");var i=t;setTimeout(function(){i.$store.dispatch("setshowtype",0),i.$store.dispatch("setshowdetailout",!1),i.$router.go(-1)},1e3)}else t.$Message.error("出库操作失败,请从新操作"),t.isdisabled=!1}),this.isAbnormal=!1}},closeerror:function(){this.isAbnormal=!1,this.Summary="",this.Reason="外观损坏"},handleRemove:function(t,e){var i=this,o={id:t.ID};Object(l.o)(o).then(function(o){1==o.Success?(i.IsfileDel=!0,i.Removebackfun(t,e),i.$Message.success("删除成功")):(i.IsfileDel=!1,i.$Message.error("删除失败"))})},Removebackfun:function(t,e){if("Clientimg"==e)this.waybillinfo.SendGoodsFile.splice(this.waybillinfo.SendGoodsFile.indexOf(t),1);else if("Waybill"==e)this.waybillinfo.FeliverGoodFile.splice(this.waybillinfo.FeliverGoodFile.indexOf(t),1);else for(var i=this.detailitem,o=0;o<i.length;o++)i[o].ID==e.ID&&(i[o].Imagefiles.splice(t,1),this.changeoriginalarr(i[o]))},changeacrrier:function(t){this.waybillinfo.CarrierName=t.label,2==this.waybillinfo.Type&&this.GetDriversCars(t.value)},search_pro:function(){var t=this;this.loading=!0,""!=this.searchkey?Object(l.u)(this.waybillinfo.ID,this.searchkey).then(function(e){if(e.length>0){for(var i=t.detailitem,o=[],n=(new Array,0);n<i.length;n++)for(var a=i[n].ID,l=0;l<e.length;l++){a==e[l].ID&&o.push(i[n])}t.detailitem=o}else t.detailitem=[]}):this.detailitem=this.originalarr,this.loading=!1},CgAllprint:function(){-1!=this.fruit.indexOf("出库单打印")&&this.outorder_print(),-1!=this.fruit.indexOf("送货单打印")&&this.Boxing_print()},outorder_print:function(){var t={waybillinfo:this.waybillinfo,listdata:this.detailitem};Object(c.n)(t)},Boxing_print:function(){var t=null;-1!=this.warehouseID.indexOf("SZ")?4==this.waybillinfo.Type||3==this.waybillinfo.Type?(this.language="SC",t=2):(this.language="SC",t=4):4==this.waybillinfo.Type?(this.language="EN",t=2):3==this.waybillinfo.Type?(this.language="TC",t=2):(this.language="TC",t=4);var e={Language:this.language,waybillinfo:this.waybillinfo,listdata:this.detailitem,Numcopies:t};Object(c.i)(e)},PrintBoxcode:function(){var t={Source:this.waybillinfo.Source,waybillID:this.waybillinfo.ID};this.showprintboxcode=!0,this.$refs.printbox.getparents(t),this.$refs.printbox.GetPackageType()},fileprint:function(t){var e=Object(c.f)()["文档打印"];e.Url=t;var i=e;Object(c.a)(i)},clackFilesProcess:function(t){var e={Url:t};Object(c.b)(e)},Getclientdata:function(t){var e=this;Object(l._9)(t).then(function(t){console.log(t),e.clientGrade=t.obj.Grade})},TestAVGWeightsum:function(){if(null!=this.sharevalue){0==/^\d+(\.\d{0,5})?$/.test(this.sharevalue)||0==this.sharevalue?(this.$Message.error("请输入数字,小数点保留五位，且不等于零"),this.sharevalue=null):(this.sharevalue<this.AVGWeightsum-.5*this.AVGWeightsum||this.sharevalue>this.AVGWeightsum+.5*this.AVGWeightsum)&&this.$Modal.warning({title:"超过浮动50%！"})}},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()},changeData:function(t){this.saleDate=t,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)},hietorgetDetail:function(){this.loading=!0,this.getdetail_data(this.wayBillID)},sync_btn:function(){this.loading=!0,this.getdetail_data(this.wayBillID),this.$refs.reFresh.loading=!0,this.$refs.reFresh.getlistdata()},showBudget2:function(){this.storagecharge=!0,this.$refs.Storagecharge.IncomeParters(this.waybillinfo.OrderID)},changestoragecharge:function(t){this.storagecharge=t},IsRecordWarehouseFee:function(t){var e=this;Object(l._15)(t).then(function(t){console.log(t),"True"==t.data||(e.isdisabled=!0)})},Parentfun:function(){215==this.waybillinfo.ExcuteStatus?this.isdisabled=!0:this.isdisabled=!1}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[t._v("基础信息")]),t._v(" "),i("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[null!=t.waybillinfo?i("Row",[i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li detail1"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("ID：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.ID))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("状       态：")]),t._v(" "),i("span",[t._v("\n                "+t._s(t.waybillinfo.ExcuteStatusName)+"\n                "),null!=t.waybillinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:t.logchange}},[t._v("日志管理")]):t._e()],1)]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("业务类型：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.SourceName))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("客服人员：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.Merchandiser))])]),t._v(" "),void 0!=t.waybillinfo.Condition?i("li",{staticClass:"itemli"},[i("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}),t._v(" "),1==t.waybillinfo.Condition.AgencyCheck?i("Tag",{attrs:{color:"geekblue"}},[t._v("代检查")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.AgencyPayment?i("Tag",{attrs:{color:"purple"}},[t._v("代垫货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.AgencyReceive?i("Tag",{attrs:{color:"blue"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.ChangePackaging?i("Tag",{attrs:{color:"cyan"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.LableServices?i("Tag",{attrs:{color:"green"}},[t._v("标签服务")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.PayForFreight?i("Tag",{attrs:{color:"gold"}},[t._v("垫付运费")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.Repackaging?i("Tag",{attrs:{color:"orange"}},[t._v("重新包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.UnBoxed?i("Tag",{attrs:{color:"volcano"}},[t._v("拆箱验货")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.VacuumPackaging?i("Tag",{attrs:{color:"red"}},[t._v("真空包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.WaterproofPackaging?i("Tag",{attrs:{color:"magenta"}},[t._v("防水包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.QualityInspection?i("Tag",{attrs:{color:"lime"}},[t._v("质检")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.Unboxing?i("Tag",{attrs:{color:"yellow"}},[t._v("拆包装")]):t._e()],1):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"23%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("订  单  号：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.OrderID))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("制单时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.waybillinfo.CreateDate)))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("总  额  度：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("CNY "+t._s(t.waybillinfo.total))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("总  欠  款：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("CNY "+t._s(t.waybillinfo.totalDebt))])])])]),t._v(" "),i("Col",{staticStyle:{width:"30%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("客  户  编  号：")]),t._v(" "),i("span",[t._v("\n                "+t._s(t.waybillinfo.EnterCode)+"（"+t._s(t.waybillinfo.ClientName)+"）"),i("Tag",{attrs:{color:"geekblue"}},[t._v("LV "+t._s(t.clientGrade))]),t._v(" "),1==t.waybillinfo.IsClientLs?i("i",{staticStyle:{background:"#f90",color:"#ffffff",padding:"6px","border-radius":"50%","font-size":"17px"}},[t._v("租")]):t._e()],1)]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("总  货  值：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v(t._s(t.waybillinfo.chgTotalCurrency)+" "+t._s(t.waybillinfo.chgTotalPrice))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("是否逾期：")]),t._v(" "),1==t.waybillinfo.overDue?i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("是")]):i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("否")])])])]),t._v(" "),i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[215!=t.waybillinfo.ExcuteStatus?i("li",{staticClass:"itemli"},[i("span",{staticStyle:{float:"left","line-height":"27px"}},[t._v("发货情况拍照：")]),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("\n                  传照\n                ")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("\n                  拍照\n                ")])],1)]):t._e(),t._v(" "),2==t.waybillinfo.Type&&215==t.waybillinfo.ExcuteStatus||1==t.waybillinfo.Type&&215==t.waybillinfo.ExcuteStatus?i("li",{staticClass:"itemli",staticStyle:{"padding-top":"10px",clear:"both"}},[i("span",{staticStyle:{float:"left","line-height":"27px"}},[t._v("送 货 单 拍 照：")]),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Clientimg")}}},[t._v("\n                  传照\n                ")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Clientimg")}}},[t._v("\n                  拍照\n                ")])],1)]):t._e(),t._v(" "),i("li",{staticStyle:{clear:"both"}},[i("p",[t._v("发货情况照片：")]),t._v(" "),t._l(t.waybillinfo.FeliverGoodFile,function(e,o){return i("div",[8010==e.Type?i("div",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Tooltip",{attrs:{content:"删除",placement:"top"}},[i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,"Waybill")}}})],1),t._v(" "),i("Tooltip",{attrs:{content:"打印",placement:"top"}},[i("Icon",{attrs:{type:"ios-print-outline"},on:{click:function(i){return t.fileprint(e.Url)}}})],1)],1):t._e()])}),t._v(" "),2==t.waybillinfo.WaybillType&&215==t.waybillinfo.ExcuteStatus||1==t.waybillinfo.WaybillType&&215==t.waybillinfo.ExcuteStatus?i("p",[t._v("送货单照片：")]):t._e(),t._v(" "),t._l(t.waybillinfo.SendGoodsFile,function(e,o){return i("div",[8020==e.Type?i("div",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Tooltip",{attrs:{content:"删除",placement:"top"}},[i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,"Clientimg")}}})],1),t._v(" "),i("Tooltip",{attrs:{content:"打印",placement:"top"}},[i("Icon",{attrs:{type:"ios-print-outline"},on:{click:function(i){return t.fileprint(e.Url)}}})],1)],1):t._e()])})],2)])])],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[t._v("产品清单")]),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("ButtonGroup",{staticStyle:{width:"28%"}},[i("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":t.search_pro},model:{value:t.searchkey,callback:function(e){t.searchkey="string"==typeof e?e.trim():e},expression:"searchkey"}}),t._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.search_pro}},[t._v("筛选")])],1),t._v(" "),i("Button",{attrs:{type:"primary",disabled:215==t.waybillinfo.ExcuteStatus},on:{click:t.clickshowchangebox}},[t._v("一键入箱")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","in",t.waybillinfo.Source)}}},[t._v("收入")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","out",t.waybillinfo.Source)}}},[t._v("支出")]),t._v(" "),1==t.showStoragecharge?i("Button",{attrs:{type:"primary"},on:{click:t.showBudget2}},[t._v("仓储费录入")]):t._e(),t._v(" "),1==t.showStoragecharge?i("span",{staticStyle:{"font-size":"11px",color:"red"}},[t._v("（请收取仓储费，总共需收取仓储费的时长："+t._s(t.timedifference)+"天）")]):t._e(),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("Icon",{staticClass:"sync_btn hoverbtn",attrs:{type:"md-sync"},on:{click:t.sync_btn}}),t._v(" "),i("Button",{attrs:{type:"primary",shape:"circle",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.clickshowchangebox}},[t._v("\n            完成分拣\n          ")])],1)],1),t._v(" "),i("div",[i("div",{staticClass:"detail_tablebox"},[i("Table",{ref:"selection",attrs:{columns:t.tabletitle,data:t.detailitem,loading:t.loading},on:{"on-selection-change":t.handleSelectRow},scopedSlots:t._u([{key:"PartNumber",fn:function(e){var o=e.row;return e.index,[i("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{width:"120px",overflow:"hidden"}},[i("span",[t._v(t._s(o.Product.PartNumber))])]),t._v(" "),null!=o.Conditions?i("ul",{staticStyle:{float:"right"}},[i("li",[1==o.Conditions.IsCIQ?i("Tag",{attrs:{color:"primary"}},[t._v("商检")]):t._e()],1),t._v(" "),i("li",[1==o.Conditions.IsCCC?i("Tag",{attrs:{color:"warning"}},[t._v("CCC")]):t._e()],1),t._v(" "),i("li",[1==o.Conditions.IsEmbargo?i("Tag",{attrs:{color:"error"}},[t._v("禁运")]):t._e()],1),t._v(" "),i("li",[1==o.Conditions.IsHighPrice?i("Tag",{attrs:{color:"magenta"}},[t._v("高价值")]):t._e()],1)]):t._e()])]}},{key:"TinyOrderID",fn:function(e){var o=e.row;return e.index,[i("p",[t._v(t._s(o.TinyOrderID))])]}},{key:"Boxing_code",fn:function(e){var o=e.row;return e.index,[-1!=t.warehouseID.indexOf("SZ")?i("span",[t._v(t._s(o.BoxCode))]):i("div",{staticStyle:{display:"inline-block"}},[i("Input",{attrs:{disabled:!0},model:{value:o.BoxCode,callback:function(e){t.$set(o,"BoxCode",e)},expression:"row.BoxCode"}})],1)]}},{key:"imglist",fn:function(e){var o=e.row;return e.index,t._l(o.Imagefiles,function(e){return i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{ref:o.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,o)}}})],1)})}},{key:"operation",fn:function(e){var o=e.row;return e.index,[i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload",disabled:1==o._disabled},on:{click:function(e){return t.SeletUpload(o)}}},[t._v("\n                  传照\n                ")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera",disabled:1==o._disabled},on:{click:function(e){return t.fromphotos(o)}}},[t._v("\n                  拍照\n                ")])],1)]}}])}),t._v(" "),i("div",{staticClass:"successbtn",staticStyle:{"margin-top":"20px"}},[i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.clickshowchangebox}},[t._v("\n              完成分拣\n            ")]),t._v(" "),-1==t.warehouseID.indexOf("HK")?i("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==t.isdisabled},on:{click:function(e){t.isAbnormal=!0}}},[t._v("\n              分拣异常\n            ")]):t._e()],1)],1),t._v(" "),i("div",[i("p",{staticClass:"detailtitle",staticStyle:{"margin-bottom":"20px"}},[t._v("封箱")]),t._v(" "),1==t.reFresh?i("Sealing-html",{ref:"reFresh",attrs:{OrderID:t.waybillinfo.OrderID,Type:"2",EnterCode:t.waybillinfo.EnterCode,WaybillID:t.waybillinfo.ID},on:{hietorgetDetail:t.hietorgetDetail}}):t._e()],1)])])]),t._v(" "),i("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:t.Budgetdetail,callback:function(e){t.Budgetdetail=e},expression:"Budgetdetail"}},[i("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[i("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:t.closeBudget}})],1),t._v(" "),i("div",[i("router-view")],1)]),t._v(" "),i("Modal",{attrs:{title:"一键入箱","mask-closable":!1},on:{"on-visible-change":t.changeshowbox},model:{value:t.showchangebox,callback:function(e){t.showchangebox=e},expression:"showchangebox"}},[i("span",{attrs:{slot:"close"},slot:"close"},[i("Icon",{attrs:{type:"ios-close"},on:{click:t.cancel}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("日       期：\n      ")]),t._v(" "),i("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:t.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:t.saleDate},on:{"on-change":t.changeData}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("箱       号：\n      ")]),t._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(e){return t.handleCreate1(t.newboxcode,e)}},model:{value:t.newboxcode,callback:function(e){t.newboxcode="string"==typeof e?e.trim():e},expression:"newboxcode"}})],1),t._v(" "),1==t.issharevalue?i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("重量(Kg)： ")]),t._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入重量"},on:{"on-blur":t.TestAVGWeightsum,"on-enter":t.TestAVGWeightsum},model:{value:t.sharevalue,callback:function(e){t.sharevalue=e},expression:"sharevalue"}})],1):t._e(),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v(" ")]),t._v("推算重量(Kg)： ")]),t._v(" "),i("span",[t._v(t._s(t.AVGWeightsum))])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.ok_changebox}},[t._v("确定")])],1)]),t._v(" "),1==t.WarehousingMsg?i("div",[i("Modal",{attrs:{title:"确定分拣"},on:{"on-ok":t.ok_Warehousing,"on-cancel":t.cancel_Warehousing},model:{value:t.WarehousingMsg,callback:function(e){t.WarehousingMsg=e},expression:"WarehousingMsg"}},[i("div",[i("span",[t._v("是否确认分拣")])])])],1):t._e(),t._v(" "),i("Modal",{attrs:{title:"打印"},on:{"on-ok":t.CgAllprint,"on-cancel":t.cancel},model:{value:t.showprint,callback:function(e){t.showprint=e},expression:"showprint"}},[i("CheckboxGroup",{model:{value:t.fruit,callback:function(e){t.fruit=e},expression:"fruit"}},[i("Checkbox",{attrs:{label:"出库单打印"}}),t._v(" "),i("Checkbox",{attrs:{label:"送货单打印"}})],1)],1),t._v(" "),i("Modal",{attrs:{title:"箱签打印",width:"80","mask-closable":!1},model:{value:t.showprintboxcode,callback:function(e){t.showprintboxcode=e},expression:"showprintboxcode"}},[i("Print-boxcode",{ref:"printbox"})],1),t._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:t.showlogged,callback:function(e){t.showlogged=e},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),t._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[t._v("日志管理")])]),t._v(" "),t.showlogged?i("logg-ed",{key:t.loggdetime,ref:"logged",attrs:{WaybillID:t.waybillinfo.ID}}):t._e()],1),t._v(" "),i("Modal",{attrs:{title:"仓储费录入","mask-closable":!1,"footer-hide":!0,width:60},on:{"on-visible-change":t.changestoragecharge},model:{value:t.storagecharge,callback:function(e){t.storagecharge=e},expression:"storagecharge"}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v("\n      仓储费录入\n      "),i("span",{staticStyle:{"font-size":"14px","padding-left":"10px"}},[t._v("(总共需收取仓储费的时长："+t._s(t.timedifference)+"天)")])]),t._v(" "),i("Storagecharge",{ref:"Storagecharge",attrs:{OrderID:t.waybillinfo.OrderID,timedifference:t.timedifference},on:{Parentfun:t.Parentfun}})],1)],1)},staticRenderFns:[]};var p=i("VU/8")(v,b,!1,function(t){i("JLzp")},"data-v-dd838aaa",null);e.default=p.exports},JLzp:function(t,e){},mgFL:function(t,e){}});
//# sourceMappingURL=8.96ce422f3279dfb08a84.js.map