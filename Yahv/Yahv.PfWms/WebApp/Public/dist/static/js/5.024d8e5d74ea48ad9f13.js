webpackJsonp([5,32,38],{"8nki":function(e,t){},Jm0p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("dciI"),s={props:["Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Currents"],data:function(){return{Labeltotal:"",Labelfee:!1,spinShow:!0,Subject:"",Currency:3,RightPrice:"",disabledis:!1,columns1:[{title:"#",slot:"Indexs",align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"金额",slot:"RightPrice",align:"center"},{title:"发生时间",slot:"createdata",align:"center"},{title:"录入人",slot:"user",align:"center"}],data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}],cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],PayeeID:"",PayerID:""}},watch:{theUrl:{Currents:function(e,t){this.refreshAudio(),this.url=""!=e?this.Commonconst.recordForwardPrefix+e:""},deep:!0}},mounted:function(){},methods:{testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.RightPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(e){if(""!=e){if(0==/^[0-9]*$/.test(e))this.RightPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,e<=10)this.RightPrice=100;else{var t=5*(e-10);this.RightPrice=100+t}}},change_subject:function(e){"处理标签费"==e&&(this.Labelfee=!0);var t;t=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(t);var a=t[0];t.length>0?(this.disabledis=!0,this.Currency=a.PayQuote.Currency,this.RightPrice=a.PayQuote.Price):(this.disabledis=!1,this.Currency=3,this.RightPrice="")},currency_subject:function(){var e=this;Object(r.G)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this;if(""==this.Subject||""==this.Currency||""==this.RightPrice)this.$Message.error("请输入必填项");else if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else{var t={Currency:this.Currency,FeeType:this.$route.query.type,Files:[],LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal};Object(r.M)(t).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.$emit("fatherMethod")):e.$Message.error("保存失败，请核实信息是否正确")})}}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cashbox"},[a("div",[a("div",[a("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),a("p",{staticClass:"iteminput"},[a("label",{attrs:{for:""}},[e._v("收款人：")]),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[a("label",{attrs:{for:""}},[e._v("付 款  人：")]),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":e.change_subject},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}},e._l(this.Subjectarr,function(t,r){return a("Option",{key:t.index,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),1==e.Labelfee?a("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),a("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(t){return e.Labelchange(e.Labeltotal)}},model:{value:e.Labeltotal,callback:function(t){e.Labeltotal=t},expression:"Labeltotal"}})],1):e._e(),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(2),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},model:{value:e.Currency,callback:function(t){e.Currency=t},expression:"Currency"}},e._l(e.Currencyarr,function(t,r){return a("Option",{key:t.index,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),a("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(t){return e.testprice(e.RightPrice)}},model:{value:e.RightPrice,callback:function(t){e.RightPrice=t},expression:"RightPrice"}})],1),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.submit_btn}},[e._v("提交")])],1),e._v(" "),a("div",[a("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Currents,"max-height":"380"},scopedSlots:e._u([{key:"Indexs",fn:function(t){t.row;var r=t.index;return[a("span",[e._v(e._s(r+1))])]}},{key:"type",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Conduct))])]}},{key:"Subject",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Subject))])]}},{key:"RightPrice",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Price))])]}},{key:"createdata",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.CreateDate))])]}},{key:"user",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Creator))])]}}])})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("金       额：")])}]};var n=a("VU/8")(s,i,!1,function(e){a("mrDi")},"data-v-7d4399e0",null);t.default=n.exports},c1vs:function(e,t){},cohX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("dciI"),s={props:["Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Records"],data:function(){return{Labeltotal:"",Labelfee:!1,Subject:"",Currency:3,LeftPrice:"",disabledis:!1,columns1:[{title:"#",slot:"indexs",align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"计价金额",slot:"valuationCurrency",align:"center"},{title:"结算金额",slot:"SettlementCurrency",align:"center"},{title:"发生时间",slot:"createdata",align:"center"},{title:"录入人",slot:"user",align:"center"}],data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}],cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],PayeeID:"",PayerID:""}},mounted:function(){},methods:{testprice:function(e){if(""!=e){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&(this.LeftPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(e){if(""!=e){if(0==/^[0-9]*$/.test(e))this.LeftPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,e<=10)this.LeftPrice=100;else{var t=5*(e-10);this.LeftPrice=100+t}}},change_subject:function(e){"处理标签费"==e&&(this.Labelfee=!0);var t;t=this.Subjectarr.filter(function(t){return t.Name==e&&null!=t.PayQuote.Price}),console.log(t);var a=t[0];t.length>0?(this.disabledis=!0,this.Currency=a.PayQuote.Currency,this.LeftPrice=a.PayQuote.Price):(this.disabledis=!1,this.Currency=3,this.LeftPrice="")},currency_subject:function(){var e=this;Object(r.G)().then(function(t){e.Currencyarr=t.obj})},submit_btn:function(){var e=this;if(""==this.Subject||""==this.Currency||""==this.LeftPrice)this.$Message.error("请输入必填项");else if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else{var t={Currency:this.Currency,FeeType:this.$route.query.type,Files:[],LeftPrice:this.LeftPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:"",Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal};Object(r.M)(t).then(function(t){1==t.success?(e.$Message.success("保存成功"),e.Subject="",e.Currency=3,e.LeftPrice="",e.$emit("fatherMethod")):e.$Message.error("保存失败，请核实信息是否正确")})}}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cashbox"},[a("div",[a("h1",{staticClass:"setpadding_bottom"},[e._v("费用录入")]),e._v(" "),a("p",{staticClass:"iteminput"},[a("label",{attrs:{for:""}},[e._v(" 收款人：")]),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},model:{value:e.PayeeID,callback:function(t){e.PayeeID=t},expression:"PayeeID"}},e._l(this.Payeearr,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[a("label",{attrs:{for:""}},[e._v(" 付  款  人：")]),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:e.PayerID,callback:function(t){e.PayerID=t},expression:"PayerID"}},e._l(this.Payerarr,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(0),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":e.change_subject},model:{value:e.Subject,callback:function(t){e.Subject=t},expression:"Subject"}},e._l(this.Subjectarr,function(t,r){return a("Option",{key:t.index,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),1==e.Labelfee?a("p",{staticClass:"iteminput"},[e._m(1),e._v(" "),a("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(t){return e.Labelchange(e.Labeltotal)}},model:{value:e.Labeltotal,callback:function(t){e.Labeltotal=t},expression:"Labeltotal"}})],1):e._e(),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(2),e._v(" "),a("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:e.disabledis},model:{value:e.Currency,callback:function(t){e.Currency=t},expression:"Currency"}},e._l(e.Currencyarr,function(t,r){return a("Option",{key:t.index,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("p",{staticClass:"iteminput"},[e._m(3),e._v(" "),a("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额",disabled:e.disabledis},on:{"on-blur":function(t){return e.testprice(e.LeftPrice)}},model:{value:e.LeftPrice,callback:function(t){e.LeftPrice=t},expression:"LeftPrice"}})],1),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.submit_btn}},[e._v("提交")])],1),e._v(" "),a("div",[a("h1",{staticClass:"setpadding_bottom"},[e._v("流水列表")]),e._v(" "),a("Table",{attrs:{stripe:"",columns:e.columns1,data:e.Records,"max-height":"380"},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var r=t.index;return[a("span",[e._v(e._s(r+1))])]}},{key:"type",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Conduct))])]}},{key:"Subject",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Subject))])]}},{key:"valuationCurrency",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.RecordPrice))])]}},{key:"SettlementCurrency",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.SettlePrice))])]}},{key:"createdata",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.CreateDate))])]}},{key:"user",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.Creator))])]}}])})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("span",{staticClass:"spanMust"},[this._v("*")]),this._v("应收金额：")])}]};var n=a("VU/8")(s,i,!1,function(e){a("c1vs")},"data-v-54de58e4",null);t.default=n.exports},mrDi:function(e,t){},rxW1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Jm0p"),s=a("cohX"),i=a("dciI"),n=a("gyMJ"),o={components:{Cash:r.default,Bookkeeping:s.default},data:function(){return{otype:"",spinShow:!1,Bookkeepinglabel:"记账（应收）",Cashlabel:"现金（实收）",getformdata:"",Currencyarr:[],Subjectarr:[],Bookkeeping:{Payee:"",Payer:"",Payeearr:[],Payerarr:[]},Cash:{Payee:"",Payer:"",Payeearr:[],Payerarr:[]},Payee:"",Payer:"",OrderID:"",WaybillID:"",Records:[],Currents:[],Source:""}},created:function(){this.otype=this.$route.query.otype,this.OrderID=this.$route.query.OrderID,this.WaybillID=this.$route.query.webillID,this.Source=this.$route.query.Source,this.changtabledata()},mounted:function(){"in"==this.$route.query.type?(this.Bookkeepinglabel="记账（应收）",this.Cashlabel="现金（实收）",this.getlistdata(this.$route.query.type),this.IncomeParters(this.$route.query.webillID)):(this.Bookkeepinglabel="记账（应付）",this.Cashlabel="现金（实付）",this.getlistdata(this.$route.query.type),this.OutcomeParters(this.$route.query.webillID)),this.currency_subject(),this.getsubject(this.$route.query.type)},methods:{changetab:function(e){this.changtabledata()},changtabledata:function(){"in"==this.$route.query.type?this.IncomeRecords(this.WaybillID):this.OutcomeParters(this.WaybillID)},getdata_in_from:function(e,t){var a=this,r={waybillid:e,type:t,otype:"in"};Object(n.D)(r).then(function(e){a.getformdata=e,a.$refs.Bookkeeping.OrderID=a.getformdata.OrderID,a.$refs.Bookkeeping.WaybillID=a.getformdata.WaybillID,a.$refs.Cash.OrderID=a.getformdata.OrderID,a.$refs.Cash.WaybillID=a.getformdata.WaybillID,"in"==t?(a.$refs.Bookkeeping.Payer=a.getformdata.ClientName,a.$refs.Bookkeeping.Payee=a.getformdata.PayeeName,a.$refs.Bookkeeping.payerID=a.getformdata.ClientID,a.$refs.Bookkeeping.PayeeNameID=a.getformdata.PayeeID,a.$refs.Cash.Payer=a.getformdata.ClientName,a.$refs.Cash.Payee=a.getformdata.PayeeName,a.$refs.Cash.payerID=a.getformdata.ClientID,a.$refs.Cash.PayeeNameID=a.getformdata.PayeeID):(a.$refs.Bookkeeping.Payer=a.getformdata.ThirdName,a.$refs.Bookkeeping.Payee=a.getformdata.CarrierName,a.$refs.Bookkeeping.payerID=a.getformdata.ThirdID,a.$refs.Bookkeeping.PayeeNameID=a.getformdata.CarrierID,a.$refs.Cash.Payer=a.getformdata.ThirdName,a.$refs.Cash.Payee=a.getformdata.CarrierName,a.$refs.Cash.payerID=a.getformdata.ThirdID,a.$refs.Cash.PayeeNameID=a.getformdata.CarrierID),a.spinShow=!1})},currency_subject:function(){var e=this;Object(i.G)().then(function(t){e.Currencyarr=t.obj})},getsubject:function(e,t){var a=this,r={type:e,conduct:30==t?"代报关":"代仓储"};console.log(r),Object(i.L)(r).then(function(e){a.Subjectarr=e})},getlistdata:function(e){"in"==e?this.IncomeRecords(this.$route.query.webillID):this.OutcomeRecords(this.$route.query.webillID)},IncomeRecords:function(e){var t=this;Object(i.v)(e).then(function(e){console.log(e),1==e.success&&(t.Records=e.data.Records,t.Currents=e.data.Currents)})},OutcomeRecords:function(e){var t=this;Object(i.x)(e).then(function(e){1==e.success&&(t.Records=e.data.Records,t.Currents=e.data.Currents)})},IncomeParters:function(e){var t=this;Object(i.u)(e,this.otype).then(function(e){t.Bookkeeping.Payeearr=e.data.Record.Payees,t.Bookkeeping.Payerarr=e.data.Record.Payers,t.Cash.Payeearr=e.data.Current.Payees,t.Cash.Payerarr=e.data.Current.Payers,t.$refs.Cash.PayeeID=e.data.Current.Payees[0].ID,t.$refs.Cash.PayerID=e.data.Current.Payers[0].ID,t.$refs.Bookkeeping.PayeeID=e.data.Record.Payees[0].ID,t.$refs.Bookkeeping.PayerID=e.data.Record.Payers[0].ID})},OutcomeParters:function(e){var t=this;Object(i.w)(e,this.otype).then(function(e){t.Bookkeeping.Payeearr=e.data.Record.Payees,t.Bookkeeping.Payerarr=e.data.Record.Payers,t.Cash.Payeearr=e.data.Current.Payees,t.Cash.Payerarr=e.data.Current.Payers,t.$refs.Cash.PayeeID=e.data.Current.Payees[0].ID,t.$refs.Cash.PayerID=e.data.Current.Payers[0].ID,t.$refs.Bookkeeping.PayeeID=e.data.Record.Payees[0].ID,t.$refs.Bookkeeping.PayerID=e.data.Record.Payers[0].ID})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cashbox"},[a("Tabs",{attrs:{value:"Bookkeeping",animated:!1},on:{"on-click":e.changetab}},[a("TabPane",{attrs:{label:e.Bookkeepinglabel,name:"Bookkeeping"}},[a("Spin",{directives:[{name:"show",rawName:"v-show",value:1==e.spinShow,expression:"spinShow==true"}],attrs:{size:"large",fix:""}}),e._v(" "),a("Bookkeeping",{directives:[{name:"show",rawName:"v-show",value:0==e.spinShow,expression:"spinShow==false"}],ref:"Bookkeeping",attrs:{Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Bookkeeping.Payeearr,Payerarr:e.Bookkeeping.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Records:e.Records},on:{"update:Records":function(t){e.Records=t},"update:records":function(t){e.Records=t},fatherMethod:e.changtabledata}})],1),e._v(" "),a("TabPane",{attrs:{label:e.Cashlabel,name:"Cash"}},[a("Cash",{ref:"Cash",attrs:{Currencyarr:e.Currencyarr,Subjectarr:e.Subjectarr,Payeearr:e.Cash.Payeearr,Payerarr:e.Cash.Payerarr,OrderID:e.OrderID,WaybillID:e.WaybillID,Currents:e.Currents},on:{"update:Currents":function(t){e.Currents=t},"update:currents":function(t){e.Currents=t},fatherMethod:e.changtabledata}})],1)],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(o,c,!1,function(e){a("8nki")},"data-v-2922312e",null);t.default=l.exports}});
//# sourceMappingURL=5.024d8e5d74ea48ad9f13.js.map