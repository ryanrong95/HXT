webpackJsonp([8,23],{"30p3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("TXMN");var a=i("gyMJ"),l=i("dciI"),s=i("PJh5"),r=i.n(s),n=i("xu/c"),o=i("9hH2"),c=i("Wxb1"),u={inject:["reload"],name:"Warehousing",components:{"routine-enter":n.default,Declare:o.default,"img-test":c.default},data:function(){return{WaybillCurrentStatustimer:null,routername:"",isshowstate:!0,testarrstate:[10],istagall:0,timer1:"",timer2:"",timer3:"",loading:!0,warehouseID:sessionStorage.getItem("UserWareHouse"),search_datas:{key:"",WaybillSupplier:"",ProductPartNumber:"",WaybillExcuteStatus:"100,105,108, 110,115,125,130",Source:1,WaybillType:0,StartDate:"",EndDate:"",PageSize:10,PageIndex:1,WhID:sessionStorage.getItem("UserWareHouse")},WaybillTypeArr:[],Notice_title:[{title:"订单号",slot:"orderID",align:"center",width:180},{title:"业务类型",slot:"Sourcedec",align:"center",width:110},{title:"到货方式",slot:"WaybillTypeDescription",align:"center"},{title:"到货时间",slot:"ArrivalDate",align:"center"},{title:"运单号",slot:"Code",align:"center"},{title:"承运商",slot:"CarrierName",align:"center"},{title:"入仓号",slot:"EnterCode",align:"center"},{title:"供应商",slot:"Supplier",align:"center"},{title:"制单时间",slot:"CreateDate",align:"center"},{title:"状态",slot:"ExcuteStatusDescription",align:"center"},{title:"操作",slot:"action",align:"center"}],Notice_list:[],Showdetailid:"",NoticeStatus:[],NoticeType:[],total:0,setIntervaltimer:null,timenmae:null,routetype:""}},created:function(){this.CgWaybillType(),this.routername=this.$route.name,"CgProcessed"==this.$route.name?(this.testarrstate=[120],this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!1):(this.testarrstate=[10],this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!0),this.clear_time(),window.setIntervaltimer=this.setIntervaltimer,this.cgSearch_sortings(this.search_datas)},computed:{getid:function(){return this.Showdetailid},gethouse:function(){return sessionStorage.getItem("UserWareHouse")},showdetail:function(){if(1==this.$store.state.common.showdetail)this.clear_time(),this.timenmae=null,this.clear_timewaybill(),this.WaybillCurrentStatustimer=null;else;return this.$store.state.common.showdetail},showtype:function(){return this.$store.state.common.showtypein}},watch:{$route:function(t,e){"/CgProcessed"==t.path&&0==this.showdetail&&"/CgProcessed/Declare"!=e.path?(this.reload(),this.clear_timewaybill(),this.WaybillCurrentStatustimer=null):"/CgUntreated"==t.path&&0==this.showdetail&&"/CgProcessed/Declare"!=e.path&&(this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,this.reload())}},mounted:function(){this.setnva(),this.getstatus()},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return r()(+e).format("YYYY-MM-DD")}}},methods:{CgWaybillType:function(){var t=this;Object(l.y)().then(function(e){console.log(e),t.WaybillTypeArr=e.obj})},tabledblclick:function(t,e){1==t.Waybill.Operated&&this.showDrawer(t.Waybill.ID,t.Waybill.Source)},new_time:function(){var t=this;this.timenmae=setInterval(function(){setTimeout(function(){t.cgSearch_sortings(t.search_datas)},0)},2e3)},clear_time:function(){clearInterval(this.timenmae),this.timenmae=null},clear_timewaybill:function(){clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null},dyncMount:function(){this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",3),this.timer=(new Date).getTime()},showDrawer:function(t,e){if(this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",2),this.Showdetailid=t,30==e)this.$router.push({name:"CgProcessedDeclare",params:{wayBillID:t}});else if(1e3==e)this.$store.dispatch("setshowtypein",3),this.$router.push({path:"/Cgenter/Customswindow"});else{this.$store.dispatch("setshowtypein",1),this.timer1=(new Date).getTime();var i=this;setTimeout(function(){i.$refs.routineenter.WayParterdata(),i.$refs.routineenter.CgDetail_new(t)},20)}},closDrawer:function(){4!=this.showtype&&3!=this.showtype&&2!=this.showtype||this.$router.go(-1);this.$store.dispatch("setshowdetail",!1),this.clear_timewaybill(),this.WaybillCurrentStatustimer=null},changepage:function(t){this.loading=!0,this.search_datas.PageIndex=t,this.cgSearch_sortings(this.search_datas)},changedata:function(t){this.search_datas.StartDate=t[0],this.search_datas.EndDate=t[1]},search_btn:function(){""!=this.search_datas.key||""!=this.search_datas.WaybillExcuteStatus||""!=this.search_datas.WaybillSupplier||""!=this.search_datas.StartDate||""!=this.search_datas.EndDate||""!=this.search_datas.ProductPartNumber?(this.loading=!0,this.search_datas.PageIndex=1,this.cgSearch_sortings(this.search_datas)):this.$Message.error("请至少输入一个查询条件")},clear_btn:function(){if(""!=this.search_datas.key||""!=this.search_datas.WaybillExcuteStatus||""!=this.search_datas.WaybillSupplier||""!=this.search_datas.StartDate||""!=this.search_datas.EndDate||""!=this.search_datas.ProductPartNumber){this.search_datas={WhID:sessionStorage.getItem("UserWareHouse"),key:"",WaybillSupplier:"",WaybillExcuteStatus:this.testarrstate.join(","),StartDate:"",EndDate:"",ProductPartNumber:"",Source:1,WaybillType:0,PageIndex:1,PageSize:10},this.loading=!0,this.search_datas.PageIndex=1,this.$refs.element.handleClear(),this.cgSearch_sortings(this.search_datas)}},wareing:function(t){var e=this;Object(a.S)(t).then(function(t){e.total=t.obj.Total,e.loading=!1,0!=e.total?e.Notice_list=t.obj.Data:e.Notice_list=[]}).catch(function(t){e.loading=!1,e.Notice_list=[]})},getstatus:function(){var t=this;Object(a.s)().then(function(e){t.NoticeType=e.obj}),Object(a.g)().then(function(e){t.NoticeStatus=e.obj;e.obj})},setnva:function(){this.$store.dispatch("setnvadata",[{title:"入库",href:""}])},staging:function(){this.$store.dispatch("setshowdetail",!0),this.$store.dispatch("setshowtypein",4),this.$router.push({path:"/Cgenter/separate"})},testarrs:function(t){10==t?-1==this.testarrstate.indexOf(t)?(this.testarrstate=[],this.testarrstate.push(t),this.istagall=!0):this.istagall=!1:(this.testarrstate=this.testarrstate.filter(function(t){return 10!=t}),this.istagall=!1,-1==this.testarrstate.indexOf(t)?this.testarrstate.push(t):(this.testarrstate=this.testarrstate.filter(function(e){return e!=t}),0==this.testarrstate.length&&this.testarrstate.push(10))),this.search_datas.WaybillExcuteStatus=this.testarrstate.join(","),this.search_btn()},cgsortings:function(){var t=this;Object(l._14)(this.warehouseID,1,10).then(function(e){t.total=e.obj.Total,t.Notice_list=e.obj.Data,t.loading=!1})},cgSearch_sortings:function(t){var e=this;this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,Object(l._12)(t).then(function(t){e.total=t.obj.Total,e.Notice_list=t.obj.Data,e.loading=!1,"/CgUntreated"==e.$route.path?(e.changeOperated(e.Notice_list),e.clear_timewaybill(),e.WaybillCurrentStatustimer=null,e.timerGetWaybillCurrentStatus(e.Notice_list)):(e.clear_timewaybill(),e.WaybillCurrentStatustimer=null)})},changeDrawer:function(t){1==t?(this.clear_time(),this.timenmae=null,this.clear_timewaybill(),this.WaybillCurrentStatustimer=null):(this.clear_timewaybill(),this.WaybillCurrentStatustimer=null,this.cgSearch_sortings(this.search_datas))},timerGetWaybillCurrentStatus:function(t){var e=this;this.WaybillCurrentStatustimer=setInterval(function(){setTimeout(function(){e.changeOperated(t)},0)},3e3)},changeOperated:function(t){for(var e=this,i=[],a=0;a<t.length;a++)i.push(t[a].Waybill.ID);var s={WaybillIDs:i};Object(l.T)(s).then(function(t){for(var i=t.Data,a=0;a<i.length;a++)for(var l=0;l<e.Notice_list.length;l++)i[a].waybillID==e.Notice_list[l].Waybill.ID&&(e.Notice_list[l].Waybill.Operated=i[a].Operated)})}},beforeDestroy:function(){this.clear_timewaybill(),clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null,this.clear_time()},destroyed:function(){this.clear_timewaybill(),clearInterval(this.WaybillCurrentStatustimer),this.WaybillCurrentStatustimer=null,this.clear_time()}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[1==t.isshowstate?i("div",{staticClass:"shaixuanbox"},[i("em",{staticClass:"title"},[t._v("快速筛选：")]),t._v(" "),t._l(t.NoticeStatus,function(e){return i("span",{key:e.value,class:-1!==t.testarrstate.indexOf(e.value)&&!t.istagall||10==e.value&&t.istagall?"item_status":"item_status2",on:{click:function(i){return t.testarrs(e.value)}}},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),i("div",[i("p",{staticClass:"inputwidth"},[i("label",{attrs:{for:"运单号/入仓号/订单号"}},[t._v("运单号/入仓号/订单号：")]),t._v(" "),i("Input",{staticClass:"inputitems",attrs:{placeholder:"",autofocus:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.key,callback:function(e){t.$set(t.search_datas,"key","string"==typeof e?e.trim():e)},expression:"search_datas.key"}})],1),t._v(" "),i("p",{staticClass:"inputwidth"},[i("label",{attrs:{for:"供应商"}},[t._v("供应商：")]),t._v(" "),i("Input",{staticClass:"inputitems",attrs:{placeholder:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.WaybillSupplier,callback:function(e){t.$set(t.search_datas,"WaybillSupplier","string"==typeof e?e.trim():e)},expression:"search_datas.WaybillSupplier"}})],1),t._v(" "),i("p",{staticClass:"inputwidth"},[i("label",{attrs:{for:"供应商"}},[t._v("产品型号：")]),t._v(" "),i("Input",{staticClass:"inputitems",attrs:{placeholder:""},on:{"on-enter":t.search_btn},model:{value:t.search_datas.ProductPartNumber,callback:function(e){t.$set(t.search_datas,"ProductPartNumber","string"==typeof e?e.trim():e)},expression:"search_datas.ProductPartNumber"}})],1),t._v(" "),i("p",{staticClass:"inputwidth"},[i("label",{attrs:{for:"业务类型"}},[t._v("业务类型：")]),t._v(" "),i("Select",{staticClass:"inputitems",attrs:{placeholder:""},model:{value:t.search_datas.Source,callback:function(e){t.$set(t.search_datas,"Source","string"==typeof e?e.trim():e)},expression:"search_datas.Source"}},t._l(t.NoticeType,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),i("p",{staticClass:"inputwidth"},[i("label",{attrs:{for:"业务类型"}},[t._v("到货方式：")]),t._v(" "),i("Select",{staticClass:"inputitems",attrs:{placeholder:""},model:{value:t.search_datas.WaybillType,callback:function(e){t.$set(t.search_datas,"WaybillType","string"==typeof e?e.trim():e)},expression:"search_datas.WaybillType"}},t._l(t.WaybillTypeArr,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),i("div",{staticClass:"inputwidth"},[i("label",{attrs:{for:"业务类型"}},[t._v("开始时间与结束时间：  ")]),t._v(" "),i("DatePicker",{ref:"element",staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"",editable:!1,separator:"  至  "},on:{"on-change":t.changedata}})],1),t._v(" "),i("div",{staticStyle:{float:"left"}},[i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.search_btn}},[t._v("查询")]),t._v(" "),i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",icon:"ios-trash"},on:{click:t.clear_btn}},[t._v("清空")])],1)]),t._v(" "),i("div",{staticStyle:{width:"100%",display:"inline-block","margin-top":"20px"}},[i("Table",{attrs:{columns:t.Notice_title,data:t.Notice_list,loading:t.loading},on:{"on-row-dblclick":t.tabledblclick},scopedSlots:t._u([{key:"orderID",fn:function(e){var i=e.row;return e.index,[t._v("\n        "+t._s(i.Waybill.OrderID)+"\n      ")]}},{key:"Sourcedec",fn:function(e){var a=e.row;return e.index,[10==a.Waybill.Source?i("Tag",{attrs:{color:"#009688"}},[t._v(t._s(a.Waybill.SourceDes))]):t._e(),t._v(" "),20==a.Waybill.Source?i("Tag",{attrs:{color:"#2F4056"}},[t._v(t._s(a.Waybill.SourceDes))]):t._e(),t._v(" "),30==a.Waybill.Source?i("Tag",{attrs:{color:"#FF5722"}},[t._v(t._s(a.Waybill.SourceDes))]):t._e(),t._v(" "),40==a.Waybill.Source?i("Tag",{attrs:{color:"#1E9FFF"}},[t._v(t._s(a.Waybill.SourceDes))]):t._e(),t._v(" "),50==a.Waybill.Source?i("Tag",{attrs:{color:"#FFA2D3"}},[t._v(t._s(a.Waybill.SourceDes))]):t._e()]}},{key:"CreateDate",fn:function(e){var a=e.row;return e.index,[i("span",[t._v(t._s(t._f("showDateexact")(a.Waybill.CreateDate)))])]}},{key:"WaybillTypeDescription",fn:function(e){var a=e.row;return e.index,[1==a.Waybill.Type?i("div",[1==a.Waybill.Type&&100==a.Waybill.LoadingExcuteStatus?i("Tag",{attrs:{color:"magenta"}},[t._v(t._s(a.Waybill.TypeDes))]):t._e(),t._v(" "),1==a.Waybill.Type&&105==a.Waybill.LoadingExcuteStatus?i("Tag",{attrs:{color:"blue"}},[t._v(t._s(a.Waybill.TypeDes))]):t._e(),t._v(" "),1==a.Waybill.Type&&200==a.Waybill.LoadingExcuteStatus?i("Tag",{attrs:{color:"green"}},[t._v(t._s(a.Waybill.TypeDes))]):t._e()],1):i("span",[t._v(t._s(a.Waybill.TypeDes))])]}},{key:"ArrivalDate",fn:function(e){var a=e.row;return e.index,[i("span",[t._v(t._s(t._f("showDateexact")(a.Waybill.CreateDate)))])]}},{key:"EnterCode",fn:function(e){var i=e.row;return e.index,[t._v("\n        "+t._s(i.Waybill.EnterCode)+"\n      ")]}},{key:"Code",fn:function(e){var i=e.row;return e.index,[t._v(t._s(i.Waybill.Code))]}},{key:"CarrierName",fn:function(e){var i=e.row;return e.index,[t._v(t._s(i.Waybill.CarrierName))]}},{key:"Supplier",fn:function(e){var i=e.row;return e.index,[t._v(t._s(i.Waybill.Supplier))]}},{key:"ExcuteStatusDescription",fn:function(e){var i=e.row;return e.index,[t._v(t._s(i.Waybill.ExcuteStatusDes))]}},{key:"action",fn:function(e){var a=e.row;return e.index,[120==a.Waybill.ExcuteStatus?i("Button",{attrs:{disabled:0==a.Waybill.Operated,size:"small"},on:{click:function(e){return t.showDrawer(a.Waybill.ID,a.Waybill.Source)}}},[t._v("查看")]):i("Button",{attrs:{disabled:0==a.Waybill.Operated,type:"primary",size:"small"},on:{click:function(e){return t.showDrawer(a.Waybill.ID,a.Waybill.Source)}}},[t._v("处理")])]}}])}),t._v(" "),i("div",{staticClass:"pages"},[i("Page",{attrs:{total:t.total,"page-size":10,current:t.search_datas.PageIndex},on:{"on-change":t.changepage}})],1)],1),t._v(" "),i("Drawer",{attrs:{title:"",closable:!1,width:90,scrollable:!0,"mask-closable":!1},on:{"on-visible-change":t.changeDrawer},model:{value:t.showdetail,callback:function(e){t.showdetail=e},expression:"showdetail"}},[i("div",[i("div",{staticClass:"closDrawer_btn",attrs:{slot:"close"},slot:"close"},[i("Icon",{staticClass:"icon1",attrs:{type:"md-close"},on:{click:t.closDrawer}})],1),t._v(" "),1==t.showtype?i("routine-enter",{key:t.timer1,ref:"routineenter"}):i("router-view")],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(u,_,!1,function(t){i("mbQv")},"data-v-778d9338",null);e.default=d.exports},KoTp:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__=__webpack_require__("bOdI"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2__Pages_Cgenter_NotingEnter__=__webpack_require__("D7ok"),__WEBPACK_IMPORTED_MODULE_3__CgHistory__=__webpack_require__("rrli"),__WEBPACK_IMPORTED_MODULE_4__Subassembly_Add_Carrier__=__webpack_require__("uWQ3"),__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Driver__=__webpack_require__("CZn4"),__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Car__=__webpack_require__("MgEx"),__WEBPACK_IMPORTED_MODULE_7__Common_logged__=__webpack_require__("93yw"),__WEBPACK_IMPORTED_MODULE_8__api__=__webpack_require__("gyMJ"),__WEBPACK_IMPORTED_MODULE_9__api_CgApi__=__webpack_require__("dciI"),__WEBPACK_IMPORTED_MODULE_10__js_browser_js__=__webpack_require__("3PyT"),__WEBPACK_IMPORTED_MODULE_11_vue__=__webpack_require__("7+uW"),__WEBPACK_IMPORTED_MODULE_12_moment__=__webpack_require__("PJh5"),__WEBPACK_IMPORTED_MODULE_12_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_moment__),__WEBPACK_IMPORTED_MODULE_13_qs__=__webpack_require__("mw3O"),__WEBPACK_IMPORTED_MODULE_13_qs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_qs__),Base64=__webpack_require__("xrTZ").Base64,product_url=__webpack_require__("FHte"),lodash=__webpack_require__("M4fF");__webpack_exports__.a={name:"RoutineEnter",components:{"Noting-Enter":__WEBPACK_IMPORTED_MODULE_2__Pages_Cgenter_NotingEnter__.default,"History-Mount":__WEBPACK_IMPORTED_MODULE_3__CgHistory__.a,"Add-Carrier":__WEBPACK_IMPORTED_MODULE_4__Subassembly_Add_Carrier__.default,"Add-Driver":__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Driver__.default,"Add-Car":__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Car__.default,"logg-ed":__WEBPACK_IMPORTED_MODULE_7__Common_logged__.default},props:{},data:function(){var t=this;return{loggdetime:"",showlogged:!1,adddisabled:!1,showaddDriver:!1,addDriverName:null,showaddCar:!1,addCarName:null,showaddCarrier:!1,IsPersonal:!1,clientGrade:null,sharevalue:null,showshare:!1,TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],boxingarr:[],isdisabled:!1,timer:"",abnormal_enter:!1,SortingID:"",routername:"",Conditionstype:!0,printurl:product_url.pfwms,loading:!0,printlist:[],Conveyingplace:[],Conveyingplace2:[],chengevalue:{inputval:"",value:"",type:""},setClientCode:!1,ClientCode:"",model11:"",sethousbox:!1,housenumber:"",Storehouselist:[],detail_ID:"",searchkey:"",showphoto2:!1,time:"",WarehousingMsg:!1,Nomatching:[],details:{waybillinfo:{},wayBillID:"",total:0,pageIndex:1,pageSize:1e4,WaybillNo:"90416165067",Conveyorsite:"",columns1:[{type:"selection",width:50,align:"center"},{title:"# ",slot:"indexs",align:"left",width:30},{title:"型号",key:"PartNumber",render:function(t,e){return t("span",{},e.row.Product.PartNumber)}},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"品牌")])},key:"Manufacturer",render:function(e,i){var a=t;return e("Input",{props:{value:a.trim(i.row.Product.Manufacturer)},on:{"on-change":function(t){var e="";e=""!=t.target.value?a.trim(t.target.value):t.target.value,i.row.Product.Manufacturer=e,a.details.detailitem[i.index]=i.row,a.clicktest(i.row);for(var l=0;l<a.details.detailitem.length;l++)a.details.detailitem[l].PID==i.row.ID&&(a.details.detailitem[l].Product.Manufacturer=t.target.value)},"on-blur":function(t){if(""!=t.target.value?(i.row.Product.Manufacturer=t.target.value,a.details.detailitem[i.index]=i.row):(t.target.value=null,i.row.Product.Manufacturer=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0)for(var e=0,l=a.SelectRow.length;e<l;e++)i.row.SortingID==a.SelectRow[e].SortingID&&(a.SelectRow[e]=i.row)}}})}},{title:"应到",slot:"Arrival",align:"center",width:60},{title:"已到",slot:"Already",align:"center",width:60},{title:"剩余",slot:"Surplus",align:"center",width:60},{title:"批号",key:"DateCode",align:"center",render:function(e,i){var a=t;return e("Input",{props:{value:a.trim(i.row.DateCode)},on:{"on-change":function(t){var e="";if(e=""!=t.target.value||null!=t.target.value?a.trim(t.target.value):t.target.value,i.row.DateCode=e,a.details.detailitem[i.index]=i.row,a.clicktest(i.row),a.SelectRow.length>0)for(var l=0,s=a.SelectRow.length;l<s;l++)a.SelectRow[l].SortingID==i.row.SortingID&&(a.SelectRow[l]=i.row)}}})}},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"本次到货")])},key:"TruetoQuantity",align:"center",render:function(e,i){var a=t;return e("Input",{props:{value:Number(i.row.CurrentQuantity)<0?0:i.row.CurrentQuantity},on:{"on-change":function(t){1==/^[0-9]\d*$/.test(t.target.value)?(i.row.CurrentQuantity=t.target.value,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):t.target.value<=0?(a.$Message.error("数量不能为0"),t.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row):(a.$Message.error("只能输入数量"),t.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row);for(var e=0;e<a.SelectRow.length;e++)i.row.SortingID==a.SelectRow[e].SortingID&&(a.SelectRow[e].CurrentQuantity=t.target.value)},"on-blur":function(){1==/^[1-9]\d*$/.test(event.target.value)?(i.row.CurrentQuantity=event.target.value,a.details.detailitem[i.index]=i.row):(a.$Message.error("请输入数量"),event.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row);for(var t=0;t<a.SelectRow.length;t++)i.row.SortingID==a.SelectRow[t].SortingID&&(a.SelectRow[t].CurrentQuantity=event.target.value)}}})}},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"原产地")])},slot:"OriginDes",align:"left"},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"入库库位")])},slot:"ShelveID",align:"left",width:170,render:function(e,i){var a=t;return e("Select",{props:{value:i.row.ShelveID,disabled:0!=i.row._disabled,transfer:!0,filterable:!0},on:{"on-change":function(t){i.row.ShelveID=t,a.details.detailitem[i.index]=i.row,a.setselect(i.row)}}},t.Storehouselist.map(function(t){return e("Option",{props:{value:t.ShelveID,label:t.ShelveID}})}))}},{title:"体积(cm³)",key:"Volume",align:"center",render:function(e,i){var a=t;return e("Input",{props:{value:i.row.Volume},on:{"on-change":function(t){1==/^\d+(\.\d{0,2})?$/.test(t.target.value)?(i.row.Volume=t.target.value,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Volume=null,t.target.value=null,a.details.detailitem[i.index]=i.row)},"on-blur":function(){if(1==/^\d+(\.\d{0,2})?$/.test(event.target.value)?(i.row.Volume=event.target.value,a.details.detailitem[i.index]=i.row):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Volume=null,event.target.value=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0)for(var t=0,e=a.SelectRow.length;t<e;t++)a.SelectRow[t].SortingID==i.row.SortingID&&(a.SelectRow[t]=i.row)}}})}},{title:"毛重(Kg)",key:"Weight",align:"center",render:function(e,i){var a=t;return e("Input",{props:{value:i.row.Weight,autofocus:!0},on:{"on-change":function(t){},"on-blur":function(t){var e=a.trim(t.target.value);if(""!=e&&(1==/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(e)?(i.row.Weight=e,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Weight=null,t.target.value=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0))for(var l=0,s=a.SelectRow.length;l<s;l++)a.SelectRow[l].SortingID==i.row.SortingID&&(a.SelectRow[l]=i.row)},"on-enter":function(e){var l=a.trim(e.target.value);if(1==/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(l)){i.row.Weight=l,a.details.detailitem[i.index]=i.row;var s={Quantity:i.row.CurrentQuantity,inputsID:i.row.SortingID,Catalog:"",PartNumber:i.row.Product.PartNumber,Manufacturer:i.row.Product.Manufacturer,Packing:i.row.Product.Packing,PackageCase:i.row.Product.PackageCase,origin:i.row.origintext,SourceDes:t.details.waybillinfo.SourceDes},r=[];r.push(s);var n=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["产品标签"],o=-1!=n.Url.indexOf("http");n.Url=1==o?n.Url:t.printurl+n.Url;var c={setting:n,data:r};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(c)}else a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Weight="",e.target.value="",a.details.detailitem[i.index]=i.row}}})}},{title:"图片",slot:"imglist",align:"center"},{title:"异常原因",key:"imglist",align:"center",render:function(e,i){var a=t;return e("Input",{props:{value:i.row.Summary},on:{"on-change":function(t){var e="";e=""!=t.target.value?a.trim(t.target.value):t.target.value,i.row.Summary=e,a.details.detailitem[i.index]=i.row},"on-blur":function(t){if(a.SelectRow.length>0)for(var e=0,l=a.SelectRow.length;e<l;e++)a.SelectRow[e].SortingID==i.row.SortingID&&(a.SelectRow[e]=i.row)}}})}},{title:"操作",slot:"operation",align:"center",width:220}],detailitem:[],fathertype:""},uploadList:[],files:"",SelectRow:[],isAbnormal:!1,remarks:"",Reason:"外观损坏",Summary:"",historydata:!1,reFresh:!1,historydetail:{times:"",waybillLIst:[]},company:"",CarrierList:[],CarArr:[],CarArrName:"",DriversArr:[],DriversName:"",Storages:[],Sortings:[],NullNotice:[]}},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return __WEBPACK_IMPORTED_MODULE_12_moment___default()(+e).format("YYYY-MM-DD")}},changenumber:function(t){if(""!=t){var e=Number(t);return console.log(e),e}}},computed:{getarrs:function(){return this.Nomatching},Budgetdetail:function(){return this.$store.state.common.Budgetdetail}},watch:{getuplode:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){""!=getuplode&&alert(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(getuplode))})},mounted:function(){},created:function(){window.PhotoUploaded=this.changed,this.routername=this.$route.name},methods:{clicktest:lodash.throttle(function(t){for(var e=0,i=this.SelectRow.length;e<i;e++)t.SortingID==this.SelectRow[e].SortingID&&(this.SelectRow[e]=t)},1e3),setselect:function(t){for(var e=0,i=this.SelectRow.length;e<i;e++)t.SortingID==this.SelectRow[e].SortingID&&(this.SelectRow[e]=t)},tabledblclick:function(t,e){console.log(e)},handleCreate1:function(t){this.CarrierList.push({ID:t,Name:t})},handleCreate2:function(t){this.DriversArr.push({ID:t,Name:t})},handleCreate3:function(t){this.CarArr.push({ID:t,Name:t})},trim:function(t){if(t)return t.replace(/(^\s*)|(\s*$)/g,"")},ok:function(){this.$Message.info("Clicked ok"),this.showphoto2=!1},cancel:function(){this.showphoto2=!1,this.setClientCode=!1,this.abnormal_enter=!1,this.showshare=!1,this.showaddCarrier=!1,this.showaddDriver=!1,this.showaddCar=!1,this.sethousbox=!1},handleSelectRow:function(t){this.SelectRow=t},search_pro:function(){var t=this;this.loading=!0,Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._22)(this.details.waybillinfo.ID,this.searchkey).then(function(e){t.details.detailitem=e.Notice,t.loading=!1})},Abnormal:function(){this.SelectRow.length<=0||this.SelectRow.length>1?this.$Message.error("请选择到货异常的产品，有且只有一条"):(console.log(this.SelectRow[0]),null==this.SelectRow[0].CurrentQuantity||""==this.SelectRow[0].CurrentQuantity?this.$Message.error("请输入大于零的到货数量"):null==this.SelectRow[0].ShelveID?this.$Message.error("请选择入库库位"):this.isAbnormal=!0)},Abnormal_btn:function(){void 0==this.Summary||""==this.Summary?(this.isAbnormal=!0,this.$Message.error("请输入异常原因")):(this.isAbnormal=!1,this.ok_Warehousing(130))},closeerror:function(){this.isAbnormal=!1,this.Summary=""},finish_btn1:function(){1==this.details.waybillinfo.Type?""==this.details.waybillinfo.CarrierID?this.$Message.error("请先选择承运商"):""==this.details.waybillinfo.Driver?this.$Message.error("请选择司机"):""==this.details.waybillinfo.CarNumber1?this.$Message.error("请选择车牌号"):this.finish_btn():this.finish_btn()},finish_btn:function finish_btn(){if(this.SelectRow.length<=0)this.$Message.error("请选择要操作的产品项");else t:for(var k=0,len=this.SelectRow.length;k<len;k++){if(0==this.SelectRow[k].LeftQuantity||""==this.SelectRow[k].LeftQuantity){this.$Message.error("无通知产品请按照异常到货处理"),this.WarehousingMsg=!1;break}if(""==this.SelectRow[k].originID){this.$Message.error("请选择原产地"),this.WarehousingMsg=!1;break}if(null==this.SelectRow[k].ShelveID||""==this.SelectRow[k].ShelveID){this.$Message.error("请选择入库库位"),this.WarehousingMsg=!1;break}if(null==this.SelectRow[k].Product.Manufacturer)this.$Message.error("品牌不能为空"),this.WarehousingMsg=!1;else{if(""==this.SelectRow[k].CurrentQuantity||null==this.SelectRow[k].CurrentQuantity||null==this.SelectRow[k].ShelveID){this.$Message.error("请输入必填"),this.WarehousingMsg=!1;break}for(var sum=function sum(arr){return eval(arr.join("+"))},SelectRowK=k,arr=this.SelectRow,Nomatching=[],map={},dest=[],i=0;i<arr.length;i++){var ai=arr[i];if(map[ai.NoticeID])for(var j=0;j<dest.length;j++){var dj=dest[j];if(dj.NoticeID==ai.NoticeID){dj.data.push(Number(ai.CurrentQuantity));break}}else dest.push({name:ai.Product.PartNumber,Quantity:ai.LeftQuantity,NoticeID:ai.NoticeID,data:[Number(ai.CurrentQuantity)]}),map[ai.NoticeID]=ai.NoticeID}for(var that=this,i=0;i<dest.length;i++){var item=dest[i],total=sum(item.data);if(console.log(total),""==item.Quantity||null==item.Quantity){this.$Message.error("无通知产品请按照异常到货处理"),that.WarehousingMsg=!1;break t}if(item.Quantity<total){this.$Message.error("本次到货数量不能大于剩余数量,请按照异常到货进行处理"),that.WarehousingMsg=!1;break t}if(0==item.Quantity){this.$Message.error("剩余数量为0，不需要提交"),that.WarehousingMsg=!1;break t}item.Quantity>total?(Nomatching.push(item.name),that.Nomatching=Nomatching,SelectRowK==this.SelectRow.length-1&&(that.WarehousingMsg=!0)):item.Quantity==total&&SelectRowK==this.SelectRow.length-1&&(that.WarehousingMsg=!0)}}}},setWarehousing:function(t){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._13)(t).then(function(t){if(console.log(t),1==t.Success)if(e.loading=!0,40==e.details.waybillinfo.Source&&""!=t.Data){e.$Message.success("入库完成，正在跳转至出库分拣页面");var i=e;setTimeout(function(){i.testbtn(t.Data)},1e3)}else{e.$Message.success("入库完成"),1==e.isAbnormal&&(e.isAbnormal=!1,e.Summary="");i=e;setTimeout(function(){i.CgDetail_new(i.details.waybillinfo.ID),i.$refs.selection.selectAll(!1),i.SelectRow=[]},300)}else e.$Message.error("入库操作失败,请从新操作"),e.isdisabled=!1})},getCookie:function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var a=e[i].split("=");if(t==a[0])return a[1]}return""},ok_Warehousing:function(t,e){this.isdisabled=!0,this.WarehousingMsg=!1;for(var i="",a=null,l=[],s=0,r=(a="enter"==e?this.NullNotice:this.SelectRow).length;s<r;s++)if(""!=a[s].Quantity||null!=a[s].Quantity){i=130==t&&"enter"!=e?this.Summary:a[s].Summary;var n={NoticeID:a[s].NoticeID,SortingID:a[s].SortingID,StorageID:"",InputID:a[s].InputID,BoxCode:a[s].BoxCode,Quantity:a[s].CurrentQuantity,Weight:a[s].Weight,NetWeight:a[s].NetWeight,Volume:a[s].Volume,ShelveID:a[s].ShelveID,DateCode:a[s].DateCode,Origin:a[s].origin,Summary:i,Product:{PartNumber:a[s].Product.PartNumber,Manufacturer:a[s].Product.Manufacturer,PackageCase:a[s].Product.PackageCase,Packaging:a[s].Product.Packaging},Files:a[s].Files};l.push(n)}var o=null;o=""==this.details.waybillinfo.Code||null==this.details.waybillinfo.Code?null:this.details.waybillinfo.Code;var c={Waybill:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({ID:this.details.waybillinfo.ID,EnterCode:this.details.waybillinfo.EnterCode,ExcuteStatus:t,Type:this.details.waybillinfo.Type,Source:this.details.waybillinfo.Source,OrderID:this.details.waybillinfo.OrderID,NoticeType:this.details.waybillinfo.NoticeType,CarrierID:this.details.waybillinfo.CarrierID,ConsignorID:this.details.waybillinfo.ConsignorID,ConsignorPlace:this.details.waybillinfo.ConsignorPlace,TransferID:this.details.waybillinfo.TransferID,Summary:i,Driver:this.details.waybillinfo.Driver,CarNumber1:this.details.waybillinfo.CarNumber1,Files:this.details.waybillinfo.Files,LoadingExcuteStatus:this.details.waybillinfo.LoadingExcuteStatus,Code:o,Supplier:this.details.waybillinfo.Supplier},"Type",this.details.waybillinfo.Type),Sortings:l,AdminID:sessionStorage.getItem("userID")};this.setWarehousing(c)},cancel_Warehousing:function(){this.WarehousingMsg=!1},chaixiang:function(t,e){var i=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.P)().then(function(a){var l={AVGWeight:e.AVGWeight,iscx:!1,ID:"CX"+t+(new Date).getTime(),NoticeID:e.NoticeID,Product:{PartNumber:e.Product.PartNumber,Manufacturer:e.Product.Manufacturer,PackageCase:e.Product.PackageCase,Packaging:e.Product.Packaging},WaybillID:e.WaybillID,InputID:e.InputID,DateCode:e.DateCode,Quantity:e.Quantity,ArrivedQuantity:e.ArrivedQuantity,LeftQuantity:e.LeftQuantity,CurrentQuantity:null,Conditions:e.Conditions,Source:e.Source,Weight:null,NetWeight:e.NetWeight,Volume:e.Volume,ShelveID:e.ShelveID,Type:e.Type,origintext:e.origintext,originID:e.originID,originDes:e.originDes,origin:e.origin,Summary:e.Summary,SortingID:a,Files:[],Sortings:[],_disabled:!1};i.details.detailitem.splice(t+1,0,l),i.$refs.selection.selectAll(!1),i.SelectRow=[],i.details.detailitem[t].CurrentQuantity=null,i.details.detailitem[t].Weight=null})},removechaixiang:function(t){this.details.detailitem.splice(t,1)},CgDetail_new:function(t){var e=this;void 0!=t&&Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.m)(t).then(function(t){e.Getclientdata(t.Waybill.EnterCode),e.details.waybillinfo=t.Waybill,e.details.detailitem=t.Notice,e.Sortings=t.Sortings,e.loading=!1,120==t.Waybill.ExcuteStatus?e.isdisabled=!0:1==t.Waybill.Type&&100==t.Waybill.LoadingExcuteStatus?e.isdisabled=!0:e.isdisabled=!1;var i=sessionStorage.getItem("UserWareHouse");e.Carriers(e.details.waybillinfo.Type,i),"Personal"==t.Waybill.CarrierID?e.IsPersonal=!0:(e.GetDriversCars(t.Waybill.CarrierID),e.IsPersonal=!1),e.CarArrName=t.Waybill.CarNumber1,e.DriversName=t.Waybill.Driver}),this.GetUsableShelves()},changewaybillType:function(t){var e=sessionStorage.getItem("UserWareHouse");this.Carriers(t,e)},GetUsableShelves:function(){var t=this;sessionStorage.getItem("UserWareHouse");Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.S)("HK").then(function(e){t.Storehouselist=e.obj})},SetStorehouse:function(){this.SelectRow.length<=0?this.$Message.error("请选择要操作的产品项"):this.sethousbox=!0},changehouse:function(){console.log(this.SelectRow);for(var t=this.SelectRow,e=this.details.detailitem,i=0;i<e.length;i++)for(var a=0;a<t.length;a++)e[i].InputID==t[a].InputID&&(e[i].ShelveID=this.housenumber);this.SelectRow=[],this.sethousbox=!1,this.$refs.selection.selectAll(!1)},Labelprint:function(){var t=this.SelectRow,e=[];if(t.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var i=0;i<t.length;i++){t[i].Inputs,t[i].StandardProducts;var a={Quantity:t[i].CurrentQuantity,inputsID:t[i].Input.SortingID,Catalog:t[i].Product.Catalog,PartNumber:t[i].Product.PartNumber,Manufacturer:t[i].Product.Manufacturer,Packing:t[i].Product.Packing,PackageCase:t[i].Product.PackageCase,origin:t[i].origintext,SourceDes:this.details.waybillinfo.SourceDes};e.push(a)}var l=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["产品标签"],s=-1!=l.Url.indexOf("http");l.Url=1==s?l.Url:this.printurl+l.Url;var r={setting:l,data:e};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(r)}},showhistory:function(t){this.historydata=!0,this.reFresh=!0},changehistore:function(t){0==t&&(this.reFresh=!1)},WayParterdata:function(){var t=this;Object(__WEBPACK_IMPORTED_MODULE_8__api__.G)().then(function(e){t.Conveyingplace=e.obj})},Carriers:function(t,e){var i=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.g)(t,e,100).then(function(t){i.CarrierList=t})},detailelist:function(){if(console.log(this.printlist),this.printlist.length>0){this.details.waybillinfo,this.printlist;var t=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)(),e=(this.details.waybillinfo,this.printlist,t["清单打印"]),i=-1!=e.Url.indexOf("http");e.Url=1==i?e.Url:this.printurl+e.Url;var a={setting:e,data:[{waybill:this.details.waybillinfo,listdata:this.printlist}]};alert(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e)),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(a)}},changConveyingplace:function(t,e,i){void 0!=t&&console.log(this.details.detailitem)},showBudget:function(t,e,i){if(this.$store.dispatch("setBudget",!0),"meet"==t){var a="";a="CgUntreated"==this.routername?"/CgUntreated/Income":"/CgProcessed/Income",this.$router.push({path:a,query:{webillID:this.details.waybillinfo.ID,OrderID:this.details.waybillinfo.OrderID,type:e,otype:"in",conduct:i}})}else{a="";a="CgUntreated"==this.routername?"/CgUntreated/Oplog":"/CgProcessed/Oplog",this.$router.push({path:a,params:{webillID:this.details.waybillinfo.WaybillID}})}},closeBudget:function(){console.log("关闭收支明细"),this.$router.go(-1),this.$store.dispatch("setBudget",!1)},clickClient:function(t,e){console.log(t),console.log(e),this.setClientCode=!0,this.chengevalue.value=t,this.chengevalue.type=e,this.Conveyingplace2=this.Conveyingplace,this.ClientCode=t},changClientCode:function(t){this.chengevalue.inputval=t},primaryClientCode:function(){if(console.log(this.SelectRow),"ClientCode"==this.chengevalue.type)this.details.waybillinfo.ConsignorPlace=this.chengevalue.inputval.value,this.details.waybillinfo.ConsignorPlaceText=this.chengevalue.inputval.label;else{this.chengevalue.type.originDes=this.chengevalue.inputval.label;for(var t=0,e=this.details.detailitem.length;t<e;t++)this.chengevalue.type.SortingID==this.details.detailitem[t].SortingID&&(this.details.detailitem[t].origin=this.chengevalue.inputval.value,this.details.detailitem[t].origintext=this.chengevalue.inputval.label),this.details.detailitem[t]._checked=!1;if(this.SelectRow.length>0)for(var i=0,a=this.SelectRow.length;i<a;i++)for(t=0,e=this.details.detailitem.length;t<e;t++)this.SelectRow[i].SortingID==this.details.detailitem[t].SortingID&&(this.details.detailitem[t]._checked=!0),this.chengevalue.type.SortingID==this.SelectRow[i].SortingID&&(this.SelectRow[i].origin=this.chengevalue.inputval.value,this.SelectRow[i].origintext=this.chengevalue.inputval.label)}this.setClientCode=!1},fileprint:function(t){var e=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["文档打印"];e.Url=t;var i=e;Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.a)(i)},fromphotos:function(t){if("Waybill"==t){var e={SessionID:this.details.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID}};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.c)(e)}else{console.log(t);e={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID,NoticeID:t.NoticeID,InputID:t.InputID}};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.c)(e)}},changed:function(t){this.testfunction(t)},testfunction:function(t){var e=t[0],i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8e3};if(e.SessionID==this.details.waybillinfo.ID)this.details.waybillinfo.Files.push(i);else for(var a=0;a<this.details.detailitem.length;a++)this.details.detailitem[a].ID==e.SessionID&&this.details.detailitem[a].Files.push(i)},handleRemove:function(t,e){var i=this,a={id:t.ID};Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.l)(a).then(function(a){console.log(a),1==a.Success?(i.Removebackfun(t,e),i.$Message.success("删除成功")):i.$Message.error("删除失败")})},Removebackfun:function(t,e){if(console.log(t),console.log(e),"Waybill"==e)this.details.waybillinfo.Files.splice(this.details.waybillinfo.Files.indexOf(t),1);else for(var i=this.details.detailitem,a=0;a<i.length;a++)i[a].ID==e.ID&&i[a].Files.splice(t,1)},SeletUpload:function(t){if("Waybill"==t){var e={SessionID:this.details.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID}};console.log(e),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.o)(e)}else{e={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID,NoticeID:t.NoticeID,InputID:t.InputID}};console.log(e),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.o)(e)}},TakeGoods:function(){var t=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._4)(this.details.waybillinfo.ID,sessionStorage.getItem("userID")).then(function(e){console.log(e),1==e.Success?(t.$Message.success("提货锁定成功，请去提货"),t.details.waybillinfo.LoadingExcuteStatus=105,t.isdisabled=!1):t.$Message.error("提货锁定失败")})},changeacrrier:function(t){console.log(this.details.waybillinfo.CarrierID),void 0!=t&&(1==this.details.waybillinfo.Type&&"Personal"==t.value?(this.IsPersonal=!0,this.details.waybillinfo.CarNumber1=this.CarArrName,this.details.waybillinfo.Driver=this.DriversName):(1==this.details.waybillinfo.Type?(this.IsPersonal=!1,this.details.waybillinfo.CarNumber1="",this.details.waybillinfo.Driver="",this.GetDriversCars(t.value)):(this.IsPersonal=!1,this.details.waybillinfo.CarNumber1="",this.details.waybillinfo.Driver=""),this.details.waybillinfo.CarrierName=t.label))},GetDriversCars:function(t){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.N)(t).then(function(t){e.CarArr=[];var i=t.Transports;if(i.length>0)for(var a=0;a<i.length;a++){var l={};l=null!=i[a].CarNumber2&&null!=i[a].CarNumber1?{value:i[a].CarNumber1+"  "+i[a].CarNumber2}:{value:i[a].CarNumber1},e.CarArr.push(l)}else e.CarArr=[];e.DriversArr=t.Drivers})},changedrivers:function(t){console.log(this.waybillinfo)},changeabnormal_enter:function(t){var e=this;console.log(t),0==t||(this.Storages=[],Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.P)().then(function(t){var i={iscx:!1,isenter:!0,ID:"LR1"+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:t,Files:[]};e.Storages.push(i),e.timer=(new Date).getTime(),e.$nextTick(function(){})}))},ok_abnormal:function(){this.NullNotice=[],console.log(this.Storages);for(var t=0,e=this.Storages.length;t<e;t++){if(null==this.Storages[t].CurrentQuantity||null==this.Storages[t].Product.PartNumber||null==this.Storages[t].origin||null==this.Storages[t].Summary||null==this.Storages[t].Product.Manufacturer){this.$refs.modal.visible=!0,this.abnormal_enter=!0,this.NullNotice=[],this.$Message.error("请输入必填项目");break}this.NullNotice.push(this.Storages[t]),t==this.Storages.length-1&&this.ok_Warehousing(130,"enter"),this.modal=!1}},clackFilesProcess:function(t){var e={Url:t};console.log(e),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.b)(e)},ok_share:function(){if(null==this.sharevalue||""==this.sharevalue)this.$Message.error("请输入重量"),this.showshare=!0;else{if(0==/^\d+(\.\d{0,2})?$/.test(this.sharevalue)||0==this.sharevalue)this.$Message.error("请输入数字,小数点保留两位，且不等于零"),this.showshare=!0,this.sharevalue=null;else{this.showshare=!1;var t=null;console.log(this.details.detailitem);for(var e=0,i=this.details.detailitem.length;e<i;e++)null!=this.details.detailitem[e].CurrentQuantity&&""!=this.details.detailitem[e].CurrentQuantity&&(t+=Number(this.details.detailitem[e].CurrentQuantity));if(null!=t)for(e=0,i=this.details.detailitem.length;e<i;e++)null!=this.details.detailitem[e].CurrentQuantity&&""!=this.details.detailitem[e].CurrentQuantity&&(this.details.detailitem[e].Weight=(this.details.detailitem[e].CurrentQuantity*(this.sharevalue/t)).toFixed(2))}}},changeshare:function(t){0==t&&(this.sharevalue=null)},Getclientdata:function(t){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.U)(t).then(function(t){console.log(t),e.clientGrade=t.obj.Grade})},ok_addCarrier:function(t){1==t?this.$refs.addCarrier.sumbit_btn():2==t?(this.$refs.addCarrier.delitem(),this.showaddCarrier=!1):3==t?this.$refs.AddDriver.sumbit_btn():4==t?(this.$refs.AddDriver.delitem(),this.showaddDriver=!1):5==t?this.$refs.addcar.sumbit_btn():6==t&&(this.$refs.addcar.delitem(),this.showaddCar=!1)},setdisabled:function(t){this.adddisabled=t},fatherMethodCarrier:function(t){if(this.adddisabled=!1,"false"!=t){var e=sessionStorage.getItem("UserWareHouse"),i={ID:t.Carrier.ID,Name:t.Carrier.Name};this.CarrierList.push(i),this.Carriers(this.details.waybillinfo.Type,e),this.details.waybillinfo.CarrierID=t.Carrier.ID,this.details.waybillinfo.CarrierName=t.Carrier.Name;var a={Name:t.Driverinfo.Name,ID:""};this.DriversArr.push(a),this.details.waybillinfo.Driver=t.Driverinfo.Name;a={value:t.Carinfo.CarNumber1};this.CarArr.push(a),this.details.waybillinfo.CarNumber1=t.Carinfo.CarNumber1,this.GetDriversCars(this.details.waybillinfo.CarrierID),this.showaddCarrier=!1,this.$refs.addCarrier.delitem()}},ok_addDriver:function(t){if(this.adddisabled=!1,"false"!=t){var e={Name:t,ID:""};this.DriversArr.push(e),this.GetDriversCars(this.details.waybillinfo.CarrierID),this.details.waybillinfo.Driver=t,this.showaddDriver=!1,this.$refs.AddDriver.delitem()}},ok_addCar:function(t){if(this.adddisabled=!1,console.log(t),"false"!=t){var e={value:t};this.CarArr.push(e),this.GetDriversCars(this.details.waybillinfo.CarrierID),this.details.waybillinfo.CarNumber1=t,this.showaddCar=!1,this.$refs.AddDriver.delitem()}},testbtn:function(t){this.$store.dispatch("setshowdetail",!1),this.$store.dispatch("setshowdetailout",!0),this.$router.push({path:"Outgoing/10/outdetail/"+t}),this.$store.dispatch("setshowtype",1)},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()}}}},YIpj:function(t,e){},mbQv:function(t,e){},"xu/c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("KoTp"),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{width:"100%","font-size":"12px"}},[i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[t._v("基础信息")]),t._v(" "),i("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[i("Row",[i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li detail1"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("ID：")]),t._v(" "),i("span",[t._v(t._s(t.details.waybillinfo.ID))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("订单号：")]),t._v(" "),i("span",{staticStyle:{"line-height":"20px",width:"70%",display:"inline-block"}},[t._v(t._s(t.details.waybillinfo.OrderID))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("状态：")]),t._v(" "),i("span",[t._v(t._s(t.details.waybillinfo.ExcuteStatusDes)+"\n                      "),null!=t.details.waybillinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:t.logchange}},[t._v("日志管理")]):t._e()],1)]),t._v(" "),1==t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("提货状态：")]),t._v(" "),t.details.waybillinfo.Type&&100==t.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"magenta"}},[t._v("等待提货")]):t._e(),t._v(" "),1==t.details.waybillinfo.Type&&105==t.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"blue"}},[t._v("提货中")]):t._e(),t._v(" "),1==t.details.waybillinfo.Type&&200==t.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"green"}},[t._v("提货完成")]):t._e()],1):t._e(),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("业务类型：")]),t._v(" "),i("span",[t._v(t._s(t.details.waybillinfo.SourceDes))])]),t._v(" "),void 0!=t.details.waybillinfo.Condition?i("li",{staticClass:"itemli"},[t.Conditionstype?i("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.AgencyCheck?i("Tag",{attrs:{color:"geekblue"}},[t._v("代检查")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.AgencyPayment?i("Tag",{attrs:{color:"purple"}},[t._v("代垫货款")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.AgencyReceive?i("Tag",{attrs:{color:"blue"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.ChangePackaging?i("Tag",{attrs:{color:"cyan"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.LableServices?i("Tag",{attrs:{color:"green"}},[t._v("标签服务")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.PayForFreight?i("Tag",{attrs:{color:"gold"}},[t._v("垫付运费")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.Repackaging?i("Tag",{attrs:{color:"orange"}},[t._v("重新包装")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.UnBoxed?i("Tag",{attrs:{color:"volcano"}},[t._v("拆箱验货")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.VacuumPackaging?i("Tag",{attrs:{color:"red"}},[t._v("真空包装")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.WaterproofPackaging?i("Tag",{attrs:{color:"magenta"}},[t._v("防水包装")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.QualityInspection?i("Tag",{attrs:{color:"lime"}},[t._v("质检")]):t._e(),t._v(" "),1==t.details.waybillinfo.Condition.Unboxing?i("Tag",{attrs:{color:"yellow"}},[t._v("拆包装")]):t._e()],1):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"26%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("制单时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.details.waybillinfo.CreateDate)))])]),t._v(" "),1==t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("提货时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.details.waybillinfo.TakingDate)))])]):i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("到货时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.details.waybillinfo.CreateDate)))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("供应商：")]),t._v(" "),i("span",{staticStyle:{display:"inline-block","max-width":"300px","line-height":"1"}},[i("p",[t._v(t._s(t.details.waybillinfo.Supplier)+"\n                      "),i("Tag",{attrs:{color:"volcano"}},[t._v("LV "+t._s(t.details.waybillinfo.SupplierGrade))])],1)]),t._v(" "),i("br")]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("到货方式：")]),t._v(" "),1==t.details.waybillinfo.Type||2==t.details.waybillinfo.Type?i("span",[t._v(t._s(t.details.waybillinfo.TypeDes))]):i("Select",{staticStyle:{width:"40%"},on:{"on-change":t.changewaybillType},model:{value:t.details.waybillinfo.Type,callback:function(e){t.$set(t.details.waybillinfo,"Type",e)},expression:"details.waybillinfo.Type"}},t._l(t.TypeArr,function(e,a){return i("Option",{key:a,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:t.showhistory}},[t._v("历史到货")])],1),t._v(" "),1==t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("提货文件：")]),t._v(" "),i("span",{staticStyle:{display:"inline-block"}},t._l(t.details.waybillinfo.Files,function(e,a){return i("div",[10==e.Type?i("p",[i("span",[t._v(t._s(e.CustomName))]),t._v(" "),i("a",{on:{click:function(i){return t.fileprint(e.Url)}}},[t._v("打印")])]):t._e()])}),0)]):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"31%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("入  仓  号：")]),t._v(" "),i("span",[t._v(t._s(t.details.waybillinfo.EnterCode))]),t._v(" "),i("em",[t._v("("+t._s(t.details.waybillinfo.ClientName)+")")]),t._v(" "),i("Tag",{attrs:{color:"geekblue"}},[t._v("LV "+t._s(t.clientGrade))])],1),t._v(" "),1!=t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("运单号(本次)：")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},model:{value:t.details.waybillinfo.Code,callback:function(e){t.$set(t.details.waybillinfo,"Code",e)},expression:"details.waybillinfo.Code"}})],1)]):t._e(),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==t.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[t._v("*")]):t._e(),t._v("承运商(本次):")]),t._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{filterable:"","label-in-value":!0},on:{"on-change":t.changeacrrier},model:{value:t.details.waybillinfo.CarrierID,callback:function(e){t.$set(t.details.waybillinfo,"CarrierID",e)},expression:"details.waybillinfo.CarrierID"}},t._l(t.CarrierList,function(e,a){return i("Option",{key:a,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1),t._v(" "),1==t.details.waybillinfo.Type?i("Icon",{attrs:{type:"md-add"},on:{click:function(e){t.showaddCarrier=!0}}}):t._e()],1)]),t._v(" "),1==t.details.waybillinfo.Type&&0==t.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==t.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[t._v("*")]):t._e(),t._v("司        机:")]),t._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0,transfer:"",filterable:""},on:{"on-change":t.changedrivers},model:{value:t.details.waybillinfo.Driver,callback:function(e){t.$set(t.details.waybillinfo,"Driver",e)},expression:"details.waybillinfo.Driver"}},t._l(t.DriversArr,function(e,a){return i("Option",{key:a,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1),t._v(" "),1==t.details.waybillinfo.Type&&null!=t.details.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(e){t.showaddDriver=!0}}}):t._e()],1)]):t._e(),t._v(" "),1==t.details.waybillinfo.Type&&0==t.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==t.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[t._v("*")]):t._e(),t._v("车  牌  号:")]),t._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0},on:{"on-create":t.handleCreate3,"on-change":t.changedrivers},model:{value:t.details.waybillinfo.CarNumber1,callback:function(e){t.$set(t.details.waybillinfo,"CarNumber1",e)},expression:"details.waybillinfo.CarNumber1"}},t._l(t.CarArr,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value))])}),1),t._v(" "),1==t.details.waybillinfo.Type&&null!=t.details.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(e){t.showaddCar=!0}}}):t._e()],1)]):t._e(),t._v(" "),1==t.details.waybillinfo.Type&&1==t.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("司        机:")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入司机"},model:{value:t.details.waybillinfo.Driver,callback:function(e){t.$set(t.details.waybillinfo,"Driver",e)},expression:"details.waybillinfo.Driver"}})],1)]):t._e(),t._v(" "),1==t.details.waybillinfo.Type&&1==t.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("车  牌  号:")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入承运商"},model:{value:t.details.waybillinfo.CarNumber1,callback:function(e){t.$set(t.details.waybillinfo,"CarNumber1",e)},expression:"details.waybillinfo.CarNumber1"}})],1)]):t._e(),t._v(" "),1==t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[t._v("  ")]),t._v("联  系  人:")]),t._v(" "),i("span",[t._v(" "+t._s(t.details.waybillinfo.TakingContact)+"   (电话:"+t._s(t.details.waybillinfo.TakingPhone)+")")])]):t._e(),t._v(" "),1==t.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[t._v("  ")]),t._v("提货地址:")]),t._v(" "),i("span",[t._v(t._s(t.details.waybillinfo.TakingAddress))])]):t._e(),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[t._v("  ")]),t._v("输  送  地：")]),t._v(" "),i("span",[0!=t.details.waybillinfo.ConsignorPlace?i("span",[t._v(t._s(t.details.waybillinfo.ConsignorPlaceText))]):i("span",{staticStyle:{color:"red"}},[t._v("暂无输送地")]),t._v(" "),i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(e){return t.clickClient(t.details.waybillinfo.ConsignorPlace,"ClientCode")}}})],1)])])]),t._v(" "),i("Col",{staticStyle:{width:"23%",float:"left"}},[i("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[i("li",{staticClass:"itemli"},[i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("传照")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("拍照")])],1)]),t._v(" "),i("li",{staticStyle:{clear:"both"}},t._l(t.details.waybillinfo.Files,function(e,a){return i("div",[i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,"Waybill")}}})],1)])}),0),t._v(" "),1==t.details.waybillinfo.Type&&100==t.details.waybillinfo.LoadingExcuteStatus?i("li",{staticStyle:{position:"absolute",top:"147px",right:"0"}},[i("Button",{attrs:{type:"primary"},on:{click:t.TakeGoods}},[t._v("我去提货")])],1):t._e()])])],1)],1)]),t._v(" "),i("div",{staticClass:"itembox"},[i("Modal",{ref:"modal",attrs:{title:"无通知产品录入",width:"90"},on:{"on-ok":t.ok_abnormal,"on-cancel":t.cancel,"on-visible-change":t.changeabnormal_enter},model:{value:t.abnormal_enter,callback:function(e){t.abnormal_enter=e},expression:"abnormal_enter"}},[i("div",[i("div",[i("p",{staticClass:"detailtitle"},[t._v("\n                  无通知产品录入\n                  "),i("span",{staticStyle:{"margin-left":"15px",color:"red"}},[t._v("注意：仅能录入该运单下与通知型号不匹配的产品信息")])]),t._v(" "),i("div",{staticStyle:{padding:"15px 0px"}},[i("Noting-Enter",{key:t.timer,ref:"NotingEntername",attrs:{Storagesarr:t.Storages,Storehouselist:t.Storehouselist,Boxingarr:t.boxingarr,status:1}})],1)])])]),t._v(" "),i("p",{staticClass:"detailtitle"},[t._v("通知产品清单")]),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("ButtonGroup",{staticStyle:{width:"28%"}},[i("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":t.search_pro},model:{value:t.searchkey,callback:function(e){t.searchkey="string"==typeof e?e.trim():e},expression:"searchkey"}}),t._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.search_pro}},[t._v("筛选")])],1),t._v(" "),i("Button",{attrs:{type:"primary",disabled:1==t.isdisabled},on:{click:t.Labelprint}},[t._v("标签打印")]),t._v(" "),i("Button",{attrs:{type:"primary",disabled:1==t.isdisabled},on:{click:t.SetStorehouse}},[t._v("一键入库")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","in",t.details.waybillinfo.Source)}}},[t._v("收入")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","out",t.details.waybillinfo.Source)}}},[t._v("支出")]),t._v(" "),i("Button",{attrs:{type:"primary",disabled:1==t.isdisabled},on:{click:function(e){t.abnormal_enter=!0}}},[t._v("无通知产品录入")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){t.showshare=!0}}},[t._v("分摊重量")]),t._v(" "),200!=t.details.waybillinfo.OStatus?i("div",{staticStyle:{"text-align":"right"}},[i("Button",{attrs:{type:"primary",shape:"circle",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.finish_btn1}},[t._v("入库完成")]),t._v(" "),i("Button",{attrs:{type:"warning",shape:"circle",icon:"ios-alert-outline",disabled:1==t.isdisabled},on:{click:t.Abnormal}},[t._v("到货异常")])],1):t._e()],1),t._v(" "),i("div",[i("div",{staticClass:"detail_tablebox"},[i("Table",{ref:"selection",attrs:{loading:t.loading,columns:t.details.columns1,data:t.details.detailitem,size:"large"},on:{"on-selection-change":t.handleSelectRow,"on-row-click":t.tabledblclick},scopedSlots:t._u([{key:"indexs",fn:function(e){e.row;var i=e.index;return[t._v(t._s(i+1))]}},{key:"Arrival",fn:function(e){var a=e.row;return e.index,[0!=a.iscx?i("span",[t._v(t._s(a.Quantity))]):t._e()]}},{key:"Already",fn:function(e){var a=e.row;return e.index,[0!=a.iscx?i("span",[t._v(t._s(a.ArrivedQuantity))]):t._e()]}},{key:"Surplus",fn:function(e){var a=e.row;return e.index,[0!=a.iscx?i("P",[Number(a.LeftQuantity)<=0?i("span",[t._v("0")]):i("span",[t._v(t._s(a.LeftQuantity))])]):t._e()]}},{key:"OriginDes",fn:function(e){var a=e.row;return e.index,[i("span",[t._v(t._s(a.origintext))]),t._v(" "),1!=a._disabled?i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(e){return t.clickClient(a.origin,a)}}}):t._e()]}},{key:"imglist",fn:function(e){var a=e.row;return e.index,t._l(a.Files,function(e,l){return i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{ref:a.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,a)}}})],1)})}},{key:"operation",fn:function(e){var a=e.row,l=e.index;return[i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload(a)}}},[t._v("传照")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos(a)}}},[t._v("拍照")])],1),t._v(" "),0!=a.iscx?i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"md-checkmark"},on:{click:function(e){return t.chaixiang(l,a)}}},[t._v("拆项")])],1):t._e(),t._v(" "),0==a.iscx?i("div",{staticClass:"setupload"},[0==a.iscx||1==a.isenter?i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"ios-trash-outline"},on:{click:function(e){return t.removechaixiang(l,a)}}},[t._v("删除")]):t._e()],1):t._e()]}}])}),t._v(" "),200!=t.details.waybillinfo.OStatus?i("div",{staticClass:"successbtn"},[i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.finish_btn1}},[t._v("入库完成")]),t._v(" "),i("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==t.isdisabled},on:{click:t.Abnormal}},[t._v("到货异常")])],1):t._e()],1)])],1),t._v(" "),1==t.WarehousingMsg?i("div",[i("Modal",{attrs:{title:"确定入库"},on:{"on-ok":function(e){return t.ok_Warehousing(115)},"on-cancel":t.cancel_Warehousing},model:{value:t.WarehousingMsg,callback:function(e){t.WarehousingMsg=e},expression:"WarehousingMsg"}},[0!=t.Nomatching.length?i("div",[i("h2",[t._v("以下型号数量与通知数量不符，是否继续进行入库操作")]),t._v(" "),i("ul",t._l(t.Nomatching,function(e,a){return i("li",{key:a},[i("h2",[t._v(t._s(e))])])}),0)]):i("div",[i("span",[t._v("是否全部入库")])])])],1):t._e(),t._v(" "),i("Modal",{attrs:{title:"一键入库"},on:{"on-cancel":t.cancel},model:{value:t.sethousbox,callback:function(e){t.sethousbox=e},expression:"sethousbox"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close-circle",color:"rgb(33, 28, 28)"},on:{click:t.cancel}})],1),t._v(" "),i("span",{staticStyle:{"line-height":"26px"}},[t._v("选择库位")]),t._v(" "),t.Storehouselist.length>0?i("Select",{attrs:{filterable:""},model:{value:t.housenumber,callback:function(e){t.housenumber=e},expression:"housenumber"}},t._l(t.Storehouselist,function(e,a){return i("Option",{key:a,attrs:{value:e.ShelveID,label:e.ShelveID}},[i("span",[t._v(t._s(e.ShelveID))]),t._v(" "),i("span",{staticStyle:{float:"right",color:"#ccc"}},[t._v(t._s(e.TotalPackage))])])}),1):t._e(),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.changehouse}},[t._v("确定")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"到货异常"},model:{value:t.isAbnormal,callback:function(e){t.isAbnormal=e},expression:"isAbnormal"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close-circle",color:"rgb(33, 28, 28)"},on:{click:t.closeerror}})],1),t._v(" "),i("span",{staticStyle:{"line-height":"26px"}},[t._v("异常原因")]),t._v(" "),i("Input",{attrs:{type:"textarea",rows:2,placeholder:"备注",maxlength:"100","show-word-limit":""},model:{value:t.Summary,callback:function(e){t.Summary=e},expression:"Summary"}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.closeerror}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.Abnormal_btn}},[t._v("确定")])],1)],1)],1),t._v(" "),i("Drawer",{attrs:{width:70},on:{"on-visible-change":t.changehistore},model:{value:t.historydata,callback:function(e){t.historydata=e},expression:"historydata"}},[t.reFresh?i("History-Mount",{attrs:{OrderID:t.details.waybillinfo.OrderID,Type:1}}):t._e()],1),t._v(" "),i("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:t.Budgetdetail,callback:function(e){t.Budgetdetail=e},expression:"Budgetdetail"}},[i("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[i("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:t.closeBudget}})],1),t._v(" "),i("div",[i("router-view")],1)]),t._v(" "),i("Modal",{attrs:{title:"选地地区"},on:{"on-cancel":t.cancel},model:{value:t.setClientCode,callback:function(e){t.setClientCode=e},expression:"setClientCode"}},[i("Select",{attrs:{filterable:"","label-in-value":!0},on:{"on-change":t.changClientCode},model:{value:t.ClientCode,callback:function(e){t.ClientCode=e},expression:"ClientCode"}},t._l(t.Conveyingplace2,function(e,a){return i("Option",{key:e.ID,attrs:{value:e.CorPlace}},[t._v(t._s(e.Text))])}),1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.primaryClientCode}},[t._v("确定")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"分摊重量"},on:{"on-visible-change":t.changeshare},model:{value:t.showshare,callback:function(e){t.showshare=e},expression:"showshare"}},[i("div",[i("Input",{attrs:{placeholder:"请输入重量"},model:{value:t.sharevalue,callback:function(e){t.sharevalue=e},expression:"sharevalue"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.ok_share}},[t._v("确认")])],1)]),t._v(" "),i("Modal",{attrs:{title:"新增承运商","mask-closable":!1},model:{value:t.showaddCarrier,callback:function(e){t.showaddCarrier=e},expression:"showaddCarrier"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(e){return t.ok_addCarrier(2)}}})],1),t._v(" "),i("Add-Carrier",{ref:"addCarrier",attrs:{Conveyingplace:t.Conveyingplace},on:{fatherMethodCarrier:t.fatherMethodCarrier,setdisabled:t.setdisabled}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:t.adddisabled},on:{click:function(e){return t.ok_addCarrier(2)}}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{disabled:t.adddisabled,type:"primary"},on:{click:function(e){return t.ok_addCarrier(1)}}},[t._v("确认")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"新增司机","mask-closable":!1},model:{value:t.showaddDriver,callback:function(e){t.showaddDriver=e},expression:"showaddDriver"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(e){return t.ok_addCarrier(4)}}})],1),t._v(" "),i("Add-Driver",{ref:"AddDriver",attrs:{EnterpriseName:t.details.waybillinfo.CarrierName},on:{setdisabled:t.setdisabled,ok_addDriver:t.ok_addDriver}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:t.adddisabled},on:{click:function(e){return t.ok_addCarrier(4)}}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{disabled:t.adddisabled,type:"primary"},on:{click:function(e){return t.ok_addCarrier(3)}}},[t._v("确认")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"新增车牌号","mask-closable":!1},model:{value:t.showaddCar,callback:function(e){t.showaddCar=e},expression:"showaddCar"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(e){return t.ok_addCarrier(6)}}})],1),t._v(" "),i("Add-Car",{ref:"addcar",attrs:{EnterpriseName:t.details.waybillinfo.CarrierName},on:{setdisabled:t.setdisabled,ok_addCar:t.ok_addCar}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:t.adddisabled},on:{click:function(e){return t.ok_addCarrier(6)}}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{disabled:t.adddisabled,type:"primary"},on:{click:function(e){return t.ok_addCarrier(5)}}},[t._v("确认")])],1)],1),t._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:t.showlogged,callback:function(e){t.showlogged=e},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),t._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[t._v("日志管理")])]),t._v(" "),t.showlogged?i("logg-ed",{key:t.loggdetime,ref:"logged",attrs:{WaybillID:t.details.waybillinfo.ID}}):t._e()],1)],1)},staticRenderFns:[]};var s=function(t){i("YIpj")},r=i("VU/8")(a.a,l,!1,s,null,null);e.default=r.exports}});
//# sourceMappingURL=8.6e99cf2da084062b7785.js.map