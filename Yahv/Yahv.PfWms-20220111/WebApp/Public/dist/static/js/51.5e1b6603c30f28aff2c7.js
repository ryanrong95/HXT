webpackJsonp([51],{gzII:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("gyMJ"),a={data:function(){return{titleMsg:{LotNumber:"",CarrierName:"",CarNumber1:"",CarNumber2:"",DepartDate:"",Driver:"",WaybillTypeDes:"",totalBoxes:"",TotalWeight:""},listData:[],listTitle:[{type:"selection",width:60,align:"center"},{title:"订单编号",key:"TinyOrderID"},{title:"客户编号",key:"ClientID"},{title:"客户名称",key:"ClientName"},{title:"装箱日期",slot:"BoxDate"},{title:"箱号",key:"BoxCode"},{title:"库位号",key:"ShelveID"},{title:"状态",key:"ShelvesStatus"}],modal:!1,selection:[],shelveID:"",shelveArr:[]}},created:function(){this.titleMsg.LotNumber=this.$route.params.ID,this.GetCustomTransportDetail()},methods:{GetCustomTransportDetail:function(){var t=this,e=sessionStorage.getItem("UserWareHouse"),s=this.$route.params.ID;Object(i.n)(e,s).then(function(e){e&&e.obj&&(t.handleTitleMsg(e.obj),e.obj.SortingNotices&&e.obj.SortingNotices.length&&t.handleListData(e.obj.SortingNotices))})},GetCustomTransportDetailFun:function(t){var e=sessionStorage.getItem("UserWareHouse"),s=this.$route.params.ID;Object(i.n)(e,s).then(function(e){e&&e.obj&&t&&t(e.obj)})},handleTitleMsg:function(t){this.titleMsg.CarrierName=t.CarrierName,this.titleMsg.CarNumber1=t.CarNumber1,this.titleMsg.CarNumber2=t.CarNumber2,this.titleMsg.DepartDate=t.DepartDate,this.titleMsg.Driver=t.Driver,this.titleMsg.WaybillTypeDes=t.WaybillTypeDes,this.titleMsg.totalBoxes=t.TotalQuantity,this.titleMsg.TotalWeight=t.TotalWeight},handleListData:function(t){this.listData=[];for(var e=0;e<t.length;e++){var s=t[e],i={};i.BoxDate=s.BoxDate,i.BoxCode=s.BoxCode,s.Input&&(i.TinyOrderID=s.Input.TinyOrderID,i.ClientID=s.Input.ClientID,i.ClientName=s.Input.ClientName),s.Storage&&(i.ShelveID=s.Storage.ShelveID,i.ShelvesStatus=s.Storage.ShelvesStatus),this.listData.push(i)}},onSelect:function(t,e){this.selection=t},onSelectAll:function(t){this.selection=t},onSelectionChange:function(t){this.selection=t},shelves:function(){var t=this;this.selection.length?this.shelveArr.length?t.modal=!0:this.getUsableShelves(function(){t.modal=!0}):this.$Message.warning("请选择您要上架的货物")},getUsableShelves:function(t){var e=this,s=sessionStorage.getItem("UserWareHouse");Object(i.w)(s).then(function(s){e.shelveArr=s.obj,t&&t()})},ok:function(){var t=this;this.shelveID?this.UpperShelf(function(e){e.val?t.$Message.error(e.msg):(t.$Message.success(e.msg),t.getListData()),t.shelveID="",t.modal=!1,t.selection=[]}):this.$Message.warning("请选择库位号")},cancel:function(){this.shelveID="",this.modal=!1},UpperShelf:function(t){for(var e=[],s=0;s<this.selection.length;s++)e.push(this.selection[s].BoxCode);Object(i.N)(e,this.shelveID).then(function(e){t&&t(e)})},getListData:function(){var t=this;this.GetCustomTransportDetailFun(function(e){e.SortingNotices&&e.SortingNotices.length&&t.handleListData(e.SortingNotices)})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transport_detail"},[s("p",{staticClass:"details_title"},[t._v("基本信息")]),t._v(" "),s("div",{staticClass:"info_box"},[s("Row",[s("Col",{attrs:{span:"12"}},[s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输批次号：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.LotNumber))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("车  牌  号：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.CarNumber1)+"  "+t._s(t.titleMsg.CarNumber2))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输时间：")]),t._v(" "),s("span",{},[t._v(t._s(t._f("showDate")(t.titleMsg.DepartDate)))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("总  件  数：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.totalBoxes))])])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("p",{staticClass:"info_item"},[s("label",{},[t._v("承  运  商：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.CarrierName))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("司机姓名：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.Driver))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输类型：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.WaybillTypeDes))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("总毛重(kg)：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.TotalWeight))])])])],1)],1),t._v(" "),s("p",{staticClass:"details_title"},[t._v("明细")]),t._v(" "),s("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success"},on:{click:t.shelves}},[t._v("上架")]),t._v(" "),s("span",{staticClass:"notice"},[t._v("注意：如果已上架，仍然可以点击上架修改库位号")]),t._v(" "),s("div",{staticClass:"tablebox"},[s("Table",{ref:"selection",attrs:{columns:t.listTitle,data:t.listData},on:{"on-select":t.onSelect,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange},scopedSlots:t._u([{key:"BoxDate",fn:function(e){var i=e.row;return e.index,[s("p",[t._v(t._s(t._f("showDate")(i.BoxDate)))])]}}])})],1),t._v(" "),s("Modal",{attrs:{title:"标题",width:"300"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t._v("\n    库位号：\n    "),t._v(" "),s("Select",{staticStyle:{width:"200px"},model:{value:t.shelveID,callback:function(e){t.shelveID=e},expression:"shelveID"}},t._l(t.shelveArr,function(e){return s("Option",{key:e.ID,attrs:{value:e.ID}},[t._v(t._s(e.ID))])}),1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),s("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,l,!1,function(t){s("wiRZ")},"data-v-132cdeaa",null);e.default=n.exports},wiRZ:function(t,e){}});
//# sourceMappingURL=51.5e1b6603c30f28aff2c7.js.map