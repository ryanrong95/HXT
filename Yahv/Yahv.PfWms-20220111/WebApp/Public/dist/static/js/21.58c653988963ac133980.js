webpackJsonp([21,58],{"21dY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("dCqG"),l=a("gyMJ"),s={name:"shelves",components:{formarea:r.default},beforeRouteEnter:function(e,t,a){a(function(e){e.oldUrl=t.path})},data:function(){return{search_damin:[],area_search:{Name:"",Type:"",ManagerID:""},loading1:!1,adminsarr:[],oldUrl:"",loading:!0,interestlist:"",formdata:{interest:""},oldurl:this.$route.fullPath,isshowadd:!1,formValidate:{name:"",interest:"",desc:"",admins:""},ruleValidate:{name:[{required:!0,message:"此项为必填",trigger:"blur"}],interest:[{required:!0,type:"array",min:1,message:"Choose at least one hobby",trigger:"change"}],desc:[{required:!0,message:"此项为必填",trigger:"blur"},{type:"string",min:20,message:"Introduce no less than 20 words",trigger:"blur"}]},query_field:{key:this.$route.params.AreafatherID,PageIndex:"1",PageSize:"6",ID:"",Purpose:"",ManagerID:"",Type:""},searchtype:"",Shelves_title:[{type:"selection",width:60,align:"center"},{title:"货架名称",key:"Name"},{title:"编号",key:"ID"},{title:"库位数量",key:"Count"},{title:"所属位置",key:"FatherName"},{title:"业务类型",key:"PurposeDes"},{title:"备注",key:"Summary"},{title:"操作",slot:"action",width:200,align:"center"}],Shelves_data:[],Total:0}},methods:{getCookie:function(e){for(var t=document.cookie.split("; "),a=0;a<t.length;a++){var r=t[a].split("=");if(e==r[0])return r[1]}return""},GetPurposes:function(){var e=this;Object(l.s)("").then(function(t){console.log(t),e.interestlist=t.obj})},showmodel:function(){this.isshowadd=!0},ok:function(){var e=this;if(""!=this.formValidate.name&&""!=this.formdata.interest&&""!=this.formValidate.desc&&this.formValidate.admins){var t={Name:this.formValidate.name,FatherID:this.$route.params.AreafatherID,Type:30,Purpose:this.formdata.interest.toString(),Summary:this.formValidate.desc,ManagerID:this.formValidate.admins};console.log(t),Object(l.a)(t).then(function(t){0==t.val?(e.$Message.success(t.msg),e.isshowadd=!1,e.Shelvelist(e.query_field),e.GetPurposes(),e.formValidate.name="",e.formdata.interest="",e.formValidate.desc="",e.formValidate.admins=""):e.$Message.error(t.msg),console.log(e.formValidate)})}else this.$Message.error("请输入信息")},cancel:function(){this.$refs.formValidate2.handleReset(),this.isshowadd=!1},show:function(e){this.$router.push({path:"/Location"})},remove:function(e){var t=this,a=e;this.$Modal.confirm({title:"提示",content:"是否要删除该货架",onOk:function(){Object(l.E)(a).then(function(e){console.log(e),0==e.val?(t.$Message.success("删除成功"),t.Shelvelist(t.query_field)):t.$Message.error("删除失败")})},onCancel:function(){t.$Message.info("取消删除")}})},setnva:function(e){var t=[{title:"库房配置",href:"/kufang"},{title:"库区配置",href:this.getCookie("kuquurl")},{title:"货架配置",href:this.$route.path}];this.$store.dispatch("setnvadata",t)},Shelvelist:function(e){var t=this;Object(l.F)(e).then(function(e){t.Total=e.obj.Total,0==t.Total?t.Shelves_data=[]:t.Shelves_data=e.obj.Data,t.loading=!1})},changepage:function(e){this.loading=!0,this.query_field.PageIndex=e,this.Shelvelist(this.query_field)},testname:function(){var e=/^[0-9]{2}$/.test(this.formValidate.name);console.log(e),0==e&&(this.$Message.error("只能输入两位数字,如'01'"),this.formValidate.name="")},cancel_btn:function(e){console.log(e),0==e&&(this.isshowadd=!1,this.formValidate.name="",this.formdata.interest="",this.formValidate.desc="",this.formValidate.admins="")},remoteMethod1:function(e){var t=this;Object(l.k)(e).then(function(e){console.log(e),t.adminsarr=e})},remoteMethod2:function(e){var t=this;Object(l.k)(e).then(function(e){console.log(e),t.search_damin=e})},empty_btn:function(){this.loading=!0,this.query_field={key:this.$route.params.AreafatherID,PageIndex:"1",PageSize:"6",ID:"",Purpose:"",ManagerID:"",Type:""},this.Shelvelist(this.query_field)},query_btn:function(){this.loading=!0,this.query_field.PageIndex=1,this.query_field.Type=this.searchtype,this.Shelvelist(this.query_field)}},mounted:function(){var e=this;this.$nextTick(function(){console.log(e.oldUrl),e.setnva(e.oldUrl)}),this.Shelvelist(this.query_field),this.Shelves_data.length>0?this.searchtype=this.Shelves_data[0].Type:this.searchtype="",this.GetPurposes(),document.cookie="huojiaurl="+this.$route.path}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"areabox"},[a("div",{staticClass:"srarch_input"},[a("Input",{staticClass:"searchtable",attrs:{placeholder:"编号"},model:{value:e.query_field.ID,callback:function(t){e.$set(e.query_field,"ID","string"==typeof t?t.trim():t)},expression:"query_field.ID"}}),e._v(" "),a("Select",{staticClass:"searchtable",attrs:{filterable:"",placeholder:"业务类型"},model:{value:e.query_field.Purpose,callback:function(t){e.$set(e.query_field,"Purpose",t)},expression:"query_field.Purpose"}},e._l(e.interestlist,function(t,r){return a("Option",{key:t.index,attrs:{value:t.ID}},[e._v(e._s(t.purpose))])}),1),e._v(" "),a("Select",{staticClass:"searchtable",attrs:{placeholder:"请输入并选择负责人",filterable:"",remote:"","remote-method":e.remoteMethod2,loading:e.loading1},model:{value:e.query_field.ManagerID,callback:function(t){e.$set(e.query_field,"ManagerID",t)},expression:"query_field.ManagerID"}},e._l(e.search_damin,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.RealName))])}),1),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.query_btn}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:e.empty_btn}},[e._v("清空")]),e._v(" "),a("Button",{attrs:{icon:"md-add"},on:{click:e.showmodel}},[e._v("新增货架")])],1),e._v(" "),a("div",[a("Table",{attrs:{columns:e.Shelves_title,data:e.Shelves_data,loading:e.loading},scopedSlots:e._u([{key:"Name",fn:function(t){var r=t.row;return[a("strong",[e._v(e._s(r.Name))])]}},{key:"FatherID",fn:function(t){var r=t.row;return[a("strong",[e._v(e._s(r.FatherID))])]}},{key:"action",fn:function(t){var r=t.row;return t.index,[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small",to:{name:"location",params:{locationID:r.ID}}}},[e._v("查看库位")]),e._v(" "),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(r.ID)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"buttenbox"},[a("div",{staticStyle:{float:"left"}},[a("Modal",{attrs:{title:"新增货架","mask-closable":!1},on:{"on-visible-change":e.cancel_btn},model:{value:e.isshowadd,callback:function(t){e.isshowadd=t},expression:"isshowadd"}},[a("div",[a("label",[a("em",{staticClass:"bitian"},[e._v("*")]),e._v("货架名称：")]),e._v(" "),a("Input",{staticClass:"frominpit",attrs:{placeholder:"请输入两位数字,如'01',货架名称不能重复'"},on:{"on-blur":e.testname},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("br"),e._v(" "),a("div",[a("label",{attrs:{for:""}},[a("em",{staticClass:"bitian"},[e._v("*")]),e._v("负  责  人：\n             "),a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入并选择负责人",filterable:"",remote:"","remote-method":e.remoteMethod1,loading:e.loading1},model:{value:e.formValidate.admins,callback:function(t){e.$set(e.formValidate,"admins",t)},expression:"formValidate.admins"}},e._l(e.adminsarr,function(t,r){return a("Option",{key:r,attrs:{value:t.ID}},[e._v(e._s(t.RealName))])}),1)],1)]),e._v(" "),a("br"),e._v(" "),a("div",[a("label",[a("em",{staticClass:"bitian"},[e._v("*")]),e._v("用　　途：")]),e._v(" "),a("RadioGroup",{model:{value:e.formdata.interest,callback:function(t){e.$set(e.formdata,"interest",t)},expression:"formdata.interest"}},e._l(e.interestlist,function(t){return a("Radio",{key:t.ID,attrs:{label:t.ID}},[e._v(e._s(t.purpose))])}),1)],1),e._v(" "),a("br"),e._v(" "),a("div",[a("label",[a("em",{staticClass:"bitian"},[e._v("*")]),e._v("备　　注：")]),e._v(" "),a("Input",{staticClass:"frominpit",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:""},model:{value:e.formValidate.desc,callback:function(t){e.$set(e.formValidate,"desc",t)},expression:"formValidate.desc"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){return e.cancel_btn(!1)}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确定")])],1)])],1),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.Total,"page-size":6},on:{"on-change":e.changepage}})],1)])])},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(e){a("QPR6")},"data-v-2eebfaa0",null);t.default=o.exports},QPR6:function(e,t){},dCqG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"formarea",props:["formValidate","ruleValidate"],data:function(){return{formValidatename:this.formValidate,istrue:!1,Ownerlist:[{value1:"beijing",label1:"客户"},{value1:"shenzhen",label1:"员工"},{value1:"xiangang",label1:"供应商"},{value1:"shanghai",label1:"公司"}],warehouselist:[{value1:"beijing",label1:"北京库房"},{value1:"shenzhen",label1:"深圳库房"},{value1:"shanghai",label1:"上海库房"}]}},methods:{handleSubmit:function(){var e=this;this.$refs.formValidatename.validate(function(t){t?(e.$Message.success("Success!"),e.istrue=!0):(e.$Message.error("请填写相关信息"),e.istrue=!1),console.log(t)})},handleReset:function(){this.$refs.formValidatename.resetFields()},setvalues:function(e){this.formValidatename.parents=e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"formValidatename",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":115}},[a("FormItem",{attrs:{label:"货架名称",prop:"name"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"所属位置",prop:"parents"}},[a("Cascader",{attrs:{data:e.formValidate.data},on:{"on-change":e.setvalues},model:{value:e.formValidate.parents,callback:function(t){e.$set(e.formValidate,"parents",t)},expression:"formValidate.parents"}})],1),e._v(" "),a("FormItem",{attrs:{label:"所有人类型",prop:"Ownertype"}},[a("RadioGroup",{model:{value:e.formValidate.Ownertype,callback:function(t){e.$set(e.formValidate,"Ownertype",t)},expression:"formValidate.Ownertype"}},[a("Radio",{attrs:{label:"Internalcompany"}},[e._v("内部公司")]),e._v(" "),a("Radio",{attrs:{label:"Internalstaff"}},[e._v("内部员工")]),e._v(" "),a("Radio",{attrs:{label:"client"}},[e._v("客户")]),e._v(" "),a("Radio",{attrs:{label:"supplier"}},[e._v("供应商")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"所有人",prop:"Owner"}},[a("Select",{model:{value:e.formValidate.Owner,callback:function(t){e.$set(e.formValidate,"Owner",t)},expression:"formValidate.Owner"}},e._l(e.Ownerlist,function(t){return a("Option",{key:t.value1,attrs:{value:t.value1}},[e._v(e._s(t.label1))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"负责人",prop:"mail"}},[a("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:e.formValidate.mail,callback:function(t){e.$set(e.formValidate,"mail",t)},expression:"formValidate.mail"}})],1),e._v(" "),a("FormItem",{attrs:{label:"是否可租赁",prop:"gender"}},[a("RadioGroup",{model:{value:e.formValidate.gender,callback:function(t){e.$set(e.formValidate,"gender",t)},expression:"formValidate.gender"}},[a("Radio",{attrs:{label:"male"}},[e._v("是")]),e._v(" "),a("Radio",{attrs:{label:"female"}},[e._v("否")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"是否可添加库位",prop:"goods"}},[a("RadioGroup",{model:{value:e.formValidate.goods,callback:function(t){e.$set(e.formValidate,"goods",t)},expression:"formValidate.goods"}},[a("Radio",{attrs:{label:"male"}},[e._v("是")]),e._v(" "),a("Radio",{attrs:{label:"female"}},[e._v("否")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"用途",prop:"interest"}},[a("CheckboxGroup",{model:{value:e.formValidate.interest,callback:function(t){e.$set(e.formValidate,"interest",t)},expression:"formValidate.interest"}},[a("Checkbox",{attrs:{label:"通用"}}),e._v(" "),a("Checkbox",{attrs:{label:"备货"}}),e._v(" "),a("Checkbox",{attrs:{label:"代购"}}),e._v(" "),a("Checkbox",{attrs:{label:"暂存"}}),e._v(" "),a("Checkbox",{attrs:{label:"待报关"}})],1)],1),e._v(" "),a("FormItem",{attrs:{label:"备注",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:e.formValidate.desc,callback:function(t){e.$set(e.formValidate,"desc",t)},expression:"formValidate.desc"}})],1),e._v(" "),a("FormItem")],1)],1)},staticRenderFns:[]},s=a("VU/8")(r,l,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=21.58c653988963ac133980.js.map