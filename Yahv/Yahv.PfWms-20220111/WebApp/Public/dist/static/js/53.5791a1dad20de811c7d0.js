webpackJsonp([53],{"4Crq":function(t,e){},"9xS9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=n("bOdI"),r=n.n(s),o=(n("7t+N"),n("dciI")),a={name:"Customswindow",data:function(){var t=this;return{key:"",Status:20,loading:!0,isdeclare:!1,selectionarr:[],PageIndex:1,PageSize:6,Total:0,columns:[{type:"selection",width:60,align:"center"},{title:"小订单号",slot:"orderID",align:"center",width:100},{title:"箱号",slot:"Boxcode",align:"center",width:80},{title:"入仓号",slot:"Entercode",align:"center",width:100},{title:"装箱时间",slot:"BoxingDate",align:"center",width:100},{title:"装箱人",slot:"Admin",align:"center",width:100},{title:"型号",key:"list",align:"center",render:function(e,n){return e("div",{attrs:{class:"subCol"}},[e("ul",t.reportList[n.index].Items.map(function(t){return e("li",{},t.Procut.PartNumber)}))])}},{title:"品牌",key:"list",align:"center",render:function(e,n){return e("div",{attrs:{class:"subCol"}},[e("ul",t.reportList[n.index].Items.map(function(t){return e("li",{},t.Procut.Manufacturer)}))])}},{title:"申报数量",key:"list",align:"center",width:150,render:function(e,n){return e("div",{attrs:{class:"subCol"}},[e("ul",t.reportList[n.index].Items.map(function(t){return e("li",{},t.Declare.Quantity)}))])}}],reportList2:[],reportList:[]}},created:function(){this.setnva(),this.getlist()},beforeRouteUpdate:function(t,e,n){this.Status=t.params.id,this.PageIndex=1,this.key="",this.getlist(),n()},mounted:function(){},computed:{},methods:(i={setnva:function(){this.$store.dispatch("setnvadata",[{title:"报关申报",href:"/Transport/Customswindow"}])},getlist:function(){var t=this,e={PageIndex:this.PageIndex,PageSize:this.PageSize,Status:this.Status,First:this.key};Object(o.b)(e).then(function(e){console.log(e),t.Total=e.obj.Total,e.obj.Total>0?(t.reportList=e.obj.Data,30==t.Status&&t.reportList.forEach(function(t){t._disabled=!0})):t.reportList=[],t.loading=!1})},search_btn:function(){this.loading=!0,this.PageIndex=1,this.getlist()},ok_declare:function(){for(var t=this,e=[],n=0;n<this.selectionarr.length;n++)e.push(this.selectionarr[n].TinyOrderID);console.log(e),Object(o.q)(e).then(function(e){400==e.val?t.$Message.error("申报失败，请重新操作"):(t.$Message.success("申报成功"),t.getlist())})},cancel_declare:function(){},selection_chenge:function(t){this.selectionarr=t},AskCustoms:function(){this.selectionarr.length<=0?this.$Message.error({content:"至少选择一个要申请报关的产品",duration:1,closable:!0,top:50}):this.isdeclare=!0}},r()(i,"search_btn",function(){this.loading=!0,this.getlist()}),r()(i,"clear_search",function(){this.loading=!0,this.getlist()}),i)},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Customswindow",attrs:{id:"Customsbox"}},[n("p",{staticClass:"windowtitle title"},[t._v("装箱清单重构")]),t._v(" "),n("div",[n("ButtonGroup",{staticStyle:{width:"28%"}},[n("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"输入箱号/型号/品牌",clearable:""},on:{"on-clear":t.search_btn},model:{value:t.key,callback:function(e){t.key="string"==typeof e?e.trim():e},expression:"key"}}),t._v(" "),n("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.search_btn}},[t._v("筛选")])],1),t._v(" "),n("div",{staticClass:"Apply_btn"},[n("Button",{attrs:{type:"warning",icon:"ios-create-outline",disabled:30==t.Status},on:{click:t.AskCustoms}},[t._v("报关申请")])],1)],1),t._v(" "),n("div",{staticClass:"tablebox"},[n("Table",{attrs:{columns:t.columns,data:t.reportList,loading:t.loading,border:""},on:{"on-selection-change":t.selection_chenge},scopedSlots:t._u([{key:"orderID",fn:function(e){var n=e.row;return e.index,[t._v("\n        "+t._s(n.TinyOrderID)+"\n      ")]}},{key:"Boxcode",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.BoxCode)+"\n      ")]}},{key:"Entercode",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.EnterCode)+"\n      ")]}},{key:"BoxingDate",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(t._f("showDate")(n.BoxingDate))+"\n      ")]}},{key:"Admin",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.Packer)+"\n      ")]}}])})],1),t._v(" "),n("div",{staticClass:"pagebox"},[n("Page",{attrs:{total:t.Total,current:t.PageIndex}})],1),t._v(" "),n("Modal",{attrs:{title:"提示"},on:{"on-ok":t.ok_declare,"on-cancel":t.cancel_declare},model:{value:t.isdeclare,callback:function(e){t.isdeclare=e},expression:"isdeclare"}},[n("p",[t._v("您是否确认申请报关？")])])],1)},staticRenderFns:[]};var c=n("VU/8")(a,l,!1,function(t){n("4Crq")},null,null);e.default=c.exports}});
//# sourceMappingURL=53.5791a1dad20de811c7d0.js.map