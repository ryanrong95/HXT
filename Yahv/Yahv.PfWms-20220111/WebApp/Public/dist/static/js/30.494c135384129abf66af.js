webpackJsonp([30],{"8QST":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("gyMJ"),a=s("PJh5"),l=s.n(a),o={data:function(){var t=this;return{detailinfo:"",ID:this.$route.query.ID,columnsnew:[{title:"#",slot:"grade_name",align:"center",width:50},{title:"等级",key:"SpecID",align:"center",width:100},{title:"分配库位",key:"list",align:"center",render:function(e,s){if(t.reportListnew[s.index].ShelveIDs.length<=0)for(var i=0;i<t.reportListnew[s.index].Quantity;i++){t.reportListnew[s.index].ShelveIDs.push("")}return e("div",{attrs:{class:"subCol"}},[e("ul",{attrs:{class:"subColdiv"}},t.reportListnew[s.index].ShelveIDs.map(function(i,n){return e("li",{style:{"line-height":"30px",padding:"8px 0",width:"100%","border-bottom":"1px solid #dddddd"}},[e("Select",{props:{value:i,transfer:!0},style:{width:"90%",margin:"0 auto",padding:"0"},attrs:{class:"subColli"},on:{"on-change":function(e){t.reportListnew[s.index].ShelveIDs[n]=e}}},t.reportListnew[s.index].UsableShelves.map(function(t){return e("Option",{props:{value:t.ID}},t.ID)}))])}))])}}],columns2:[{title:"#",slot:"grade_name",align:"center",width:50},{title:"等级",key:"SpecID",align:"center",width:100},{title:"分配库位",key:"list",align:"center",render:function(e,s){if(t.reportList2[s.index].ShelveIDs=[]){for(i=0;i<t.reportList2[s.index].Quantity;i++){t.reportList2[s.index].ShelveIDs.push({ii:"gdjkdjgk"})}return e("div",{attrs:{class:"subCol"}},[e("ul",{attrs:{class:"subColdiv"}},t.reportList2[s.index].ShelveIDs.map(function(i,n){return console.log(i),e("li",{style:{"line-height":"30px",padding:"8px 0",width:"100%","border-bottom":"1px solid #dddddd"}},[e("Select",{props:{value:i,transfer:!0},style:{width:"90%",margin:"0 auto",padding:"0"},attrs:{class:"subColli"},on:{"on-change":function(e){t.reportList2[s.index].ShelveIDs[n]=e}}},t.reportList2[s.index].UsableShelves.map(function(t){return e("Option",{props:{value:t.ID}},t.ID)}))])}))])}return e("div",{attrs:{class:"subCol"}},[e("ul",{attrs:{class:"subColdiv"}},t.reportList2[s.index].ShelveIDs.map(function(i,n){return console.log(i),e("li",{style:{"line-height":"30px",padding:"8px 0",width:"100%","border-bottom":"1px solid #dddddd"}},[e("Select",{props:{value:i,transfer:!0},style:{width:"90%",margin:"0 auto",padding:"0"},attrs:{class:"subColli"},on:{"on-change":function(e){t.reportList2[s.index].ShelveIDs[n]=e}}},t.reportList2[s.index].UsableShelves.map(function(t){return e("Option",{props:{value:t.ID}},t.ID)}))])}))])}}],reportList2:[{ID:"LsNotice201911280001",Quantity:5,ShelveIDs:["","","",""],SpecID:"AB01",UsableShelves:[{ID:"hk02"},{ID:"sz04"}]},{ID:"LsNotice201911280001",Quantity:5,ShelveIDs:["",""],SpecID:"AB01",UsableShelves:[{ID:"sz01"},{ID:"sz014"},{ID:"hk02"}]}],volumeTypes:[{ID:"HK01-F01-0114"},{ID:"HK01-F01-0205"}],reportListnew:[]}},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return l()(+e).format("YYYY-MM-DD")}}},mounted:function(){this.getdetail(),console.log("重新加载")},methods:{sumbithous:function(){var t=this,e=0;this.reportListnew.map(function(t,s){t.ShelveIDs.map(function(t,s){""==t&&e++})});var s={orderID:this.detailinfo.OrderID,lsnotices:this.reportListnew};console.log(e),0==e?Object(n.Y)(s).then(function(e){if(console.log(e),0==e.val){t.$Message.success("保存成功,两秒后自动跳转至通知页面");setTimeout(function(){this.$store.dispatch("setcloseLd",!1)},2e3)}else 1==e.val?t.$Message.error("保存失败，请核实库位"):2==e.val&&t.$Message.error("所选择库位已经被使用，请重新添加")}):this.$Message.error("分配的库位不可为空")},getdetail:function(){var t=this,e={warehouseID:sessionStorage.getItem("UserWareHouse"),orderID:this.ID};Object(n.X)(e).then(function(e){t.detailinfo=e.obj,t.reportListnew=e.obj.LsNotices})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"LeaseDetail"}},[s("p",{staticClass:"detailtitle"},[t._v("基本信息")]),t._v(" "),s("div",{staticClass:"box"},[s("Row",{staticStyle:{padding:"10px"}},[s("Col",{attrs:{xs:2,sm:4,md:6,lg:8}},[s("p",[s("label",[t._v("\n            订单编号：\n            "),t._v(" "),s("span",[t._v(t._s(t.detailinfo.OrderID))])])]),t._v(" "),s("p",{staticStyle:{"padding-top":"10px"}},[s("label",[t._v("\n            客户编号：\n            "),t._v(" "),s("span",[t._v(t._s(t.detailinfo.ClientID))])])]),t._v(" "),s("p",{staticStyle:{width:"163%","padding-top":"10px"}},[s("label",[t._v("\n            备      注：\n            "),s("span",{staticStyle:{width:"90%",float:"right"}},[t._v(t._s(t.detailinfo.Summary))])])])]),t._v(" "),s("Col",{attrs:{xs:20,sm:16,md:12,lg:8}},[s("p",[s("label",[t._v("\n            下单时间：\n            "),s("span",[t._v(t._s(t._f("showDate")(t.detailinfo.CreateDate)))])])]),t._v(" "),s("p",{staticStyle:{"padding-top":"10px"}},[s("label",[t._v("\n            租赁状态：\n            "),s("span",[t._v(t._s(t.detailinfo.StatuDes))])])])]),t._v(" "),s("Col",{attrs:{xs:2,sm:4,md:6,lg:8}},[s("p",[s("label",[t._v("\n            租赁开始时间：\n            "),s("span",[t._v(t._s(t._f("showDate")(t.detailinfo.StartDate)))])])]),t._v(" "),s("p",{staticStyle:{"padding-top":"10px"}},[s("label",[t._v("\n            租赁结束时间：\n            "),s("span",[t._v(t._s(t._f("showDate")(t.detailinfo.EndDate)))])])])])],1)],1),t._v(" "),s("p",{staticClass:"detailtitle"},[t._v("产品列表")]),t._v(" "),s("div",{staticClass:"tablebox",staticStyle:{"padding-top":"15px"}},[s("Table",{attrs:{columns:t.columnsnew,data:t.reportListnew,border:""},scopedSlots:t._u([{key:"grade_name",fn:function(e){e.row;var s=e.index;return[t._v("\n        "+t._s(s+1)+"\n      ")]}}])}),t._v(" "),s("div",{staticClass:"button_div"},[2==t.detailinfo.Status||3==t.detailinfo.Status?s("Button",{attrs:{type:"primary"},on:{click:t.sumbithous}},[t._v("保存")]):t._e()],1)],1)])},staticRenderFns:[]};var d=s("VU/8")(o,r,!1,function(t){s("KNmE")},null,null);e.default=d.exports},KNmE:function(t,e){}});
//# sourceMappingURL=30.494c135384129abf66af.js.map