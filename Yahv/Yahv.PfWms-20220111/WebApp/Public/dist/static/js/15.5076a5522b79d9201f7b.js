webpackJsonp([15,60],{"647/":function(t,e){},"6kfl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("NkUL"),i=a("gyMJ"),n={name:"Areapage",components:{formarea:s.default},data:function(){return{loading1:!1,adminsarr:[],loading:!0,interestlist:"",formdata:{interest:""},total:0,listdata:{Key:this.$route.params.fatherID,PageIndex:1,PageSize:"6",ID:"",Purpose:"",ManagerID:"",Type:""},houselist:[{Name:"1111",Value:"1111111"}],isshowadd:!1,columns12:[{type:"selection",width:60,align:"center"},{title:"库区名称",slot:"Name"},{title:"编号",key:"ID"},{title:"货架数量",key:"Count"},{title:"业务类型",key:"PurposeDes"},{title:"所属位置",key:"FatherName"},{title:"备注",key:"Summary"},{title:"操作",slot:"action",width:200,align:"center"}],getlistdata:[],search_damin:[],area_search:{Name:"",Type:"",ManagerID:""},formValidate:{name:"",interest:"",desc:"",admins:""},ruleValidate:{name:[{required:!0,message:"此项为必填",trigger:"blur"}],interest:[{required:!0,type:"array",min:1,message:"Choose at least one hobby",trigger:"change"}],desc:[{required:!0,message:"此项为必填",trigger:"blur"},{type:"string",min:20,message:"Introduce no less than 20 words",trigger:"blur"}]}}},beforeRouteEnter:function(t,e,a){a(function(t){t.oldUrl=e.path})},mounted:function(){var t=this;this.$nextTick(function(){console.log(t.oldUrl)}),this.setnva(),this.Shelvelist(),this.GetPurposes(),document.cookie="kuquurl="+this.$route.path},methods:{GetPurposes:function(){var t=this;Object(i.s)("").then(function(e){console.log(e),t.interestlist=e.obj})},showmodel:function(){this.isshowadd=!0},ok:function(){var t=this;if(""!=this.formValidate.name&&""!=this.formValidate.desc&&""!=this.formdata.interest&&""!=this.formValidate.admins){var e={Name:this.formValidate.name,FatherID:this.$route.params.fatherID,Type:20,ManagerID:this.formValidate.admins,Purpose:this.formdata.interest.toString(),Summary:this.formValidate.desc};console.log(e),Object(i.a)(e).then(function(e){0==e.val?(t.$Message.success(e.msg),t.isshowadd=!1,t.Shelvelist(),t.GetPurposes(),t.formValidate.name="",t.formdata.interest="",t.formValidate.desc="",t.formValidate.admins=""):t.$Message.error(e.msg),console.log(t.formValidate)})}else this.$Message.error("请输入信息")},cancel:function(){this.$refs.formValidate2.handleReset(),this.isshowadd=!1},show:function(t){this.$router.push({name:"shelves"})},remove:function(t){var e=this,a=t;this.$Modal.confirm({title:"提示",content:"是否要删除该库区",onOk:function(){Object(i.E)(a).then(function(t){console.log(t),0==t.val?(e.$Message.success("删除成功"),e.Shelvelist()):e.$Message.error("删除失败")})},onCancel:function(){e.$Message.info("取消删除")}})},setnva:function(){var t=[{title:"库房配置",href:"/kufang"},{title:"库区配置",href:this.$route.path}];this.$store.dispatch("setnvadata",t)},Shelvelist:function(){var t=this;Object(i.F)(this.listdata).then(function(e){t.getlistdata=e.obj.Data,t.total=e.obj.Total,t.loading=!1})},query_btn:function(){this.loading=!0,this.listdata.FatherID=this.area_search.parentname,this.listdata.PageIndex=1,this.listdata.PageSize=6,console.log(this.listdata),this.Shelvelist(this.listdata)},empty_btn:function(){this.listdata={Key:this.$route.params.fatherID,PageIndex:1,PageSize:"6",ID:"",Purpose:"",ManagerID:"",Type:""},this.loading=!0,this.Shelvelist(this.listdata)},GetWarehouse:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;GetWarehouse("").then(function(e){t.houselist=e.obj})}),changepage:function(t){this.loading=!0,this.listdata.PageIndex=t,this.Shelvelist()},testname:function(){0==/^[A-Z]1*$/.test(this.formValidate.name)&&(this.formValidate.name="",this.$Message.error("只能输入一位大写英文字母"))},cancel_btn:function(t){console.log(t),0==t&&(this.isshowadd=!1,this.formValidate.name="",this.formdata.interest="",this.formValidate.admins="",this.formValidate.desc="")},remoteMethod1:function(t){var e=this;Object(i.k)(t).then(function(t){console.log(t),e.adminsarr=t})},remoteMethod2:function(t){var e=this;Object(i.k)(t).then(function(t){console.log(t),e.search_damin=t})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"areabox"},[a("div",{staticClass:"srarch_input"},[a("Input",{staticClass:"searchtable",attrs:{placeholder:"库区编号"},model:{value:t.listdata.ID,callback:function(e){t.$set(t.listdata,"ID","string"==typeof e?e.trim():e)},expression:"listdata.ID"}}),t._v(" "),a("Select",{staticClass:"searchtable",attrs:{filterable:"",placeholder:"业务类型"},model:{value:t.listdata.Purpose,callback:function(e){t.$set(t.listdata,"Purpose",e)},expression:"listdata.Purpose"}},t._l(t.interestlist,function(e,s){return a("Option",{key:e.index,attrs:{value:e.ID}},[t._v(t._s(e.purpose))])}),1),t._v(" "),a("Select",{staticClass:"searchtable",attrs:{placeholder:"请输入并选择负责人",filterable:"",remote:"","remote-method":t.remoteMethod2,loading:t.loading1},model:{value:t.listdata.ManagerID,callback:function(e){t.$set(t.listdata,"ManagerID",e)},expression:"listdata.ManagerID"}},t._l(t.search_damin,function(e,s){return a("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.RealName))])}),1),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.query_btn}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"ios-trash"},on:{click:t.empty_btn}},[t._v("清空")]),t._v(" "),a("Button",{attrs:{icon:"md-add"},on:{click:t.showmodel}},[t._v("新增库区")])],1),t._v(" "),a("div",[a("Table",{attrs:{columns:t.columns12,data:t.getlistdata,loading:t.loading},scopedSlots:t._u([{key:"Name",fn:function(e){var s=e.row;return[a("strong",[t._v(t._s(s.Name))])]}},{key:"FatherMsg",fn:function(e){var s=e.row;return[a("strong",[t._v(t._s(s.FatherMsg.Name))])]}},{key:"action",fn:function(e){var s=e.row;return e.index,[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small",to:{name:"shelves",params:{AreafatherID:s.ID}}}},[t._v("查看货架")]),t._v(" "),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(s.ID)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"buttenbox"},[a("div",{staticStyle:{float:"left"}},[a("Modal",{attrs:{title:"新增库区","mask-closable":!1},on:{"on-visible-change":t.cancel_btn},model:{value:t.isshowadd,callback:function(e){t.isshowadd=e},expression:"isshowadd"}},[a("div",[a("label",[a("em",{staticClass:"bitian"},[t._v("*")]),t._v(" 库区名称：")]),t._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"只能输入一位大写英文字母作为库区名称"},on:{"on-blur":t.testname},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("br"),t._v(" "),a("div",[a("label",{attrs:{for:""}},[a("em",{staticClass:"bitian"},[t._v("*")]),t._v("负  责  人：\n             "),a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入并选择负责人",filterable:"",remote:"","remote-method":t.remoteMethod1,loading:t.loading1},model:{value:t.formValidate.admins,callback:function(e){t.$set(t.formValidate,"admins",e)},expression:"formValidate.admins"}},t._l(t.adminsarr,function(e,s){return a("Option",{key:s,attrs:{value:e.ID}},[t._v(t._s(e.RealName))])}),1)],1)]),t._v(" "),a("br"),t._v(" "),a("div",[a("label",[a("em",{staticClass:"bitian"},[t._v("*")]),t._v("用　　途：")]),t._v(" "),a("RadioGroup",{model:{value:t.formdata.interest,callback:function(e){t.$set(t.formdata,"interest",e)},expression:"formdata.interest"}},t._l(t.interestlist,function(e){return a("Radio",{key:e.ID,attrs:{label:e.ID}},[t._v(t._s(e.purpose))])}),1)],1),t._v(" "),a("br"),t._v(" "),a("div",[a("label",[a("em",{staticClass:"bitian"},[t._v("*")]),t._v("备　　注：")]),t._v(" "),a("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注"},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){return t.cancel_btn(!1)}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)])],1),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.listdata.PageIndex,"page-size":6},on:{"on-change":t.changepage}})],1)])])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("647/")},"data-v-9c7453e6",null);e.default=r.exports},NkUL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("gyMJ"),i={name:"formarea",props:["formValidate","ruleValidate"],data:function(){return{formValidatename:this.formValidate,istrue:!1,listdata:[]}},methods:{handleSubmit:function(){var t=this;this.$refs.formValidatename.validate(function(e){e?(t.$Message.success("Success!"),t.istrue=!0):(t.$Message.error("请填写相关信息"),t.istrue=!1),console.log(e)})},handleReset:function(){this.$refs.formValidatename.resetFields()},GetPurposes:function(){var t=this;Object(s.s)("").then(function(e){console.log(e),t.listdata=e.obj})}},mounted:function(){this.GetPurposes()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidatename",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":115}},[a("FormItem",{attrs:{label:"库区名称",prop:"name"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"用途",prop:"interest"}},[a("RadioGroup",{model:{value:t.formValidate.interest,callback:function(e){t.$set(t.formValidate,"interest",e)},expression:"formValidate.interest"}},t._l(t.listdata,function(e){return a("Radio",{key:e.ID,attrs:{label:e.ID}},[t._v(t._s(e.purpose))])}),1)],1),t._v(" "),a("FormItem",{attrs:{label:"备注",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),t._v(" "),a("FormItem")],1)],1)},staticRenderFns:[]},o=a("VU/8")(i,n,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=15.5076a5522b79d9201f7b.js.map