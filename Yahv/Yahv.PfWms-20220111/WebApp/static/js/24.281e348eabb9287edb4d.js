webpackJsonp([24],{QkSb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("x0xz"),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"Declare"},[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[e._v("代报关基础信息")]),e._v(" "),i("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[i("Row",[i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li detail1"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("ID：")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.ID))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("状态：")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.ExcuteStatusDes)+"\n                    "),null!=e.waybillinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:e.logchange}},[e._v("日志管理")]):e._e()],1)]),e._v(" "),1==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("提货状态：")]),e._v(" "),e.waybillinfo.Type&&100==e.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"magenta"}},[e._v("等待提货")]):e._e(),e._v(" "),1==e.waybillinfo.Type&&105==e.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"blue"}},[e._v("提货中")]):e._e(),e._v(" "),1==e.waybillinfo.Type&&200==e.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"green"}},[e._v("提货完成")]):e._e()],1):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("业务类型：")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.SourceDes))])]),e._v(" "),null!=e.waybillinfo.Condition?i("li",{staticClass:"itemli"},[i("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}),e._v(" "),1==e.waybillinfo.Condition.AgencyCheck?i("Tag",{attrs:{color:"geekblue"}},[e._v("代检查")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.AgencyPayment?i("Tag",{attrs:{color:"purple"}},[e._v("代垫货款")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.AgencyReceive?i("Tag",{attrs:{color:"blue"}},[e._v("代收货款")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.ChangePackaging?i("Tag",{attrs:{color:"cyan"}},[e._v("代收货款")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.LableServices?i("Tag",{attrs:{color:"green"}},[e._v("标签服务")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.PayForFreight?i("Tag",{attrs:{color:"gold"}},[e._v("垫付运费")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.Repackaging?i("Tag",{attrs:{color:"orange"}},[e._v("重新包装")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.UnBoxed?i("Tag",{attrs:{color:"volcano"}},[e._v("拆箱验货")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.VacuumPackaging?i("Tag",{attrs:{color:"red"}},[e._v("真空包装")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.WaterproofPackaging?i("Tag",{attrs:{color:"magenta"}},[e._v("防水包装")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.QualityInspection?i("Tag",{attrs:{color:"lime"}},[e._v("质检")]):e._e(),e._v(" "),1==e.waybillinfo.Condition.Unboxing?i("Tag",{attrs:{color:"yellow"}},[e._v("拆包装")]):e._e()],1):e._e()])]),e._v(" "),i("Col",{staticStyle:{width:"26%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("制单时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.waybillinfo.CreateDate)))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("供应商：")]),e._v(" "),i("span",{staticStyle:{display:"inline-block",width:"75%","line-height":"20px"}},[e._v("\n                    "+e._s(e.waybillinfo.Supplier)+"\n                     "),i("Tag",{attrs:{color:"volcano"}},[e._v("LV "+e._s(e.waybillinfo.SupplierGrade))])],1)]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("到货方式：")]),e._v(" "),1==e.waybillinfo.Type||2==e.waybillinfo.Type?i("span",[e._v(e._s(e.waybillinfo.TypeDes))]):i("Select",{staticStyle:{width:"40%"},on:{"on-change":e.changewaybillType},model:{value:e.waybillinfo.Type,callback:function(t){e.$set(e.waybillinfo,"Type",t)},expression:"waybillinfo.Type"}},e._l(e.TypeArr,function(t,a){return i("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),1==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("自提时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.waybillinfo.TakingDate)))])]):e._e(),e._v(" "),2==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("到货时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.waybillinfo.AppointTime)))])]):e._e(),e._v(" "),1==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("提货文件：")]),e._v(" "),e._l(e.waybillinfo.Files,function(t,a){return 10==t.Type?i("span",[e._v(e._s(t.CustomName))]):e._e()}),e._v(" "),10==e.item.Type?i("a",{on:{click:function(t){return e.fileprint(e.item.Url)}}},[e._v("打印")]):e._e()],2):e._e()])]),e._v(" "),i("Col",{staticStyle:{width:"31%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",[e._v("  ")]),e._v("入  仓  号：")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.EnterCode)+"("+e._s(e.waybillinfo.ClientName)+")\n                     "),i("Tag",{attrs:{color:"geekblue"}},[e._v("LV "+e._s(e.clientGrade))])],1)]),e._v(" "),1!=e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[e._v("运单号(本次)：")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},model:{value:e.waybillinfo.Code,callback:function(t){e.$set(e.waybillinfo,"Code",t)},expression:"waybillinfo.Code"}})],1)]):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("承运商(本次):")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0,filterable:""},on:{"on-change":e.changeacrrier},model:{value:e.waybillinfo.CarrierID,callback:function(t){e.$set(e.waybillinfo,"CarrierID",t)},expression:"waybillinfo.CarrierID"}},e._l(e.CarrierList,function(t){return i("Option",{key:t.ID,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1),e._v(" "),1==e.waybillinfo.Type?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCarrier=!0}}}):e._e()],1)]),e._v(" "),1==e.waybillinfo.Type&&0==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("司        机:")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0,filterable:""},model:{value:e.waybillinfo.Driver,callback:function(t){e.$set(e.waybillinfo,"Driver",t)},expression:"waybillinfo.Driver"}},e._l(e.DriversArr,function(t,a){return i("Option",{key:a,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1)],1),e._v(" "),1==e.waybillinfo.Type&&null!=e.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddDriver=!0}}}):e._e()],1):e._e(),e._v(" "),1==e.waybillinfo.Type&&0==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("车  牌  号:")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0},on:{"on-create":e.handleCreate3},model:{value:e.waybillinfo.CarNumber1,callback:function(t){e.$set(e.waybillinfo,"CarNumber1",t)},expression:"waybillinfo.CarNumber1"}},e._l(e.CarArr,function(t){return i("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])}),1),e._v(" "),1==e.waybillinfo.Type&&null!=e.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCar=!0}}}):e._e()],1)]):e._e(),e._v(" "),1==e.waybillinfo.Type&&1==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("司        机:")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入司机"},model:{value:e.waybillinfo.Driver,callback:function(t){e.$set(e.waybillinfo,"Driver",t)},expression:"waybillinfo.Driver"}})],1)]):e._e(),e._v(" "),1==e.waybillinfo.Type&&1==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("车  牌  号:")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入承运商"},model:{value:e.waybillinfo.CarNumber1,callback:function(t){e.$set(e.waybillinfo,"CarNumber1",t)},expression:"waybillinfo.CarNumber1"}})],1)]):e._e(),e._v(" "),1==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("联  系  人:")]),e._v(" "),i("span",[e._v(" "+e._s(e.waybillinfo.TakingContact)+"   (电话:"+e._s(e.waybillinfo.TakingPhone)+")")])]):e._e(),e._v(" "),1==e.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("提货地址:")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.TakingAddress))])]):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",[e._v("  ")]),e._v("输  送  地：")]),e._v(" "),i("span",[""!=e.waybillinfo.ConsignorPlaceText?i("span",[e._v(e._s(e.waybillinfo.ConsignorPlaceText))]):i("span",{staticStyle:{color:"red"}},[e._v("暂无输送地")]),e._v(" "),i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(t){return e.clickClient(e.waybillinfo.ConsignorPlace,"ClientCode","ClientCode")}}})],1)])])]),e._v(" "),i("Col",{staticStyle:{width:"23%",float:"left"}},[i("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[i("li",{staticClass:"itemli"},[i("span",{},[e._v("订单号：")]),e._v(" "),i("span",[e._v(e._s(e.waybillinfo.OrderID))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:0==e.Operateddisable,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SeletUpload("Waybill")}}},[e._v("传照")])],1),e._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:0==e.Operateddisable,size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:function(t){return e.fromphotos("Waybill")}}},[e._v("拍照")])],1)]),e._v(" "),i("li",{staticStyle:{clear:"both"}},e._l(e.waybillinfo.Files,function(t){return i("div",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return e.clackFilesProcess(t.Url)}}},[e._v(e._s(t.CustomName))]),e._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return e.handleRemove(t,"Waybill")}}})],1)}),0),e._v(" "),1==e.waybillinfo.Type&&100==e.waybillinfo.LoadingExcuteStatus?i("li",{staticStyle:{position:"absolute",top:"147px",right:"0"}},[i("div",[i("Button",{attrs:{type:"primary"},on:{click:e.TakeGoods}},[e._v(e._s(e.TakeGoodsName))])],1)]):e._e()])]),e._v(" "),i("Col",{attrs:{span:"3"}})],1)],1)]),e._v(" "),i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[e._v("产品清单")]),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("ButtonGroup",{staticStyle:{width:"28%"}},[i("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":e.search_pro},model:{value:e.searchkey,callback:function(t){e.searchkey="string"==typeof t?t.trim():t},expression:"searchkey"}}),e._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:e.search_pro}},[e._v("筛选")])],1),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.Labelprint}},[e._v("标签打印")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.clickshowchangebox}},[e._v("一键入箱")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:e.PrintBoxcode}},[e._v("箱签打印")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:function(t){return e.showBudget("meet","in",e.waybillinfo.Source)}}},[e._v("收入")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:0==e.Operateddisable},on:{click:function(t){return e.showBudget("meet","out",e.waybillinfo.Source)}}},[e._v("支出")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:function(t){e.abnormal_enter=!0}}},[e._v("无通知产品录入")]),e._v(" "),i("div",{staticStyle:{float:"right"}},[i("Button",{attrs:{disabled:1==e.isdisabled,type:"primary",shape:"circle",icon:"md-checkmark"},on:{click:e.clickshowchangebox}},[e._v("入库完成")]),e._v(" "),i("Button",{attrs:{disabled:1==e.isdisabled,type:"warning",shape:"circle",icon:"ios-alert-outline"},on:{click:e.isAbnormalclick}},[e._v("到货异常")])],1)],1),e._v(" "),i("div",[e.ProductList.length>0?i("div",{staticClass:"detail_tablebox"},[i("Table",{ref:"selection",attrs:{columns:e.tabletitle,data:e.ProductList,loading:e.loading},on:{"on-selection-change":e.handleSelectRow},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var i=t.index;return[e._v(e._s(i+1))]}},{key:"PartNumber",fn:function(t){var a=t.row;return t.index,[i("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{float:"left","text-align":"left"}},[i("span",{staticStyle:{width:"120px",overflow:"hidden"}},[e._v(e._s(a.Product.PartNumber))])]),e._v(" "),i("ul",{staticStyle:{float:"right"}},[i("li",[1==a.Conditions.IsCIQ?i("Tag",{attrs:{color:"primary"}},[e._v("商检")]):e._e()],1),e._v(" "),i("li",[1==a.Conditions.IsCCC?i("Tag",{attrs:{color:"warning"}},[e._v("CCC")]):e._e()],1),e._v(" "),i("li",[1==a.Conditions.IsEmbargo?i("Tag",{attrs:{color:"error"}},[e._v("禁运")]):e._e()],1),e._v(" "),i("li",[1==a.Conditions.IsHighPrice?i("Tag",{attrs:{color:"magenta"}},[e._v("高价值")]):e._e()],1)])])]}},{key:"Arrival",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("span",[e._v(e._s(a.Quantity))]):e._e()]}},{key:"Already",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("span",[e._v(e._s(a.ArrivedQuantity))]):e._e()]}},{key:"Surplus",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("div",[1!=a.isenter?i("P",[Number(a.LeftQuantity)<=0?i("span",[e._v("0")]):i("span",[e._v(e._s(a.LeftQuantity))])]):e._e()],1):e._e()]}},{key:"Country_origin",fn:function(t){var a=t.row,r=t.index;return[i("span",[e._v(e._s(a.origintext))]),e._v(" "),0==a._disabled?i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(t){return e.clickClient(a.origin,a,r)}}}):e._e()]}},{key:"TinyOrderID",fn:function(t){var i=t.row;return t.index,[e._v("\n                  "+e._s(i.TinyOrderID)+"\n              ")]}},{key:"imglist",fn:function(t){var a=t.row;return t.index,e._l(a.Files,function(t){return i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return e.clackFilesProcess(t.Url)}}},[e._v(e._s(t.CustomName))]),e._v(" "),i("Icon",{ref:a.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return e.handleRemove(t,a)}}})],1)})}},{key:"operation",fn:function(t){var a=t.row,r=t.index;return[i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:0!=a._disabled,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SeletUpload(a)}}},[e._v("传照")])],1),e._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:0!=a._disabled,type:"primary",icon:"md-reverse-camera",size:"small"},on:{click:function(t){return e.fromphotos(a)}}},[e._v("拍照")])],1),e._v(" "),i("div",{staticClass:"setupload"},[0!=a.iscx?i("Button",{attrs:{disabled:0!=a._disabled,type:"primary",size:"small",icon:"md-checkmark"},on:{click:function(t){return e.chaixiang(r,a)}}},[e._v("拆项")]):e._e(),e._v(" "),0==a.iscx?i("Button",{attrs:{disabled:0!=a._disabled,type:"primary",size:"small",icon:"ios-trash-outline"},on:{click:function(t){return e.removechaixiang(r,a)}}},[e._v("删除")]):e._e()],1)]}}],null,!1,1469014578)}),e._v(" "),i("div",{staticClass:"successbtn",staticStyle:{"margin-top":"20px"}},[i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==e.isdisabled},on:{click:e.clickshowchangebox}},[e._v("入库完成")]),e._v(" "),i("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==e.isdisabled},on:{click:e.isAbnormalclick}},[e._v("到货异常")])],1)],1):e._e()]),e._v(" "),i("div",[e.reFresh?i("History-Mount",{ref:"History",attrs:{OrderID:e.waybillinfo.OrderID,EnterCode:e.waybillinfo.EnterCode,Type:2},on:{uploadeCgDetail_new:e.uploadeCgDetail_new}}):e._e()],1)])]),e._v(" "),i("Modal",{attrs:{title:"选地地区"},on:{"on-cancel":e.cancel},model:{value:e.setClientCode,callback:function(t){e.setClientCode=t},expression:"setClientCode"}},[i("Select",{attrs:{filterable:"","label-in-value":!0},on:{"on-change":e.changClientCode},model:{value:e.ClientCode,callback:function(t){e.ClientCode=t},expression:"ClientCode"}},e._l(e.Conveyingplace2,function(t,a){return i("Option",{key:t.ID,attrs:{value:t.CorPlace}},[e._v(e._s(t.Text))])}),1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.primaryClientCode}},[e._v("确定")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"一键入箱","mask-closable":!1},on:{"on-visible-change":e.changeshowbox},model:{value:e.showchangebox,callback:function(t){e.showchangebox=t},expression:"showchangebox"}},[i("span",{attrs:{slot:"close"},slot:"close"},[i("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),i("p"),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("日       期：\n       ")]),e._v(" "),i("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:e.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:e.saleDate},on:{"on-change":e.changeData}})],1),e._v(" "),i("p"),e._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("箱       号：\n      ")]),e._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入箱号"},on:{"on-blur":function(t){return e.handleCreate1(e.newboxcode)}},model:{value:e.newboxcode,callback:function(t){e.newboxcode="string"==typeof t?t.trim():t},expression:"newboxcode"}})],1),e._v(" "),i("p"),e._v(" "),1==e.issharevalue?i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("重量(Kg)： ")]),e._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入重量"},on:{"on-blur":e.TestAVGWeightsum,"on-enter":e.TestAVGWeightsum},model:{value:e.sharevalue,callback:function(t){e.sharevalue=t},expression:"sharevalue"}})],1):e._e(),e._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[e._v(" ")]),e._v("推算重量(Kg)： ")]),e._v(" "),i("span",[e._v(e._s(e.AVGWeightsum))])]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.ok_changebox}},[e._v("确定")])],1)]),e._v(" "),i("Modal",{ref:"modal",attrs:{title:"无通知产品录入",width:"90","mask-closable":!1},on:{"on-ok":e.ok_abnormal,"on-cancel":e.cancel,"on-visible-change":e.changeabnormal_enter},model:{value:e.abnormal_enter,callback:function(t){e.abnormal_enter=t},expression:"abnormal_enter"}},[i("span",{attrs:{slot:"close"},slot:"close"},[i("Icon",{attrs:{type:"ios-close"},on:{click:e.cancel}})],1),e._v(" "),i("div",[i("div",[i("p",{staticClass:"detailtitle"},[e._v("\n                无通知产品录入\n                "),i("span",{staticStyle:{"margin-left":"15px",color:"red"}},[e._v("注意：仅能录入该运单下与通知型号不匹配的产品信息")])]),e._v(" "),i("div",{staticStyle:{padding:"15px 0px"}},[i("Noting-Enter",{key:e.timer,ref:"NotingEntername",attrs:{Storagesarr:e.Storages,Storehouselist:e.Storehouselist,status:2,EnterCode:e.waybillinfo.EnterCode,orderID:e.waybillinfo.OrderID}})],1)])])]),e._v(" "),1==e.WarehousingMsg?i("div",[i("Modal",{attrs:{title:"分拣完成"},on:{"on-ok":function(t){return e.ok_Warehousing(115)},"on-cancel":e.cancel_Warehousing},model:{value:e.WarehousingMsg,callback:function(t){e.WarehousingMsg=t},expression:"WarehousingMsg"}},[0!=e.Nomatching.length?i("div",[i("h2",[e._v("以下型号数量与通知应到数量不符，是否继续进行入库操作")]),e._v(" "),i("ul",e._l(e.Nomatching,function(t,a){return i("li",{key:a},[i("h2",[e._v(e._s(t))])])}),0)]):i("div",[i("span",[e._v("是否确认分拣完成")])])])],1):e._e(),e._v(" "),i("Modal",{attrs:{title:"到货异常"},on:{"on-visible-change":e.changeerror},model:{value:e.isAbnormal,callback:function(t){e.isAbnormal=t},expression:"isAbnormal"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close",color:"rgb(33, 28, 28)"},on:{click:e.closeerror}})],1),e._v(" "),i("span",{staticStyle:{"line-height":"26px"}},[e._v("异常原因")]),e._v(" "),i("Input",{attrs:{type:"textarea",rows:2,placeholder:"备注",maxlength:"100","show-word-limit":""},model:{value:e.Summary,callback:function(t){e.Summary=t},expression:"Summary"}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.closeerror}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.Abnormal_btn}},[e._v("确定")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"箱签打印",width:"80","mask-closable":!1},model:{value:e.showprintboxcode,callback:function(t){e.showprintboxcode=t},expression:"showprintboxcode"}},[i("Print-boxcode",{ref:"printbox"}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),i("Drawer",{attrs:{width:70},on:{"on-visible-change":e.changehistore},model:{value:e.historydata,callback:function(t){e.historydata=t},expression:"historydata"}},[e.reFresh?i("History-Mount",{attrs:{OrderID:e.waybillinfo.OrderID,enterCode:e.waybillinfo.EnterCode,Type:2}}):e._e()],1),e._v(" "),i("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:e.Budgetdetail,callback:function(t){e.Budgetdetail=t},expression:"Budgetdetail"}},[i("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[i("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:e.closeBudget}})],1),e._v(" "),i("div",[i("router-view")],1)]),e._v(" "),i("Modal",{attrs:{title:"分摊重量"},on:{"on-visible-change":e.changeshare},model:{value:e.showshare,callback:function(t){e.showshare=t},expression:"showshare"}},[i("div",[i("Input",{attrs:{placeholder:"请输入重量"},model:{value:e.sharevalue,callback:function(t){e.sharevalue=t},expression:"sharevalue"}})],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.ok_share}},[e._v("确认")])],1)]),e._v(" "),i("Modal",{attrs:{title:"新增承运商","mask-closable":!1},model:{value:e.showaddCarrier,callback:function(t){e.showaddCarrier=t},expression:"showaddCarrier"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(2)}}})],1),e._v(" "),i("Add-Carrier",{ref:"addCarrier",attrs:{Conveyingplace:e.Conveyingplace},on:{fatherMethodCarrier:e.fatherMethodCarrier,setdisabled:e.setdisabled}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(2)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(1)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"新增司机","mask-closable":!1},model:{value:e.showaddDriver,callback:function(t){e.showaddDriver=t},expression:"showaddDriver"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(4)}}})],1),e._v(" "),i("Add-Driver",{ref:"AddDriver",attrs:{EnterpriseName:e.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addDriver:e.ok_addDriver}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(4)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(3)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"新增车牌号","mask-closable":!1},model:{value:e.showaddCar,callback:function(t){e.showaddCar=t},expression:"showaddCar"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(6)}}})],1),e._v(" "),i("Add-Car",{ref:"addcar",attrs:{EnterpriseName:e.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addCar:e.ok_addCar}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(6)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(5)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"65"},model:{value:e.showlogged,callback:function(t){e.showlogged=t},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),e._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[e._v("日志管理")])]),e._v(" "),e.showlogged?i("logg-ed",{key:e.loggdetime,ref:"logged",attrs:{WaybillID:e.waybillinfo.ID}}):e._e()],1)],1)},staticRenderFns:[]};var l=function(e){i("sgbu")},o=i("VU/8")(a.a,r,!1,l,"data-v-7d3e3982",null);t.default=o.exports},sgbu:function(e,t){},x0xz:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__=__webpack_require__("bOdI"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_1_Vue__=__webpack_require__("TXMN"),__WEBPACK_IMPORTED_MODULE_2__CgHistory__=__webpack_require__("rrli"),__WEBPACK_IMPORTED_MODULE_3__Pages_Cgenter_NotingEnter__=__webpack_require__("D7ok"),__WEBPACK_IMPORTED_MODULE_4__Pages_Common_PrintBoxcode__=__webpack_require__("dUDF"),__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Carrier__=__webpack_require__("uWQ3"),__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Driver__=__webpack_require__("CZn4"),__WEBPACK_IMPORTED_MODULE_7__Subassembly_Add_Car__=__webpack_require__("MgEx"),__WEBPACK_IMPORTED_MODULE_8__Common_logged__=__webpack_require__("93yw"),__WEBPACK_IMPORTED_MODULE_9__api__=__webpack_require__("gyMJ"),__WEBPACK_IMPORTED_MODULE_10__api_CgApi__=__webpack_require__("dciI"),__WEBPACK_IMPORTED_MODULE_11__js_browser_js__=__webpack_require__("3PyT"),product_url=__webpack_require__("FHte"),lodash=__webpack_require__("M4fF");__webpack_exports__.a={name:"",components:{"History-Mount":__WEBPACK_IMPORTED_MODULE_2__CgHistory__.a,"Noting-Enter":__WEBPACK_IMPORTED_MODULE_3__Pages_Cgenter_NotingEnter__.default,"Print-boxcode":__WEBPACK_IMPORTED_MODULE_4__Pages_Common_PrintBoxcode__.default,"Add-Carrier":__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Carrier__.default,"Add-Driver":__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Driver__.default,"Add-Car":__WEBPACK_IMPORTED_MODULE_7__Subassembly_Add_Car__.default,"logg-ed":__WEBPACK_IMPORTED_MODULE_8__Common_logged__.default},data:function(){var e,t=this;return e={options3:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},saleDate:"",loggdetime:"",showlogged:!1,Operateddisable:!0,timerwaybill:null,Warehousingstatus:null,isclick:!0,AVGWeightsum:null,issharevalue:!0,boxcodetype:"2",adddisabled:!1,showaddDriver:!1,addDriverName:null,showaddCar:!1,addCarName:null,showaddCarrier:!1,IsPersonal:!1,NullNotice:[],clientGrade:null,sharevalue:null,showshare:!1,Storehouselist:[],TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],loading:!0,item:"",WarehouseID:sessionStorage.getItem("UserWareHouse"),showprintboxcode:!1,isdisabled:!1,abnormal_enter:!1,Storages:[],timer:"",TakeGoodsName:"我去提货",historydata:!1,reFresh:!1,historydetail:{times:"",waybillLIst:[]},WarehousingMsg:!1,Nomatching:"",Summary:"",isAbnormal:!1,searchkey:"",SelectRow:[],applydata:[],applyfrom:{WarehouseID:sessionStorage.getItem("UserWareHouse"),Summary:"",CodePrefix:"WL",DateStr:""},detail_ID:"",CarrierList:[],CarArr:[],CarArrName:"",DriversArr:[],DriversName:"",Conveyingplace:[],details:{wayBillID:"",total:0,pageIndex:1,pageSize:1,WaybillNo:"90416165067",Carrier:"",PlaceDescription:"美国"},waybillinfo:{},ProductList:[],wayBillID:this.$route.params.wayBillID,tabletitle:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"#",slot:"indexs",align:"left",width:30},{title:"型号",slot:"PartNumber",align:"center",width:170},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"品牌")])},key:"brand",align:"center",width:120,render:function(e,i){var a=t;return e("Input",{props:{value:a.trim(i.row.Product.Manufacturer)},on:{"on-change":function(e){i.row.Product.Manufacturer=e.target.value,a.ProductList[i.index]=i.row,a.clicktest(i.row)},"on-blur":function(e){if(""!=e.target.value?(i.row.Product.Manufacturer=e.target.value,a.ProductList[i.index]=i.row):(e.target.value=null,i.row.Product.Manufacturer=null,a.ProductList[i.index]=i.row),a.SelectRow.length>0)for(var t=0,r=a.SelectRow.length;t<r;t++)i.row.SortingID==a.SelectRow[t].SortingID&&(a.SelectRow[t]=i.row);console.log(a.SelectRow)}}})}},{title:"应到",slot:"Arrival",align:"center",width:58},{title:"已到",slot:"Already",align:"center",width:58},{title:"剩余",slot:"Surplus",align:"center",width:58},{title:"批号",key:"batch",align:"center",width:100,render:function(e,i){var a=t;return e("Input",{props:{value:a.trim(i.row.DateCode)},on:{"on-change":function(e){i.row.DateCode=e.target.value,a.ProductList[i.index]=i.row,a.clicktest(i.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"本次到货")])},title:"本次到货",key:"Quantity",align:"center",width:90,render:function(e,i){var a=t;return e("Input",{props:{value:Number(i.row.CurrentQuantity)<0?0:i.row.CurrentQuantity},on:{"on-blur":function(e){if(console.log(e.target.value),""!=e.target.value){1==/^[0-9]*$/.test(e.target.value)&&0!=e.target.value?(i.row.CurrentQuantity=Number(e.target.value),a.ProductList[i.index]=i.row):(a.$Message.error("只能输入正整数"),e.target.value=null,i.row.CurrentQuantity=null,a.ProductList[i.index]=i.row)}else e.target.value=null,i.row.CurrentQuantity=null,a.ProductList[i.index]=i.row;if(a.SelectRow.length>0)for(var t=0,r=a.SelectRow.length;t<r;t++)i.row.SortingID==a.SelectRow[t].SortingID&&(a.SelectRow[t]=i.row)},"on-change":function(){}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"原产地")])},slot:"Country_origin",align:"center",width:130},{title:"小订单号",slot:"TinyOrderID",align:"center",width:150},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"箱号")])},width:180,key:"Boxing_code",render:function(e,t){return e("Input",{props:{value:t.row.BoxCode,disabled:!0}})}},{title:"体积(m³)",key:"Volume",align:"center",width:90,render:function(e,i){var a=t;return e("Input",{props:{value:i.row.Volume},on:{"on-change":function(e){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(i.row.Volume=e.target.value,a.ProductList[i.index]=i.row):(a.$Message.error("只能输入数字,包括两位数的小数点"),e.target.value=null,i.row.Volume=null,a.ProductList[i.index]=i.row),a.clicktest(i.row)},"on-blur":function(){1==/^\d+(\.\d{0,2})?$/.test(event.target.value)?(i.row.Volume=event.target.value,a.ProductList[i.index]=i.row):(a.$Message.error("只能输入数字,包括两位数的小数点"),event.target.value=null,i.row.Volume=null,a.ProductList[i.index]=i.row),a.clicktest(i.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"毛重(Kg)")])},key:"GrossWeight",align:"center",width:90,render:function(e,i){var a=t,r=null;return 0==i.row.Weight?(r=null,a.ProductList[i.index].Weight=r):(r=i.row.Weight,a.ProductList[i.index].Weight=r),e("Input",{props:{value:r},on:{"on-change":function(e){},"on-blur":function(e){var t=a.trim(e.target.value);if(null!=t||""!=t?1==/^\d+(\.\d{0,5})?$/.test(t)&&0!=t?(i.row.Weight=t,a.ProductList[i.index]=i.row):(a.$Message.error("只能输入大于零的数字,且保留小数点后五位"),i.row.Weight=null,e.target.value=null,a.ProductList[i.index]=i.row):(a.$Message.error("请输入毛重"),i.row.Weight=null,e.target.value=null,a.ProductList[i.index]=i.row),a.SelectRow.length>0)for(var r=0,l=a.SelectRow.length;r<l;r++)a.SelectRow[r].SortingID==i.row.SortingID&&(a.SelectRow[r]=i.row);console.log(i.row)},"on-enter":function(e){var r=a.trim(e.target.value);if(1==/^\d+(\.\d{0,5})?$/.test(r)&&0!=r){i.row.Weight=r,a.ProductList[i.index]=i.row;i.row.Input;var l=i.row.Product,o={Quantity:i.row.CurrentQuantity,inputsID:i.row.SortingID,Catalog:"",PartNumber:l.PartNumber,Manufacturer:l.Manufacturer,Packing:l.Packing,PackageCase:l.PackageCase,origin:i.row.origintext,SourceDes:t.waybillinfo.SourceDes},s=[];s.push(o);var n=Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.f)()["产品标签"],c=-1!=n.Url.indexOf("http");n.Url=1==c?n.Url:t.printurl+n.Url}else a.$Message.error("只能输入大于零的数字,且保留小数点后五位"),i.row.Weight=null,e.target.value=null,a.ProductList[i.index]=i.row}}})}},{title:"图片",slot:"imglist",align:"center",width:170},{title:"异常原因",key:"imglist",align:"center",width:100,render:function(e,i){var a=t;return e("Input",{props:{value:i.row.Summary},on:{"on-change":function(e){i.row.Summary=e.target.value,a.ProductList[i.index]=i.row},"on-blur":function(e){if(a.SelectRow.length>0)for(var t=0,r=a.SelectRow.length;t<r;t++)a.SelectRow[t].SortingID==i.row.SortingID&&(a.SelectRow[t]=i.row)}}})}},{title:"操作",slot:"operation",align:"center",width:200,fixed:"right"}]},__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"Conveyingplace",[]),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"Conveyingplace2",[]),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"chengevalue",{inputval:"",value:"",type:""}),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"setClientCode",!1),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"ClientCode",""),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"boxingarr",[]),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"showchangebox",!1),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"newboxcode",null),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"newboxcodeback",null),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"oldboxcode",null),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"printurl",product_url.pfwms),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"printlist",[]),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"orderID",null),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(e,"Entercode",null),e},created:function(){window.PhotoUploaded=this.changed,this.CgDetail_new(this.$route.params.wayBillID)},computed:{Budgetdetail:function(){return this.$store.state.common.Budgetdetail}},watch:{orderID:function(){return null!=this.waybillinfo.OrderID&&(this.reFresh=!0),this.waybillinfo.OrderID}},mounted:function(){this.WayParterdata()},methods:{setboxsplit:function(e){if(e)return e.split("]")[1]},clicktest:lodash.throttle(function(e){for(var t=0,i=this.SelectRow.length;t<i;t++)e.SortingID==this.SelectRow[t].SortingID&&(this.SelectRow[t]=e)},300),setSelectrow:function(e){for(var t=0,i=this.SelectRow.length;t<i;t++)e.SortingID==this.SelectRow[t].SortingID&&(this.SelectRow[t]=e)},search_pro:function(){var e=this;this.loading=!0,Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__._22)(this.waybillinfo.ID,this.searchkey).then(function(t){e.ProductList=t.Notice,e.loading=!1})},GetDriversCars:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.N)(e).then(function(e){t.CarArr=[];var i=e.Transports;if(i.length>0)for(var a={},r=0;r<i.length;r++)a=null!=i[r].CarNumber1&&null!=i[r].CarNumber2?{value:i[r].CarNumber1+"  "+i[r].CarNumber2}:{value:i[r].CarNumber1},t.CarArr.push(a);else t.CarArr=[];t.DriversArr=e.Drivers})},changeacrrier:function(e){console.log(this.waybillinfo.CarrierID),void 0!=e&&(1==this.waybillinfo.Type&&"Personal"==e.value?(this.IsPersonal=!0,this.waybillinfo.CarNumber1=this.CarArrName,this.waybillinfo.Driver=this.DriversName):(1==this.waybillinfo.Type?(this.IsPersonal=!1,this.waybillinfo.CarNumber1="",this.waybillinfo.Driver="",this.GetDriversCars(e.value)):(this.IsPersonal=!1,this.waybillinfo.CarNumber1="",this.waybillinfo.Driver=""),this.waybillinfo.CarrierName=e.label))},handleCreate1:function(e){var t=this;if(""!=e&&null!=e)if(null!=this.oldboxcode&&""!=this.oldboxcode){var i={boxCode:this.oldboxcode},a={enterCode:this.waybillinfo.EnterCode,code:e,date:this.saleDate,adminID:sessionStorage.getItem("userID")};console.log(a),Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.b)(i).then(function(i){var a={enterCode:t.waybillinfo.EnterCode,code:e,date:t.saleDate,adminID:sessionStorage.getItem("userID")};Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.c)(a).then(function(e){0==e.success?(t.$Message.error(e.data),t.newboxcode=null,t.newboxcodeback=null,t.oldboxcode=null,t.isclick=!0):(t.oldboxcode=e.boxCode,t.newboxcode=t.setboxsplit(e.boxCode),t.newboxcodeback=e.boxCode,t.isclick=!1,console.log(t.newboxcodeback))})})}else{i={enterCode:this.waybillinfo.EnterCode,code:e,date:this.saleDate,adminID:sessionStorage.getItem("userID")};console.log(i),Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.c)(i).then(function(e){0==e.success?(t.$Message.error(e.data),t.newboxcode=null,t.newboxcodeback=null,t.oldboxcode=null,t.isclick=!0):(t.oldboxcode=e.boxCode,t.newboxcode=t.setboxsplit(e.boxCode),t.newboxcodeback=e.boxCode,t.isclick=!1)})}},handleCreate2:function(e){this.DriversArr.push({ID:e,Name:e})},handleCreate3:function(e){this.CarArr.push({ID:e,Name:e})},changePartNumber:function(e,t,i,a){if(this.ProductList[i].InputID==t){this.ProductList[i].Product.PartNumber=e.target.value,this.clicktest(this.ProductList[i]);for(var r=0;r<this.ProductList.length;r++)this.ProductList[r].PID==a.ID&&(this.ProductList[r].Product.PartNumber=e.target.value)}},trim:function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},handleRemovelist:function(e,t){for(var i=this.ProductList,a=0;a<i.length;a++)i[a].ID==e.ID&&i[a].Files.splice(t,1)},handleRemove:function(e,t){var i=this,a={id:e.ID};Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.l)(a).then(function(a){console.log(a),1==a.Success?(i.Removebackfun(e,t),i.$Message.success("删除成功")):i.$Message.error("删除失败")})},Removebackfun:function(e,t){if("Waybill"==t)this.waybillinfo.Files.splice(this.waybillinfo.Files.indexOf(e),1);else for(var i=this.ProductList,a=0;a<i.length;a++)i[a].ID==t.ID&&i[a].Files.splice(e,1)},CgBoxesShow:function(){var e=this,t=(sessionStorage.getItem("UserWareHouse"),{enterCode:this.waybillinfo.EnterCode,date:""});Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.f)(t).then(function(t){t.length>0?e.boxingarr=t:e.boxingarr=[]})},GetBoxesdates:function(){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api__.j)().then(function(t){console.log(t),e.applydata=t})},showBudget:function(e,t,i){if(this.$store.dispatch("setBudget",!0),"meet"==e){var a="";this.$router.push({path:"/CgProcessed/Declare/Budget",query:{webillID:this.waybillinfo.ID,OrderID:this.waybillinfo.OrderID,type:t,otype:"in",conduct:i}})}else{a="";a="CgUntreated"==this.routername?"/CgUntreated/Oplog":"/CgProcessed/Oplog",this.$router.push({path:a,params:{webillID:this.details.waybillinfo.WaybillID}})}},closeBudget:function(){this.$router.go(-1),this.$store.dispatch("setBudget",!1)},handleSelectRow:function(e){console.log(e),this.SelectRow=e},cancel:function(){this.showphoto=!1,this.setClientCode=!1,this.abnormal_enter=!1,this.showshare=!1,this.showchangebox=!1,this.showaddCarrier=!1,this.showaddDriver=!1,this.showaddCar=!1,this.oldboxcode=null,0==this.showchangebox&&this.BoxcodeDeletefun(),0==this.abnormal_enter&&this.Storages.forEach(function(e){if(null!=e.BoxCode||""!=e.BoxCode){var t={boxCode:e.BoxCode};Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.b)(t).then(function(e){})}})},changeimgs:function(e,t){for(var i=this.details.data1,a=0;a<i.length;a++)i[a].ID==t.ID&&(i[a].uploadimg=e)},chaixiang:function(e,t){var i=this;Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.P)().then(function(a){console.log(a);var r={AVGWeight:t.AVGWeight,PID:t.ID,iscx:!1,ID:"CX"+e+(new Date).getTime(),NoticeID:t.NoticeID,Product:{PartNumber:t.Product.PartNumber,Manufacturer:t.Product.Manufacturer,PackageCase:t.Product.PackageCase,Packaging:t.Product.Packaging},WaybillID:t.WaybillID,InputID:t.InputID,DateCode:t.DateCode,Quantity:t.Quantity,ArrivedQuantity:t.ArrivedQuantity,LeftQuantity:t.LeftQuantity,CurrentQuantity:null,Conditions:t.Conditions,Source:t.Source,Weight:null,NetWeight:t.NetWeight,Volume:t.Volume,BoxCode:null,ShelveID:t.ShelveID,Type:t.Type,origintext:t.origintext,originID:t.originID,originDes:t.originDes,origin:t.origin,Summary:t.Summary,SortingID:a,Files:[],Sortings:[],_disabled:!1,TinyOrderID:t.TinyOrderID};i.ProductList.splice(e+1,0,r),i.$refs.selection.selectAll(!1),i.SelectRow=[],i.ProductList[e].CurrentQuantity=null,i.ProductList[e].Weight=null})},removechaixiang:function(e){this.ProductList.splice(e,1)},CgDetail_new:function(e){var t=this;if(clearInterval(this.timerwaybill),this.timerwaybill=null,void 0!=e){Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.m)(e).then(function(e){t.Getclientdata(e.Waybill.EnterCode),t.orderID=e.Waybill.OrderID,t.waybillinfo=e.Waybill,t.ProductList=e.Notice,t.loading=!1,120==e.Waybill.ExcuteStatus?t.isdisabled=!0:1==t.waybillinfo.Type&&100==t.waybillinfo.LoadingExcuteStatus?t.isdisabled=!0:t.isdisabled=!1,t.Carriers(e.Waybill.Type),1==t.waybillinfo.Type&&"Personal"==e.Waybill.CarrierID?t.IsPersonal=!0:(t.GetDriversCars(e.Waybill.CarrierID),t.IsPersonal=!1),t.CarArrName=e.Waybill.CarNumber1,t.DriversName=e.Waybill.Driver,t.getwaybillstatus(e.Waybill.ID)})}},changewaybillType:function(e){this.Carriers(e)},fromphotos:function(e){if("Waybill"==e){var t={SessionID:this.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID}};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.c)(t)}else{t={SessionID:e.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:e.NoticeID,InputID:e.InputID}};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.c)(t)}},changed:function(e){this.testfunction(e)},testfunction:function(e){var t=e[0],i={CustomName:t.FileName,ID:t.FileID,Url:t.Url,Type:8e3};if(t.SessionID==this.waybillinfo.ID)this.waybillinfo.Files.push(i);else for(var a=0;a<this.ProductList.length;a++)this.ProductList[a].ID==t.SessionID&&this.ProductList[a].Files.push(i)},SeletUpload:function(e){if("Waybill"==e){var t={SessionID:this.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID}};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.o)(t)}else{t={SessionID:e.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:e.NoticeID,InputID:e.InputID}};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.o)(t)}},Carriers:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.g)(e,this.WarehouseID,100).then(function(e){t.CarrierList=e})},WayParterdata:function(){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api__.G)().then(function(t){e.Conveyingplace=t.obj})},clickClient:function(e,t,i){this.setClientCode=!0,this.chengevalue.value=e,this.chengevalue.type=t,this.Conveyingplace2=this.Conveyingplace,this.ClientCode=e},changClientCode:function(e){this.chengevalue.inputval=e},primaryClientCode:function(){if("ClientCode"==this.chengevalue.type)this.waybillinfo.ConsignorPlace=this.chengevalue.inputval.value,this.waybillinfo.ConsignorPlaceText=this.chengevalue.inputval.label;else{this.chengevalue.type.originDes=this.chengevalue.inputval.label;for(var e=0,t=this.ProductList.length;e<t;e++)this.chengevalue.type.SortingID==this.ProductList[e].SortingID&&(this.ProductList[e].origin=this.chengevalue.inputval.value,this.ProductList[e].origintext=this.chengevalue.inputval.label),this.ProductList[e]._checked=!1;if(this.SelectRow.length>0)for(var i=0,a=this.SelectRow.length;i<a;i++)for(e=0,t=this.ProductList.length;e<t;e++)this.SelectRow[i].SortingID==this.ProductList[e].SortingID&&(this.ProductList[e]._checked=!0),this.chengevalue.type.SortingID==this.SelectRow[i].SortingID&&(this.SelectRow[i].origin=this.chengevalue.inputval.value,this.SelectRow[i].origintext=this.chengevalue.inputval.label)}this.setClientCode=!1},clickshowchangebox:function(){if(0==this.SelectRow.length)this.$Message.error("至少选择一条产品");else for(var e=0;e<this.SelectRow.length;e++){if(null==this.SelectRow[e].CurrentQuantity||null==this.SelectRow[e].Product.Manufacturer){this.$Message.error("品牌，本次到货不能为空");break}e==this.SelectRow.length-1&&(1==this.waybillinfo.Type?""==this.waybillinfo.CarrierID?this.$Message.error("请先选择承运商"):""==this.waybillinfo.Driver?this.$Message.error("请选择司机"):""==this.waybillinfo.CarNumber1?this.$Message.error("请选择车牌号"):(this.Warehousingstatus=115,115==this.Warehousingstatus&&this.finish_btn2()):(this.finish_btn2(),this.Warehousingstatus=115))}},showboxmax:function(){for(var e=this.SelectRow[0].TinyOrderID,t=0;t<this.SelectRow.length;t++){if(this.SelectRow[t].TinyOrderID!=e){this.$Message.error("小订单号不一致，请选择小订单号一致的进行操作");break}if(t==this.SelectRow.length-1){for(var i=[],a=[],r=(t=0,this.SelectRow.length);t<r;t++)null==this.SelectRow[t].Weight?i.push(this.SelectRow[t]):a.push(this.SelectRow[t]);if(0!=i.length&&0!=a.length)this.$Message.error("勾选型号重量有误");else{i.length>0?this.issharevalue=!0:this.issharevalue=!1,this.sharevalue=null,this.newboxcodeback=null,this.newboxcode=null,this.boxcodetype="1",this.showchangebox=!0;var l=new Date,o=l.getFullYear(),s=l.getMonth()+1,n=l.getDate();this.saleDate=o+"/"+s+"/"+n}}}},changeshowbox:function(e){var t=this;1==e&&this.SelectRow.forEach(function(e){t.AVGWeightsum+=e.AVGWeight*e.CurrentQuantity})},BoxcodeDeletefun:function(){if(null!=this.newboxcodeback){var e={boxCode:this.newboxcodeback};Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.b)(e).then(function(e){})}},oldBoxDelete:function(e){var t={boxCode:e};Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.b)(t).then(function(e){})},ok_changebox:function(){if(null==this.newboxcode&&""==this.newboxcode)this.$Message.error("请输入必填项"),this.showchangebox=!0;else if(1==this.issharevalue&&null==this.sharevalue)this.$Message.error("请输入必填项"),this.showchangebox=!0;else{1!=this.issharevalue||0!=/^\d+(\.\d{0,2})?$/.test(this.sharevalue)&&0!=this.sharevalue?0==this.isclick&&(this.finish_btn(),this.showchangebox=!1):this.$Message.error("请输入数字,小数点保留两位，且不等于零")}},detailelist:function(){if(this.printlist.length>0){var e=Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.f)()["清单打印"],t=-1!=e.Url.indexOf("http");e.Url=1==t?e.Url:this.printurl+e.Url;var i={setting:e,data:[{waybill:this.waybillinfo,listdata:this.printlist}]};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.q)(i)}},Labelprint:function(){var e=this.SelectRow,t=[];if(e.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var i=0;i<e.length;i++){e[i].Inputs,e[i].StandardProducts;var a={Quantity:e[i].CurrentQuantity,inputsID:e[i].SortingID,Catalog:"",PartNumber:e[i].Product.PartNumber,Manufacturer:e[i].Product.Manufacturer,Packing:e[i].Product.Packing,PackageCase:e[i].Product.PackageCase,origin:e[i].origintext,SourceDes:this.waybillinfo.SourceDes};t.push(a)}var r=Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.f)()["产品标签"],l=-1!=r.Url.indexOf("http");r.Url=1==l?r.Url:this.printurl+r.Url;var o={setting:r,data:t};Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.q)(o)}},finish_btn:function(){1==this.waybillinfo.Type?""==this.waybillinfo.CarrierID?this.$Message.error("请先选择承运商"):""==this.waybillinfo.Driver?this.$Message.error("请选择司机"):""==this.waybillinfo.CarNumber1?this.$Message.error("请选择车牌号"):this.WarehousingMsg=!0:this.WarehousingMsg=!0},finish_btn2:function finish_btn2(){if(this.SelectRow.length<=0)this.$Message.error("请选择要操作的产品项");else e:for(var k=0,len=this.SelectRow.length;k<len;k++){if(1==this.SelectRow[k].isenter){this.$Message.error("无通知产品请按照异常到货处理"),this.WarehousingMsg=!1;break}if(""==this.SelectRow[k].originID){this.$Message.error("请选择原产地"),this.WarehousingMsg=!1;break}if(null==this.SelectRow[k].CurrentQuantity){if(null==this.SelectRow[k].Weight){this.$Message.error("请输入必填项目"),this.WarehousingMsg=!1;break}this.$Message.error("请输入必填项目"),this.WarehousingMsg=!1;break}var sum=function sum(arr){return eval(arr.join("+"))},SelectRowK=k,arr=this.SelectRow;this.Nomatching=[];for(var Nomatching=[],map={},dest=[],i=0;i<arr.length;i++){var ai=arr[i];if(map[ai.NoticeID])for(var j=0;j<dest.length;j++){var dj=dest[j];if(dj.NoticeID==ai.NoticeID){var arrs={Manufacturer:ai.Product.Manufacturer,origin:ai.origin,PID:ai.PID};dj.arrdata.push(arrs),dj.data.push(Number(ai.CurrentQuantity));break}}else{var arrs={Manufacturer:ai.Product.Manufacturer,origin:ai.origin,PID:ai.PID};dest.push({ID:ai.ID,Manufacturer:ai.Product.Manufacturer,origin:ai.origin,name:ai.Product.PartNumber,Quantity:ai.LeftQuantity,NoticeID:ai.NoticeID,data:[Number(ai.CurrentQuantity)],arrdata:[arrs]}),map[ai.NoticeID]=ai.NoticeID}}var that=this;console.log(dest);for(var i=0;i<dest.length;i++){var item=dest[i],total=sum(item.data);if(""==item.Quantity){this.$Message.error({content:"无通知产品请按照异常到货处理",duration:3}),that.WarehousingMsg=!1;break e}if(item.Quantity<total){this.$Message.error({content:"本次到货数量不能大于剩余数量,请按照异常情况处理",duration:3}),that.WarehousingMsg=!1;break e}if(0==item.Quantity){this.$Message.error("剩余数量为0，不需要提交"),that.WarehousingMsg=!1;break e}if(item.Quantity>total||item.Quantity<total){Nomatching.push(item.name),that.Nomatching=Nomatching;var info=item.arrdata;if(info.length>1)for(var i=0;i<info.length-1;i++)for(var j=i+1;j<info.length;j++){if(info[i].Manufacturer===info[j].Manufacturer&&info[i].origin===info[j].origin){this.$Message.error({content:"品牌，产地一致，不允许进行拆项处理",duration:3});break e}SelectRowK==this.SelectRow.length-1&&this.showboxmax()}else SelectRowK==this.SelectRow.length-1&&this.showboxmax()}else if(item.Quantity==total){var info=item.arrdata;if(info.length>1)for(var i=0;i<info.length-1;i++)for(var j=i+1;j<info.length;j++){if(info[i].Manufacturer===info[j].Manufacturer&&info[i].origin===info[j].origin){this.$Message.error({content:"品牌，产地一致，不允许进行拆项处理",duration:3});break e}SelectRowK==this.SelectRow.length-1&&this.showboxmax()}else SelectRowK==this.SelectRow.length-1&&this.showboxmax()}}}},ok_Warehousing:function(e,t){1==this.issharevalue&&this.ok_share();this.WarehousingMsg=!1,this.isdisabled=!0;for(var i=null,a=[],r=null,l=0,o=(i="enter"==t?this.NullNotice:this.SelectRow).length;l<o;l++)if(""!=i[l].Quantity||null!=i[l].Quantity){r="enter"==t?i[l].BoxCode:this.newboxcodeback;var s={NoticeID:i[l].NoticeID,SortingID:i[l].SortingID,StorageID:"",InputID:i[l].InputID,BoxCode:r,Quantity:i[l].CurrentQuantity,Weight:i[l].Weight,NetWeight:i[l].NetWeight,Volume:i[l].Volume,ShelveID:i[l].ShelveID,DateCode:i[l].DateCode,Origin:i[l].origin,Summary:i[l].Summary,Product:{PartNumber:i[l].Product.PartNumber,Manufacturer:i[l].Product.Manufacturer,PackageCase:i[l].Product.PackageCase,Packaging:i[l].Product.Packaging},Files:i[l].Files};a.push(s)}var n=null;n=""==this.waybillinfo.Code||null==this.waybillinfo.Code?null:this.waybillinfo.Code;var c={Waybill:{ID:this.waybillinfo.ID,EnterCode:this.waybillinfo.EnterCode,ExcuteStatus:this.Warehousingstatus,Type:this.waybillinfo.Type,Source:this.waybillinfo.Source,OrderID:this.waybillinfo.OrderID,NoticeType:this.waybillinfo.NoticeType,CarrierID:this.waybillinfo.CarrierID,ConsignorID:this.waybillinfo.ConsignorID,ConsignorPlace:this.waybillinfo.ConsignorPlace,TransferID:this.waybillinfo.TransferID,Summary:null,Driver:this.waybillinfo.Driver,CarNumber1:this.waybillinfo.CarNumber1,Files:this.waybillinfo.Files,LoadingExcuteStatus:this.waybillinfo.LoadingExcuteStatus,Code:n,Supplier:this.waybillinfo.Supplier},Sortings:a,AdminID:sessionStorage.getItem("userID")};this.setWarehousing(c)},cancel_Warehousing:function(){this.WarehousingMsg=!1,this.oldboxcode=null,this.BoxcodeDeletefun()},setWarehousing:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__._13)(e).then(function(e){if(t.Warehousingstatus=null,1==e.Success){t.$Message.success("入库完成"),1==t.isAbnormal&&(t.isAbnormal=!1,t.Summary="");var i=t;i.loading=!0,setTimeout(function(){i.CgDetail_new(i.$route.params.wayBillID),i.$refs.selection.selectAll(!1),"1"==i.$refs.History.Nameitem?i.$refs.History.CgOrderInputReportGroup(!1):i.$refs.History.CgOrderInputReportGroup(!0)},300)}else t.$Message.error({content:e.Data,duration:5}),t.isdisabled=!1})},testrouter:function(){this.$store.dispatch("setshowdetail",!1),this.$router.go(-1)},getCookie:function(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var a=t[i].split("=");if(e==a[0])return a[1]}return""},torouters:function(){this.$store.dispatch("setshowdetail",!1),this.$router.push({path:"/Warehousing"})},isAbnormalclick:function(){if(this.SelectRow.length<=0)this.$Message.error("请选择到货异常的产品");else for(var e=0,t=this.SelectRow.length;e<t;e++){if(null==this.SelectRow[e].Summary){this.$Message.error("请输入异常原因");break}if(null==this.SelectRow[e].CurrentQuantity||null==this.SelectRow[e].Product.Manufacturer){this.$Message.error("品牌，本次到货不能为空"),this.Warehousingstatus=null;break}e==this.SelectRow.length-1&&(this.showboxmax(),this.Warehousingstatus=130)}},Abnormal_btn:function(){void 0==this.Summary||""==this.Summary?(this.isAbnormal=!0,this.$Message.error("请输入异常原因")):this.ok_Warehousing(130)},closeerror:function(){this.Summary="",this.isAbnormal=!1},changeerror:function(e){1==e?this.isAbnormal=!0:(this.isAbnormal=!1,this.Summary="")},showhistory:function(e){this.historydata=!0,this.reFresh=!0},changehistore:function(e){0==e&&(this.reFresh=!1)},TakeGoods:function(){var e=this,t=sessionStorage.getItem("userID");Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__._4)(this.waybillinfo.ID,t).then(function(t){1==t.Success?(e.$Message.success("提货锁定成功，请去提货"),e.waybillinfo.LoadingExcuteStatus=105,e.isdisabled=!1):(e.$Message.error("提货锁定失败"),e.isdisabled=!0)})},changeabnormal_enter:function(e){var t=this;0==e||(this.Storages=[],Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.P)().then(function(e){var i={iscx:!1,isenter:!0,_disabled:!1,ID:"LR1"+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},Conditions:{DevanningCheck:!1,Weigh:!1,CheckNumber:!1,OnlineDetection:!1,AttachLabel:!1,PaintLabel:!1,Repacking:!1,IsCCC:!1,IsCIQ:!1,IsEmbargo:!1,IsHighPrice:!1,IsDeclared:!1},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:e,Files:[],boxdate:null};t.Storages.push(i),t.timer=(new Date).getTime(),t.$nextTick(function(){})}))},ok_abnormal:function(){this.NullNotice=[];for(var e=0,t=this.Storages.length;e<t;e++){if(null==this.Storages[e].CurrentQuantity||null==this.Storages[e].Product.PartNumber||null==this.Storages[e].origin||null==this.Storages[e].Summary||null==this.Storages[e].BoxCode||null==this.Storages[e].Weight||null==this.Storages[e].Product.Manufacturer){this.$refs.modal.visible=!0,this.abnormal_enter=!0,this.NullNotice=[],this.$Message.error("请输入必填项目");break}this.NullNotice.push(this.Storages[e]),e==this.Storages.length-1&&(this.Warehousingstatus=130,this.ok_Warehousing(130,"enter")),this.modal=!1}},PrintBoxcode:function(){var e={Source:this.waybillinfo.Source,waybillID:this.waybillinfo.ID};this.showprintboxcode=!0,this.$refs.printbox.getparents(e),this.$refs.printbox.GetPackageType()},fileprint:function(e){var t=Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.f)()["文档打印"];t.Url=e;var i=t;Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.a)(i)},clackFilesProcess:function(e){var t={Url:e};console.log(t),Object(__WEBPACK_IMPORTED_MODULE_11__js_browser_js__.b)(t)},ok_share:function(){for(var e=null,t=0,i=this.SelectRow.length;t<i;t++)null!=this.SelectRow[t].CurrentQuantity&&""!=this.SelectRow[t].CurrentQuantity&&(e+=Number(this.SelectRow[t].CurrentQuantity));if(null!=e)for(t=0,i=this.SelectRow.length;t<i;t++)null!=this.SelectRow[t].CurrentQuantity&&""!=this.SelectRow[t].CurrentQuantity&&(this.SelectRow[t].Weight=(this.SelectRow[t].CurrentQuantity*(this.sharevalue/e)).toFixed(2))},changeshare:function(e){0==e&&(this.sharevalue=null)},Getclientdata:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.U)(e).then(function(e){console.log(e),t.clientGrade=e.obj.Grade})},ok_addCarrier:function(e){1==e?this.$refs.addCarrier.sumbit_btn():2==e?(this.$refs.addCarrier.delitem(),this.showaddCarrier=!1):3==e?this.$refs.AddDriver.sumbit_btn():4==e?(this.$refs.AddDriver.delitem(),this.showaddDriver=!1):5==e?this.$refs.addcar.sumbit_btn():6==e&&(this.$refs.addcar.delitem(),this.showaddCar=!1)},setdisabled:function(e){this.adddisabled=e},fatherMethodCarrier:function(e){if(console.log(e),this.adddisabled=!1,"false"!=e){var t=sessionStorage.getItem("UserWareHouse"),i={ID:e.Carrier.ID,Name:e.Carrier.Name};this.CarrierList.push(i),this.Carriers(this.waybillinfo.Type,t),this.waybillinfo.CarrierID=e.Carrier.ID,this.waybillinfo.CarrierName=e.Carrier.Name;var a={Name:e.Driverinfo.Name,ID:""};this.DriversArr.push(a),this.waybillinfo.Driver=e.Driverinfo.Name;a={value:e.Carinfo.CarNumber1};this.CarArr.push(a),this.waybillinfo.CarNumber1=e.Carinfo.CarNumber1,this.GetDriversCars(this.waybillinfo.CarrierID),this.showaddCarrier=!1,this.$refs.addCarrier.delitem()}},ok_addDriver:function(e){if(this.adddisabled=!1,"false"!=e){var t={Name:e,ID:""};this.DriversArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.Driver=e,this.showaddDriver=!1,this.$refs.AddDriver.delitem()}},ok_addCar:function(e){if(this.adddisabled=!1,"false"!=e){var t={value:e};this.CarArr.push(t),this.GetDriversCars(this.waybillinfo.CarrierID),this.waybillinfo.CarNumber1=e,this.showaddCar=!1,this.$refs.AddDriver.delitem()}},uploadeCgDetail_new:function(){this.loading=!0,this.CgDetail_new(this.$route.params.wayBillID)},TestAVGWeightsum:function(){if(null!=this.sharevalue){0==/^\d+(\.\d{0,5})?$/.test(this.sharevalue)||0==this.sharevalue?(this.$Message.error("请输入数字,小数点保留五位，且不等于零"),this.sharevalue=null):(this.sharevalue<.5*this.AVGWeightsum||this.sharevalue>1.5*this.AVGWeightsum)&&this.$Modal.warning({title:"超过浮动50%！"})}},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()},getwaybillstatus:function(e){var t={WaybillIDs:[e]},i=this;this.timerwaybill=setInterval(function(){setTimeout(function(){Object(__WEBPACK_IMPORTED_MODULE_10__api_CgApi__.T)(t).then(function(e){0==e.Data[0].Operated?(i.isdisabled=!0,i.Operateddisable=!1):(i.isdisabled=!1,i.Operateddisable=!0)})},0)},2e3)},changeData:function(e){this.saleDate=e,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)}},beforeDestroy:function(){clearInterval(this.timerwaybill),this.timerwaybill=null,console.log("清除定时器"+this.timerwaybill)}}}});
//# sourceMappingURL=24.281e348eabb9287edb4d.js.map