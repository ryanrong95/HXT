webpackJsonp([23],{KoTp:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__=__webpack_require__("bOdI"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2__Pages_Cgenter_NotingEnter__=__webpack_require__("D7ok"),__WEBPACK_IMPORTED_MODULE_3__CgHistory__=__webpack_require__("rrli"),__WEBPACK_IMPORTED_MODULE_4__Subassembly_Add_Carrier__=__webpack_require__("uWQ3"),__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Driver__=__webpack_require__("CZn4"),__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Car__=__webpack_require__("MgEx"),__WEBPACK_IMPORTED_MODULE_7__Common_logged__=__webpack_require__("93yw"),__WEBPACK_IMPORTED_MODULE_8__api__=__webpack_require__("gyMJ"),__WEBPACK_IMPORTED_MODULE_9__api_CgApi__=__webpack_require__("dciI"),__WEBPACK_IMPORTED_MODULE_10__js_browser_js__=__webpack_require__("3PyT"),__WEBPACK_IMPORTED_MODULE_11_vue__=__webpack_require__("7+uW"),__WEBPACK_IMPORTED_MODULE_12_moment__=__webpack_require__("PJh5"),__WEBPACK_IMPORTED_MODULE_12_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_moment__),__WEBPACK_IMPORTED_MODULE_13_qs__=__webpack_require__("mw3O"),__WEBPACK_IMPORTED_MODULE_13_qs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_qs__),Base64=__webpack_require__("xrTZ").Base64,product_url=__webpack_require__("FHte"),lodash=__webpack_require__("M4fF");__webpack_exports__.a={name:"RoutineEnter",components:{"Noting-Enter":__WEBPACK_IMPORTED_MODULE_2__Pages_Cgenter_NotingEnter__.default,"History-Mount":__WEBPACK_IMPORTED_MODULE_3__CgHistory__.a,"Add-Carrier":__WEBPACK_IMPORTED_MODULE_4__Subassembly_Add_Carrier__.default,"Add-Driver":__WEBPACK_IMPORTED_MODULE_5__Subassembly_Add_Driver__.default,"Add-Car":__WEBPACK_IMPORTED_MODULE_6__Subassembly_Add_Car__.default,"logg-ed":__WEBPACK_IMPORTED_MODULE_7__Common_logged__.default},props:{},data:function(){var e=this;return{loggdetime:"",showlogged:!1,adddisabled:!1,showaddDriver:!1,addDriverName:null,showaddCar:!1,addCarName:null,showaddCarrier:!1,IsPersonal:!1,clientGrade:null,sharevalue:null,showshare:!1,TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],boxingarr:[],isdisabled:!1,timer:"",abnormal_enter:!1,SortingID:"",routername:"",Conditionstype:!0,printurl:product_url.pfwms,loading:!0,printlist:[],Conveyingplace:[],Conveyingplace2:[],chengevalue:{inputval:"",value:"",type:""},setClientCode:!1,ClientCode:"",model11:"",sethousbox:!1,housenumber:"",Storehouselist:[],detail_ID:"",searchkey:"",showphoto2:!1,time:"",WarehousingMsg:!1,Nomatching:[],details:{waybillinfo:{},wayBillID:"",total:0,pageIndex:1,pageSize:1e4,WaybillNo:"90416165067",Conveyorsite:"",columns1:[{type:"selection",width:50,align:"center"},{title:"# ",slot:"indexs",align:"left",width:30},{title:"型号",key:"PartNumber",render:function(e,t){return e("span",{},t.row.Product.PartNumber)}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"品牌")])},key:"Manufacturer",render:function(t,i){var a=e;return t("Input",{props:{value:a.trim(i.row.Product.Manufacturer)},on:{"on-change":function(e){var t="";t=""!=e.target.value?a.trim(e.target.value):e.target.value,i.row.Product.Manufacturer=t,a.details.detailitem[i.index]=i.row,a.clicktest(i.row);for(var l=0;l<a.details.detailitem.length;l++)a.details.detailitem[l].PID==i.row.ID&&(a.details.detailitem[l].Product.Manufacturer=e.target.value)},"on-blur":function(e){if(""!=e.target.value?(i.row.Product.Manufacturer=e.target.value,a.details.detailitem[i.index]=i.row):(e.target.value=null,i.row.Product.Manufacturer=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0)for(var t=0,l=a.SelectRow.length;t<l;t++)i.row.SortingID==a.SelectRow[t].SortingID&&(a.SelectRow[t]=i.row)}}})}},{title:"应到",slot:"Arrival",align:"center",width:60},{title:"已到",slot:"Already",align:"center",width:60},{title:"剩余",slot:"Surplus",align:"center",width:60},{title:"批号",key:"DateCode",align:"center",render:function(t,i){var a=e;return t("Input",{props:{value:a.trim(i.row.DateCode)},on:{"on-change":function(e){var t="";if(t=""!=e.target.value||null!=e.target.value?a.trim(e.target.value):e.target.value,i.row.DateCode=t,a.details.detailitem[i.index]=i.row,a.clicktest(i.row),a.SelectRow.length>0)for(var l=0,s=a.SelectRow.length;l<s;l++)a.SelectRow[l].SortingID==i.row.SortingID&&(a.SelectRow[l]=i.row)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"本次到货")])},key:"TruetoQuantity",align:"center",render:function(t,i){var a=e;return t("Input",{props:{value:Number(i.row.CurrentQuantity)<0?0:i.row.CurrentQuantity},on:{"on-change":function(e){1==/^[0-9]\d*$/.test(e.target.value)?(i.row.CurrentQuantity=e.target.value,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):e.target.value<=0?(a.$Message.error("数量不能为0"),e.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row):(a.$Message.error("只能输入数量"),e.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row);for(var t=0;t<a.SelectRow.length;t++)i.row.SortingID==a.SelectRow[t].SortingID&&(a.SelectRow[t].CurrentQuantity=e.target.value)},"on-blur":function(){1==/^[1-9]\d*$/.test(event.target.value)?(i.row.CurrentQuantity=event.target.value,a.details.detailitem[i.index]=i.row):(a.$Message.error("请输入数量"),event.target.value=null,i.row.CurrentQuantity=null,a.details.detailitem[i.index]=i.row);for(var e=0;e<a.SelectRow.length;e++)i.row.SortingID==a.SelectRow[e].SortingID&&(a.SelectRow[e].CurrentQuantity=event.target.value)}}})}},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"原产地")])},slot:"OriginDes",align:"left"},{renderHeader:function(e,t){return e("div",[e("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),e("span",{},"入库库位")])},slot:"ShelveID",align:"left",width:170,render:function(t,i){var a=e;return t("Select",{props:{value:i.row.ShelveID,disabled:0!=i.row._disabled,transfer:!0,filterable:!0},on:{"on-change":function(e){i.row.ShelveID=e,a.details.detailitem[i.index]=i.row,a.setselect(i.row)}}},e.Storehouselist.map(function(e){return t("Option",{props:{value:e.ShelveID,label:e.ShelveID}})}))}},{title:"体积(cm³)",key:"Volume",align:"center",render:function(t,i){var a=e;return t("Input",{props:{value:i.row.Volume},on:{"on-change":function(e){1==/^\d+(\.\d{0,2})?$/.test(e.target.value)?(i.row.Volume=e.target.value,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Volume=null,e.target.value=null,a.details.detailitem[i.index]=i.row)},"on-blur":function(){if(1==/^\d+(\.\d{0,2})?$/.test(event.target.value)?(i.row.Volume=event.target.value,a.details.detailitem[i.index]=i.row):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Volume=null,event.target.value=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0)for(var e=0,t=a.SelectRow.length;e<t;e++)a.SelectRow[e].SortingID==i.row.SortingID&&(a.SelectRow[e]=i.row)}}})}},{title:"毛重(Kg)",key:"Weight",align:"center",render:function(t,i){var a=e;return t("Input",{props:{value:i.row.Weight,autofocus:!0},on:{"on-change":function(e){},"on-blur":function(e){var t=a.trim(e.target.value);if(""!=t&&(1==/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(t)?(i.row.Weight=t,a.details.detailitem[i.index]=i.row,a.clicktest(i.row)):(a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Weight=null,e.target.value=null,a.details.detailitem[i.index]=i.row),a.SelectRow.length>0))for(var l=0,s=a.SelectRow.length;l<s;l++)a.SelectRow[l].SortingID==i.row.SortingID&&(a.SelectRow[l]=i.row)},"on-enter":function(t){var l=a.trim(t.target.value);if(1==/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(l)){i.row.Weight=l,a.details.detailitem[i.index]=i.row;var s={Quantity:i.row.CurrentQuantity,inputsID:i.row.SortingID,Catalog:"",PartNumber:i.row.Product.PartNumber,Manufacturer:i.row.Product.Manufacturer,Packing:i.row.Product.Packing,PackageCase:i.row.Product.PackageCase,origin:i.row.origintext,SourceDes:e.details.waybillinfo.SourceDes},r=[];r.push(s);var n=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["产品标签"],o=-1!=n.Url.indexOf("http");n.Url=1==o?n.Url:e.printurl+n.Url;var _={setting:n,data:r};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(_)}else a.$Message.error("只能输入数字,包括两位数的小数点"),i.row.Weight="",t.target.value="",a.details.detailitem[i.index]=i.row}}})}},{title:"图片",slot:"imglist",align:"center"},{title:"异常原因",key:"imglist",align:"center",render:function(t,i){var a=e;return t("Input",{props:{value:i.row.Summary},on:{"on-change":function(e){var t="";t=""!=e.target.value?a.trim(e.target.value):e.target.value,i.row.Summary=t,a.details.detailitem[i.index]=i.row},"on-blur":function(e){if(a.SelectRow.length>0)for(var t=0,l=a.SelectRow.length;t<l;t++)a.SelectRow[t].SortingID==i.row.SortingID&&(a.SelectRow[t]=i.row)}}})}},{title:"操作",slot:"operation",align:"center",width:220}],detailitem:[],fathertype:""},uploadList:[],files:"",SelectRow:[],isAbnormal:!1,remarks:"",Reason:"外观损坏",Summary:"",historydata:!1,reFresh:!1,historydetail:{times:"",waybillLIst:[]},company:"",CarrierList:[],CarArr:[],CarArrName:"",DriversArr:[],DriversName:"",Storages:[],Sortings:[],NullNotice:[]}},filters:{showDate:function(e){if(""!=e&&e){var t=e.split("(")[1].split(")")[0];return __WEBPACK_IMPORTED_MODULE_12_moment___default()(+t).format("YYYY-MM-DD")}},changenumber:function(e){if(""!=e){var t=Number(e);return console.log(t),t}}},computed:{getarrs:function(){return this.Nomatching},Budgetdetail:function(){return this.$store.state.common.Budgetdetail}},watch:{getuplode:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){""!=getuplode&&alert(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(getuplode))})},mounted:function(){},created:function(){window.PhotoUploaded=this.changed,this.routername=this.$route.name},methods:{clicktest:lodash.throttle(function(e){for(var t=0,i=this.SelectRow.length;t<i;t++)e.SortingID==this.SelectRow[t].SortingID&&(this.SelectRow[t]=e)},1e3),setselect:function(e){for(var t=0,i=this.SelectRow.length;t<i;t++)e.SortingID==this.SelectRow[t].SortingID&&(this.SelectRow[t]=e)},tabledblclick:function(e,t){console.log(t)},handleCreate1:function(e){this.CarrierList.push({ID:e,Name:e})},handleCreate2:function(e){this.DriversArr.push({ID:e,Name:e})},handleCreate3:function(e){this.CarArr.push({ID:e,Name:e})},trim:function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},ok:function(){this.$Message.info("Clicked ok"),this.showphoto2=!1},cancel:function(){this.showphoto2=!1,this.setClientCode=!1,this.abnormal_enter=!1,this.showshare=!1,this.showaddCarrier=!1,this.showaddDriver=!1,this.showaddCar=!1,this.sethousbox=!1},handleSelectRow:function(e){this.SelectRow=e},search_pro:function(){var e=this;this.loading=!0,Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._22)(this.details.waybillinfo.ID,this.searchkey).then(function(t){e.details.detailitem=t.Notice,e.loading=!1})},Abnormal:function(){this.SelectRow.length<=0||this.SelectRow.length>1?this.$Message.error("请选择到货异常的产品，有且只有一条"):(console.log(this.SelectRow[0]),null==this.SelectRow[0].CurrentQuantity||""==this.SelectRow[0].CurrentQuantity?this.$Message.error("请输入大于零的到货数量"):null==this.SelectRow[0].ShelveID?this.$Message.error("请选择入库库位"):this.isAbnormal=!0)},Abnormal_btn:function(){void 0==this.Summary||""==this.Summary?(this.isAbnormal=!0,this.$Message.error("请输入异常原因")):(this.isAbnormal=!1,this.ok_Warehousing(130))},closeerror:function(){this.isAbnormal=!1,this.Summary=""},finish_btn1:function(){1==this.details.waybillinfo.Type?""==this.details.waybillinfo.CarrierID?this.$Message.error("请先选择承运商"):""==this.details.waybillinfo.Driver?this.$Message.error("请选择司机"):""==this.details.waybillinfo.CarNumber1?this.$Message.error("请选择车牌号"):this.finish_btn():this.finish_btn()},finish_btn:function finish_btn(){if(this.SelectRow.length<=0)this.$Message.error("请选择要操作的产品项");else e:for(var k=0,len=this.SelectRow.length;k<len;k++){if(0==this.SelectRow[k].LeftQuantity||""==this.SelectRow[k].LeftQuantity){this.$Message.error("无通知产品请按照异常到货处理"),this.WarehousingMsg=!1;break}if(""==this.SelectRow[k].originID){this.$Message.error("请选择原产地"),this.WarehousingMsg=!1;break}if(null==this.SelectRow[k].ShelveID||""==this.SelectRow[k].ShelveID){this.$Message.error("请选择入库库位"),this.WarehousingMsg=!1;break}if(null==this.SelectRow[k].Product.Manufacturer)this.$Message.error("品牌不能为空"),this.WarehousingMsg=!1;else{if(""==this.SelectRow[k].CurrentQuantity||null==this.SelectRow[k].CurrentQuantity||null==this.SelectRow[k].ShelveID){this.$Message.error("请输入必填"),this.WarehousingMsg=!1;break}for(var sum=function sum(arr){return eval(arr.join("+"))},SelectRowK=k,arr=this.SelectRow,Nomatching=[],map={},dest=[],i=0;i<arr.length;i++){var ai=arr[i];if(map[ai.NoticeID])for(var j=0;j<dest.length;j++){var dj=dest[j];if(dj.NoticeID==ai.NoticeID){dj.data.push(Number(ai.CurrentQuantity));break}}else dest.push({name:ai.Product.PartNumber,Quantity:ai.LeftQuantity,NoticeID:ai.NoticeID,data:[Number(ai.CurrentQuantity)]}),map[ai.NoticeID]=ai.NoticeID}for(var that=this,i=0;i<dest.length;i++){var item=dest[i],total=sum(item.data);if(console.log(total),""==item.Quantity||null==item.Quantity){this.$Message.error("无通知产品请按照异常到货处理"),that.WarehousingMsg=!1;break e}if(item.Quantity<total){this.$Message.error("本次到货数量不能大于剩余数量,请按照异常到货进行处理"),that.WarehousingMsg=!1;break e}if(0==item.Quantity){this.$Message.error("剩余数量为0，不需要提交"),that.WarehousingMsg=!1;break e}item.Quantity>total?(Nomatching.push(item.name),that.Nomatching=Nomatching,SelectRowK==this.SelectRow.length-1&&(that.WarehousingMsg=!0)):item.Quantity==total&&SelectRowK==this.SelectRow.length-1&&(that.WarehousingMsg=!0)}}}},setWarehousing:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._13)(e).then(function(e){if(console.log(e),1==e.Success)if(t.loading=!0,40==t.details.waybillinfo.Source&&""!=e.Data){t.$Message.success("入库完成，正在跳转至出库分拣页面");var i=t;setTimeout(function(){i.testbtn(e.Data)},1e3)}else{t.$Message.success("入库完成"),1==t.isAbnormal&&(t.isAbnormal=!1,t.Summary="");i=t;setTimeout(function(){i.CgDetail_new(i.details.waybillinfo.ID),i.$refs.selection.selectAll(!1),i.SelectRow=[]},300)}else t.$Message.error("入库操作失败,请从新操作"),t.isdisabled=!1})},getCookie:function(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var a=t[i].split("=");if(e==a[0])return a[1]}return""},ok_Warehousing:function(e,t){this.isdisabled=!0,this.WarehousingMsg=!1;for(var i="",a=null,l=[],s=0,r=(a="enter"==t?this.NullNotice:this.SelectRow).length;s<r;s++)if(""!=a[s].Quantity||null!=a[s].Quantity){i=130==e&&"enter"!=t?this.Summary:a[s].Summary;var n={NoticeID:a[s].NoticeID,SortingID:a[s].SortingID,StorageID:"",InputID:a[s].InputID,BoxCode:a[s].BoxCode,Quantity:a[s].CurrentQuantity,Weight:a[s].Weight,NetWeight:a[s].NetWeight,Volume:a[s].Volume,ShelveID:a[s].ShelveID,DateCode:a[s].DateCode,Origin:a[s].origin,Summary:i,Product:{PartNumber:a[s].Product.PartNumber,Manufacturer:a[s].Product.Manufacturer,PackageCase:a[s].Product.PackageCase,Packaging:a[s].Product.Packaging},Files:a[s].Files};l.push(n)}var o=null;o=""==this.details.waybillinfo.Code||null==this.details.waybillinfo.Code?null:this.details.waybillinfo.Code;var _={Waybill:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({ID:this.details.waybillinfo.ID,EnterCode:this.details.waybillinfo.EnterCode,ExcuteStatus:e,Type:this.details.waybillinfo.Type,Source:this.details.waybillinfo.Source,OrderID:this.details.waybillinfo.OrderID,NoticeType:this.details.waybillinfo.NoticeType,CarrierID:this.details.waybillinfo.CarrierID,ConsignorID:this.details.waybillinfo.ConsignorID,ConsignorPlace:this.details.waybillinfo.ConsignorPlace,TransferID:this.details.waybillinfo.TransferID,Summary:i,Driver:this.details.waybillinfo.Driver,CarNumber1:this.details.waybillinfo.CarNumber1,Files:this.details.waybillinfo.Files,LoadingExcuteStatus:this.details.waybillinfo.LoadingExcuteStatus,Code:o,Supplier:this.details.waybillinfo.Supplier},"Type",this.details.waybillinfo.Type),Sortings:l,AdminID:sessionStorage.getItem("userID")};this.setWarehousing(_)},cancel_Warehousing:function(){this.WarehousingMsg=!1},chaixiang:function(e,t){var i=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.P)().then(function(a){var l={AVGWeight:t.AVGWeight,iscx:!1,ID:"CX"+e+(new Date).getTime(),NoticeID:t.NoticeID,Product:{PartNumber:t.Product.PartNumber,Manufacturer:t.Product.Manufacturer,PackageCase:t.Product.PackageCase,Packaging:t.Product.Packaging},WaybillID:t.WaybillID,InputID:t.InputID,DateCode:t.DateCode,Quantity:t.Quantity,ArrivedQuantity:t.ArrivedQuantity,LeftQuantity:t.LeftQuantity,CurrentQuantity:null,Conditions:t.Conditions,Source:t.Source,Weight:null,NetWeight:t.NetWeight,Volume:t.Volume,ShelveID:t.ShelveID,Type:t.Type,origintext:t.origintext,originID:t.originID,originDes:t.originDes,origin:t.origin,Summary:t.Summary,SortingID:a,Files:[],Sortings:[],_disabled:!1};i.details.detailitem.splice(e+1,0,l),i.$refs.selection.selectAll(!1),i.SelectRow=[],i.details.detailitem[e].CurrentQuantity=null,i.details.detailitem[e].Weight=null})},removechaixiang:function(e){this.details.detailitem.splice(e,1)},CgDetail_new:function(e){var t=this;void 0!=e&&Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.m)(e).then(function(e){t.Getclientdata(e.Waybill.EnterCode),t.details.waybillinfo=e.Waybill,t.details.detailitem=e.Notice,t.Sortings=e.Sortings,t.loading=!1,120==e.Waybill.ExcuteStatus?t.isdisabled=!0:1==e.Waybill.Type&&100==e.Waybill.LoadingExcuteStatus?t.isdisabled=!0:t.isdisabled=!1;var i=sessionStorage.getItem("UserWareHouse");t.Carriers(t.details.waybillinfo.Type,i),"Personal"==e.Waybill.CarrierID?t.IsPersonal=!0:(t.GetDriversCars(e.Waybill.CarrierID),t.IsPersonal=!1),t.CarArrName=e.Waybill.CarNumber1,t.DriversName=e.Waybill.Driver}),this.GetUsableShelves()},changewaybillType:function(e){var t=sessionStorage.getItem("UserWareHouse");this.Carriers(e,t)},GetUsableShelves:function(){var e=this;sessionStorage.getItem("UserWareHouse");Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.S)("HK").then(function(t){e.Storehouselist=t.obj})},SetStorehouse:function(){this.SelectRow.length<=0?this.$Message.error("请选择要操作的产品项"):this.sethousbox=!0},changehouse:function(){console.log(this.SelectRow);for(var e=this.SelectRow,t=this.details.detailitem,i=0;i<t.length;i++)for(var a=0;a<e.length;a++)t[i].InputID==e[a].InputID&&(t[i].ShelveID=this.housenumber);this.SelectRow=[],this.sethousbox=!1,this.$refs.selection.selectAll(!1)},Labelprint:function(){var e=this.SelectRow,t=[];if(e.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var i=0;i<e.length;i++){e[i].Inputs,e[i].StandardProducts;var a={Quantity:e[i].CurrentQuantity,inputsID:e[i].Input.SortingID,Catalog:e[i].Product.Catalog,PartNumber:e[i].Product.PartNumber,Manufacturer:e[i].Product.Manufacturer,Packing:e[i].Product.Packing,PackageCase:e[i].Product.PackageCase,origin:e[i].origintext,SourceDes:this.details.waybillinfo.SourceDes};t.push(a)}var l=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["产品标签"],s=-1!=l.Url.indexOf("http");l.Url=1==s?l.Url:this.printurl+l.Url;var r={setting:l,data:t};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(r)}},showhistory:function(e){this.historydata=!0,this.reFresh=!0},changehistore:function(e){0==e&&(this.reFresh=!1)},WayParterdata:function(){var e=this;Object(__WEBPACK_IMPORTED_MODULE_8__api__.G)().then(function(t){e.Conveyingplace=t.obj})},Carriers:function(e,t){var i=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.g)(e,t,100).then(function(e){i.CarrierList=e})},detailelist:function(){if(console.log(this.printlist),this.printlist.length>0){this.details.waybillinfo,this.printlist;var e=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)(),t=(this.details.waybillinfo,this.printlist,e["清单打印"]),i=-1!=t.Url.indexOf("http");t.Url=1==i?t.Url:this.printurl+t.Url;var a={setting:t,data:[{waybill:this.details.waybillinfo,listdata:this.printlist}]};alert(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(t)),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.q)(a)}},changConveyingplace:function(e,t,i){void 0!=e&&console.log(this.details.detailitem)},showBudget:function(e,t,i){if(this.$store.dispatch("setBudget",!0),"meet"==e){var a="";a="CgUntreated"==this.routername?"/CgUntreated/Income":"/CgProcessed/Income",this.$router.push({path:a,query:{webillID:this.details.waybillinfo.ID,OrderID:this.details.waybillinfo.OrderID,type:t,otype:"in",conduct:i}})}else{a="";a="CgUntreated"==this.routername?"/CgUntreated/Oplog":"/CgProcessed/Oplog",this.$router.push({path:a,params:{webillID:this.details.waybillinfo.WaybillID}})}},closeBudget:function(){console.log("关闭收支明细"),this.$router.go(-1),this.$store.dispatch("setBudget",!1)},clickClient:function(e,t){console.log(e),console.log(t),this.setClientCode=!0,this.chengevalue.value=e,this.chengevalue.type=t,this.Conveyingplace2=this.Conveyingplace,this.ClientCode=e},changClientCode:function(e){this.chengevalue.inputval=e},primaryClientCode:function(){if(console.log(this.SelectRow),"ClientCode"==this.chengevalue.type)this.details.waybillinfo.ConsignorPlace=this.chengevalue.inputval.value,this.details.waybillinfo.ConsignorPlaceText=this.chengevalue.inputval.label;else{this.chengevalue.type.originDes=this.chengevalue.inputval.label;for(var e=0,t=this.details.detailitem.length;e<t;e++)this.chengevalue.type.SortingID==this.details.detailitem[e].SortingID&&(this.details.detailitem[e].origin=this.chengevalue.inputval.value,this.details.detailitem[e].origintext=this.chengevalue.inputval.label),this.details.detailitem[e]._checked=!1;if(this.SelectRow.length>0)for(var i=0,a=this.SelectRow.length;i<a;i++)for(e=0,t=this.details.detailitem.length;e<t;e++)this.SelectRow[i].SortingID==this.details.detailitem[e].SortingID&&(this.details.detailitem[e]._checked=!0),this.chengevalue.type.SortingID==this.SelectRow[i].SortingID&&(this.SelectRow[i].origin=this.chengevalue.inputval.value,this.SelectRow[i].origintext=this.chengevalue.inputval.label)}this.setClientCode=!1},fileprint:function(e){var t=Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.f)()["文档打印"];t.Url=e;var i=t;Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.a)(i)},fromphotos:function(e){if("Waybill"==e){var t={SessionID:this.details.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID}};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.c)(t)}else{console.log(e);t={SessionID:e.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID,NoticeID:e.NoticeID,InputID:e.InputID}};Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.c)(t)}},changed:function(e){this.testfunction(e)},testfunction:function(e){var t=e[0],i={CustomName:t.FileName,ID:t.FileID,Url:t.Url,Type:8e3};if(t.SessionID==this.details.waybillinfo.ID)this.details.waybillinfo.Files.push(i);else for(var a=0;a<this.details.detailitem.length;a++)this.details.detailitem[a].ID==t.SessionID&&this.details.detailitem[a].Files.push(i)},handleRemove:function(e,t){var i=this,a={id:e.ID};Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.l)(a).then(function(a){console.log(a),1==a.Success?(i.Removebackfun(e,t),i.$Message.success("删除成功")):i.$Message.error("删除失败")})},Removebackfun:function(e,t){if(console.log(e),console.log(t),"Waybill"==t)this.details.waybillinfo.Files.splice(this.details.waybillinfo.Files.indexOf(e),1);else for(var i=this.details.detailitem,a=0;a<i.length;a++)i[a].ID==t.ID&&i[a].Files.splice(e,1)},SeletUpload:function(e){if("Waybill"==e){var t={SessionID:this.details.waybillinfo.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID}};console.log(t),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.o)(t)}else{t={SessionID:e.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.details.waybillinfo.ID,WsOrderID:this.details.waybillinfo.OrderID,NoticeID:e.NoticeID,InputID:e.InputID}};console.log(t),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.o)(t)}},TakeGoods:function(){var e=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__._4)(this.details.waybillinfo.ID,sessionStorage.getItem("userID")).then(function(t){console.log(t),1==t.Success?(e.$Message.success("提货锁定成功，请去提货"),e.details.waybillinfo.LoadingExcuteStatus=105,e.isdisabled=!1):e.$Message.error("提货锁定失败")})},changeacrrier:function(e){console.log(this.details.waybillinfo.CarrierID),void 0!=e&&(1==this.details.waybillinfo.Type&&"Personal"==e.value?(this.IsPersonal=!0,this.details.waybillinfo.CarNumber1=this.CarArrName,this.details.waybillinfo.Driver=this.DriversName):(1==this.details.waybillinfo.Type?(this.IsPersonal=!1,this.details.waybillinfo.CarNumber1="",this.details.waybillinfo.Driver="",this.GetDriversCars(e.value)):(this.IsPersonal=!1,this.details.waybillinfo.CarNumber1="",this.details.waybillinfo.Driver=""),this.details.waybillinfo.CarrierName=e.label))},GetDriversCars:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.N)(e).then(function(e){t.CarArr=[];var i=e.Transports;if(i.length>0)for(var a=0;a<i.length;a++){var l={};l=null!=i[a].CarNumber2&&null!=i[a].CarNumber1?{value:i[a].CarNumber1+"  "+i[a].CarNumber2}:{value:i[a].CarNumber1},t.CarArr.push(l)}else t.CarArr=[];t.DriversArr=e.Drivers})},changedrivers:function(e){console.log(this.waybillinfo)},changeabnormal_enter:function(e){var t=this;console.log(e),0==e||(this.Storages=[],Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.P)().then(function(e){var i={iscx:!1,isenter:!0,ID:"LR1"+(new Date).getTime(),NoticeID:null,Product:{PartNumber:null,Manufacturer:null,PackageCase:null,Packaging:null},WaybillID:null,InputID:null,DateCode:null,Quantity:null,ArrivedQuantity:null,LeftQuantity:null,CurrentQuantity:null,Source:null,BoxCode:null,Weight:null,NetWeight:null,Volume:null,ShelveID:null,Type:null,origintext:null,origin:null,originDes:null,Summary:null,SortingID:e,Files:[]};t.Storages.push(i),t.timer=(new Date).getTime(),t.$nextTick(function(){})}))},ok_abnormal:function(){this.NullNotice=[],console.log(this.Storages);for(var e=0,t=this.Storages.length;e<t;e++){if(null==this.Storages[e].CurrentQuantity||null==this.Storages[e].Product.PartNumber||null==this.Storages[e].origin||null==this.Storages[e].Summary||null==this.Storages[e].Product.Manufacturer){this.$refs.modal.visible=!0,this.abnormal_enter=!0,this.NullNotice=[],this.$Message.error("请输入必填项目");break}this.NullNotice.push(this.Storages[e]),e==this.Storages.length-1&&this.ok_Warehousing(130,"enter"),this.modal=!1}},clackFilesProcess:function(e){var t={Url:e};console.log(t),Object(__WEBPACK_IMPORTED_MODULE_10__js_browser_js__.b)(t)},ok_share:function(){if(null==this.sharevalue||""==this.sharevalue)this.$Message.error("请输入重量"),this.showshare=!0;else{if(0==/^\d+(\.\d{0,2})?$/.test(this.sharevalue)||0==this.sharevalue)this.$Message.error("请输入数字,小数点保留两位，且不等于零"),this.showshare=!0,this.sharevalue=null;else{this.showshare=!1;var e=null;console.log(this.details.detailitem);for(var t=0,i=this.details.detailitem.length;t<i;t++)null!=this.details.detailitem[t].CurrentQuantity&&""!=this.details.detailitem[t].CurrentQuantity&&(e+=Number(this.details.detailitem[t].CurrentQuantity));if(null!=e)for(t=0,i=this.details.detailitem.length;t<i;t++)null!=this.details.detailitem[t].CurrentQuantity&&""!=this.details.detailitem[t].CurrentQuantity&&(this.details.detailitem[t].Weight=(this.details.detailitem[t].CurrentQuantity*(this.sharevalue/e)).toFixed(2))}}},changeshare:function(e){0==e&&(this.sharevalue=null)},Getclientdata:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_9__api_CgApi__.U)(e).then(function(e){console.log(e),t.clientGrade=e.obj.Grade})},ok_addCarrier:function(e){1==e?this.$refs.addCarrier.sumbit_btn():2==e?(this.$refs.addCarrier.delitem(),this.showaddCarrier=!1):3==e?this.$refs.AddDriver.sumbit_btn():4==e?(this.$refs.AddDriver.delitem(),this.showaddDriver=!1):5==e?this.$refs.addcar.sumbit_btn():6==e&&(this.$refs.addcar.delitem(),this.showaddCar=!1)},setdisabled:function(e){this.adddisabled=e},fatherMethodCarrier:function(e){if(this.adddisabled=!1,"false"!=e){var t=sessionStorage.getItem("UserWareHouse"),i={ID:e.Carrier.ID,Name:e.Carrier.Name};this.CarrierList.push(i),this.Carriers(this.details.waybillinfo.Type,t),this.details.waybillinfo.CarrierID=e.Carrier.ID,this.details.waybillinfo.CarrierName=e.Carrier.Name;var a={Name:e.Driverinfo.Name,ID:""};this.DriversArr.push(a),this.details.waybillinfo.Driver=e.Driverinfo.Name;a={value:e.Carinfo.CarNumber1};this.CarArr.push(a),this.details.waybillinfo.CarNumber1=e.Carinfo.CarNumber1,this.GetDriversCars(this.details.waybillinfo.CarrierID),this.showaddCarrier=!1,this.$refs.addCarrier.delitem()}},ok_addDriver:function(e){if(this.adddisabled=!1,"false"!=e){var t={Name:e,ID:""};this.DriversArr.push(t),this.GetDriversCars(this.details.waybillinfo.CarrierID),this.details.waybillinfo.Driver=e,this.showaddDriver=!1,this.$refs.AddDriver.delitem()}},ok_addCar:function(e){if(this.adddisabled=!1,console.log(e),"false"!=e){var t={value:e};this.CarArr.push(t),this.GetDriversCars(this.details.waybillinfo.CarrierID),this.details.waybillinfo.CarNumber1=e,this.showaddCar=!1,this.$refs.AddDriver.delitem()}},testbtn:function(e){this.$store.dispatch("setshowdetail",!1),this.$store.dispatch("setshowdetailout",!0),this.$router.push({path:"Outgoing/10/outdetail/"+e}),this.$store.dispatch("setshowtype",1)},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()}}}},YIpj:function(e,t){},"xu/c":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("KoTp"),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{width:"100%","font-size":"12px"}},[i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[e._v("基础信息")]),e._v(" "),i("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[i("Row",[i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li detail1"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("ID：")]),e._v(" "),i("span",[e._v(e._s(e.details.waybillinfo.ID))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("订单号：")]),e._v(" "),i("span",{staticStyle:{"line-height":"20px",width:"70%",display:"inline-block"}},[e._v(e._s(e.details.waybillinfo.OrderID))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("状态：")]),e._v(" "),i("span",[e._v(e._s(e.details.waybillinfo.ExcuteStatusDes)+"\n                      "),null!=e.details.waybillinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:e.logchange}},[e._v("日志管理")]):e._e()],1)]),e._v(" "),1==e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("提货状态：")]),e._v(" "),e.details.waybillinfo.Type&&100==e.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"magenta"}},[e._v("等待提货")]):e._e(),e._v(" "),1==e.details.waybillinfo.Type&&105==e.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"blue"}},[e._v("提货中")]):e._e(),e._v(" "),1==e.details.waybillinfo.Type&&200==e.details.waybillinfo.LoadingExcuteStatus?i("Tag",{attrs:{color:"green"}},[e._v("提货完成")]):e._e()],1):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[e._v("业务类型：")]),e._v(" "),i("span",[e._v(e._s(e.details.waybillinfo.SourceDes))])]),e._v(" "),void 0!=e.details.waybillinfo.Condition?i("li",{staticClass:"itemli"},[e.Conditionstype?i("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.AgencyCheck?i("Tag",{attrs:{color:"geekblue"}},[e._v("代检查")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.AgencyPayment?i("Tag",{attrs:{color:"purple"}},[e._v("代垫货款")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.AgencyReceive?i("Tag",{attrs:{color:"blue"}},[e._v("代收货款")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.ChangePackaging?i("Tag",{attrs:{color:"cyan"}},[e._v("代收货款")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.LableServices?i("Tag",{attrs:{color:"green"}},[e._v("标签服务")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.PayForFreight?i("Tag",{attrs:{color:"gold"}},[e._v("垫付运费")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.Repackaging?i("Tag",{attrs:{color:"orange"}},[e._v("重新包装")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.UnBoxed?i("Tag",{attrs:{color:"volcano"}},[e._v("拆箱验货")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.VacuumPackaging?i("Tag",{attrs:{color:"red"}},[e._v("真空包装")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.WaterproofPackaging?i("Tag",{attrs:{color:"magenta"}},[e._v("防水包装")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.QualityInspection?i("Tag",{attrs:{color:"lime"}},[e._v("质检")]):e._e(),e._v(" "),1==e.details.waybillinfo.Condition.Unboxing?i("Tag",{attrs:{color:"yellow"}},[e._v("拆包装")]):e._e()],1):e._e()])]),e._v(" "),i("Col",{staticStyle:{width:"26%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("制单时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.details.waybillinfo.CreateDate)))])]),e._v(" "),1==e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("提货时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.details.waybillinfo.TakingDate)))])]):i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("到货时间：")]),e._v(" "),i("span",[e._v(e._s(e._f("showDateexact")(e.details.waybillinfo.CreateDate)))])]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("供应商：")]),e._v(" "),i("span",{staticStyle:{display:"inline-block","max-width":"300px","line-height":"1"}},[i("p",[e._v(e._s(e.details.waybillinfo.Supplier)+"\n                      "),i("Tag",{attrs:{color:"volcano"}},[e._v("LV "+e._s(e.details.waybillinfo.SupplierGrade))])],1)]),e._v(" "),i("br")]),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("到货方式：")]),e._v(" "),1==e.details.waybillinfo.Type||2==e.details.waybillinfo.Type?i("span",[e._v(e._s(e.details.waybillinfo.TypeDes))]):i("Select",{staticStyle:{width:"40%"},on:{"on-change":e.changewaybillType},model:{value:e.details.waybillinfo.Type,callback:function(t){e.$set(e.details.waybillinfo,"Type",t)},expression:"details.waybillinfo.Type"}},e._l(e.TypeArr,function(t,a){return i("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:e.showhistory}},[e._v("历史到货")])],1),e._v(" "),1==e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[e._v("提货文件：")]),e._v(" "),i("span",{staticStyle:{display:"inline-block"}},e._l(e.details.waybillinfo.Files,function(t,a){return i("div",[10==t.Type?i("p",[i("span",[e._v(e._s(t.CustomName))]),e._v(" "),i("a",{on:{click:function(i){return e.fileprint(t.Url)}}},[e._v("打印")])]):e._e()])}),0)]):e._e()])]),e._v(" "),i("Col",{staticStyle:{width:"31%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[e._v("入  仓  号：")]),e._v(" "),i("span",[e._v(e._s(e.details.waybillinfo.EnterCode))]),e._v(" "),i("em",[e._v("("+e._s(e.details.waybillinfo.ClientName)+")")]),e._v(" "),i("Tag",{attrs:{color:"geekblue"}},[e._v("LV "+e._s(e.clientGrade))])],1),e._v(" "),1!=e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[e._v("运单号(本次)：")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},model:{value:e.details.waybillinfo.Code,callback:function(t){e.$set(e.details.waybillinfo,"Code",t)},expression:"details.waybillinfo.Code"}})],1)]):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("承运商(本次):")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{filterable:"","label-in-value":!0},on:{"on-change":e.changeacrrier},model:{value:e.details.waybillinfo.CarrierID,callback:function(t){e.$set(e.details.waybillinfo,"CarrierID",t)},expression:"details.waybillinfo.CarrierID"}},e._l(e.CarrierList,function(t,a){return i("Option",{key:a,attrs:{value:t.ID}},[e._v(e._s(t.Name))])}),1),e._v(" "),1==e.details.waybillinfo.Type?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCarrier=!0}}}):e._e()],1)]),e._v(" "),1==e.details.waybillinfo.Type&&0==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("司        机:")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0,transfer:"",filterable:""},on:{"on-change":e.changedrivers},model:{value:e.details.waybillinfo.Driver,callback:function(t){e.$set(e.details.waybillinfo,"Driver",t)},expression:"details.waybillinfo.Driver"}},e._l(e.DriversArr,function(t,a){return i("Option",{key:a,attrs:{value:t.Name}},[e._v(e._s(t.Name))])}),1),e._v(" "),1==e.details.waybillinfo.Type&&null!=e.details.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddDriver=!0}}}):e._e()],1)]):e._e(),e._v(" "),1==e.details.waybillinfo.Type&&0==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[1==e.details.waybillinfo.Type?i("em",{staticClass:"Mustfill"},[e._v("*")]):e._e(),e._v("车  牌  号:")]),e._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{transfer:"","label-in-value":!0},on:{"on-create":e.handleCreate3,"on-change":e.changedrivers},model:{value:e.details.waybillinfo.CarNumber1,callback:function(t){e.$set(e.details.waybillinfo,"CarNumber1",t)},expression:"details.waybillinfo.CarNumber1"}},e._l(e.CarArr,function(t){return i("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.value))])}),1),e._v(" "),1==e.details.waybillinfo.Type&&null!=e.details.waybillinfo.CarrierID?i("Icon",{attrs:{type:"md-add"},on:{click:function(t){e.showaddCar=!0}}}):e._e()],1)]):e._e(),e._v(" "),1==e.details.waybillinfo.Type&&1==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("司        机:")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入司机"},model:{value:e.details.waybillinfo.Driver,callback:function(t){e.$set(e.details.waybillinfo,"Driver",t)},expression:"details.waybillinfo.Driver"}})],1)]):e._e(),e._v(" "),1==e.details.waybillinfo.Type&&1==e.IsPersonal?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("*")]),e._v("车  牌  号:")]),e._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入承运商"},model:{value:e.details.waybillinfo.CarNumber1,callback:function(t){e.$set(e.details.waybillinfo,"CarNumber1",t)},expression:"details.waybillinfo.CarNumber1"}})],1)]):e._e(),e._v(" "),1==e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("联  系  人:")]),e._v(" "),i("span",[e._v(" "+e._s(e.details.waybillinfo.TakingContact)+"   (电话:"+e._s(e.details.waybillinfo.TakingPhone)+")")])]):e._e(),e._v(" "),1==e.details.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("提货地址:")]),e._v(" "),i("span",[e._v(e._s(e.details.waybillinfo.TakingAddress))])]):e._e(),e._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[i("em",{staticClass:"Mustfill"},[e._v("  ")]),e._v("输  送  地：")]),e._v(" "),i("span",[0!=e.details.waybillinfo.ConsignorPlace?i("span",[e._v(e._s(e.details.waybillinfo.ConsignorPlaceText))]):i("span",{staticStyle:{color:"red"}},[e._v("暂无输送地")]),e._v(" "),i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(t){return e.clickClient(e.details.waybillinfo.ConsignorPlace,"ClientCode")}}})],1)])])]),e._v(" "),i("Col",{staticStyle:{width:"23%",float:"left"}},[i("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[i("li",{staticClass:"itemli"},[i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SeletUpload("Waybill")}}},[e._v("传照")])],1),e._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(t){return e.fromphotos("Waybill")}}},[e._v("拍照")])],1)]),e._v(" "),i("li",{staticStyle:{clear:"both"}},e._l(e.details.waybillinfo.Files,function(t,a){return i("div",[i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return e.clackFilesProcess(t.Url)}}},[e._v(e._s(t.CustomName))]),e._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return e.handleRemove(t,"Waybill")}}})],1)])}),0),e._v(" "),1==e.details.waybillinfo.Type&&100==e.details.waybillinfo.LoadingExcuteStatus?i("li",{staticStyle:{position:"absolute",top:"147px",right:"0"}},[i("Button",{attrs:{type:"primary"},on:{click:e.TakeGoods}},[e._v("我去提货")])],1):e._e()])])],1)],1)]),e._v(" "),i("div",{staticClass:"itembox"},[i("Modal",{ref:"modal",attrs:{title:"无通知产品录入",width:"90"},on:{"on-ok":e.ok_abnormal,"on-cancel":e.cancel,"on-visible-change":e.changeabnormal_enter},model:{value:e.abnormal_enter,callback:function(t){e.abnormal_enter=t},expression:"abnormal_enter"}},[i("div",[i("div",[i("p",{staticClass:"detailtitle"},[e._v("\n                  无通知产品录入\n                  "),i("span",{staticStyle:{"margin-left":"15px",color:"red"}},[e._v("注意：仅能录入该运单下与通知型号不匹配的产品信息")])]),e._v(" "),i("div",{staticStyle:{padding:"15px 0px"}},[i("Noting-Enter",{key:e.timer,ref:"NotingEntername",attrs:{Storagesarr:e.Storages,Storehouselist:e.Storehouselist,Boxingarr:e.boxingarr,status:1}})],1)])])]),e._v(" "),i("p",{staticClass:"detailtitle"},[e._v("通知产品清单")]),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("ButtonGroup",{staticStyle:{width:"28%"}},[i("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":e.search_pro},model:{value:e.searchkey,callback:function(t){e.searchkey="string"==typeof t?t.trim():t},expression:"searchkey"}}),e._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.search_pro}},[e._v("筛选")])],1),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.Labelprint}},[e._v("标签打印")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:e.SetStorehouse}},[e._v("一键入库")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(t){return e.showBudget("meet","in",e.details.waybillinfo.Source)}}},[e._v("收入")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(t){return e.showBudget("meet","out",e.details.waybillinfo.Source)}}},[e._v("支出")]),e._v(" "),i("Button",{attrs:{type:"primary",disabled:1==e.isdisabled},on:{click:function(t){e.abnormal_enter=!0}}},[e._v("无通知产品录入")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(t){e.showshare=!0}}},[e._v("分摊重量")]),e._v(" "),200!=e.details.waybillinfo.OStatus?i("div",{staticStyle:{"text-align":"right"}},[i("Button",{attrs:{type:"primary",shape:"circle",icon:"md-checkmark",disabled:1==e.isdisabled},on:{click:e.finish_btn1}},[e._v("入库完成")]),e._v(" "),i("Button",{attrs:{type:"warning",shape:"circle",icon:"ios-alert-outline",disabled:1==e.isdisabled},on:{click:e.Abnormal}},[e._v("到货异常")])],1):e._e()],1),e._v(" "),i("div",[i("div",{staticClass:"detail_tablebox"},[i("Table",{ref:"selection",attrs:{loading:e.loading,columns:e.details.columns1,data:e.details.detailitem,size:"large"},on:{"on-selection-change":e.handleSelectRow,"on-row-click":e.tabledblclick},scopedSlots:e._u([{key:"indexs",fn:function(t){t.row;var i=t.index;return[e._v(e._s(i+1))]}},{key:"Arrival",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("span",[e._v(e._s(a.Quantity))]):e._e()]}},{key:"Already",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("span",[e._v(e._s(a.ArrivedQuantity))]):e._e()]}},{key:"Surplus",fn:function(t){var a=t.row;return t.index,[0!=a.iscx?i("P",[Number(a.LeftQuantity)<=0?i("span",[e._v("0")]):i("span",[e._v(e._s(a.LeftQuantity))])]):e._e()]}},{key:"OriginDes",fn:function(t){var a=t.row;return t.index,[i("span",[e._v(e._s(a.origintext))]),e._v(" "),1!=a._disabled?i("Icon",{staticClass:"sethover",attrs:{type:"md-create"},on:{click:function(t){return e.clickClient(a.origin,a)}}}):e._e()]}},{key:"imglist",fn:function(t){var a=t.row;return t.index,e._l(a.Files,function(t,l){return i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return e.clackFilesProcess(t.Url)}}},[e._v(e._s(t.CustomName))]),e._v(" "),i("Icon",{ref:a.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return e.handleRemove(t,a)}}})],1)})}},{key:"operation",fn:function(t){var a=t.row,l=t.index;return[i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(t){return e.SeletUpload(a)}}},[e._v("传照")])],1),e._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(t){return e.fromphotos(a)}}},[e._v("拍照")])],1),e._v(" "),0!=a.iscx?i("div",{staticClass:"setupload"},[i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"md-checkmark"},on:{click:function(t){return e.chaixiang(l,a)}}},[e._v("拆项")])],1):e._e(),e._v(" "),0==a.iscx?i("div",{staticClass:"setupload"},[0==a.iscx||1==a.isenter?i("Button",{attrs:{disabled:1==a._disabled,type:"primary",size:"small",icon:"ios-trash-outline"},on:{click:function(t){return e.removechaixiang(l,a)}}},[e._v("删除")]):e._e()],1):e._e()]}}])}),e._v(" "),200!=e.details.waybillinfo.OStatus?i("div",{staticClass:"successbtn"},[i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==e.isdisabled},on:{click:e.finish_btn1}},[e._v("入库完成")]),e._v(" "),i("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==e.isdisabled},on:{click:e.Abnormal}},[e._v("到货异常")])],1):e._e()],1)])],1),e._v(" "),1==e.WarehousingMsg?i("div",[i("Modal",{attrs:{title:"确定入库"},on:{"on-ok":function(t){return e.ok_Warehousing(115)},"on-cancel":e.cancel_Warehousing},model:{value:e.WarehousingMsg,callback:function(t){e.WarehousingMsg=t},expression:"WarehousingMsg"}},[0!=e.Nomatching.length?i("div",[i("h2",[e._v("以下型号数量与通知数量不符，是否继续进行入库操作")]),e._v(" "),i("ul",e._l(e.Nomatching,function(t,a){return i("li",{key:a},[i("h2",[e._v(e._s(t))])])}),0)]):i("div",[i("span",[e._v("是否全部入库")])])])],1):e._e(),e._v(" "),i("Modal",{attrs:{title:"一键入库"},on:{"on-cancel":e.cancel},model:{value:e.sethousbox,callback:function(t){e.sethousbox=t},expression:"sethousbox"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close-circle",color:"rgb(33, 28, 28)"},on:{click:e.cancel}})],1),e._v(" "),i("span",{staticStyle:{"line-height":"26px"}},[e._v("选择库位")]),e._v(" "),e.Storehouselist.length>0?i("Select",{attrs:{filterable:""},model:{value:e.housenumber,callback:function(t){e.housenumber=t},expression:"housenumber"}},e._l(e.Storehouselist,function(t,a){return i("Option",{key:a,attrs:{value:t.ShelveID,label:t.ShelveID}},[i("span",[e._v(e._s(t.ShelveID))]),e._v(" "),i("span",{staticStyle:{float:"right",color:"#ccc"}},[e._v(e._s(t.TotalPackage))])])}),1):e._e(),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.changehouse}},[e._v("确定")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"到货异常"},model:{value:e.isAbnormal,callback:function(t){e.isAbnormal=t},expression:"isAbnormal"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close-circle",color:"rgb(33, 28, 28)"},on:{click:e.closeerror}})],1),e._v(" "),i("span",{staticStyle:{"line-height":"26px"}},[e._v("异常原因")]),e._v(" "),i("Input",{attrs:{type:"textarea",rows:2,placeholder:"备注",maxlength:"100","show-word-limit":""},model:{value:e.Summary,callback:function(t){e.Summary=t},expression:"Summary"}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.closeerror}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.Abnormal_btn}},[e._v("确定")])],1)],1)],1),e._v(" "),i("Drawer",{attrs:{width:70},on:{"on-visible-change":e.changehistore},model:{value:e.historydata,callback:function(t){e.historydata=t},expression:"historydata"}},[e.reFresh?i("History-Mount",{attrs:{OrderID:e.details.waybillinfo.OrderID,Type:1}}):e._e()],1),e._v(" "),i("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:e.Budgetdetail,callback:function(t){e.Budgetdetail=t},expression:"Budgetdetail"}},[i("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[i("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:e.closeBudget}})],1),e._v(" "),i("div",[i("router-view")],1)]),e._v(" "),i("Modal",{attrs:{title:"选地地区"},on:{"on-cancel":e.cancel},model:{value:e.setClientCode,callback:function(t){e.setClientCode=t},expression:"setClientCode"}},[i("Select",{attrs:{filterable:"","label-in-value":!0},on:{"on-change":e.changClientCode},model:{value:e.ClientCode,callback:function(t){e.ClientCode=t},expression:"ClientCode"}},e._l(e.Conveyingplace2,function(t,a){return i("Option",{key:t.ID,attrs:{value:t.CorPlace}},[e._v(e._s(t.Text))])}),1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.primaryClientCode}},[e._v("确定")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"分摊重量"},on:{"on-visible-change":e.changeshare},model:{value:e.showshare,callback:function(t){e.showshare=t},expression:"showshare"}},[i("div",[i("Input",{attrs:{placeholder:"请输入重量"},model:{value:e.sharevalue,callback:function(t){e.sharevalue=t},expression:"sharevalue"}})],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.ok_share}},[e._v("确认")])],1)]),e._v(" "),i("Modal",{attrs:{title:"新增承运商","mask-closable":!1},model:{value:e.showaddCarrier,callback:function(t){e.showaddCarrier=t},expression:"showaddCarrier"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(2)}}})],1),e._v(" "),i("Add-Carrier",{ref:"addCarrier",attrs:{Conveyingplace:e.Conveyingplace},on:{fatherMethodCarrier:e.fatherMethodCarrier,setdisabled:e.setdisabled}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(2)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(1)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"新增司机","mask-closable":!1},model:{value:e.showaddDriver,callback:function(t){e.showaddDriver=t},expression:"showaddDriver"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(4)}}})],1),e._v(" "),i("Add-Driver",{ref:"AddDriver",attrs:{EnterpriseName:e.details.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addDriver:e.ok_addDriver}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(4)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(3)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{title:"新增车牌号","mask-closable":!1},model:{value:e.showaddCar,callback:function(t){e.showaddCar=t},expression:"showaddCar"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"20px",color:"#999"},attrs:{type:"md-close"},on:{click:function(t){return e.ok_addCarrier(6)}}})],1),e._v(" "),i("Add-Car",{ref:"addcar",attrs:{EnterpriseName:e.details.waybillinfo.CarrierName},on:{setdisabled:e.setdisabled,ok_addCar:e.ok_addCar}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{disabled:e.adddisabled},on:{click:function(t){return e.ok_addCarrier(6)}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{disabled:e.adddisabled,type:"primary"},on:{click:function(t){return e.ok_addCarrier(5)}}},[e._v("确认")])],1)],1),e._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:e.showlogged,callback:function(t){e.showlogged=t},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),e._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[e._v("日志管理")])]),e._v(" "),e.showlogged?i("logg-ed",{key:e.loggdetime,ref:"logged",attrs:{WaybillID:e.details.waybillinfo.ID}}):e._e()],1)],1)},staticRenderFns:[]};var s=function(e){i("YIpj")},r=i("VU/8")(a.a,l,!1,s,null,null);t.default=r.exports}});
//# sourceMappingURL=23.284212aa5f58ec52cda2.js.map