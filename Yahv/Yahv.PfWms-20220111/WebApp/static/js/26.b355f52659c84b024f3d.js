webpackJsonp([26],{Y73a:function(t,e){},gzII:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("gyMJ");var i=s("dciI"),l=s("3PyT"),a={data:function(){return{loading:!0,ID:null,titleMsg:{WaybillID:"",LotNumber:"",CarrierName:"",CarNumber1:"",CarNumber2:"",DepartDate:"",Driver:"",Code:"",Type:"",totalBoxes:"",ShelveQuantity:"",TotalWeight:"",TotalParts:""},listData:[],listTitle:[{type:"selection",width:60,align:"center"},{title:"订单编号",key:"TinyOrderID",width:180},{title:"客户名称",key:"ClientName"},{title:"装箱日期",slot:"BoxDate"},{title:"箱号",slot:"BoxCode"},{title:"库位号",key:"ShelveID"},{title:"状态",slot:"ShelvesStatus"}],modal:!1,selection:[],shelveID:"",shelveArr:[]}},created:function(){this.ID=this.$route.params.ID,this.Cgszsortingsdetail()},methods:{Cgszsortingsdetail:function(){var t=this;Object(i.F)(this.ID).then(function(e){t.loading=!1,t.handleTitleMsg(e.Waybill),t.handleListData(e.notices)})},handleTitleMsg:function(t){this.titleMsg.WaybillID=t.ID,this.titleMsg.LotNumber=t.LotNumber,this.titleMsg.CarrierName=t.CarrierName,this.titleMsg.CarNumber1=t.CarNumber1,this.titleMsg.CarNumber2=t.CarNumber2,this.titleMsg.DepartDate=t.DepartDate,this.titleMsg.Driver=t.Driver,this.titleMsg.Code=t.Code,this.titleMsg.Type=t.Type,this.titleMsg.totalBoxes=t.TotalParts,this.titleMsg.ShelveQuantity=t.ShelveQuantity,this.titleMsg.TotalWeight=t.TotalWeight,this.titleMsg.TotalParts=t.TotalQuantity},handleListData:function(t){this.listData=[];for(var e=0;e<t.length;e++){var s=t[e],i={};i.WaybillID=s.WaybillID,i.BoxDate=this.titleMsg.DepartDate,i.BoxCode=s.BoxCode,i.TinyOrderID=s.TinyOrderID,i.ClientName=s.Name,i.ShelveID=s.ShelveID,i.ShelvesStatus=s.status,i.StorageID=s.StorageID,this.listData.push(i)}},onSelect:function(t,e){this.selection=t},onSelectAll:function(t){this.selection=t},onSelectionChange:function(t){this.selection=t},shelves:function(){this.selection.length?this.shelveArr.length?this.modal=!0:(this.getUsableShelves(),this.modal=!0):this.$Message.error("请选择您要上架的货物")},getUsableShelves:function(){var t=this,e=sessionStorage.getItem("UserWareHouse");Object(i._11)(e).then(function(e){t.shelveArr=e})},ok:function(){var t=this;if(this.shelveID){for(var e=[],s=0,l=this.selection.length;s<l;s++){var a={ShelveID:this.shelveID,WaybillID:this.selection[s].WaybillID,BoxCode:this.selection[s].BoxCode};e.push(a)}a={Waybill:{WaybillID:this.titleMsg.WaybillID,LotNumber:this.titleMsg.LotNumber},Update:e};Object(i._16)(a).then(function(e){console.log(e),1==e.Success?(t.modal=!1,t.$Message.success("上架成功"),t.Cgszsortingsdetail(),t.shelveID="",t.selection=[]):t.$Message.error("上架失败")})}else this.$Message.warning("请选择库位号")},cancel:function(){this.shelveID="",this.modal=!1},ok_print:function(){Object(i.E)(this.ID).then(function(t){Object(l.j)(t)})},createShelve:function(t){var e=this;this.shelveArr.push({ShelveID:t});var s={whCode:sessionStorage.getItem("UserWareHouse"),place:t};Object(i._9)(s).then(function(t){e.getUsableShelves()})},visiblechange:function(t){0==t&&(this.shelveID="")}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transport_detail"},[s("p",{staticClass:"details_title"},[t._v("基本信息")]),t._v(" "),s("div",{staticClass:"info_box"},[s("Row",[s("Col",{attrs:{span:"12"}},[s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输批次号：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.LotNumber))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("车  牌  号：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.CarNumber1)+"  "+t._s(t.titleMsg.CarNumber2))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输时间：")]),t._v(" "),s("span",{},[t._v(t._s(t._f("showDate")(t.titleMsg.DepartDate)))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("总  件  数：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.totalBoxes))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("已上架数：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.ShelveQuantity))])])]),t._v(" "),s("Col",{attrs:{span:"12"}},[s("p",{staticClass:"info_item"},[s("label",{},[t._v("承  运  商：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.CarrierName))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("司机姓名：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.Driver))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("运输类型：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.Type))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("总毛重(kg)：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.TotalWeight))])]),t._v(" "),s("p",{staticClass:"info_item"},[s("label",{},[t._v("总条数：")]),t._v(" "),s("span",{},[t._v(t._s(t.titleMsg.TotalParts))])])])],1)],1),t._v(" "),s("p",{staticClass:"details_title"},[t._v("明细")]),t._v(" "),s("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success"},on:{click:t.shelves}},[t._v("上架")]),t._v(" "),s("span",{staticClass:"notice"},[t._v("注意：如果已上架，仍然可以点击上架修改库位号")]),t._v(" "),s("span",[s("Button",{staticClass:"printbtn",attrs:{type:"primary"},on:{click:t.ok_print}},[t._v("入库单打印")])],1),t._v(" "),s("div",{staticClass:"tablebox"},[s("Table",{ref:"selection",attrs:{loading:t.loading,columns:t.listTitle,data:t.listData},on:{"on-select":t.onSelect,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange},scopedSlots:t._u([{key:"BoxDate",fn:function(e){var i=e.row;return e.index,[s("p",[t._v(t._s(t._f("showDate")(i.BoxDate)))])]}},{key:"BoxCode",fn:function(e){var i=e.row;return e.index,[s("p",[t._v(t._s(t._f("showboxcode")(i.BoxCode)))])]}},{key:"ShelvesStatus",fn:function(e){var i=e.row;return e.index,[s("p",["已上架"==i.ShelvesStatus?s("Tag",{attrs:{color:"green"}},[t._v(t._s(i.ShelvesStatus))]):s("Tag",{attrs:{color:"orange"}},[t._v(t._s(i.ShelvesStatus))])],1)]}}])})],1),t._v(" "),s("Modal",{attrs:{title:"标题",width:"300"},on:{"on-visible-change":t.visiblechange},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t._v("\n    库位号：\n    "),t._v(" "),s("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":""},on:{"on-create":t.createShelve},model:{value:t.shelveID,callback:function(e){t.shelveID=e},expression:"shelveID"}},t._l(t.shelveArr,function(e,i){return s("Option",{key:i,attrs:{value:e.ShelveID}},[t._v(t._s(e.ShelveID))])}),1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),s("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,n,!1,function(t){s("Y73a")},"data-v-d5a78032",null);e.default=o.exports}});
//# sourceMappingURL=26.b355f52659c84b024f3d.js.map