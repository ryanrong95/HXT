webpackJsonp([50],{"9xS9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=n("bOdI"),a=n.n(s),o=(n("7t+N"),n("dciI")),r={name:"Customswindow",data:function(){var t=this;return{isDisabled:!1,key:"",Status:20,loading:!0,isdeclare:!1,selectionarr:[],PageIndex:1,PageSize:6,Total:0,columns:[{type:"selection",width:60,align:"center"},{title:"小订单号",slot:"orderID",align:"center",maxWidth:100},{title:"包装码",slot:"PackageType",align:"center",maxWidth:80},{title:"入仓号",slot:"Entercode",align:"center",maxWidth:80},{title:"装箱时间",slot:"BoxingDate",align:"center",maxWidth:100},{title:"装箱人",slot:"Admin",align:"center",maxWidth:80},{title:"总重量(Kg)",slot:"AVGWeight",align:"center",maxWidth:80},{title:"总箱数",slot:"total",align:"center",maxWidth:80},{title:"箱号",slot:"boxcode",align:"center",width:180},{title:"型号",slot:"PartNumber",align:"center"},{title:"品牌",key:"list",align:"center",render:function(e,n){return e("div",{attrs:{class:"subCol"}},[e("ul",t.reportList[n.index].Items.map(function(t){return e("li",{},t.Procut.Manufacturer)}))])}},{title:"申报数量",key:"list",align:"center",width:100,render:function(e,n){return e("div",{attrs:{class:"subCol"}},[e("ul",t.reportList[n.index].Items.map(function(t){return e("li",{},t.Declare.Quantity)}))])}}],reportList2:[],reportList:[]}},created:function(){this.setnva(),this.Status=this.$route.params.id,this.getlist(),this.setdisable()},beforeRouteUpdate:function(t,e,n){this.Status=t.params.id,this.PageIndex=1,this.key="",this.setdisable(),this.getlist(),n()},mounted:function(){},computed:{},methods:(i={setdisable:function(){20==this.Status?this.isDisabled=!1:this.isDisabled=!0},setnva:function(){this.$store.dispatch("setnvadata",[{title:"报关申报",href:"/Transport/Customswindow"}])},getlist:function(){var t=this;console.log(this.PageIndex);var e={PageIndex:this.PageIndex,PageSize:this.PageSize,Status:this.Status,First:this.key};Object(o.j)(e).then(function(e){console.log(e),t.Total=e.obj.Total,e.obj.Total>0?(t.reportList=e.obj.Data,30==t.Status&&t.reportList.forEach(function(t){t._disabled=!0})):t.reportList=[],t.loading=!1})},search_btn:function(){this.loading=!0,this.PageIndex=1,this.getlist()},ok_declare:function(){var t=this;this.isDisabled=!0;for(var e=[],n=0;n<this.selectionarr.length;n++)e.push(this.selectionarr[n].TinyOrderID);console.log(e);var i={AdminID:sessionStorage.getItem("userID"),TinyOrderID:e};Object(o.J)(i).then(function(e){t.isDisabled=!1,400==e.val?t.$Message.error({content:e.msg,duration:5}):(t.$Message.success("申报成功"),t.getlist())})},cancel_declare:function(){},selection_chenge:function(t){this.selectionarr=t},AskCustoms:function(){this.selectionarr.length<=0?this.$Message.error({content:"至少选择一个要申请报关的产品",duration:1,closable:!0,top:50}):this.isdeclare=!0}},a()(i,"search_btn",function(){this.loading=!0,this.getlist()}),a()(i,"clear_search",function(){this.loading=!0,this.getlist()}),a()(i,"changepage",function(t){this.loading=!0,this.PageIndex=t,this.getlist()}),i)},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Customswindow",attrs:{id:"Customsbox"}},[n("p",{staticClass:"windowtitle title"},[t._v("装箱清单")]),t._v(" "),n("div",[n("ButtonGroup",{staticStyle:{width:"328px"}},[n("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"输入箱号/型号/品牌/小订单号/订单号",clearable:""},on:{"on-clear":t.search_btn},model:{value:t.key,callback:function(e){t.key="string"==typeof e?e.trim():e},expression:"key"}}),t._v(" "),n("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.search_btn}},[t._v("筛选")])],1),t._v(" "),n("div",{staticClass:"Apply_btn"},[n("Button",{attrs:{type:"warning",icon:"ios-create-outline",disabled:1==t.isDisabled},on:{click:t.AskCustoms}},[t._v("报关申请")])],1)],1),t._v(" "),n("div",{staticClass:"tablebox"},[n("Table",{attrs:{columns:t.columns,data:t.reportList,loading:t.loading,border:t.reportList.length>0},on:{"on-selection-change":t.selection_chenge},scopedSlots:t._u([{key:"orderID",fn:function(e){var n=e.row;return e.index,[t._v("\n        "+t._s(n.TinyOrderID)+"\n      ")]}},{key:"PackageType",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.PackageType)+"\n      ")]}},{key:"Entercode",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.EnterCode)+"\n      ")]}},{key:"BoxingDate",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(t._f("showDateexact")(n.BoxingDate))+"\n      ")]}},{key:"Admin",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.Packer)+"\n      ")]}},{key:"AVGWeight",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.TotalWeight)+"\n      ")]}},{key:"total",fn:function(e){var n=e.row;return e.index,[t._v("\n         "+t._s(n.TotalBoxCode)+"\n      ")]}},{key:"boxcode",fn:function(e){var i=e.row;return e.index,[n("div",{staticClass:"subCol"},[n("ul",t._l(i.Items,function(e){return n("li",{staticStyle:{"text-align":"left"}},[n("span",[t._v(t._s(t._f("showboxcode")(e.Declare.BoxCode)))])])}),0)])]}},{key:"PartNumber",fn:function(e){var i=e.row;return e.index,[n("div",{staticClass:"subCol"},[n("ul",t._l(i.Items,function(e){return n("li",{staticStyle:{"text-align":"left"}},[n("span",[t._v(t._s(e.Procut.PartNumber))]),t._v(" "),null!=e.Condition?n("span",[1==e.Condition.IsCIQ?n("Tag",{attrs:{color:"primary"}},[t._v("商检")]):t._e(),t._v(" "),1==e.Condition.IsCCC?n("Tag",{attrs:{color:"warning"}},[t._v("CCC")]):t._e(),t._v(" "),1==e.Condition.IsEmbargo?n("Tag",{attrs:{color:"error"}},[t._v("禁运")]):t._e(),t._v(" "),1==e.Condition.IsHighPrice?n("Tag",{attrs:{color:"magenta"}},[t._v("高价值")]):t._e()],1):t._e()])}),0)])]}}])})],1),t._v(" "),n("div",{staticClass:"pagebox"},[n("Page",{attrs:{total:t.Total,current:t.PageIndex,"page-size":t.PageSize},on:{"on-change":t.changepage}})],1),t._v(" "),n("Modal",{attrs:{title:"提示"},on:{"on-ok":t.ok_declare,"on-cancel":t.cancel_declare},model:{value:t.isdeclare,callback:function(e){t.isdeclare=e},expression:"isdeclare"}},[n("p",[t._v("您是否确认申请报关？")])])],1)},staticRenderFns:[]};var c=n("VU/8")(r,l,!1,function(t){n("y4Kn")},null,null);e.default=c.exports},y4Kn:function(t,e){}});
//# sourceMappingURL=50.0dfccfc4137ba1444478.js.map