webpackJsonp([35],{AoXI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("bOdI"),a=i.n(l),s=i("gyMJ"),o=i("dciI"),n=i("PJh5"),r=i.n(n),c=i("3PyT"),u=i("dUDF"),d=i("93yw"),h=i("M4fF"),f={name:"",components:{"Print-boxcode":u.default,"logg-ed":d.default},data:function(){var t,e=this;return t={options3:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},saleDate:"",loggdetime:"",showlogged:!1,isclick:!1,AVGWeightsum:null,issharevalue:!0,sharevalue:null,boxcodetype:"1",clientGrade:null,isdisabled:!1,originalarr:[],TypeArr:[{value:3,label:"快递"},{value:4,label:"国际快递"}],showprintboxcode:!1,fruit:[],showprint:!1,loading:!0,pusharr:[],SelectRow:[],searchkey:"",boxingarr:[],printlist:[],wayBillID:this.$route.params.detailID,detail_ID:"",showphoto:!1,CarrierList:[],Conveyingplace:[],waybillinfo:{},detailitem:[],details:{wayBillID:"",total:0,pageIndex:1,pageSize:1,WaybillNo:"90416165067",Carrier:"",PlaceDescription:"美国"},tabletitle:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center"},{title:"型号",slot:"PartNumber",align:"center",minWidth:180},{title:"品牌",key:"brand",align:"center",width:100,render:function(t,e){return t("span",{},e.row.Product.Manufacturer)}},{title:"产地",key:"OriginName",width:100,align:"center",render:function(t,e){return t("span",{},e.row.OriginName)}},{title:"应出数量",key:"Quantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.Quantity)}},{title:"已出数量",key:"PickedQuantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.PickedQuantity)}},{title:"剩余数量",key:"LeftQuantity",align:"center",width:80,render:function(t,e){return t("span",{},e.row.LeftQuantity)}},{title:"本次发货数量",key:"practical",align:"center",width:90,render:function(t,i){var l=e;return t("Input",{props:{value:i.row.CurrentQuantity},on:{"on-change":function(t){if(console.log(t.target.value),""!=t.target.value){1==/^[0-9]*$/.test(t.target.value)&&0!=t.target.value?(i.row.CurrentQuantity=Number(t.target.value),l.detailitem[i.index]=i.row):(l.$Message.error("只能输入正整数"),t.target.value=null,i.row.CurrentQuantity=null,l.detailitem[i.index]=i.row),l.clicktest(i.row)}else t.target.value=null,i.row.CurrentQuantity=null,l.detailitem[i.index]=i.row,l.clicktest(i.row)}}})}},{title:"小订单号",slot:"TinyOrderID",align:"center",minWidth:150},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"箱号")])},slot:"Boxing_code",align:"center",width:220},{renderHeader:function(t,e){return t("div",[t("span",{style:{color:"red","vertical-align":"middle","padding-right":"5px","font-size":"20px;"}},"*"),t("span",{},"毛重(Kg)")])},key:"GrossWeight",align:"center",width:130,render:function(t,i){var l=e;return t("Input",{props:{value:i.row.Weight},on:{"on-blur":function(t){if(""!=t.target.value?1==/^\d+(\.\d{0,5})?$/.test(t.target.value)&&0!=t.target.value?(i.row.Weight=t.target.value,l.detailitem[i.index]=i.row):(l.$Message.error("请输入大于零的数字,保留小数点后五位"),i.row.Weight=null,t.target.value=null,l.detailitem[i.index]=i.row):(l.$Message.error("重量不能为空"),i.row.Weight=null,t.target.value=null),l.SelectRow.length>0)for(var e=0,a=l.SelectRow.length;e<a;e++)l.SelectRow[e].SortingID==i.row.SortingID&&(l.SelectRow[e]=i.row);l.changeoriginalarr(i.row)}}})}},{title:"库位",key:"ShelveID",align:"center",width:120,render:function(t,e){return t("span",{},e.row.ShelveID)}},{title:"图片",slot:"imglist",align:"center",width:200},{title:"操作",slot:"operation",align:"center",width:150,fixed:"right"}],tablelist:[],uploadList:[],files:""},a()(t,"Conveyingplace",[]),a()(t,"Conveyingplace2",[]),a()(t,"chengevalue",{inputval:"",value:"",type:""}),a()(t,"setClientCode",!1),a()(t,"ClientCode",""),a()(t,"showchangebox",!1),a()(t,"newboxcode",""),a()(t,"newboxcodeback",""),a()(t,"oldboxcode",null),a()(t,"applydata",[]),a()(t,"WarehousingMsg",!1),a()(t,"isAbnormal",!1),a()(t,"Summary",null),a()(t,"CarArr",[]),a()(t,"DriversArr",[]),a()(t,"warehouseID",sessionStorage.getItem("UserWareHouse")),t},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return r()(+e).format("YYYY-MM-DD")}}},created:function(){window.PhotoUploaded=this.changed,this.getdetail_data()},computed:{Budgetdetail:function(){return this.$store.state.common.Budgetdetail}},mounted:function(){},methods:{setboxsplit:function(t){if(t)return t.split("]")[1]},clicktest:h.throttle(function(t){for(var e=0,i=this.SelectRow.length;e<i;e++)t.ID==this.SelectRow[e].ID&&(this.SelectRow[e]=t)},1e3),changeoriginalarr:function(t){for(var e=0,i=this.originalarr.length;e<i;e++)this.originalarr[e].ID==t.ID&&(this.originalarr[e]=t)},showBudget:function(t,e,i){if(this.$store.dispatch("setBudget",!0),"meet"==t){this.$router.push({name:"TurnDeclareBudgetDeclare",query:{webillID:this.waybillinfo.ID,OrderID:this.waybillinfo.OrderID,type:e,otype:"out",conduct:i}})}},closeBudget:function(){console.log("关闭收支明细"),this.$router.go(-1),this.$store.dispatch("setBudget",!1)},handleSelectRow:function(t){console.log(t),this.SelectRow=t},ok:function(){this.showphoto=!1},cancel:function(){this.showphoto=!1,this.showchangebox=!1,this.oldboxcode=null,0==this.showchangebox&&this.BoxcodeDelete()},getdetail_data:function(){var t=this;Object(o.q)(this.wayBillID).then(function(e){t.Getclientdata(e.Waybill.EnterCode),215==e.Waybill.ExcuteStatus?t.isdisabled=!0:t.isdisabled=!1,t.waybillinfo=e.Waybill;for(var i=0,l=e.Notices.length;i<l;i++)e.Notices[i].CurrentQuantity<=0?e.Notices[i]._disabled=!0:e.Notices[i]._disabled=!1;t.detailitem=e.Notices,t.originalarr=e.Notices,t.loading=!1,t.fruit=["出库单打印","送货单打印"],t.Carriers(e.Waybill.Type)})},detailspage:function(t){this.getdetail_data()},fromphotos:function(t){if("Waybill"==t||"Clientimg"==t){var e=null;e="Waybill"==t?8010:8020;var i={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,Type:e}};Object(c.c)(i)}else{i={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:t.ID,InputID:"",Type:8010}};Object(c.c)(i)}},changed:function(t){this.testfunction(t)},testfunction:function(t){var e=t[0];if("Waybill"==e.SessionID){var i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8010};this.waybillinfo.FeliverGoodFile.push(i)}else if("Clientimg"==e.SessionID){i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8020};this.waybillinfo.SendGoodsFile.push(i)}else{i={CustomName:e.FileName,ID:e.FileID,Url:e.Url,Type:8010};for(var l=0;l<this.detailitem.length;l++)this.detailitem[l].ID==e.SessionID&&(this.detailitem[l].Imagefiles.push(i),this.changeoriginalarr(this.detailitem[l]))}},SeletUpload:function(t){if("Waybill"==t||"Clientimg"==t){var e=null;e="Waybill"==t?8010:8020;var i={SessionID:t,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,Type:e}};Object(c.o)(i)}else{i={SessionID:t.ID,AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:this.waybillinfo.ID,WsOrderID:this.waybillinfo.OrderID,NoticeID:t.ID,InputID:"",Type:8010}};Object(c.o)(i)}},Carriers:function(t){var e=this,i=this.warehouseID;Object(o.g)(t,i).then(function(t){e.CarrierList=t})},changewaybillType:function(t){this.Carriers(t)},WayParterdata:function(){var t=this;getWayParter().then(function(e){t.Conveyingplace=e.obj})},clickClient:function(t,e){this.setClientCode=!0,this.chengevalue.value=t,this.chengevalue.type=e,this.Conveyingplace2=this.Conveyingplace,this.ClientCode=String(t)},changeshowbox:function(t){var e=this;if(1==t){this.SelectRow.forEach(function(t){e.AVGWeightsum+=t.AVGWeight*t.CurrentQuantity});var i=new Date,l=i.getFullYear(),a=i.getMonth()+1,s=i.getDate();this.saleDate=l+"/"+a+"/"+s}},handleCreate1:function(t){var e=this;if(""!=t&&null!=t){var i={enterCode:this.waybillinfo.EnterCode,code:t,date:this.saleDate,adminID:sessionStorage.getItem("userID")};if(console.log(i),null!=this.oldboxcode){var l={boxCode:this.oldboxcode};Object(o.b)(l).then(function(t){Object(o.c)(i).then(function(t){0==t.success?(e.$Message.error(t.data),e.newboxcode=null,e.oldboxcode=null,e.newboxcodeback=null,e.isclick=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.oldboxcode=t.boxCode,e.newboxcodeback=t.boxCode,e.isclick=!0)})})}else Object(o.c)(i).then(function(t){0==t.success?(e.$Message.error(t.data),e.newboxcode=null,e.oldboxcode=null,e.newboxcodeback=null,e.isclickbtn=!1):(e.newboxcode=e.setboxsplit(t.boxCode),e.oldboxcode=t.boxCode,e.newboxcodeback=t.boxCode,e.isclick=!0)})}},BoxcodeDelete:function(){var t={boxCode:this.newboxcodeback};Object(o.b)(t).then(function(t){})},oldBoxDelete:function(t){var e={boxCode:t};Object(o.b)(e).then(function(t){})},getboxarr:function(){var t=this,e={whCode:sessionStorage.getItem("UserWareHouse"),enterCode:this.waybillinfo.EnterCode,date:"",orderID:this.waybillinfo.OrderID};Object(o.f)(e).then(function(e){e.length>0?t.boxingarr=e:t.boxingarr=[]})},okapply:function(){var t=this;Object(s.b)(this.applyfrom).then(function(e){1==e.success?(t.$Message.success("申请成功"),t.getboxarr()):t.$Message.error("箱号申请失败")})},clickshowchangebox:function(){if(0==this.SelectRow.length)this.$Message.error("至少选择一条产品");else for(var t=this.SelectRow[0].TinyOrderID,e=0;e<this.SelectRow.length;e++){if(this.SelectRow[e].TinyOrderID!=t){this.$Message.error("小订单号不一致，请选择小订单号一致的进行操作");break}if(e==this.SelectRow.length-1){for(var i=[],l=[],a=(e=0,this.SelectRow.length);e<a;e++)null==this.SelectRow[e].Weight?i.push(this.SelectRow[e]):l.push(this.SelectRow[e]);console.log(i),console.log(l),0!=i.length&&0!=l.length?this.$Message.error("勾选型号重量有误"):(i.length>0?this.issharevalue=!0:this.issharevalue=!1,this.sharevalue=null,this.newboxcode=null,this.newboxcodeback=null,this.boxcodetype="1",this.getboxarr(),this.showchangebox=!0)}}},ok_changebox:function(){if(null==this.newboxcode)this.$Message.error("请输入必填项"),this.showchangebox=!0;else if(1==this.issharevalue&&null==this.sharevalue)this.$Message.error("请输入必填项"),this.showchangebox=!0;else{1!=this.issharevalue||0!=/^\d+(\.\d{0,2})?$/.test(this.sharevalue)&&0!=this.sharevalue?1==this.isclick&&(this.issharevalue,this.finish_btn(),this.showchangebox=!1):this.$Message.error("请输入数字,小数点保留两位，且不等于零")}},ok_share:function(){for(var t=null,e=0,i=this.SelectRow.length;e<i;e++)console.log(this.SelectRow[e]),null!=this.SelectRow[e].CurrentQuantity&&""!=this.SelectRow[e].CurrentQuantity&&(t+=Number(this.SelectRow[e].CurrentQuantity));if(null!=t)for(e=0,i=this.SelectRow.length;e<i;e++)null!=this.SelectRow[e].CurrentQuantity&&""!=this.SelectRow[e].CurrentQuantity&&(this.SelectRow[e].Weight=(this.SelectRow[e].CurrentQuantity*(this.sharevalue/t)).toFixed(2))},GetBoxesdates:function(){var t=this;Object(s.j)().then(function(e){console.log(e),t.applydata=e})},detailelist:function(){if(this.printlist.length>0){var t=Object(c.f)()["清单打印"],e=-1!=t.Url.indexOf("http");t.Url=1==e?t.Url:this.printurl+t.Url;var i={setting:t,data:[{waybill:this.waybillinfo,listdata:this.printlist}]};Object(c.q)(i)}},Labelprint:function(){console.log(this.SelectRow);var t=this.SelectRow,e=[];if(t.length<=0)this.$Message.error("请选择要操作的产品项");else{for(var i=0;i<t.length;i++){t[i].Inputs,t[i].StandardProducts;var l={Quantity:t[i].CurrentQuantity,inputsID:t[i].Input.SortingID,Catalog:t[i].Product.Catalog,PartNumber:t[i].Product.PartNumber,Manufacturer:t[i].Product.Manufacturer,Packing:t[i].Product.Packing,PackageCase:t[i].Product.PackageCase,origin:t[i].originDes,SourceDes:this.details.waybillinfo.SourceDes};e.push(l)}var a=Object(c.f)()["产品标签"],s=-1!=a.Url.indexOf("http");a.Url=1==s?a.Url:this.printurl+a.Url;var o={setting:a,data:e};Object(c.q)(o)}},finish_btn:function(){this.SelectRow.length<=0?this.$Message.error("请选择要分拣的产品"):this.WarehousingMsg=!0},setWarehousing:function(t){var e=this;Object(o.B)(t).then(function(t){if(console.log(t),1==t.Success){e.$Message.success("出库完成，一秒后自动关闭");var i=e;setTimeout(function(){i.$store.dispatch("setshowtype",0),i.$store.dispatch("setshowdetailout",!1),i.$router.go(-1)},1e3)}else e.$Message.error("出库操作失败,请从新操作"),e.isdisabled=!1})},getCookie:function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var l=e[i].split("=");if(t==l[0])return l[1]}return""},ok_Warehousing:function(){1==this.issharevalue&&this.ok_share(),console.log(this.issharevalue),this.isdisabled=!0,this.WarehousingMsg=!1,this.pusharr=[];for(var t=0,e=this.SelectRow.length;t<e;t++){var i={NoticeID:this.SelectRow[t].ID,OutputID:this.SelectRow[t].OutputID,BoxCode:this.newboxcodeback,Quantity:this.SelectRow[t].CurrentQuantity,Weight:this.SelectRow[t].Weight,NetWeight:this.SelectRow[t].NetWeight,Volume:this.SelectRow[t].Pickings.Volume,Files:this.SelectRow[t].Imagefiles};this.pusharr.push(i)}var l={Waybill:{ID:this.waybillinfo.ID,ExcuteStatus:this.waybillinfo.ExcuteStatus,Type:this.waybillinfo.Type,OrderID:this.waybillinfo.OrderID,CarrierID:this.waybillinfo.CarrierID,Summary:"",Driver:this.waybillinfo.Driver,CarNumber1:this.waybillinfo.CarNumberID,Files:this.waybillinfo.FeliverGoodFile,LoadingExcuteStatus:this.waybillinfo.LoadingExcuteStatus,WarehouseID:this.warehouseID,Code:this.waybillinfo.Code},AdminID:sessionStorage.getItem("userID"),Pickings:this.pusharr};this.setWarehousing(l)},cancel_Warehousing:function(){this.WarehousingMsg=!1,this.oldboxcode=null,this.BoxcodeDelete()},errorstatue:function(t){1==t?this.isAbnormal=!0:(this.isAbnormal=!1,this.Summary="")},Abnormal_btn:function(){var t=this;if(void 0==this.Summary||""==this.Summary)this.isAbnormal=!0,this.$Message.error("请输入异常原因");else{this.isdisabled=!0,this.isAbnormal=!1;var e={waybillid:this.waybillinfo.ID,adminid:sessionStorage.getItem("userID"),orderid:this.waybillinfo.OrderID,summary:this.Summary};console.log(e),Object(o.A)(e).then(function(e){if(1==e.Success){t.$Message.success("出库完成，一秒后自动关闭");var i=t;setTimeout(function(){i.$store.dispatch("setshowtype",0),i.$store.dispatch("setshowdetailout",!1),i.$router.go(-1)},1e3)}else t.$Message.error("出库操作失败,请从新操作"),t.isdisabled=!1}),this.isAbnormal=!1}},closeerror:function(){this.isAbnormal=!1,this.Summary="",this.Reason="外观损坏"},handleRemove:function(t,e){var i=this,l={id:t.ID};Object(o.l)(l).then(function(l){1==l.Success?(i.IsfileDel=!0,i.Removebackfun(t,e),i.$Message.success("删除成功")):(i.IsfileDel=!1,i.$Message.error("删除失败"))})},Removebackfun:function(t,e){if("Clientimg"==e)this.waybillinfo.SendGoodsFile.splice(this.waybillinfo.SendGoodsFile.indexOf(t),1);else if("Waybill"==e)this.waybillinfo.FeliverGoodFile.splice(this.waybillinfo.FeliverGoodFile.indexOf(t),1);else for(var i=this.detailitem,l=0;l<i.length;l++)i[l].ID==e.ID&&(i[l].Imagefiles.splice(t,1),this.changeoriginalarr(i[l]))},changeacrrier:function(t){this.waybillinfo.CarrierName=t.label,2==this.waybillinfo.Type&&this.GetDriversCars(t.value)},search_pro:function(){var t=this;this.loading=!0,""!=this.searchkey?Object(o.r)(this.waybillinfo.ID,this.searchkey).then(function(e){if(e.length>0){for(var i=t.detailitem,l=[],a=(new Array,0);a<i.length;a++)for(var s=i[a].ID,o=0;o<e.length;o++){s==e[o].ID&&l.push(i[a])}t.detailitem=l}else t.detailitem=[]}):this.detailitem=this.originalarr,this.loading=!1},CgAllprint:function(){-1!=this.fruit.indexOf("出库单打印")&&this.outorder_print(),-1!=this.fruit.indexOf("送货单打印")&&this.Boxing_print()},outorder_print:function(){var t={waybillinfo:this.waybillinfo,listdata:this.detailitem};Object(c.l)(t)},Boxing_print:function(){var t=null;-1!=this.warehouseID.indexOf("SZ")?4==this.waybillinfo.Type||3==this.waybillinfo.Type?(this.language="SC",t=2):(this.language="SC",t=4):4==this.waybillinfo.Type?(this.language="EN",t=2):3==this.waybillinfo.Type?(this.language="TC",t=2):(this.language="TC",t=4);var e={Language:this.language,waybillinfo:this.waybillinfo,listdata:this.detailitem,Numcopies:t};Object(c.i)(e)},PrintBoxcode:function(){var t={Source:this.waybillinfo.Source,waybillID:this.waybillinfo.ID};this.showprintboxcode=!0,this.$refs.printbox.getparents(t),this.$refs.printbox.GetPackageType()},fileprint:function(t){var e=Object(c.f)()["文档打印"];e.Url=t;var i=e;Object(c.a)(i)},clackFilesProcess:function(t){var e={Url:t};Object(c.b)(e)},Getclientdata:function(t){var e=this;Object(o.U)(t).then(function(t){console.log(t),e.clientGrade=t.obj.Grade})},TestAVGWeightsum:function(){if(null!=this.sharevalue){0==/^\d+(\.\d{0,5})?$/.test(this.sharevalue)||0==this.sharevalue?(this.$Message.error("请输入数字,小数点保留五位，且不等于零"),this.sharevalue=null):(this.sharevalue<.5*this.AVGWeightsum||this.sharevalue>1.5*this.AVGWeightsum)&&this.$Modal.warning({title:"超过浮动50%！"})}},logchange:function(){this.showlogged=!0,this.loggdetime=(new Date).getTime()},changeData:function(t){this.saleDate=t,""!=this.newboxcode&&null!=this.newboxcode&&this.handleCreate1(this.newboxcode)}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[t._v("基础信息")]),t._v(" "),i("div",{staticStyle:{width:"100%","min-height":"200px",background:"#f5f7f9",margin:"15px 0"}},[null!=t.waybillinfo?i("Row",[i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li detail1"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("ID：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.ID))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("状       态：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.ExcuteStatusName)+"\n                  "),null!=t.waybillinfo.ID?i("Button",{attrs:{icon:"md-calendar",type:"success",size:"small"},on:{click:t.logchange}},[t._v("日志管理")]):t._e()],1)]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("业务类型：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.SourceName))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("总  货  值：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v(t._s(t.waybillinfo.chgTotalCurrency)+" "+t._s(t.waybillinfo.chgTotalPrice))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title1"},[t._v("是否逾期：")]),t._v(" "),1==t.waybillinfo.overDue?i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("是")]):i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("否")])]),t._v(" "),void 0!=t.waybillinfo.Condition?i("li",{staticClass:"itemli"},[i("Icon",{staticStyle:{"font-size":"22px",color:"#da2828"},attrs:{type:"md-alert"}}),t._v(" "),1==t.waybillinfo.Condition.AgencyCheck?i("Tag",{attrs:{color:"geekblue"}},[t._v("代检查")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.AgencyPayment?i("Tag",{attrs:{color:"purple"}},[t._v("代垫货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.AgencyReceive?i("Tag",{attrs:{color:"blue"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.ChangePackaging?i("Tag",{attrs:{color:"cyan"}},[t._v("代收货款")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.LableServices?i("Tag",{attrs:{color:"green"}},[t._v("标签服务")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.PayForFreight?i("Tag",{attrs:{color:"gold"}},[t._v("垫付运费")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.Repackaging?i("Tag",{attrs:{color:"orange"}},[t._v("重新包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.UnBoxed?i("Tag",{attrs:{color:"volcano"}},[t._v("拆箱验货")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.VacuumPackaging?i("Tag",{attrs:{color:"red"}},[t._v("真空包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.WaterproofPackaging?i("Tag",{attrs:{color:"magenta"}},[t._v("防水包装")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.QualityInspection?i("Tag",{attrs:{color:"lime"}},[t._v("质检")]):t._e(),t._v(" "),1==t.waybillinfo.Condition.Unboxing?i("Tag",{attrs:{color:"yellow"}},[t._v("拆包装")]):t._e()],1):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"23%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("制单时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.waybillinfo.CreateDate)))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2",staticStyle:{float:"left"}},[t._v("供  应  商：")]),t._v(" "),i("span",{staticStyle:{display:"inline-block",width:"78%","line-height":"1"}},t._l(t.waybillinfo.Supplier,function(e,l){return i("p",[t._v(t._s(e.Supplier)+"  "),i("Tag",{attrs:{color:"volcano"}},[t._v("LV "+t._s(e.SupplierGrade))])],1)}),0)]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("发货方式：")]),t._v(" "),-1!=t.warehouseID.indexOf("SZ")||1==t.waybillinfo.Type||2==t.waybillinfo.Type?i("span",[t._v(t._s(t.waybillinfo.TypeName))]):i("Select",{staticStyle:{width:"40%"},on:{"on-change":t.changewaybillType},model:{value:t.waybillinfo.Type,callback:function(e){t.$set(t.waybillinfo,"Type",e)},expression:"waybillinfo.Type"}},t._l(t.TypeArr,function(e,l){return i("Option",{key:l,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("总  额  度：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("CNY "+t._s(t.waybillinfo.total))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("总  欠  款：")]),t._v(" "),i("span",{staticStyle:{color:"'#ccc'","font-width":"600"}},[t._v("CNY "+t._s(t.waybillinfo.totalDebt))])]),t._v(" "),i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title2"},[t._v("特殊标签：")]),t._v(" "),i("span",{staticStyle:{"line-height":"20px",width:"70%",display:"inline-block"}},t._l(t.waybillinfo.LableFile,function(e,l){return i("div",[i("a",[t._v(t._s(e.CustomName))]),t._v(" "),i("a",{on:{click:function(i){return t.fileprint(e.Url)}}},[t._v("打印")])])}),0)]),t._v(" "),2==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("随货文件：")]),t._v(" "),i("span",t._l(t.waybillinfo.Files,function(e,l){return i("div",[i("span",[t._v(t._s(e.CustomName))]),t._v(" "),i("a",{on:{click:function(i){return t.fileprint(e.Url)}}},[t._v("打印")])])}),0)]):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"30%",float:"left"}},[i("ul",{staticClass:"detail_li"},[i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("客  户  编  号：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.EnterCode)+"（"+t._s(t.waybillinfo.ClientName)+"）"),i("Tag",{attrs:{color:"geekblue"}},[t._v("LV "+t._s(t.clientGrade))])],1)]),t._v(" "),1==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("自提时间：")]),t._v(" "),i("span",[t._v(t._s(t._f("showDateexact")(t.waybillinfo.AppointTime)))])]):t._e(),t._v(" "),1==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("联    系    人：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.coeContact))])]):t._e(),t._v(" "),1==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("提货人证件：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.IDTypeName)+"（"+t._s(t.waybillinfo.IDNumber)+"）")])]):t._e(),t._v(" "),1==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("提货人电话：")]),t._v(" "),i("span",[t._v(t._s(t.waybillinfo.coePhone))])]):t._e(),t._v(" "),1!=t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("运单号(本次)：")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{disabled:!0},model:{value:t.waybillinfo.Code,callback:function(e){t.$set(t.waybillinfo,"Code",e)},expression:"waybillinfo.Code"}})],1)]):t._e(),t._v(" "),1!=t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("承运商(本次)：")]),t._v(" "),i("span",[i("Select",{staticStyle:{width:"60%"},attrs:{"label-in-value":!0,disabled:!0},on:{"on-change":t.changeacrrier},model:{value:t.waybillinfo.CarrierID,callback:function(e){t.$set(t.waybillinfo,"CarrierID",e)},expression:"waybillinfo.CarrierID"}},t._l(t.CarrierList,function(e){return i("Option",{key:e.ID,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1)]):t._e(),t._v(" "),2==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("司            机：")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{disabled:!0},model:{value:t.waybillinfo.Driver,callback:function(e){t.$set(t.waybillinfo,"Driver",e)},expression:"waybillinfo.Driver"}})],1)]):t._e(),t._v(" "),2==t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("车    牌    号：")]),t._v(" "),i("span",[i("Input",{staticStyle:{width:"60%"},attrs:{disabled:!0},model:{value:t.waybillinfo.CarNumberID,callback:function(e){t.$set(t.waybillinfo,"CarNumberID",e)},expression:"waybillinfo.CarNumberID"}})],1)]):t._e(),t._v(" "),1!=t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3",staticStyle:{float:"left"}},[t._v("收  货  地  址：")]),t._v(" "),i("span",{staticStyle:{display:"inline-block","max-width":"60%","line-height":"20px"}},[i("i",[t._v(" "+t._s(t.waybillinfo.CoeAddress))])])]):t._e(),t._v(" "),2!=t.waybillinfo.Type?i("li",{staticClass:"itemli"},[i("span",{staticClass:"detail_title3"},[t._v("随  货  文  件：")]),t._v(" "),t._l(t.waybillinfo.Files,function(e,l){return i("div",{staticStyle:{display:"inline-block"}},[i("span",[t._v(t._s(e.CustomName))]),t._v(" "),i("a",{on:{click:function(i){return t.fileprint(e.Url)}}},[t._v("打印")])])})],2):t._e()])]),t._v(" "),i("Col",{staticStyle:{width:"20%",float:"left"}},[i("ul",{staticClass:"detail_li",staticStyle:{"margin-left":"20px"}},[215!=t.waybillinfo.ExcuteStatus?i("li",{staticClass:"itemli"},[i("span",{staticStyle:{float:"left","line-height":"27px"}},[t._v("发货情况拍照：")]),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("传照")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("拍照")])],1)]):t._e(),t._v(" "),2==t.waybillinfo.Type&&215==t.waybillinfo.ExcuteStatus||1==t.waybillinfo.Type&&215==t.waybillinfo.ExcuteStatus?i("li",{staticClass:"itemli",staticStyle:{"padding-top":"10px",clear:"both"}},[i("span",{staticStyle:{float:"left","line-height":"27px"}},[t._v("送 货 单 拍 照：")]),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Clientimg")}}},[t._v("传照")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Clientimg")}}},[t._v("拍照")])],1)]):t._e(),t._v(" "),i("li",{staticStyle:{clear:"both"}},[i("p",[t._v("发货情况照片：")]),t._v(" "),t._l(t.waybillinfo.FeliverGoodFile,function(e,l){return i("div",[8010==e.Type?i("div",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,"Waybill")}}})],1):t._e()])}),t._v(" "),2==t.waybillinfo.WaybillType&&215==t.waybillinfo.ExcuteStatus||1==t.waybillinfo.WaybillType&&215==t.waybillinfo.ExcuteStatus?i("p",[t._v("送货单照片：")]):t._e(),t._v(" "),t._l(t.waybillinfo.SendGoodsFile,function(e,l){return i("div",[8020==e.Type?i("div",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,"Clientimg")}}})],1):t._e()])})],2)])])],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"itembox"},[i("p",{staticClass:"detailtitle"},[t._v("产品清单")]),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("ButtonGroup",{staticStyle:{width:"28%"}},[i("Input",{staticStyle:{width:"80%",float:"left",position:"relative",left:"3px"},attrs:{placeholder:"请输入品牌或型号",clearable:""},on:{"on-clear":t.search_pro},model:{value:t.searchkey,callback:function(e){t.searchkey="string"==typeof e?e.trim():e},expression:"searchkey"}}),t._v(" "),i("Button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.search_pro}},[t._v("筛选")])],1),t._v(" "),-1==t.warehouseID.indexOf("SZ")?i("Button",{attrs:{type:"primary",disabled:215==t.waybillinfo.ExcuteStatus},on:{click:t.clickshowchangebox}},[t._v("一键入箱")]):t._e(),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){t.showprint=!0}}},[t._v("一键打印")]),t._v(" "),i("Button",{attrs:{type:"primary",disabled:215==t.waybillinfo.ExcuteStatus},on:{click:t.PrintBoxcode}},[t._v("箱签打印")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","in",t.waybillinfo.Source)}}},[t._v("收入")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.showBudget("meet","out",t.waybillinfo.Source)}}},[t._v("支出")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("Button",{attrs:{type:"primary",shape:"circle",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.finish_btn}},[t._v("完成分拣")]),t._v(" "),-1==t.warehouseID.indexOf("HK")?i("Button",{attrs:{disabled:1==t.isdisabled,type:"warning",shape:"circle",icon:"ios-alert-outline"},on:{click:function(e){t.isAbnormal=!0}}},[t._v("分拣异常")]):t._e()],1)],1),t._v(" "),i("div",[i("div",{staticClass:"detail_tablebox"},[i("Table",{ref:"selection",attrs:{columns:t.tabletitle,data:t.detailitem,loading:t.loading},on:{"on-selection-change":t.handleSelectRow},scopedSlots:t._u([{key:"PartNumber",fn:function(e){var l=e.row;return e.index,[i("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{width:"120px",overflow:"hidden"}},[i("span",[t._v(t._s(l.Product.PartNumber))])]),t._v(" "),null!=l.Conditions?i("ul",{staticStyle:{float:"right"}},[i("li",[1==l.Conditions.IsCIQ?i("Tag",{attrs:{color:"primary"}},[t._v("商检")]):t._e()],1),t._v(" "),i("li",[1==l.Conditions.IsCCC?i("Tag",{attrs:{color:"warning"}},[t._v("CCC")]):t._e()],1),t._v(" "),i("li",[1==l.Conditions.IsEmbargo?i("Tag",{attrs:{color:"error"}},[t._v("禁运")]):t._e()],1),t._v(" "),i("li",[1==l.Conditions.IsHighPrice?i("Tag",{attrs:{color:"magenta"}},[t._v("高价值")]):t._e()],1)]):t._e()])]}},{key:"TinyOrderID",fn:function(e){var l=e.row;return e.index,[i("p",[t._v(t._s(l.TinyOrderID))])]}},{key:"Boxing_code",fn:function(e){var l=e.row;return e.index,[-1!=t.warehouseID.indexOf("SZ")?i("span",[t._v(t._s(l.BoxCode))]):i("div",{staticStyle:{display:"inline-block"}},[i("Input",{attrs:{disabled:!0},model:{value:l.BoxCode,callback:function(e){t.$set(l,"BoxCode",e)},expression:"row.BoxCode"}})],1)]}},{key:"imglist",fn:function(e){var l=e.row;return e.index,t._l(l.Imagefiles,function(e){return i("p",{staticClass:"Filesbox"},[i("span",{staticClass:"linkurlcolor",on:{click:function(i){return t.clackFilesProcess(e.Url)}}},[t._v(t._s(e.CustomName))]),t._v(" "),i("Icon",{ref:l.ID,refInFor:!0,attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e,l)}}})],1)})}},{key:"operation",fn:function(e){var l=e.row;return e.index,[i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload",disabled:1==l._disabled},on:{click:function(e){return t.SeletUpload(l)}}},[t._v("传照")])],1),t._v(" "),i("div",{staticClass:"setupload"},[i("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera",disabled:1==l._disabled},on:{click:function(e){return t.fromphotos(l)}}},[t._v("拍照")])],1)]}}])}),t._v(" "),i("div",{staticClass:"successbtn",staticStyle:{"margin-top":"20px"}},[i("Button",{attrs:{type:"primary",icon:"md-checkmark",disabled:1==t.isdisabled},on:{click:t.finish_btn}},[t._v("完成分拣")]),t._v(" "),-1==t.warehouseID.indexOf("HK")?i("Button",{attrs:{type:"warning",icon:"ios-alert-outline",disabled:1==t.isdisabled},on:{click:function(e){t.isAbnormal=!0}}},[t._v("分拣异常")]):t._e()],1)],1)])])]),t._v(" "),i("Modal",{attrs:{width:"55%",closable:!1,"mask-closable":!1,"footer-hide":!0},model:{value:t.Budgetdetail,callback:function(e){t.Budgetdetail=e},expression:"Budgetdetail"}},[i("div",{staticStyle:{position:"absolute",right:"20px","z-index":"99999",width:"30px"}},[i("Icon",{staticStyle:{float:"right","font-size":"30px","font-weight":"bold"},attrs:{type:"ios-close"},on:{click:t.closeBudget}})],1),t._v(" "),i("div",[i("router-view")],1)]),t._v(" "),i("Modal",{attrs:{title:"一键入箱","mask-closable":!1},on:{"on-visible-change":t.changeshowbox},model:{value:t.showchangebox,callback:function(e){t.showchangebox=e},expression:"showchangebox"}},[i("span",{attrs:{slot:"close"},slot:"close"},[i("Icon",{attrs:{type:"ios-close"},on:{click:t.cancel}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("日       期：\n      ")]),t._v(" "),i("DatePicker",{staticStyle:{width:"80%"},attrs:{type:"date",options:t.options3,placeholder:"请选择生成箱号的时间",clearable:!1,value:t.saleDate},on:{"on-change":t.changeData}})],1),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("箱       号：\n    ")]),t._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30",placeholder:"请输入临时箱号"},on:{"on-blur":function(e){return t.handleCreate1(t.newboxcode,e)}},model:{value:t.newboxcode,callback:function(e){t.newboxcode="string"==typeof e?e.trim():e},expression:"newboxcode"}})],1),t._v(" "),1==t.issharevalue?i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("重量(Kg)： ")]),t._v(" "),i("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入重量"},on:{"on-blur":t.TestAVGWeightsum,"on-enter":t.TestAVGWeightsum},model:{value:t.sharevalue,callback:function(e){t.sharevalue=e},expression:"sharevalue"}})],1):t._e(),t._v(" "),i("p",{staticStyle:{"padding-top":"10px"}},[i("label",[i("em",{staticClass:"Mustfill"},[t._v(" ")]),t._v("推算重量(Kg)： ")]),t._v(" "),i("span",[t._v(t._s(t.AVGWeightsum))])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.ok_changebox}},[t._v("确定")])],1)]),t._v(" "),1==t.WarehousingMsg?i("div",[i("Modal",{attrs:{title:"确定分拣"},on:{"on-ok":t.ok_Warehousing,"on-cancel":t.cancel_Warehousing},model:{value:t.WarehousingMsg,callback:function(e){t.WarehousingMsg=e},expression:"WarehousingMsg"}},[i("div",[i("span",[t._v("是否确认分拣")])])])],1):t._e(),t._v(" "),i("Modal",{attrs:{title:"出库异常"},on:{"on-visible-change":t.errorstatue},model:{value:t.isAbnormal,callback:function(e){t.isAbnormal=e},expression:"isAbnormal"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"18px"},attrs:{type:"md-close",color:"rgb(33, 28, 28)"},on:{click:t.closeerror}})],1),t._v(" "),i("span",{staticStyle:{"line-height":"1",display:"block","padding-bottom":"10px"}},[i("em",{staticClass:"Mustfill"},[t._v("*")]),t._v("分拣异常原因\n      ")]),t._v(" "),i("Input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:t.Summary,callback:function(e){t.Summary=e},expression:"Summary"}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.closeerror}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.Abnormal_btn}},[t._v("确定")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"打印"},on:{"on-ok":t.CgAllprint,"on-cancel":t.cancel},model:{value:t.showprint,callback:function(e){t.showprint=e},expression:"showprint"}},[i("CheckboxGroup",{model:{value:t.fruit,callback:function(e){t.fruit=e},expression:"fruit"}},[i("Checkbox",{attrs:{label:"出库单打印"}}),t._v(" "),i("Checkbox",{attrs:{label:"送货单打印"}})],1)],1),t._v(" "),i("Modal",{attrs:{title:"箱签打印",width:"80","mask-closable":!1},model:{value:t.showprintboxcode,callback:function(e){t.showprintboxcode=e},expression:"showprintboxcode"}},[i("Print-boxcode",{ref:"printbox"})],1),t._v(" "),i("Modal",{attrs:{"footer-hide":!0,"mask-closable":!1,width:"60"},model:{value:t.showlogged,callback:function(e){t.showlogged=e},expression:"showlogged"}},[i("div",{attrs:{slot:"close"},slot:"close"},[i("Icon",{staticStyle:{"font-size":"21px",color:"#cccccc","padding-top":"5px"},attrs:{type:"ios-close-circle-outline"}})],1),t._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px",color:"#1aaff7"}},[t._v("日志管理")])]),t._v(" "),t.showlogged?i("logg-ed",{key:t.loggdetime,ref:"logged",attrs:{WaybillID:t.waybillinfo.ID}}):t._e()],1)],1)},staticRenderFns:[]};var b=i("VU/8")(f,v,!1,function(t){i("Tjgq")},"data-v-5c1bc9f2",null);e.default=b.exports},Tjgq:function(t,e){}});
//# sourceMappingURL=35.c17948379e40736660c7.js.map