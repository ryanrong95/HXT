webpackJsonp([59],{WQkh:function(t,e){},gKNe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("t32H"),i=a("3PyT"),r=a("gyMJ"),o=a("dciI"),n=a("PJh5"),c=a.n(n),l=a("FHte"),u={inject:["reload"],name:"Outgoing",components:{"Customs-window":s.default},data:function(){return{warehouseID:sessionStorage.getItem("UserWareHouse"),isshowstate:!0,search_data2:{warehouseid:sessionStorage.getItem("UserWareHouse"),PageIndex:1,PageSize:10,CustomName:"",status:"",key:"",partnumber:"",source:1,startdate:"",enddate:""},search_data:{WareHouseID:sessionStorage.getItem("UserWareHouse"),Key:"",Client:"",ProductPartNumber:"",WaybillExcuteStatus:"",Source:1,StartDate:"",EndDate:"",PageSize:10,PageIndex:1},testarrstate:[10],istagall:0,printurl:l.pfwms,Total:0,PageIndex:1,pagesize:10,loading:!0,timer3:0,Printing_data:"all_Printing",details:{WaybillNo:"90416165067",Carrier:"yunda",CarrierList:[{value:"shunfeng",label:"顺丰快递"},{value:"yunda",label:"韵达快递"},{value:"lianbang",label:"联邦快递"},{value:"ems",label:"EMS"}],Conveyorsite:"美国"},CustomName:"",Supplier:"",model1:"",orderID:"",Model:"",startdat:"",enddate:"",source:"",NoticeStatus:[],NoticeType:[],columns1:[{title:"订单号/运输批次",slot:"OrderID",align:"center",width:180},{title:"业务类型",slot:"Sourcetype",align:"center"},{title:"送货方式",slot:"WaybillTypeDescription",align:"center"},{title:"客户名称",key:"ClientName",align:"center"},{title:"运单号",key:"Code",align:"center"},{title:"承运商",key:"CarrierName",align:"CarrierName"},{title:"供应商",key:"Supplier",align:"center"},{title:"制单时间",slot:"CreateDate",align:"center"},{title:"状态",key:"ExcuteStatusDescription",align:"center"},{title:"操作",slot:"action",align:"center"}],data1:[],value1:!1,settimeouts:null,timenmae:null}},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return c()(+e).format("YYYY-MM-DD")}}},computed:{showdetail:function(){return this.$store.state.common.showdetailout,this.$store.state.common.showdetailout},showtype:function(){return this.$store.state.common.showtypeout}},created:function(){10==this.$route.params.id?(this.testarrstate=[10],this.search_data.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!0):(this.testarrstate=[215],this.search_data.WaybillExcuteStatus=this.testarrstate.join(","),this.isshowstate=!1)},beforeRouteUpdate:function(t,e,a){"/Outgoing/10"==e.fullPath&&"/Outgoing/215"==t.fullPath?this.reload():"/Outgoing/215"==e.fullPath&&"/Outgoing/10"==t.fullPath?this.reload():clearInterval(this.timenmae),a()},watch:{$route:function(t,e){console.log(t.path);"/Outgoing/10"==t.path||"/Outgoing/215"==t.path?this.pickingsout(this.search_data):this.clear_time()}},mounted:function(){this.setnva(),this.getstatus(),this.pickingsout(this.search_data),-1!=this.warehouseID.indexOf("SZ")&&(this.columns1[0].title="订单号 /运单ID")},methods:{new_time:function(){var t=this;this.timenmae=setInterval(function(){setTimeout(function(){t.pickingsout(t.search_data)},0)},3e3)},clear_time:function(){clearInterval(this.timenmae),this.timenmae=null},dyncMount:function(){this.$store.dispatch("setshowdetailout",!0),this.$store.dispatch("setshowtype",3),this.timer3=(new Date).getTime(),this.$router.push({path:"/Outgoing/Customswindow"})},showDrawer:function(t,e){this.$store.dispatch("setshowdetailout",!0),30==e?(this.$store.dispatch("setshowtype",2),this.$router.push({path:"/Outgoing/OutDeclareDetail/"+t})):35==e&&-1!=this.warehouseID.indexOf("SZ")?(this.$store.dispatch("setshowtype",2),this.$router.push({path:"/Outgoing/Szoutgoing/"+t})):35==e&&-1!=this.warehouseID.indexOf("HK")?(this.$store.dispatch("setshowtype",2),this.$router.push({path:"/Outgoing/OutDeclareDetail/"+t})):60==e?-1==this.warehouseID.indexOf("HK")?(this.$store.dispatch("setshowtype",2),this.$router.push({path:"/Outgoing/OutDeclareDetail/"+t})):(this.$store.dispatch("setshowtype",2),this.$router.push({path:"/Outgoing/TurnDeclareDetail/"+t})):(this.$store.dispatch("setshowtype",1),this.$router.push({name:"outdetail",params:{wayBillID:t}}))},closDrawer:function(){this.$router.go(-1),this.$store.dispatch("setshowdetailout",!1)},setnva:function(){this.$store.dispatch("setnvadata",[{title:"出库",href:"/Warehousing"}])},outorderprint:function(){var t=Object(i.f)()["出库通知打印"],e=(window.location.protocol,window.location.host,"http://hv.warehouse.b1b.com"+t.Url);t.Url=e;var a={setting:t,data:[{name:"1111"}]};Object(i.q)(a)},serch_btn:function(){""!=this.search_data.Client||""!=this.search_data.Key||""!=this.search_data.ProductPartNumber||""!=this.search_data.Source||""!=this.search_data.EndDate||""!=this.search_data.EndDate?(this.search_data.PageIndex=1,this.pickingsout(this.search_data),this.loading=!0):this.$Message.error("请至少输入一个查询条件")},clear_btn:function(){if(""!=this.search_data.Client||""!=this.search_data.Key||""!=this.search_data.ProductPartNumber||""!=this.search_data.Source||""!=this.search_data.EndDate||""!=this.search_data.EndDate){var t=this.testarrstate.join(",");this.search_data={WareHouseID:sessionStorage.getItem("UserWareHouse"),Key:"",Client:"",ProductPartNumber:"",WaybillExcuteStatus:t,Source:1,StartDate:"",EndDate:"",PageSize:10,PageIndex:1},this.$refs.element.handleClear(),this.pickingsout(this.search_data)}},changedata:function(t){this.search_data.StartDate=t[0],this.search_data.EndDate=t[1]},changepage:function(t){this.loading=!0,this.PageIndex=t,this.search_data.PageIndex=t,this.pickingsout(this.search_data)},pickingsout:function(t){var e=this;Object(o._20)(t).then(function(t){t.obj.Data!=[]&&(e.loading=!1,e.data1=t.obj.Data,e.Total=t.obj.Total)})},getstatus:function(){var t=this;Object(r.s)().then(function(e){t.NoticeType=e.obj}),Object(r.N)().then(function(e){t.NoticeStatus=e.obj})},sumbit_print:function(){var t=Object(i.f)()["装箱单打印"],e=-1!=t.Url.indexOf("http");t.Url=1==e?t.Url:this.printurl+t.Url;var a={setting:t,data:[{name:"11111"}]};Object(i.q)(a)},testarrs:function(t){10==t?-1==this.testarrstate.indexOf(t)?(this.testarrstate=[],this.testarrstate.push(t),this.istagall=!0):this.istagall=!1:(this.testarrstate=this.testarrstate.filter(function(t){return 10!=t}),this.istagall=!1,-1==this.testarrstate.indexOf(t)?this.testarrstate.push(t):(this.testarrstate=this.testarrstate.filter(function(e){return e!=t}),0==this.testarrstate.length&&this.testarrstate.push(10)));this.testarrstate.join(",");this.search_data.WaybillExcuteStatus=this.testarrstate.join(","),this.serch_btn()},closeTimer:function(){window.clearInterval(this.settimeouts),this.settimeouts=null}},beforeDestroy:function(){this.clear_time()},destroyed:function(){this.clear_time()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[1==t.isshowstate?a("div",{staticClass:"shaixuanbox"},[a("em",{staticClass:"title"},[t._v("快速筛选：")]),t._v(" "),t._l(t.NoticeStatus,function(e){return a("span",{key:e.value,class:-1!==t.testarrstate.indexOf(e.value)&&!t.istagall||10==e.value&&t.istagall?"item_status":"item_status2",on:{click:function(a){return t.testarrs(e.value)}}},[t._v(t._s(e.name))])})],2):t._e()]),t._v(" "),a("div",{},[-1==t.warehouseID.indexOf("SZ")?a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"订单号/运单号"}},[t._v("运单号/入仓号/订单号/运输批次：")]),t._v(" "),a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"运单号/入仓号/订单号/运输批次"},model:{value:t.search_data.Key,callback:function(e){t.$set(t.search_data,"Key","string"==typeof e?e.trim():e)},expression:"search_data.Key"}})],1):a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"订单号/运单号"}},[t._v("运单号/入仓号/订单号/ID：")]),t._v(" "),a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"运单号/入仓号/订单号/ID"},model:{value:t.search_data.Key,callback:function(e){t.$set(t.search_data,"Key","string"==typeof e?e.trim():e)},expression:"search_data.Key"}})],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"客户"}},[t._v("客户：")]),t._v(" "),a("Input",{staticClass:"inputitems",attrs:{placeholder:"客户"},model:{value:t.search_data.Client,callback:function(e){t.$set(t.search_data,"Client","string"==typeof e?e.trim():e)},expression:"search_data.Client"}})],1),t._v(" "),a("p",{staticClass:"inputwidth"},[a("label",{attrs:{for:"产品型号："}},[t._v("产品型号：")]),t._v(" "),a("Input",{staticClass:"inputitems",attrs:{placeholder:"产品型号"},model:{value:t.search_data.ProductPartNumber,callback:function(e){t.$set(t.search_data,"ProductPartNumber","string"==typeof e?e.trim():e)},expression:"search_data.ProductPartNumber"}})],1),t._v(" "),a("div",{staticClass:"inputwidth"},[a("label",{staticStyle:{float:"left","line-height":"32px"},attrs:{for:"业务类型"}},[t._v("业务类型：")]),t._v(" "),a("Select",{staticStyle:{float:"left",width:"200px"},attrs:{placeholder:"业务类型"},model:{value:t.search_data.Source,callback:function(e){t.$set(t.search_data,"Source","string"==typeof e?e.trim():e)},expression:"search_data.Source"}},t._l(t.NoticeType,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left","padding-right":"20px"}},[a("label",{attrs:{for:"开始时间与结束时间"}},[t._v("开始时间与结束时间：  ")]),t._v(" "),a("DatePicker",{ref:"element",staticStyle:{},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择开始与结束时间",separator:"  至  "},on:{"on-change":t.changedata}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.serch_btn}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",icon:"ios-trash"},on:{click:t.clear_btn}},[t._v("清空")])],1)]),t._v(" "),a("div",{staticStyle:{width:"100%",display:"inline-block","margin-top":"20px"}}),t._v(" "),a("div",{staticStyle:{width:"100%",display:"inline-block","margin-top":"20px"}},[a("Table",{attrs:{columns:t.columns1,data:t.data1,loading:t.loading},scopedSlots:t._u([{key:"OrderID",fn:function(e){var s=e.row;return e.index,[-1==t.warehouseID.indexOf("SZ")?a("p",[null!=s.LotNumber?a("span",[t._v(t._s(s.LotNumber))]):a("span",[t._v(t._s(s.OrderID))])]):a("p",[null!=s.OrderID?a("span",[t._v(t._s(s.OrderID))]):a("span",[t._v(t._s(s.ID))])])]}},{key:"Sourcetype",fn:function(e){var s=e.row;return e.index,[10==s.Source?a("Tag",{attrs:{color:"#009688"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),20==s.Source?a("Tag",{attrs:{color:"#2F4056"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),30==s.Source?a("Tag",{attrs:{color:"#FF5722"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),40==s.Source?a("Tag",{attrs:{color:"#1E9FFF"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),50==s.Source?a("Tag",{attrs:{color:"#FFA2D3"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),60==s.Source?a("Tag",{attrs:{color:"#FFA2D3"}},[t._v(t._s(s.SourceDescription))]):t._e(),t._v(" "),35==s.Source?a("Tag",{attrs:{color:"volcano"}},[t._v(t._s(s.SourceDescription))]):t._e()]}},{key:"WaybillTypeDescription",fn:function(e){var a=e.row;return e.index,[t._v(t._s(a.WaybillTypeDescription))]}},{key:"CreateDate",fn:function(e){var a=e.row;return e.index,[t._v(t._s(t._f("showDateexact")(a.CreateDate)))]}},{key:"action",fn:function(e){var s=e.row;return e.index,[215==s.ExcuteStatus?a("Button",{attrs:{size:"small"},on:{click:function(e){return t.showDrawer(s.ID,s.Source)}}},[t._v("查看")]):a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDrawer(s.ID,s.Source)}}},[t._v("处理")])]}}])}),t._v(" "),a("div",{staticClass:"pages"},[a("Page",{attrs:{total:t.Total,"page-size":t.search_data.PageSize,current:t.search_data.PageIndex},on:{"on-change":t.changepage}})],1)],1),t._v(" "),a("Drawer",{attrs:{closable:!1,width:90,scrollable:!0,"mask-closable":!1},model:{value:t.showdetail,callback:function(e){t.showdetail=e},expression:"showdetail"}},[a("div",{staticClass:"closDrawer_btn"},[a("Icon",{staticClass:"icon1",attrs:{type:"md-close"},on:{click:t.closDrawer}})],1),t._v(" "),a("div",[a("router-view")],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(u,h,!1,function(t){a("WQkh")},"data-v-045f78c5",null);e.default=d.exports}});
//# sourceMappingURL=59.ad837a677259f1adbe2c.js.map