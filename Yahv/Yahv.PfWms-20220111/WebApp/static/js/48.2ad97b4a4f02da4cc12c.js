webpackJsonp([48],{"0xp8":function(t,e){},Jm0p:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("dciI"),a=s("3PyT"),r={props:["Currencyarr","Subjectarr","Payeearr","Payerarr","OrderID","WaybillID","Currents","conduct","Files","delCash"],data:function(){return{Labeltotal:"",Labelfee:!1,spinShow:!0,Subject:"",Currency:3,RightPrice:"",disabledis:!1,columns1:[{type:"index",width:60,align:"center"},{title:"业务",slot:"type",align:"center"},{title:"科目",slot:"Subject",align:"center"},{title:"金额",slot:"RightPrice",align:"center"},{title:"发生时间",slot:"createdata",align:"center",width:160},{title:"录入人",slot:"user",align:"center"}],PayeeID:"",PayerID:"",Anonymity:null}},watch:{theUrl:{Currents:function(t,e){this.refreshAudio(),this.url=""!=t?this.Commonconst.recordForwardPrefix+t:""},deep:!0}},mounted:function(){},methods:{testprice:function(t){if(""!=t){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)&&(this.RightPrice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},Labelchange:function(t){if(""!=t){if(0==/^[0-9]*$/.test(t))this.RightPrice="",this.$Message.error("请输入处理标签的数量");else if(this.disabledis=!0,this.Currency=1,t<=10)this.RightPrice=100;else{var e=5*(t-10);this.RightPrice=100+e}}},change_subject:function(t){this.Labelfee="处理标签费"==t;var e;e=this.Subjectarr.filter(function(e){return e.Name==t&&null!=e.PayQuote.Price}),console.log(e);var s=e[0];e.length>0?(this.disabledis=!0,this.Currency=s.PayQuote.Currency,this.RightPrice=s.PayQuote.Price):"处理标签费"==t?(this.disabledis=!0,this.Currency=1):(this.disabledis=!1,this.Currency=3,this.LeftPrice="")},currency_subject:function(){var t=this;Object(i._19)().then(function(e){t.Currencyarr=e.obj})},submit_btn:function(){var t=this,e="A235E8E7773EDB26697E7E771915197D";if(""!=this.Subject&&""!=this.Currency&&""!=this.RightPrice&&(this.PayeeID!=e&&this.PayerID!=e||null!=this.Anonymity&&""!=this.Anonymity))if("处理标签费"==this.Subject&&""==this.Labeltotal)this.$Message.error("请输入处理标签的个数");else{var s=null;s=-1!=sessionStorage.getItem("WareHouseName").indexOf("深圳")?"深圳库房":"香港库房";var a=null;a=30==this.conduct||35==this.conduct||60==this.conduct?"代报关":"代仓储";var r={Currency:this.Currency,FeeType:this.$route.query.type,Files:this.Files,LeftPrice:this.RightPrice,OrderID:this.OrderID,Payee:this.PayeeID,Payer:this.PayerID,RightPrice:this.RightPrice,Subject:this.Subject,WaybillID:this.WaybillID,Quantity:this.Labeltotal,Anonymity:this.Anonymity,Conduct:a,Source:s};console.log(r),Object(i._24)(r).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.Subject="",t.Currency=3,t.LeftPrice="",t.Labeltotal="",t.Files=[],t.$emit("fatherMethod"),t.$emit("delCash")):t.$Message.error("保存失败，请核实信息是否正确")})}else this.$Message.error("请输入必填项")},SeletUploadFile:function(){var t={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(a.o)(t)},FormPhoto:function(){var t={SessionID:"Cash",AdminID:sessionStorage.getItem("userID"),Data:{WayBillID:null,WsOrderID:null}};Object(a.c)(t)},changedimg:function(t){var e=t[0],s={CustomName:e.FileName,ID:e.FileID,Url:e.Url};this.Files.push(s)},handleRemove:function(t){var e=this,s={id:t.ID};Object(i.l)(s).then(function(s){console.log(s),1==s.Success?(e.$Message.success("删除成功"),e.Files.splice(e.Files.indexOf(t),1)):e.$Message.error("删除失败")})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cashbox"},[s("div",[s("div",[s("h1",{staticClass:"setpadding_bottom"},[t._v("费用录入")]),t._v(" "),s("p",{staticClass:"iteminput"},[s("label",{attrs:{for:""}},[t._v("收款人：")]),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payeearr.length},model:{value:t.PayeeID,callback:function(e){t.PayeeID=e},expression:"PayeeID"}},t._l(this.Payeearr,function(e,i){return s("Option",{key:i,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payeearr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayeeID?s("p",{staticClass:"iteminput"},[t._m(0),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[s("label",{attrs:{for:""}},[t._v("付 款  人：")]),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:"",disabled:1==this.Payerarr.length},model:{value:t.PayerID,callback:function(e){t.PayerID=e},expression:"PayerID"}},t._l(this.Payerarr,function(e,i){return s("Option",{key:i,attrs:{value:e.ID}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),this.Payerarr.length>1&&"A235E8E7773EDB26697E7E771915197D"==t.PayerID?s("p",{staticClass:"iteminput"},[t._m(1),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入名称"},model:{value:t.Anonymity,callback:function(e){t.Anonymity=e},expression:"Anonymity"}})],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[t._m(2),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},on:{"on-change":t.change_subject},model:{value:t.Subject,callback:function(e){t.Subject=e},expression:"Subject"}},t._l(this.Subjectarr,function(e,i){return s("Option",{key:e.index,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),1==t.Labelfee?s("p",{staticClass:"iteminput"},[t._m(3),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(e){return t.Labelchange(t.Labeltotal)}},model:{value:t.Labeltotal,callback:function(e){t.Labeltotal=e},expression:"Labeltotal"}})],1):t._e(),t._v(" "),s("p",{staticClass:"iteminput"},[t._m(4),t._v(" "),s("Select",{staticClass:"inputwidth",attrs:{filterable:"",transfer:""},model:{value:t.Currency,callback:function(e){t.Currency=e},expression:"Currency"}},t._l(t.Currencyarr,function(e,i){return s("Option",{key:e.index,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),s("p",{staticClass:"iteminput"},[t._m(5),t._v(" "),s("Input",{staticClass:"inputwidth",attrs:{placeholder:"请输入金额"},on:{"on-blur":function(e){return t.testprice(t.RightPrice)}},model:{value:t.RightPrice,callback:function(e){t.RightPrice=e},expression:"RightPrice"}})],1),t._v(" "),s("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:t.SeletUploadFile}},[t._v("传照")]),t._v(" "),s("Button",{attrs:{size:"small",type:"primary",icon:"md-reverse-camera"},on:{click:t.FormPhoto}},[t._v("拍照")]),t._v(" "),s("h3",{staticStyle:{"padding-bottom":"5px"}},[t._v("文件列表：")]),t._v(" "),t.Files.length>0?s("ul",t._l(t.Files,function(e){return s("li",[t._v("\n            "+t._s(e.CustomName)+"\n            "),s("Icon",{attrs:{type:"ios-trash"},on:{click:function(s){return t.handleRemove(e)}}})],1)}),0):s("div",[t._v("暂无数据")]),t._v(" "),s("div",{staticStyle:{padding:"15px 0"}},[s("Button",{attrs:{type:"primary",size:"small",icon:"md-checkmark"},on:{click:t.submit_btn}},[t._v("提交")])],1)],1),t._v(" "),s("div",[s("h1",{staticClass:"setpadding_bottom"},[t._v("流水列表")]),t._v(" "),s("Table",{attrs:{stripe:"",columns:t.columns1,data:t.Currents,"max-height":"380"},scopedSlots:t._u([{key:"type",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(i.Conduct))])]}},{key:"Subject",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(i.Subject))])]}},{key:"RightPrice",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(i.Price))])]}},{key:"createdata",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(i.CreateDate))])]}},{key:"user",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(i.Creator))])]}}])})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("名   称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("科   目：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("数   量：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("币   种：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("span",{staticClass:"spanMust"},[this._v("*")]),this._v("金       额：")])}]};var l=s("VU/8")(r,n,!1,function(t){s("0xp8")},"data-v-2d4201d3",null);e.default=l.exports}});
//# sourceMappingURL=48.2ad97b4a4f02da4cc12c.js.map