webpackJsonp([43],{GbZ7:function(t,e){},Gp0w:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Wxb1"),r=a("gyMJ"),s=a("3PyT"),l=a("PJh5"),o=a.n(l),n={components:{"img-test":i.default},data:function(){return{otype:"",loading:!0,placeholderleft:"应收",placeholderright:"实收",model9:"",types:"1",value1:"",switch1:!0,cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],model1:"",listtitle:[{title:"录入时间",slot:"OriginalDate"},{title:"科目",key:"Subject"},{title:"币种",key:"CurrencyName"},{title:"应收",key:"LeftPrice"},{title:"实收",key:"RightPrice"},{title:"付款人",key:"Payer"},{title:"收款人",key:"Payee"},{title:"单据",slot:"action",width:150,align:"center"}],listtitleout:[{title:"录入时间",slot:"OriginalDate"},{title:"科目",key:"Subject"},{title:"币种",key:"CurrencyName"},{title:"应付",key:"LeftPrice"},{title:"实付",key:"RightPrice"},{title:"付款人",key:"Payer"},{title:"收款人",key:"Payee"},{title:"批次",key:"Summay"},{title:"单据",slot:"action",width:150,align:"center"}],data2:[{DateCode:"1",Subject:"停车费",currency:"USA",Should:"20",Actual:"10",payee:"李四",operator:"张山",CreateDate:"2016-10-03"},{DateCode:"1",Subject:"停车费",currency:"USA",Should:"20",Actual:"10",payee:"李四",operator:"张山",CreateDate:"2016-10-03"},{DateCode:"1",Subject:"停车费",currency:"USA",Should:"20",Actual:"10",payee:"李四",operator:"张山",CreateDate:"2016-10-03"},{DateCode:"1",Subject:"停车费",currency:"USA",Should:"20",Actual:"10",payee:"李四",operator:"张山",CreateDate:"2016-10-03"},{DateCode:"1",Subject:"停车费",currency:"USA",Should:"20",Actual:"10",payee:"李四",operator:"张山",CreateDate:"2016-10-03"}],DateCodearr:[],Files:[],detailtypes:"1",waybillid:"",yinshou:"",shishou:"",yingfu:"",shifu:"",leftprice:"",rightprice:"",currency:"",subject:"",formdata:{payer:"",payerID:"",PayeeName:"",PayeeNameID:"",DateCode:"",Subject:"",currency:"",Should:"",Actual:""},fee:"",getformdata:"",disabledis:!1,listout:[],listin:[]}},created:function(){this.waybillid=this.$route.params.webillID,this.otype=this.$route.params.otype,console.log(this.otype),window.PhotoUploaded=this.changed,this.getdata_in_from("in"),this.getdata_in(this.detailtypes),this.currency_subject(),this.getsubject("in"),this.History()},mounted:function(){},filters:{showDate:function(t){if(""!=t&&t){var e=t.split("(")[1].split(")")[0];return o()(+e).format("YYYY-MM-DD")}}},methods:{History:function(){var t=this,e={waybillid:this.waybillid};Object(r.q)(e).then(function(e){e.obj==[]?t.DateCodearr=[]:t.DateCodearr=e.obj})},currency_subject:function(){var t=this;Object(r.F)().then(function(e){t.currency=e.obj});null!=this.getformdata.EnterCode&&this.getformdata.EnterCode},getsubject:function(t){var e=this,a={type:t};Object(r.Q)(a).then(function(t){e.subject=t})},change:function(t){"1"==t?(this.getsubject("in"),this.placeholderleft="应收",this.placeholderright="实收",this.formdata.payer=this.getformdata.ClientName,this.formdata.PayeeName=this.getformdata.PayeeName,this.formdata.payerID=this.getformdata.ClientID,this.formdata.PayeeNameID=this.getformdata.PayeeID):(this.getsubject("out"),this.placeholderleft="应付",this.placeholderright="实付",this.formdata.payer=this.getformdata.ThirdName,this.formdata.PayeeName=this.getformdata.CarrierName,this.formdata.payerID=this.getformdata.ThirdID,this.formdata.PayeeNameID=this.getformdata.CarrierID)},sumbit:function(){var t=this;if(""==this.formdata.PayeeNameID||null==this.formdata.PayeeNameID)this.$Message.error("收款人为空，不需要添加支出费用");else if(""!=this.formdata.payer&&""!=this.formdata.PayeeName&&""!=this.formdata.Subject&&this.formdata.currency&&""!=this.leftprice){var e="1";e="1"==this.types?"in":"out";var a={Currency:this.formdata.currency,FeeType:e,Files:this.Files,LeftPrice:this.leftprice,OrderID:this.getformdata.OrderID,Payee:this.formdata.PayeeNameID,Payer:this.formdata.payerID,RightPrice:this.rightprice,Subject:this.formdata.Subject,WaybillID:this.getformdata.WaybillID};""==this.formdata.PayeeNameID||null==this.formdata.PayeeNameID?this.$Message.error("收款人为空，不需要添加支出费用"):Object(r.R)(a).then(function(e){1==e.success?(t.$Message.success("保存成功"),t.getdata_in(t.detailtypes),t.formdata.DateCode="",t.formdata.currency="",t.types="1",t.Files=[],t.leftprice="",t.rightprice="",t.formdata.Subject="",t.change("1")):t.$Message.error("保存失败，请核实信息是否正确")})}else this.$Message.error("请输入必填项目")},detailchange:function(t){this.loading=!0,this.detailtypes=t,this.getdata_in(this.detailtypes)},changeimgs:function(t,e){"webaill"==e&&this.Files.push(t)},getdata_in_from:function(t){var e=this,a="";a="1"==t?"in":"out";var i={waybillid:this.waybillid,type:a,otype:this.otype};Object(r.u)(i).then(function(t){e.getformdata=t,e.formdata.payer=e.getformdata.ClientName,e.formdata.PayeeName=e.getformdata.PayeeName,e.formdata.payerID=e.getformdata.ClientID,e.formdata.PayeeNameID=e.getformdata.PayeeID,e.fee=t.fee})},getdata_in:function(t){var e=this,a="";a="1"==t?"in":"out";var i={waybillid:this.waybillid,type:a,otype:this.otype};Object(r.u)(i).then(function(t){e.getformdata=t,e.fee=t.fee,e.listin=e.getformdata.Payments,e.listout=e.getformdata.Payments,e.loading=!1})},fromphotos:function(t){if("Waybill"==t){var e={SessionID:this.waybillid,AdminID:sessionStorage.getItem("userID")};Object(s.c)(e)}},SeletUpload:function(t){if("Waybill"==t){var e={SessionID:this.waybillid,AdminID:sessionStorage.getItem("userID")};Object(s.o)(e)}},handleRemovelist:function(t){this.Files.splice(this.Files.indexOf(t),1)},changed:function(t){this.testfunction(t)},testfunction:function(t){var e=t[0],a={CustomName:e.FileName,ID:e.FileID,Url:e.Url};e.SessionID==this.waybillid&&this.Files.push(a)},testprice:function(t,e){if(console.log(e),""!=t){0==/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)&&("leftprice"==e?this.leftprice="":this.rightprice="",this.$Message.error("请输入正确的金额，金额保留到小数点后两位"))}},change_subject:function(t){var e,a=(e=this.subject.filter(function(e){return e.Name==t&&null!=e.PayQuote.Price}))[0];e.length>0?(this.disabledis=!0,this.rightprice="",this.leftprice=a.PayQuote.Price,this.formdata.currency=a.PayQuote.Currency):(this.disabledis=!1,this.rightprice="",this.leftprice="",this.formdata.currency="")},PictureShow:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){PictureShow({Url:t})})}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("h1",{staticStyle:{"font-size":"18px",position:"absolute",top:"13px"}},[t._v("收支明细")]),t._v(" "),a("div",{staticStyle:{padding:"10px 0px","font-size":"14px"}},[a("span",{staticClass:"titlelable",staticStyle:{"margin-right":"10px"}},[t._v("发货方式："),a("em",[t._v(t._s(t.getformdata.WaybillTypeDescription))])]),t._v(" "),1!=t.getformdata.WaybillType?a("span",{staticClass:"titlelable",staticStyle:{"margin-right":"10px"}},[t._v("运单号："),a("em",[t._v(t._s(t.getformdata.Code))])]):t._e(),t._v(" "),a("span",{staticClass:"titlelable",staticStyle:{"margin-right":"10px"}},[t._v("入仓号："),a("em",[t._v(t._s(t.getformdata.EnterCode))])]),t._v(" "),a("span",{staticClass:"titlelable",staticStyle:{"margin-right":"10px"}},[t._v("公司名称："),a("em",[t._v(t._s(t.getformdata.ClientName))])])]),t._v(" "),a("div",{staticStyle:{padding:"10px 5px",border:"1px solid #dddddd"}},[t._m(0),t._v(" "),a("p",{staticStyle:{"padding-bottom":"10px"}},[a("span",[t._v("业务类型：")]),t._v(" "),a("RadioGroup",{on:{"on-change":t.change},model:{value:t.types,callback:function(e){t.types=e},expression:"types"}},[a("Radio",{attrs:{label:"1"}},[t._v("收入")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("支出")])],1)],1),t._v(" "),a("div",[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("label",[t._m(1),t._v(" "),a("Input",{staticClass:"inputs",attrs:{disabled:"",placeholder:"付款方"},model:{value:t.formdata.payer,callback:function(e){t.$set(t.formdata,"payer",e)},expression:"formdata.payer"}})],1),t._v(" "),a("label",[t._m(2),t._v(" "),a("Input",{staticClass:"inputs",attrs:{disabled:"",placeholder:"收款方"},model:{value:t.formdata.PayeeName,callback:function(e){t.$set(t.formdata,"PayeeName",e)},expression:"formdata.PayeeName"}})],1),t._v(" "),a("label",[t._m(3),t._v(" "),a("Select",{staticClass:"inputs",attrs:{placeholder:"选择科目"},on:{"on-change":t.change_subject},model:{value:t.formdata.Subject,callback:function(e){t.$set(t.formdata,"Subject",e)},expression:"formdata.Subject"}},t._l(t.subject,function(e){return a("Option",{key:e.Name,attrs:{value:e.Name}},[t._v(t._s(e.Name))])}),1)],1),t._v(" "),a("label",{attrs:{for:""}},[t._m(4),t._v(" "),a("Select",{staticClass:"inputs",attrs:{placeholder:"选择币种",disabled:t.disabledis},model:{value:t.formdata.currency,callback:function(e){t.$set(t.formdata,"currency",e)},expression:"formdata.currency"}},t._l(this.currency,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1)]),t._v(" "),a("div",[a("label",["应收"==t.placeholderleft?a("span",{},[a("em",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("*")]),t._v("应    收：")]):t._e(),t._v(" "),"应付"==t.placeholderleft?a("span",{},[a("em",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("*")]),t._v("应    付：")]):t._e(),t._v(" "),a("Input",{staticClass:"inputs",attrs:{disabled:t.disabledis,placeholder:t.placeholderleft},on:{"on-blur":function(e){return t.testprice(t.leftprice,"leftprice")}},model:{value:t.leftprice,callback:function(e){t.leftprice=e},expression:"leftprice"}})],1),t._v(" "),a("label",["实收"==t.placeholderright?a("span",{staticClass:"formtitle"},[t._v("实     收：")]):t._e(),t._v(" "),"实付"==t.placeholderright?a("span",{staticClass:"formtitle"},[t._v("实     付：")]):t._e(),t._v(" "),a("Input",{staticClass:"inputs",attrs:{placeholder:t.placeholderright},on:{"on-blur":function(e){return t.testprice(t.rightprice,"rightprice")}},model:{value:t.rightprice,callback:function(e){t.rightprice=e},expression:"rightprice"}})],1),t._v(" "),a("Button",{attrs:{type:"primary",size:"small",icon:"ios-cloud-upload"},on:{click:function(e){return t.SeletUpload("Waybill")}}},[t._v("传照")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"small",icon:"md-reverse-camera"},on:{click:function(e){return t.fromphotos("Waybill")}}},[t._v("拍照")])],1),t._v(" "),a("div",{staticStyle:{padding:"10px 0px"}},[a("span",[t._v("单据：")]),t._v(" "),a("ul",t._l(t.Files,function(e){return a("li",[a("span",[t._v(t._s(e.CustomName))]),t._v(" "),a("Icon",{attrs:{type:"ios-trash"},on:{click:function(a){return t.handleRemovelist(e)}}})],1)}),0),t._v(" "),a("Button",{staticStyle:{float:"right","margin-right":"20px",position:"relative",bottom:"30px"},attrs:{type:"primary",size:"large"},on:{click:t.sumbit}},[t._v("提交")])],1)])]),t._v(" "),a("div",[a("p",{staticStyle:{"padding-bottom":"10px","padding-top":"15ppx"}},[a("span",[t._v("业务类型：")]),t._v(" "),a("RadioGroup",{on:{"on-change":t.detailchange},model:{value:t.detailtypes,callback:function(e){t.detailtypes=e},expression:"detailtypes"}},[a("Radio",{attrs:{label:"1"}},[t._v("收入")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("支出")])],1)],1),t._v(" "),a("div",{staticStyle:{"padding-top":"10px"}},[1==t.detailtypes?a("Table",{attrs:{height:"300",columns:t.listtitle,data:t.listin,loading:t.loading},scopedSlots:t._u([{key:"OriginalDate",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(t._f("showDate")(i.LeftDate)))])]}},{key:"action",fn:function(e){var i=e.row;return t._l(i.Files,function(e,i){return a("p",{key:i},[t._v(t._s(e.CustomName))])})}}],null,!1,2286741525)}):t._e(),t._v(" "),2==t.detailtypes?a("Table",{attrs:{height:"300",columns:t.listtitleout,data:t.listout,loading:t.loading},scopedSlots:t._u([{key:"OriginalDate",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(t._f("showDate")(i.LeftDate)))])]}},{key:"action",fn:function(e){var i=e.row;return t._l(i.Files,function(e,i){return a("p",{key:i},[a("span",[t._v(t._s(e.CustomName))])])})}}],null,!1,814615406)}):t._e()],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticStyle:{"font-size":"18px","padding-bottom":"5px"}},[this._v("\n                 录入收支信息\n                 "),e("em",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("*为必填项")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{},[e("em",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("*")]),this._v(" 付款方：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"formtitle"},[e("em",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("*")]),this._v("收款方：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"formtitle"},[e("em",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("*")]),this._v("科目：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{},[e("em",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("*")]),this._v("\n                           币   种： \n                        ")])}]};var d=a("VU/8")(n,c,!1,function(t){a("GbZ7")},"data-v-38cb2e08",null);e.default=d.exports}});
//# sourceMappingURL=43.5eb2950c09c8c9cc4aca.js.map